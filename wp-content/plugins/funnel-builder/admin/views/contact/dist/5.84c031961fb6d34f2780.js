(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{281:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),o=n(2),c=n(5),a=n.n(c),l=n(52),i=(n(9),n(329),n(25)),u=["label","className","selected","help","onChange","hideLabelFromVision","options","disabled","orientation"];function s(e){var t=e.label,n=e.className,c=e.selected,f=e.help,p=e.onChange,b=(e.hideLabelFromVision,e.options),m=void 0===b?[]:b,d=e.disabled,v=void 0!==d&&d,y=e.orientation,O=void 0===y?"horizontal":y,h=(function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}}(e,u),Object(l.useInstanceId)(s)),j="inspector-radio-control-".concat(h),_=function(e){return p(e.target.value)};return!Object(o.isEmpty)(m)&&Object(r.createElement)("div",{className:a()("components-base-control",n,"components-radio-control bwf-components-radio-control",O)},Object(r.createElement)("div",{className:"components-base-control__field"},t&&Object(r.createElement)("label",{className:"components-base-control__label",dangerouslySetInnerHTML:{__html:t}}),Object(r.createElement)("div",{className:"bwf-radio-control-inner"},m.map((function(e,t){return Object(r.createElement)("div",{key:"".concat(j,"-").concat(t),className:"components-radio-control__option"},Object(r.createElement)("input",{id:"".concat(j,"-").concat(t),className:"components-radio-control__input",type:"radio",name:j,value:e.value,onChange:_,checked:!v&&e.value===c,disabled:v||e.disabled||e.isPro,"aria-describedby":f?"".concat(j,"__help"):void 0}),e.isPro&&Object(r.createElement)(i.b,null),Object(r.createElement)("label",{htmlFor:"".concat(j,"-").concat(t)},e.label))})))))}},292:function(e,t,n){"use strict";var r=n(26);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["getStateProp"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("templates"),t=e.getStateProp;return l(l({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,c)),{},{getTemplates:function(){return t("templates")},getBuilders:function(){return t("builders")},getFilters:function(){return t("filters")},templateLoading:function(){return t("isLoading")},getDefaultBuilder:function(){return t("default_builder")},getActiveBuilder:function(){return t("active_builder")},getActiveGroup:function(){return t("active_group")},getCurrentTemplate:function(){return t("current_template")},getActiveStep:function(){return t("active_step")},getActiveSubFilter:function(){return t("active_sub_filter")},getPageBuildersTexts:function(){return t("page_builders_texts")},getPageBuildersOptions:function(){return t("page_builders_options")},getImportBtnLabel:function(){return t("import_btn_label")},getScratchTemplateType:function(){return t("scratch_template_type")},getImportOffer:function(){return t("import_offer")}})}},295:function(e,t,n){"use strict";n.d(t,"a",(function(){return y}));var r=n(0),o=n(9),c=n(52),a=n(2),l=n(5),i=n.n(l),u=(n(345),n(74)),s=n(25),f=n(1);function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function b(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function y(e){var t=e.label,n=e.className,l=e.value,d=e.help,v=e.options,O=void 0===v?[]:v,h=e.onBlur,j=(void 0===h&&a.noop,e.onChange),_=void 0===j?a.noop:j,w=e.onFocus,g=(void 0===w&&a.noop,e.disabled),E=e.showtooltip,S=void 0!==E&&E,k=e.tooltipmsg,T=void 0===k?"":k,N=e.select_all,P=e.select_all_label,C=e.orientation,x=void 0===C?"vertical":C,I=m(Object(r.useState)(!0),2),L=I[0],A=I[1],F=Object(c.useInstanceId)(y);if(Object(a.isEmpty)(O))return null;var B="inspector-checklist-".concat(F);l=null!=l&&l?l:[];var R=i()("components-checklist",n),D=function(e){var t=b(l);!0===e.target.checked?l.includes(e.target.value)||t.push(e.target.value):t=l.filter((function(t){return t!==e.target.value})),_(t,{event:e}),A(!1)},G=O.map((function(e){return e.value}));return Object(r.createElement)(o.BaseControl,{label:t,id:B,help:d},Object(r.createElement)("div",{className:i()("component-checklist-option-wrap",R,x)},N&&Object(r.createElement)("div",{className:i()("bwf-checkbox-control select_all")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner")},Object(r.createElement)("input",{type:"checkbox",id:"checkbox_select_all",value:Object(a.isEmpty)(Object(a.difference)(G,l)),onChange:function(e){e.target.checked?_(G,{e:e}):_([],{e:e})},checked:Object(a.isEmpty)(Object(a.difference)(G,l)),className:i()({"bwf-no-animation":L})})),Object(r.createElement)("label",{htmlFor:"checkbox_select_all"},P||Object(f.__)("Select All","funnel-builder"))),O.map((function(e,t){return Object(r.createElement)(u.a,{toolTipText:e.disable&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},T),visible:S&&e.disable||!1,size:280,iconSize:"auto",key:"".concat(B,"-").concat(t),position:"bottom right"},Object(r.createElement)("div",{key:"".concat(B,"-").concat(t),className:i()("bwf-checkbox-control")},Object(r.createElement)("span",{className:i()("bwf-checkbox-control-inner",{"bwf-checkbox-disabled":e.disable})},Object(r.createElement)("input",p({id:"".concat(B,"-").concat(t),type:"checkbox",value:e.value,onChange:e.disable?function(){}:D,checked:!e.isPro&&(n=l,o=e.value,!!Array.isArray(n)&&n.includes(o)),className:i()({"bwf-no-animation":L}),"aria-describedby":d?"".concat(B,"__help"):void 0},(g||e.isPro)&&{disabled:!0}))),e.isPro&&Object(r.createElement)(s.b,null),Object(r.createElement)("label",{htmlFor:"".concat(B,"-").concat(t)},e.label)));var n,o}))))}},304:function(e,t,n){"use strict";var r=n(0),o=(n(400),n(6));function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.children,n=e.status,a=void 0===n?"error":n,l=(e.onRemove,e.isDismissible,e.className),i=void 0===l?"":l,u=e.showIcon,s=void 0===u||u,f=c(Object(r.useState)(!1),2),p=f[0];f[1];return!p&&Object(r.createElement)("section",{className:"bwf-custom-notice ".concat(a," ").concat(i)},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},s&&Object(r.createElement)(o.a,{icon:"info",color:"success"===a?"#09B29C":"warning"===a?"#FFC65C":"info"===a?"#353030":"#E15334"}),Object(r.createElement)("div",{className:"bwf--align-center"},t)))}},307:function(e,t,n){"use strict";var r=n(0),o=n(1),c=n(6);n(340);t.a=function(e){var t=e.onClose,n=e.title,a=e.isDismissible,l=void 0===a||a;return Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},n),l&&Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(o.__)("Close","funnel-builder"),onClick:function(){return t()}},Object(r.createElement)(c.a,{icon:"close",size:20})))}},308:function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return m})),n.d(t,"f",(function(){return d})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return y}));var r=n(0),o=n(9),c=n(1),a=n(13),l=n(4);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(e){return"yes"===e.pro?wffn.i18n.ribbons.pro:wffn.i18n.ribbons.lite},b=function(e){var t=e.FB_PRO_STATUS,n=e.funnelId,o=e.importType,i=e.activeTemplateGroup;return s(s({title:!1===t?Object(c.__)("Templates are a PRO Feature","funnel-builder"):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===t?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==t&&{action:function(){return Object(a.k)({},"/settings/")}}),{},{proLink:Object(l.P)([0===n||"funnel"===o?"Template":"Step",i,"Build","From","Scratch","Upgrade","Modal"])})},m=function(e){var t=e.templateName,n=e.FB_PRO_STATUS,o=e.funnelId,i=e.activeGroup,u=e.activeStep;return s(s({title:!1===n?Object(r.createElement)(r.Fragment,null,t,Object(c.__)(" is a PRO template","funnel-builder")):Object(c.__)("Unable to Import Template","funnel-builder"),content:!1===n?Object(r.createElement)(r.Fragment,null,Object(c.__)("We're sorry, not all Templates are not available on your plan.","funnel-builder"),Object(c.__)(" Please upgrade to the PRO version to unlock all these awesome features.","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(c.__)("We are sorry. It seems that your license is ","funnel-builder"),Object(r.createElement)("strong",null,Object(c.__)("inactive or has expired.","funnel-builder")),Object(c.__)(" To access the template library you need a valid license.","funnel-builder"))},!1!==n&&{action:function(){return Object(a.k)({},"/settings/")}}),{},{proLink:Object(l.P)([o?"Step":"Template",o?i:"upsell"===i?"upsell":u,t,"Upgrade","Modal"])})},d=function(e){var t=e.showSnackbar,n=e.hideSnackbar,a=e.builder,l=e.defaultBuilder,i=e.onConfirm,u=e.defaultEditorLoading;l===a||u||t(Object(r.createElement)("div",null,Object(c.__)("Want to make this default page builder?","funnel-builder")," ",Object(r.createElement)(o.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){i(a),n()}},Object(c.__)("Yes","funnel-builder")),Object(r.createElement)(o.Button,{className:"bwf-ml-10",isSecondary:!0,onClick:function(){return n()}},Object(c.__)("No","funnel-builder"))),!1)},v=function(e,t){var n=e;return"upsell"===t&&"wp_editor"===e?n="custom":"wc_checkout"===t&&"wp_editor"===e?n="embed_forms":"wc_checkout"===t&&"customizer"===e&&(n="pre_built"),n},y={optin:{inline:Object(c.__)("Inline","funnel-builder"),popup:Object(c.__)("Popup","funnel-builder")},wc_checkout:{1:Object(c.__)("One","funnel-builder"),2:Object(c.__)("Two","funnel-builder"),3:Object(c.__)("Three","funnel-builder")}}},329:function(e,t,n){},340:function(e,t,n){},345:function(e,t,n){},391:function(e,t,n){"use strict";n.d(t,"a",(function(){return at}));var r=n(0),o=n(2),c=n(18),a=n.n(c),l=n(121),i=n(11),u=n.n(i),s=n(1),f=n(13),p=n(5),b=n.n(p),m=n(9),d=(n(536),n(51));function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=_(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,_(r.key),r)}}function _(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}function w(e,t,n){return t=g(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t){return(E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=w(this,t,[e])).state={isLoading:!0},n.iframeRef=Object(r.createRef)(),n.setLoaded=n.setLoaded.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(t,e),n=t,(c=[{key:"componentDidMount",value:function(){this.iframeRef.current.addEventListener("load",this.setLoaded)}},{key:"setLoaded",value:function(){var e=this.props,t=e.src,n=e.onLoad,r=void 0===n?o.noop:n;this.setState({isLoading:!1}),r(!!t)}},{key:"componentDidUpdate",value:function(e,t){this.props.src&&this.props.src!==e.src&&this.setState({isLoading:!0})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.loadingContent,c=void 0===n?Object(r.createElement)(d.a,{size:"xl"}):n,a=e.src,l=e.title,i=this.state.isLoading,u=b()("wffn-web-preview",t,{"is-loading":i});return Object(r.createElement)("div",{className:u},(i||Object(o.isEmpty)(a))&&c,Object(r.createElement)("div",{className:"wffn-web-preview__iframe-wrapper",style:O({},Object(o.isEmpty)(a)&&{width:0})},Object(r.createElement)("iframe",{ref:this.iframeRef,title:l,src:a})))}}])&&j(n.prototype,c),a&&j(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,c,a}(r.Component);S.propTypes={className:a.a.string,loadingContent:a.a.node,onLoad:a.a.func,src:a.a.string.isRequired,title:a.a.string.isRequired};var k=S,T=n(307),N=n(80),P=n(4);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=C(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==C(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=function(e){var t={title:Object(s.__)("This is a PRO Feature!","funnel-builder"),feature:"",content:Object(s.__)("We're sorry, the {{feature_name}} is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),demoLabel:!1,proLabel:Object(s.__)("Upgrade to PRO Now","funnel-builder"),proLink:P.kb,action:!1},n=e.onRequestClose,o=void 0===n?function(){}:n,c=e.isOpen,a=void 0!==c&&c,l=e.children,i=void 0===l?null:l,u=e.className,f=e.module,p=(e.isTemplate,e.modalContent?I(I({},t),e.modalContent):t);return a?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:b()("bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",u),isDismissible:!1,onRequestClose:function(){return o()},overlayClassName:"bwf-pro-modal__overlay"},Object(r.createElement)(T.a,{title:Object(r.createElement)(r.Fragment,null,p.title),onClose:o}),Object(r.createElement)("div",{className:"bwf-modal-content"},"string"==typeof p.content?p.content.replace("{{feature_name}}",p.feature):p.content),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},p.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return o()}},p.demoLabel),!p.demoLabel&&Object(r.createElement)(m.Button,{className:"bwf-modal-cancel-btn",onClick:function(){return o()}},Object(s.__)("Cancel")),Object(r.createElement)(N.a,{module:f,isPrimary:!0,isTemplate:!0})),i)):null},F=n(75),B=n(292),R=(n(537),n(76)),D=n(29),G=n(308),U=(n(538),["src","onLoaded"]);function M(){return(M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t=e.src,n=e.onLoaded,c=void 0===n?o.noop:n,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,U),l=z(Object(r.useState)(!1),2),i=l[0],u=l[1];return Object(r.useEffect)((function(){var e=new Image;return e.src=t,e.onload=function(){u(!0),c(t)},function(){e.onload=function(){}}}),[]),Object(r.createElement)(r.Fragment,null,i?Object(r.createElement)("img",M({src:t},a)):Object(r.createElement)("div",{className:"bwf-image-loader"}))},$=n(6),V=n(52),Y=n(60),J=n(473);function H(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e){var t=e.label,n=void 0===t?"":t,c=e.id,a=void 0===c?"":c,l=e.value,i=e.onChange,u=void 0===i?o.noop:i,s=e.className,f="inspector-color-".concat(Object(V.useInstanceId)(m.ColorPicker)),p=H(Object(r.useState)(!1),2),d=p[0],v=p[1];return Object(r.createElement)("div",{className:b()("components-color-field",s)},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:f},n),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return v(!0)}},Object(r.createElement)(m.ColorIndicator,{colorValue:l})),Object(r.createElement)(m.TextControl,{value:l||"#ffffff",className:"indicator-text"}),d&&Object(r.createElement)(Y.a,{position:"top left",onClose:function(){return v(!1)}},Object(r.createElement)(m.ColorPicker,{color:l,onChangeComplete:function(e){u(e.hex,{id:a})},disableAlpha:!0}))))},K=function(e){var t=e.setCustomizeVisible,n=H(Object(r.useState)(!1),2),o=n[0],c=n[1],a=H(Object(r.useState)(""),2),l=a[0],i=a[1];return Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize"},Object(r.createElement)("div",{className:"bwf-flex bwf-template-preview-sidebar__customize-heading"},Object(r.createElement)(m.Button,{onClick:function(){return t(!1)}},Object(r.createElement)($.a,{icon:"arrow-left",size:16})),Object(s.__)("Customize","funnel-builder")),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-subheading"},Object(s.__)("Lets customize your store checkout with your logo and brand color","funnel-builder")),o?Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-logo"},Object(r.createElement)("div",null,Object(r.createElement)("img",{src:o,alt:"logo"}),Object(r.createElement)(m.Button,{className:"bwf-delete-btn",onClick:function(){return c(!1)}},Object(r.createElement)($.a,{icon:"trash",size:20})))):Object(r.createElement)(J.a,{onFileSelected:function(e){c(URL.createObjectURL(e))},filetypeArray:["image/png"],dropZoneContent:Object(r.createElement)(r.Fragment,null,Object(r.createElement)($.a,{icon:"add-image",size:40}),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(s.__)("Try to use png image","funnel-builder")))}),Object(r.createElement)(Z,{label:Object(s.__)("Color","funnel-builder"),value:l,onChange:function(e){return i(e)}}),Object(r.createElement)("div",{className:"bwf-template-preview-sidebar__customize-actions"},Object(r.createElement)(m.Button,{isPrimary:!0},Object(s.__)("Save","funnel-builder")),Object(r.createElement)(m.Button,null,Object(s.__)("Reset","funnel-builder"))))},X=n(19),ee=n(25);function te(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||re(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||re(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){if(e){if("string"==typeof e)return oe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oe(e,t):void 0}}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e){var t=e.thumbnailsData,n=e.hasPlaceholder,c=e.funnelId,a=e.onClick,l=e.activeThumbnail,i=e.previewCustomizeEnabled,u=(e.tempPro,e.importType),f=Object(X.a)(),p=f.isProTemplatesLocked,d=f.isBasic,v=Object(X.a)("ck").isProTemplatesLocked,y=Object(X.a)("ul").isProTemplatesLocked,O=ne(Object(r.useState)(!1),2),h=O[0],j=O[1];return Object(o.isEmpty)(t)||n?Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},te(new Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_template_page_options",key:"bwf-place-preview-sidebar-".concat(t)},Object(r.createElement)("div",{className:"bwf-placeholder-temp wffn_preview_thumbnail"}),Object(r.createElement)("div",{className:"bwf-flex bwf--center wffn_template_name"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-12 "})))}))):Object(r.createElement)("div",{className:"wffn_template_preview_sidebar"},h?Object(r.createElement)(K,{setCustomizeVisible:j}):t&&t.map((function(e,t){var n="step"===u?null==e?void 0:e.type:null==e?void 0:e.step,o="upsell"===n,i=["wc_checkout","wc_thankyou"].includes(n);return Object(r.createElement)("label",{key:t,className:b()("wffn_template_page_options",{active_preview:e.id==l}),onClick:function(){return a(e)}},Object(r.createElement)("div",{className:"wffn_preview_thumbnail"},c?Object(r.createElement)(W,{alt:"thumbnail",src:e.thumbnail}):Object(r.createElement)("img",{alt:"thumbnail",src:e.thumbnail})),Object(r.createElement)("div",{className:"wffn_template_name"},e.name),"yes"===e.pro&&(o?y:i||d?v:p)&&Object(r.createElement)(ee.b,null))})),i&&!h&&Object(r.createElement)(m.Button,{isPrimary:!0,className:"bwf-template-preview-sidebar__customize-btn",onClick:function(){return j(!0)}},Object(r.createElement)($.a,{icon:"edit",size:20,color:"#ffffff"}),Object(s.__)("Customize","funnel-builder")))},ae=function(e){var t=e.type,n=e.filters,c=e.FB_PRO_STATUS,a=e.activeSubFilter,l=e.onClick,i=e.activeTemplateFilters,u=e.tempPro,f=e.templateType,p=e.funnelId,m=e.funnelGroup,d=e.hasPRO,v=e.importType,y=Object(X.a)("ck").isProTemplatesLocked;if(!t)return null;var O=n[t];if(void 0===O||Object(o.isEmpty)(O))return null;if("wc_checkout"!==t&&"optin"!==t)return null;var h=[],j=function(e){i.includes(e)&&h.push(Object(r.createElement)("div",{className:b()("template-filter",{"active-filter":a==e}),onClick:function(){return l(e)},key:e,role:"button",tabIndex:"-1","aria-hidden":"true"},Object(r.createElement)("div",null,O[e]),!("wc_checkout"===f&&!y&&(!p||"step"!==v)&&m.includes("wc_checkout"))&&(d(u||"no")||["2","3"].includes(e)&&!0!==c||"popup"===e&&!0!==c)&&Object(r.createElement)(ee.b,null)))};for(var _ in O)j(_);return Object(r.createElement)("div",{className:"wffn_template_filer"},Object(r.createElement)("div",{className:"wffn_template_filter_container"},Object(r.createElement)("span",{className:"template-filter template-filter-head"},"wc_checkout"===t?Object(s.__)("Checkout Steps","funnel-builder"):"optin"===t?Object(s.__)("Optin Form","funnel-builder"):Object(s.__)("Type","funnel-builder"),":"),h))},le=n(65),ie=function(e){var t=e.funnelId,n=e.activeGroup,o=e.activeSubFilter,c=e.activeStep,a=e.templateName,l=e.isTemplatePro,i=e.funnelGroup,u=e.hasPRO,f=e.importType,p=Object(X.a)("ck").isProTemplatesLocked,b=Object(X.a)("ul").isProTemplatesLocked,m=Object(X.a)(),d=m.isProTemplatesLocked,v=m.isBasic,y=u("status");if("upsell"===n&&!0!==y)return b&&Object(r.createElement)(le.a,{dismissable:!1,proLink:Object(P.P)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});switch(t&&"step"===f?n:c){case"upsell":if(!0!==y)return b&&Object(r.createElement)(le.a,{dismissable:!1,proLink:Object(P.P)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});break;case"wc_checkout":if((p||t&&"step"===f||!i.includes("wc_checkout"))&&(u(l)||["2","3"].includes(o)&&!0!==y))return Object(r.createElement)(le.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&"ck",proLink:Object(P.P)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0});break;case"optin":if(u(l||"no")||"popup"===o&&!0!==y){Object(s.__)("This template is part of the pro plan. To access it, consider upgrading.","funnel-builder");return"popup"==o&&Object(r.createElement)(r.Fragment,null,Object(s.__)("Optin ","funnel-builder"),Object(r.createElement)("span",{style:{textTransform:"capitalize"}},o),Object(s.__)(" is a pro feature. To access it, consider upgrading.","funnel-builder")),Object(r.createElement)(le.a,{dismissable:!1,proLink:Object(P.P)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0})}}var O=t&&"step"===f?n:c;return"yes"===l&&("upsell"===O?b:["wc_checkout","wc_thankyou"].includes(O)||v?p:d)?Object(r.createElement)(le.a,{dismissable:!1,module:(null==i?void 0:i.includes("wc_checkout"))&&("wc_checkout"===O||"wc_thankyou"===O)&&"ck",proLink:Object(P.P)([t?"Step":"Template","upsell",a,"Notice","Bar"]),isTemplate:!0}):""},ue=n(22),se=wffn_contacts_data&&wffn_contacts_data.header_data?wffn_contacts_data.header_data:{},fe=se.logo?se.logo:"",pe=function(e){var t,n,c=e.viewport,a=e.setviewport,l=e.templateName,i=e.isTemplatePro,u=e.onRequestClose,f=e.importing,p=e.onClick,m=e.onClickPro,d=e.activeGroup,v=e.isCheckoutPro,y=e.isOptinPro,O=e.activeStep,h=e.funnelId,j=e.importType,_=(e.templateGroup,e.hasPRO),w=e.stepId,g=Object(X.a)("ul").isProTemplatesLocked,E=Object(B.a)().getImportBtnLabel(),S=Object(o.isEmpty)(E)?"upsell"===d||h&&"step"===j?Object(s.__)("Import This Template","funnel-builder"):Object(s.__)("Import This Funnel","funnel-builder"):E,k=_("status");return Object(r.createElement)("div",{className:"wffn_template_preview_header"},Object(r.createElement)("div",{className:"bwf_template_logo_title"},Object(r.createElement)("img",{src:fe,alt:Object(s.__)("Funnel Builder for WordPress","funnel-builder"),width:148,className:"bwf-brand-logo-only"}),Object(r.createElement)("div",{className:"bwf_preview_template_title"},l)),Object(r.createElement)("div",{className:"wffn_template_viewport"},Object(r.createElement)("div",{className:"wffn_template_viewport_inner"},Object(r.createElement)("span",{className:b()("wffn_viewport_icons",{active:"desktop"===c}),onClick:function(){return a("desktop")},title:Object(s.__)("Desktop Viewport","funnel-builder")},Object(r.createElement)($.a,{icon:"desktop",color:"desktop"===c&&"#fff"})),Object(r.createElement)("span",{className:b()("wffn_viewport_icons",{active:"tablet"===c}),onClick:function(){return a("tablet")},title:Object(s.__)("Tablet Viewport","funnel-builder")},Object(r.createElement)($.a,{icon:"tablet",color:"tablet"===c&&"#fff"})),Object(r.createElement)("span",{className:b()("wffn_viewport_icons",{active:"mobile"===c}),onClick:function(){return a("mobile")},title:Object(s.__)("Mobile Viewport","funnel-builder")},Object(r.createElement)($.a,{icon:"mobile",color:"mobile"===c&&"#fff"})))),Object(r.createElement)("div",{className:"bwf-t-center"},(t=(!!w||"funnel"===j)&&h&&f&&f.group===d,n=f&&f.group===d,Object(r.createElement)(r.Fragment,null,_(i||"no")||!0!==k&&(v||y||"upsell"===O)||"upsell"===O&&g?Object(r.createElement)(ue.a,{disabled:n,isBusy:t,isPrimary:!0,onClick:m},S):Object(r.createElement)(ue.a,{isPrimary:!0,onClick:p,disabled:n,isBusy:t},S)))),Object(r.createElement)("div",{className:"wffn_template_preview_close"},Object(r.createElement)(ue.a,{onClick:u},Object(r.createElement)($.a,{icon:"close",size:"24"}))))};function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=be(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==be(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ye(e){var t=e.isOpen,n=e.onRequestClose,c=e.activeGroup,a=e.activeEditor,i=e.importing,u=e.filters,p=e.hasPRO,d=e.previewData,v=e.isTemplateLoading,y=e.activeFilter,O=e.setPreviewErr,h=e.parentRoute,j=e.funnelId,_=e.importType,w=e.updateQueryString,g=e.previewCustomizeEnabled,E=e.urlDependency,S=e.stepId,T=e.onImport,C=e.children,x=Object(f.i)(),I=Object(X.a)().isBasic,L=Object(X.a)("ck").isProFeatureLocked,U=d(),M=U.thumbnails,z=U.activeTemplate,q=U.previews,W=void 0===q?[]:q,$=Object(l.useParams)().step,V=D.a.getFunnel(),Y=!(!z||!z.type)&&z.type,J=E?$:null==z?void 0:z.type;Object(r.useEffect)((function(){j||(U.success?O(!1):!1===U.success&&O(!0))}),[U.success]),Object(r.useEffect)((function(){if(Y)if("wc_checkout"===Y||"optin"===Y){var e=!(!z||!z.filters)&&z.filters[0];x.group&&("wc_checkout"===Y&&["1","2","3"].includes(x.group)||"optin"===Y&&["inline","popup"].includes(x.group))?Q(x.group):(Q(e),w({group:e}))}else x.group&&(delete x.group,w({},Object(f.g)(),x))}),[x.group,Y]),Object(r.useEffect)((function(){!Object(o.isEmpty)(null==V?void 0:V.steps)&&"funnel"===_&&j&&w({},"/funnels/".concat(V.id))}),[V]);var H=Object(R.a)(),Q=H.setActiveSubFilter,Z=H.setCurrentTemplate,K=(0,Object(B.a)().getCurrentTemplate)(),ee=de(Object(r.useState)(!1),2),te=(ee[0],ee[1]),ne=p("status"),re=de(Object(r.useState)("desktop"),2),oe=re[0],le=re[1],ue=de(Object(r.useState)(!1),2),se=ue[0],fe=ue[1],be=de(Object(r.useState)(!1),2),ve=be[0],ye=be[1],Oe=de(Object(r.useState)(!j),2),he=Oe[0],je=Oe[1],_e=de(Object(r.useState)([]),2),we=_e[0],ge=_e[1];Object(r.useEffect)((function(){if(te(!1),z&&!we.includes(z.prevId)){var e=JSON.parse(JSON.stringify(we));e.push(z.prevId),ge(e)}}),[null==z?void 0:z.preview]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.querySelector(".wffn_template_page_options.active_preview");e&&e.scrollIntoView()}),100)}),[t]),Object(r.useEffect)((function(){if(M&&!j&&he){var e=M||[],t=e.length,n=0;e.forEach((function(e){var r=new Image;r.src=e.thumbnail,r.onload=function(){++n===t&&je(!1)}}))}}),[M]);var Ee=("wc_checkout"===c||J&&"wc_checkout"===J)&&"1"!==y,Se=("optin"===c||J&&"optin"===J)&&"inline"!==y;return U?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m.Modal,{className:"bwf-admin-modal bwf-admin-modal-full-screen wffn_template_preview_modal",overlayClassName:"wffn_template_preview_overlay",isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"wffn_template_preview_wrap"},Object(r.createElement)(pe,me(me(me(me({viewport:oe,setviewport:le,onRequestClose:n,importing:i,activeGroup:c,isCheckoutPro:Ee,isOptinPro:Se,activeStep:J,funnelId:j,importType:_,hasPRO:p,stepId:S,onClickPro:function(){!1===ne&&"yes"!==(null==z?void 0:z.tempPro)&&(Ee||Se||"upsell"===J)||"upsell"===J&&I&&!L?ye(!0):fe(!0)},onClick:function(){return T()}},"onRequestClose",(function(){j?w({},"".concat(h)):(w({},"".concat(h,"/").concat(c)),Q(!1)),n()})),"templateName",null==z?void 0:z.name),"isTemplatePro",null==z?void 0:z.tempPro),"templateGroup",null==z?void 0:z.funnelGroup)),Object(r.createElement)("div",{className:"wffn_template_preview_content"},Object(r.createElement)("div",{className:b()("wffn_template_preview_inner wffn_funnel_preview")},Object(r.createElement)(ae,{type:null==z?void 0:z.type,filters:u,FB_PRO_STATUS:ne,activeSubFilter:y,onClick:function(e){if(Q(e),w({group:e}),j){var t=K.template,n=(void 0===t?{}:t).group_type;Object(o.isEmpty)(n)||Z({id:n[e],template:{group_type:n},steps:M.map((function(e){return{type:e.step,slug:e.lug}}))})}},activeTemplateFilters:null==z?void 0:z.filters,hasPRO:p,tempPro:null==z?void 0:z.tempPro,templateType:null==z?void 0:z.type,funnelId:j,funnelGroup:null==z?void 0:z.funnelGroup,importType:_}),!v&&Object(r.createElement)(ie,{funnelId:j,activeGroup:c,activeSubFilter:y,activeStep:J,hasPRO:p,templateName:null==z?void 0:z.name,isTemplatePro:null==z?void 0:z.pro,funnelGroup:null==z?void 0:z.funnelGroup,importType:_}),Object(o.isEmpty)(W)||Object(o.isEmpty)(we)?"":W.map((function(e,t){var n=(null==e?void 0:e.preview)||"",o=(null==e?void 0:e.id)||"";return Object(r.createElement)(k,{key:t,className:b()("wffn_template_preview_frame",oe,{"hide-preview":e.id!==z.prevId}),title:"Funnel Template",src:we.includes(o)?n:"",onLoad:function(e){if(te(!0),e&&W[t+1]){var n=JSON.parse(JSON.stringify(we));n.push(W[t+1].id),ge(n)}}})}))),Object(r.createElement)(ce,{thumbnailsData:M,hasPlaceholder:he,funnelId:j,previewCustomizeEnabled:g,importType:_,tempPro:null==z?void 0:z.tempPro,onClick:function(e){Z({id:e.funnel,template:e,activeStep:e.step,steps:M.map((function(e){return{type:e.step,slug:e.lug}}))}),w({},j&&"step"===_?"".concat(h,"/templates/").concat(c,"/").concat(a,"/preview/").concat(e.funnel):j&&"funnel"===_?"".concat(h,"/templates/").concat(c,"/").concat(a,"/preview/").concat(e.funnel,"/").concat(e.step):"upsell"===c?"".concat(h,"/").concat(c,"/").concat(a,"/preview/").concat(e.funnel):"".concat(h,"/").concat(c,"/").concat(a,"/preview/").concat(e.funnel,"/").concat(e.step))},activeThumbnail:null==z?void 0:z.thumbnail}))),C,Object(r.createElement)(A,{isOpen:se,onRequestClose:function(){return fe(!1)},modalContent:Object(G.c)({templateName:null==z?void 0:z.name,FB_PRO_STATUS:ne,funnelId:j,activeGroup:c,activeStep:J}),module:["wc_checkout","wc_thankyou"].includes(c)&&"ck",className:"bwf-templates-pro-modal",isTemplate:!0}),(p((null==z?void 0:z.pro)||"no")||"yes"!==(null==z?void 0:z.pro)&&(Ee||Se||"upsell"===J)||"upsell"===J&&I&&!L)&&Object(r.createElement)(F.a,{className:"bwf-admin-modal-squeezy bwf-template-preview-pro-modal",modalTitle:Object(s.__)("Confirmation","funnel-builder"),content:Object(r.createElement)("div",{className:"bwf-template-preview-pro-modal__content"},Object(s.sprintf)(Object(s.__)("Yor are using %s Funnel. In this funnel there are some pro features like ","funnel-builder"),null==z?void 0:z.name),Object(r.createElement)("mark",null,Object(s.__)("Two Step","funnel-builder")),Object(s.__)(" and","funnel-builder")," ",Object(r.createElement)("mark",null,Object(s.__)("Three Step Checkout","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("One Click Upsell","funnel-builder")),","," ",Object(r.createElement)("mark",null,Object(s.__)("Optin Popup","funnel-builder")),"."),confirmButton:Object(r.createElement)(N.a,{module:L&&["wc_checkout","wc_thankyou"].includes(c)&&"ck",isPrimary:!0}),cancelButtonText:Object(s.__)("Use Free Version","funnel-builder"),onConfirm:function(){"deactiavted"===ne?w({},"/settings/"):window.open(Object(P.P)([j?"Step":"Template",j?c:"upsell"===c?"upsell":J,null==z?void 0:z.name,"Upgrade","Modal"]),"_blank")},onCancel:function(){S||"funnel"===_&&"wc_checkout"===_||T();var e="1";if("optin"===c||"optin"===J?(Q("inline"),w({group:"inline"}),e="inline"):(Q("1"),w({group:"1"})),j){var t=K.template,n=(void 0===t?{}:t).group_type;Object(o.isEmpty)(n)||Z({id:n[e],template:{group_type:n},steps:M.map((function(e){return{type:e.step,slug:e.lug}}))})}},onRequestClose:function(){ye(!1)},isOpen:ve,confirmDescription:Object(s.__)("This action is irreversible","funnel-builder"),closeIcon:!0}))):""}n(398);var Oe=n(28),he=n(55),je=n(457),_e=n(37),we=n(413),ge=n(277),Ee=n(281),Se=(n(21),n(79));function ke(e){return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return xe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ie=function(e){var t,n,c,a=e.onCloseModal,l=e.onComplete,i=e.isWorking,u=e.activeTemplateGroup,f=(e.showCloneOption,e.templateGroup),p=e.className,d=e.children,v=Ce(Object(r.useState)(""),2),y=v[0],O=v[1],h=Ce(Object(r.useState)({}),2),j=(h[0],h[1]),_=Ce(Object(r.useState)(""),2),w=_[0],g=_[1],E=Ce(Object(r.useState)(null),2),S=E[0],k=E[1],T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return $((function(r){return n?(delete r[t],r):Ne(Ne({},r),{},Pe({},e,t))}))},N=Ce(Object(r.useState)((function(){return u})),2),C=N[0],x=(N[1],D.a.getSteps()),I=Object(B.a)(),L=I.getScratchTemplateType,A=I.getCurrentTemplate,F=I.getImportOffer,R=L(),G=A(),U=F();Object(r.useEffect)((function(){j({})}),[]);var M=function(){var e;O(""),l("upsell"===C?W:"new"===R?{title:w}:{title:"".concat(null==S||null===(e=S.step)||void 0===e?void 0:e.name," Copy")},C,!(!S||!S.copyFrom)&&S.step)},z=(Object(r.useMemo)((function(){return Object.keys(f).map((function(e){return{key:e,label:f[e]}}))}),[f]),function(){return x.filter((function(e){return"wc_upsells"===e.type})).map((function(e){var t;return{key:e.id,label:Object(_e.decodeEntities)(null==e||null===(t=e._data)||void 0===t?void 0:t.title)}}))}),q=Ce(Object(r.useState)(Ne({type:0===z().length?"new":"existing"},!Object(o.isNull)(U)&&{title:U.parent_title,insert_into:U.parent_id})),2),W=q[0],$=q[1],V=function(){if("upsell"===C){var e,t,n,r,c,a;if("new"===R)return"existing"===W.type?Object(o.isEmpty)(null===(n=W.offer_title)||void 0===n?void 0:n.trim())||!W.insert_into:Object(o.isEmpty)(null===(e=W.title)||void 0===e?void 0:e.trim())||Object(o.isEmpty)(null===(t=W.offer_title)||void 0===t?void 0:t.trim());if("existing"===R)return"existing"===W.type?!W.insert_into||Object(o.isNull)(S):Object(o.isEmpty)(null===(r=W.title)||void 0===r?void 0:r.trim())||Object(o.isNull)(S);if(!G.isBuildFromScratch)return Object(o.isEmpty)(null===(c=W.title)||void 0===c?void 0:c.trim())||Object(o.isEmpty)(null===(a=W.offer_title)||void 0===a?void 0:a.trim())}return"new"!==R&&G.isBuildFromScratch?"existing"===R?Object(o.isNull)(S):void 0:Object(o.isEmpty)(w.trim())},Y=("new"===W.type||!Object(o.isNull)(U))&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here…","funnel-builder"),label:Object(s.__)("Upsell Name","funnel-builder"),value:null!==(t=Object(_e.decodeEntities)(W.title))&&void 0!==t?t:"",onChange:function(e){return T("title",e)},disabled:!Object(o.isNull)(U)||i});return Object(r.useEffect)((function(){1===z().length&&T("insert_into",z()[0].key)}),[]),Object(r.createElement)(m.Modal,{title:Object(r.createElement)(r.Fragment,null,Object(s.__)("Add New Step ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-list-count bwf-ml-4"},"(",P.ob[C],")")),className:b()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal bwf-modal-overflow-visible",p),onRequestClose:function(){return a()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},d,y&&Object(r.createElement)(Se.a,{errorMessage:y}),Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"!==e.key||V()||i||M()},role:"main"},"upsell"===C&&"new"!==W.type&&!Object(o.isNull)(U)&&Y,"existing"===R&&G.isBuildFromScratch&&Object(r.createElement)(we.a,{step:{type:"upsell"===C?"offer":C,title:f[C],is_substep:"upsell"===C},onStepSelected:function(e){k(e)},key:"bwf-clone-step-".concat(C)}),"upsell"===C?Object(r.createElement)(r.Fragment,null,!Object(o.isEmpty)(z())&&Object(o.isNull)(U)&&Object(r.createElement)("div",null,Object(r.createElement)("label",null,Object(s.__)("Add Offers","funnel-builder")),Object(r.createElement)(Ee.a,{options:[{value:"existing",label:Object(s.__)("To Existing Upsell","funnel-builder"),disabled:0===z().length},{value:"new",label:Object(s.__)("To New Upsell","funnel-builder")}],className:"",selected:null!==(n=W.type)&&void 0!==n?n:0===z().length?"new":"existing",onChange:function(e){T("inherit_from","",!0),T("type",e)}})),"existing"===W.type&&Object(o.isNull)(U)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ge.b,{label:Object(s.__)("Select Upsell","funnel-builder"),options:z(),selected:1===z().length?z()[0].key:W.insert_into,onChange:function(e){T("insert_into",e)}})),"new"===W.type&&Object(o.isNull)(U)&&Y,"new"===R&&Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Type here…","funnel-builder"),label:Object(s.__)("Offer Name","funnel-builder"),value:null!==(c=W.offer_title)&&void 0!==c?c:"",onChange:function(e){return T("offer_title",e)},disabled:i})):"new"===R?Object(r.createElement)(m.TextControl,{placeholder:Object(s.__)("Enter step name","funnel-builder"),label:Object(s.__)("Step Name","funnel-builder"),value:null!=w?w:"",onChange:function(e){return g(e)},disabled:i}):null,Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(ue.a,{onClick:a,className:"bwf-modal-cancel-btn"},Object(s.__)("Cancel","funnel-builder")),Object(r.createElement)(ue.a,{isPrimary:!0,disabled:V()||i,isBusy:i,onClick:M,className:V()?"bwf-no-ripple":"",name:"add-funnel"},Object(s.__)("Add","funnel-builder")))))},Le=n(42);n(539);function Ae(e){return function(e){if(Array.isArray(e))return Fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Fe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Be=function(e){var t=e.showTemplatesNav,n=void 0===t||t,o=e.showEditors,c=void 0===o||o;return Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-templates-placeholder"},Object(r.createElement)("div",{className:"bwf-template-list-header"},n&&Object(r.createElement)(Le.a,{gap:6,justify:"flex-start",className:"bwf-templ-nav-placeholder"},Ae(Array(5)).map((function(e,t){return Object(r.createElement)(Le.c,{key:"bwf-templ-placeholder-nav-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder nav-placeholder-item"}))}))),c&&Object(r.createElement)(Le.a,{gap:6,justify:"flex-start"},Ae(Array(5)).map((function(e,t){return Object(r.createElement)(Le.c,{key:"bwf-templ-placeholder-editor-".concat(t)},Object(r.createElement)("div",{className:"wffn-is-placeholder editor-placeholder-item"}))})))),Object(r.createElement)("div",{id:"wffn_tab_container"},Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:"wffn_pick_template"},Ae(Array(10)).map((function(e,t){return Object(r.createElement)("div",{className:"wffn_temp_card",key:"bwf-templ-placeholder-".concat(t)},Object(r.createElement)("div",{className:"wffn_template_sec"},Object(r.createElement)("div",{className:"wffn_template_sec_design wffn-is-placeholder"})))})))))))},Re=n(47),De=(n(32),function(e){var t=e.editorList,n=e.activeEditor,o=e.onChange;return Object(r.createElement)(Le.a,{justify:"flex-start",gap:6,className:"wffn_template_editor_selector"},Object(r.createElement)(Ee.a,{options:Object.keys(t).map((function(e){return{value:e,label:t[e]}})),selected:n,onChange:function(e){return o(e)}}))}),Ge=n(27),Ue=n(74),Me=n(17),ze=["edit"];var qe=function(e){var t=e.funnelId,n=e.disabledNavs,o=e.activeTemplateGroup,c=e.templateGroup,a=e.onClick,i=e.urlDependency,u=Object(X.a)("ul").isProTemplatesLocked,s=Object(l.useParams)().importType,p={},m=window.location&&window.location.search?Object(Ge.parse)(window.location.search.substring(1)):{},d=(m.edit,function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(m,ze));for(var v in c)"funnel"===s&&"upsell"===v||(p[v]={},p[v].name=c[v],p[v].isExclusive="upsell"===v,p[v].link=decodeURIComponent(Object(f.f)({},"/templates/".concat(v),d)));return Object(r.createElement)("div",{className:"bwf-tempaltes-nav"},Object(r.createElement)(Le.a,{justify:"flex-start",gap:3,className:"bwf-flex-wrap"},Object.keys(p).map((function(e,c){var l=e===o,s=n.find((function(t){return t.key===e}));return Object(r.createElement)(Le.c,{key:"bwf-temp-nav-".concat(c)},0===t&&i?Object(r.createElement)(Me.a,{className:b()("bwf-template-nav-item",{"is-selected":m.path==="/templates/"+e||"/templates"===m.path&&"funnel"===e}),href:p[e].link},p[e].name,p[e].isExclusive&&Object(r.createElement)(ee.b,null)):Object(r.createElement)(Ue.a,{toolTipText:s&&Object(r.createElement)("div",{className:"bwf-template-nav-item__tooltip-text"},s.message),visible:s||!1,size:366},Object(r.createElement)("div",{className:b()("bwf-template-nav-item",{"is-selected":l&&!s},{"is-disabled":s}),onClick:function(){s||a(e)},tabIndex:"-1",role:"button"},Object(r.createElement)("div",null,p[e].name),u&&p[e].isExclusive&&Object(r.createElement)(ee.b,null))))}))))},We=n(59);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ve(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ve(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ye(e){var t=e.importBuildFromScratch,n=(e.getRibbonName,e.activeTemplateGroup),o=e.templateID,c=void 0===o?"scratch":o,a=e.importType,l=e.stepId,i=e.importing,u=e.allowNew,f=void 0===u||u,p=$e(Object(r.useState)({status:!1}),2),b=p[0],m=p[1],d=Object(X.a)(),v=d.isProFeatureLocked,y=d.isBasicFeatureLocked||"upsell"===n&&v,O=Object(X.a)("ul").isProFeatureLocked,h=Object(R.a)().setScratchTemplateType;return Object(r.useEffect)((function(){return function(){h("new")}}),[]),Object(r.createElement)("div",{className:"wffn_template_sec wffn_build_from_scratch"},Object(r.createElement)("div",{className:"wffn_template_sec_design"},Object(r.createElement)("div",{className:"wffn_temp_overlay"},Object(r.createElement)("div",{className:"wffn_temp_middle_align"},Object(r.createElement)("div",{className:"wffn_add_tmp_se"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)($.a,{icon:"add-page",width:"72",height:"72",color:"#82838E"})),Object(r.createElement)("div",{className:"wffn_import_template wffn_p"},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"wffn_import_description"},"step"===a?Object(s.__)("You can quickly add step","funnel-builder"):Object(s.__)("You can design the funnel from blank","funnel-builder")),f&&Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){O&&"upsell"===n?m(He):(h("new"),t(c,e))},isBusy:!!l&&i},Object(s.__)("Start from Blank","funnel-builder"),O&&"upsell"===n&&Object(r.createElement)(ee.b,null)),!l&&Object(r.createElement)(ue.a,{isGray:!0,onClick:function(e){y?m(Je):(h("existing"),t(c,e))}},Object(s.__)("Clone","funnel-builder"),y&&Object(r.createElement)(ee.b,null)))))))),Object(r.createElement)(We.a,{isOpen:!!b.status,onRequestClose:function(){return m({status:!1})},modalContent:b,type:2}))}var Je={status:!0,feature:Object(s.__)("Cloning","funnel-builder"),proLink:Object(P.P)(["Template","Clone","Upgrade","Modal"])},He={status:!0,feature:Object(s.__)("One Click Upsell Offer","funnel-builder"),proLink:Object(P.P)(["Upsell","Templates","Upgrade","Modal"])},Qe=n(399),Ze=(n(304),{optin:"Lead Generation",sales:"Sales",wc_checkout:"Checkout"}),Ke=function(e){var t=e.templateFilterCheck,n=e.templateCards,c=e.showBuildFromScratch,a=e.importBuildFromScratch,l=e.activeTemplateGroup,i=e.activeEditor,u=e.onPreview,f=e.funnelId,p=e.importType,d=e.stepId,v=e.importing,y=Object(X.a)("ul").isProTemplatesLocked,O=Object(X.a)(),h=O.isProTemplatesLocked,j=O.isLite,_=O.isBasic,w=Object(X.a)("ck").isProTemplatesLocked,g=Object(R.a)().setScratchTemplateType,E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"scratch",t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)(Ye,{importBuildFromScratch:a,getRibbonName:G.b,activeTemplateGroup:l,templateID:e,importType:p,stepId:d,importing:v,allowNew:t})},S=[],k=function(e){var o=n[e];if(t(o,!!o.group_type&&Object.keys(o.group_type)[0])&&(!(o.build_from_scratch&&d&&o.hasOwnProperty("allow_new"))||o.allow_new)&&(c||!o.build_from_scratch)){var a,i=((null==o?void 0:o.group)||[]).includes("upsell")||"upsell"===l,f=(null==o||null===(a=o.group)||void 0===a?void 0:a.some((function(e){return"wc_checkout"===e||"wc_thankyou"===e})))||["wc_checkout","wc_thankyou"].includes(l);S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:e},o.build_from_scratch?E(o.slug?o.slug:e,o.allow_new):Object(r.createElement)("div",{className:"wffn_template_sec"},"yes"===o.pro&&(i?y:f||_?w:h)&&Object(r.createElement)(ee.b,null),Object(r.createElement)("div",{className:o.is_pro?"wffn_template_sec_design_pro":"wffn_template_sec_design"},o.thumbnail&&Object(r.createElement)(W,{src:o.thumbnail,className:"wffn_img_temp",alt:"thumbnail"}),Object(r.createElement)("div",{className:"wffn_temp_overlay"})),Object(r.createElement)("div",{className:"wffn_template_sec_meta"},Object(r.createElement)("div",{className:"wffn_pro_template"},Object(r.createElement)(m.Button,{onClick:function(t){g("new"),u(t,e,o)},isPrimary:!0,role:"button",tabIndex:"-1","aria-hidden":"true",className:"bwf-template-action-btn bwf-no-ripple"},Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"wffn_template_meta_left"},Object(r.createElement)("div",{className:"wffn_template_sec_meta_name"},o.name),"funnel"===l&&Object(r.createElement)("div",{className:"wffn_template_sec_meta_group"},Ze[null==o?void 0:o.group[0]]&&Ze[null==o?void 0:o.group[0]]," ","Funnel")),Object(r.createElement)("div",{className:"wffn_template_meta_right"},o.steps?Object(r.createElement)(r.Fragment,null,Object(s.sprintf)(Object(s._n)("%s step","%s steps",o.steps.length,"funel-builder"),o.steps.length)):null)))))}};for(var T in n)k(T);return"wp_editor"===i&&Object(o.isEmpty)(S)&&S.push(Object(r.createElement)("div",{className:"wffn_temp_card",key:"custom-wp_editor"},E("upsell"===l?"wfocu-custom-empty":"wp_editor_1"))),"wp_editor"===i&&S.push(Object(r.createElement)(Qe.a,{key:"other-builder-notice",type:l})),!j||_||"wp_editor"===i&&!f&&"funnel"!==p||S.push(Object(r.createElement)("div",{className:"bwf-templates-upgrde-pro-notice",key:"upgrade-pro-notice"},Object(r.createElement)("div",null,Object(r.createElement)("strong",null,Object(s.__)("Browse our library of ready-made templates","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("span",null,Object(s.__)("Never start from scratch again! While Funnelkit Lite lets you create any template, save even more time with Funnelkit Pro. Upgrade now to access all templates.","funnel-builder"))),Object(r.createElement)(N.a,{isPrimary:!0,size:"md",proLink:Object(P.P)(["Template","Cards","Notice"])}))),Object(r.createElement)("div",{className:"wffn_tab-content"},Object(r.createElement)("div",{className:b()("wffn_pick_template",{wffn_fullscreen_pich_templates:!!f})},S))};function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){nt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ot(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ot(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ct=function(e){var t=e.activeFilter,n=e.defaultBuilder,c=e.filters,a=e.editors,i=e.templates,p=e.isTemplateLoading,m=e.activeBuilder,d=e.activeTemplateGroup,v=e.templateGroup,y=void 0===v?[]:v,O=e.funnelId,h=void 0===O?0:O,j=e.showDefaultEditorNotice,_=void 0===j||j,w=e.templateCards,g=void 0===w?{}:w,E=e.previewData,S=e.onImportComplete,k=e.templateFilterCheck,T=e.showTemplatesNav,N=e.parentRoute,C=e.disabledNavs,x=void 0===C?[]:C,I=e.showBuildFromScratch,L=void 0===I||I,U=e.funnelTitleModalData,M=void 0===U?{}:U,z=e.scratchConfirmModalData,q=e.importApiPrefix,W=void 0===q?"funnels":q,$=e.templateListNotice,V=e.showImportNotice,Y=void 0===V?"":V,J=e.urlDependency,H=void 0===J||J,Q=e.showEditors,Z=void 0===Q||Q,K=e.previewCustomizeEnabled,ee=void 0!==K&&K,te=e.listRef,ne=e.stepId,re=Object(f.i)(),oe=Object(X.a)("ck").isProTemplatesLocked,ce=Object(X.a)("ul").isProTemplatesLocked,ae=Object(X.a)(),le=ae.isProTemplatesLocked,ie=ae.isBasic,ue=Object(Re.a)().updateStatus,se=h,fe=Object(X.b)(),pe=fe.showSnackbar,be=fe.hideSnackbar,me=rt(Object(r.useState)(!1),2),de=me[0],ve=me[1],_e=rt(Object(r.useState)(!1),2),we=_e[0],ge=_e[1],Ee=function(){if(H)return f.k.apply(void 0,arguments)},Se=Object(he.a)().unsetTabData,ke=(0,D.a.getFunnel)(),Te=Object(R.a)(),Ne=Te.fetch,Pe=Te.makeDefaultEditor,Ce=Te.setActiveBuilder,xe=Te.setActiveGroup,Le=Te.setCurrentTemplate,Ae=Te.setActiveStep,Fe=Te.setActiveSubFilter,Ge=Te.setImportOffer,Ue=(0,Object(B.a)().getCurrentTemplate)(),Me=Object(l.useParams)(),ze=Me.builder,We=Me.templateId,$e=Me.filter,Ve=void 0===$e?d:$e,Ye=Object(f.i)().importType,Je=ne?"step":"wc_checkout"===Ye?"funnel":Ye,He=Object(Oe.a)().setIsFunnelEmpty;Object(r.useEffect)((function(){return Object(o.isEmpty)(g)&&Ne(),function(){Ge(null),be()}}),[]),Object(r.useEffect)((function(){var e,t;ze&&!p&&We&&g[We]&&Le({id:We,template:g[We],steps:g[We].steps,activeStep:null!==(e=g[We])&&void 0!==e&&e.steps?null===(t=g[We])||void 0===t?void 0:t.steps[0].type:""})}),[ze,We,p]),Object(P.l)(Object(s.__)("Import Funnel","funnel-builder"));var Qe=rt(Object(r.useState)(!1),2),Ze=Qe[0],Xe=Qe[1],et=rt(Object(r.useState)(!1),2),nt=et[0],ot=et[1],ct=rt(Object(r.useState)(!1),2),at=ct[0],lt=ct[1],it=rt(Object(r.useState)({}),2),ut=it[0],st=it[1],ft=rt(Object(r.useState)(!1),2),pt=ft[0],bt=ft[1];Object(r.useEffect)((function(){})),Object(r.useEffect)((function(){Ce(m)}),[d,c,a]),Object(r.useEffect)((function(){return We&&Le({id:We,template:{}}),function(){Ce("")}}),[]),Object(r.useEffect)((function(){we&&(Ee({},"/templates"),pe(Object(s.__)("Template not found for requested URL. Please select from the list.")))}),[we]);var mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"activate",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:o.noop;try{st((function(e){return tt(tt({},e),{},{disableConfirm:!0,cancelButtonText:"",shouldCloseOnClickOutside:!1})})),u()({path:Object(P.u)("/funnels/activate-plugin/?slug=".concat(e,"&init=").concat(t,"&status=").concat(n)),method:"POST"}).then((function(e){!0===e.success&&(r(),st({status:!1}))})).catch((function(e){st({status:!0,error:e.message||e.msg}),console.log("catch",e)}))}catch(e){console.log(e)}},dt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=e.builders_options,o=e.builders_texts,c=n,a=null==Ue?void 0:Ue.isBuildFromScratch,l=!0,i=null==Ue?void 0:Ue.id;if("wp_editor"!==m&&"customizer"!==m&&void 0!==c&&c.status&&"activated"!==c.status||l){var u=o,f=u.text;"gutenberg"===m&&a&&(f=Object(s.__)("To have the best experience in Block editor, FunnelKit has built a minimalist block plugin ","funnel-builder")+"<strong>SlingBlocks.</strong>");var p={key:"pluginActivation",status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:f}}),closeIcon:!0};p.confirmButtonText=u.ButtonText,"yes"===u.show_cancel_btn&&(p.cancelButtonText="Cancel"),"gutenberg"===m&&a&&(p.cancelButtonText=Object(s.__)("No thanks","funnel-builder")),st(tt(tt({},p),{},{onConfirm:function(){if(u.builder_link&&"install"===c.status&&"yes"===u.noInstall)return window.open(u.builder_link,"_blank"),void st({status:!1});"yes"!==u.show_cancel_btn&&st({status:!1}),mt(c.slug,c.init,c.status,i,t)},onCancel:function(){ve(!1),ot(!1),st({status:!1})}})),ot(!1)}else t()},vt=function(e){var n=Object(G.a)(m,d),r="/funnel-offer/".concat(ne,'/design?design={"builder":"').concat(n,'","template":"').concat(e,'"}'),o="/funnel-".concat(d,"/").concat(ne,'/design?design={"builder":"').concat(n,'","template":"').concat(e,'"}');u()({path:Object(P.u)("".concat("upsell"===d?r:o)),method:"POST"}).then((function(n){if(n.success)S();else{if(!n.hasOwnProperty("builders_options"))throw st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:n.message||n.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:n.error}),ot(!1),n;dt(n,(function(){ot({id:e,group:d,filter:t}),vt(e)}))}})).catch((function(e){throw e}))},yt=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var c=n[0],a=n[1],l=n[2],i=n[3],f=l||d;ot({id:c,group:f,filter:t});var p=!0;try{if(ne)return void vt(c);var b=Object.create({});b.template=c,b.builder=Object(G.a)(m,f);var v=Object.create({});if(se&&"step"===Je){var y=i&&i.hasOwnProperty("id")?i.id:0;i?(b.title=a.title,b.inherit_from=y,b.type=f,delete b.template,delete b.builder):(b.funnel_id=se,b.type=f,b.title=a.title,b.template_type=t),"upsell"===f&&("new"===a.type?(delete b.inherit_from,i&&(b.offer_inherit=y),Object(o.size)(a.offer_title)?b.offer_title=a.offer_title:b.offer_title=i.name):Object(o.size)(a.offer_title)?b.title=a.offer_title:b.title="".concat(i.name," Copy")),b.insert_into=a.insert_into}else{var O=E().thumbnails;O.forEach((function(e){v["upsell"===e.step?"wc_upsells":e.step]=e.slug})),b.steps=JSON.stringify(v),se&&"funnel"===Je?b.funnel_id=Number(se):b.title=a.title}var h=0!==se&&"step"===Je?"upsell"===f&&"existing"===a.type?Object(P.u)("/funnel-upsell/".concat(a.insert_into,"/offers")):Object(P.u)("/funnels/".concat(se,"/steps")):Object(P.u)("/".concat(W,"/import_template"));u()({method:"POST",data:b,path:h}).then((function(e){if(e.hasOwnProperty("builders_options"))dt(e,(function(){yt.apply(void 0,n)}));else if(e.status&&!0===e.status){if(e.setup&&ue(e.setup),p=!1,se||(e.funnel_id?Ot(e.funnel_id):st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:Object(s.__)("Unable to import template. Contact Support.","funnel-builder")})),0!==se&&S){if("funnel"===Je&&He(!1),"upsell"===f&&a.hasOwnProperty("insert_into")&&""!==a.insert_into&&ke.steps){var t=ke.steps.findIndex((function(e){return parseInt(e.id)===parseInt(a.insert_into)})),r=ke.steps[t].substeps;r.hasOwnProperty("offer")&&r.offer.length>0&&r.offer.map((function(e){Se("offer",e.id,"products",e.id)}))}S(e)}}else st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),ve(!1)})).catch((function(e){st({status:!0,error:e.message||e.msg}),ve(!1)})).finally((function(){p&&ot(!1)}))}catch(e){console.log(e),ot(!1)}},Ot=function(e){try{u()({path:Object(P.u)("/funnels/".concat(e,"/import-status"))}).then((function(t){!0===t.status?S?(Xe(!1),S({funnel_id:e})):(delete re.group,Ee({},"/funnels/".concat(e),re)):!1===t.status&&setTimeout((function(){Ot(e)}),2e3)}))}catch(e){}},ht=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var c=n[0],a=n[1],l=n[2];if(ot({id:"scratch",group:d,filter:t}),l)u()({path:Object(P.u)("".concat("wc_checkout"===d?"/store-checkout":"/funnels","/duplicate/").concat(l)),method:"wc_checkout"===d?"POST":"GET"}).then((function(e){e.status&&(Object(P.fb)()||e.funnel_id)?S?S({funnel_id:e.funnel_id}):Ee({},"/funnels/".concat(e.funnel_id),re):e.builders_options?dt(e,(function(){ht.apply(void 0,n)})):st({status:!0,modalTitle:Object(s.__)("Clone Funnel"),error:e.message||e.msg||Object(s.__)("Unable to clone funnel. Contact Support.","funnel-builder"),content:e.error}),ot(!1)})).catch((function(e){ot(!1),console.log(e)}));else{var i={funnel_name:c,template:"scratch"};l&&(i.inherit_from=l),a&&!Object(o.isEmpty)(a)&&(i.funnel_steps=a.join(",")),i.builder=m,"wc_checkout"===d&&(i.default_step="yes",i.template=null==Ue?void 0:Ue.id);try{u()({method:"POST",data:i,path:Object(P.u)("/".concat(W))}).then((function(e){if(e.builders_options)dt(e,(function(){ht.apply(void 0,n)}));else if(!0===e.status&&e.hasOwnProperty("funnel")){var t=e.funnel.id;e.setup&&ue(e.setup),"funnels"===W?(delete re.group,Object(f.k)({},"/funnels/".concat(t),re)):S({funnel_id:e.funnel.id})}else!1===e.status&&(st({status:!0,modalTitle:Object(s.__)("Import Template","funnel-builder"),error:e.message||e.msg||Object(s.__)("Unable to import template. Contact Support.","funnel-builder"),content:e.error}),ve(!1),ot(!1))}))}catch(e){console.log(e),ot(!1)}}},jt=function(e){var t=!1,n="upsell"===Ve?!ce:["wc_checkout","wc_thankyou"].includes(Ve)||ie?!oe:!le;return"yes"===e&&!0!==n?t=!0:"status"===e&&(t=n),t},_t=jt("status"),wt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(z&&!n)st(tt(tt({},z),{},{onConfirm:function(){return wt(e,t,!0)},onCancel:function(){return st({status:!1})}}));else{if(nt)return!1;"upsell"===d&&jt()?lt(!0):(Le({id:e,isBuildFromScratch:!0,template:{name:y[d]}}),Y?Y():ne||"funnel"===Je&&h?yt(e):ve(!0),se||He(!0))}},gt=function(){return Object(r.createElement)(F.a,{className:"bwf-admin-modal-squeezy "+ut.className,isLoading:ut.loading,successMessage:ut.success,errorMessage:ut.error,isOpen:ut.status,autoHide:8e3,content:ut.content,confirmText:ut.confirmText,confirmButtonText:ut.confirmButtonText,cancelButtonText:ut.cancelButtonText,onConfirm:ut.onConfirm,onCancel:ut.onCancel,modalTitle:ut.modalTitle,disableConfirm:ut.disableConfirm,closeIcon:ut.closeIcon,onRequestClose:function(){return st({status:!1})}})},Et=function(){return Object(r.createElement)(r.Fragment,null,!de&&gt(),Object(r.createElement)(A,{isOpen:at,onRequestClose:function(){return lt(!1)},modalContent:Object(G.d)({FB_PRO_STATUS:_t,funnelId:h,importType:Je,activeTemplateGroup:d}),className:"bwf-templates-pro-modal"}),de&&(0===h?Object(r.createElement)(je.b,{onCloseModal:function(){ve(!1)},isWorking:nt,onComplete:function(e,t,n){Ue.isBuildFromScratch?ht(e,t,n):yt(Ue.id,{title:e})},modalTitle:M.title,className:b()({"bwf-visibility-hidden":"pluginActivation"===ut.key})},gt()):Object(r.createElement)(Ie,{onCloseModal:function(){ve(!1)},isWorking:nt,activeTemplateGroup:d,templateGroup:y,showCloneOption:Ue.isBuildFromScratch,onComplete:function(e,t,n){var r=Ue.id;if(t!==d){var c=Object(o.get)(i,"".concat(t,".").concat(m)),a=c&&Object.keys(c).find((function(e){var t;return!0===(null===(t=c[e])||void 0===t?void 0:t.build_from_scratch)}));a&&(r=c[a].slug)}yt(r,e,t,n)},className:b()({"bwf-visibility-hidden":"pluginActivation"===ut.key})},gt())))};return Object(r.createElement)(r.Fragment,null,p?Object(r.createElement)(Be,{showEditors:Z,showTemplatesNav:Z}):Object(r.createElement)("div",{className:"wffn_template_wrap"},Object(r.createElement)("div",{className:"bwf-template-list-header"},T&&Object(r.createElement)(qe,{funnelId:h,disabledNavs:x,activeTemplateGroup:d,templateGroup:y,onClick:function(e){return xe(e)},urlDependency:H}),Z&&Object(r.createElement)(De,{editorList:a[d],onChange:function(e){Ce(e),_&&Object(G.f)({showSnackbar:pe,hideSnackbar:be,builder:e,defaultBuilder:n,onConfirm:function(){!function(e){if(n!==e){bt(!0);try{u()({path:Object(P.u)('/funnels/general-settings/update-default-builder?settings={"default_selected_builder": "'.concat(e,'"}')),method:"POST"}).then((function(t){t.success?Pe(e):console.log("Something went wrong with saving default editor")})).catch((function(e){console.log(e)})).finally((function(){bt(!1)}))}catch(e){console.log(e),bt(!1)}}}(e)},defaultEditorLoading:pt})},activeEditor:m})),Object(r.createElement)("div",{id:"wffn_design_container",ref:te},Object(r.createElement)("div",{className:"wffn_tab_container"},$,Object(r.createElement)(Ke,{templateFilterCheck:k,templateCards:g,showBuildFromScratch:L,importBuildFromScratch:wt,activeTemplateGroup:d,activeEditor:m,onPreview:function(e,t,n){e.preventDefault(),n.group_type?Fe(Object.keys(n.group_type)[0]):0!==h&&"funnel"!==Je||"optin"!==d&&"wc_checkout"!==d||Fe("optin"===d?"inline":"wc_checkout"===d&&"1"),Le({id:t,template:n,steps:n.steps,activeStep:n.steps?n.steps[0].type:""}),Xe(!0),"upsell"===d&&0===h?Ee({},"".concat(N,"/").concat(d,"/").concat(m,"/preview/").concat(t)):0===h?Ee({},"".concat(N,"/").concat(d,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)):n.steps?("funnel"===Je&&Ee({},"".concat(N,"/templates/").concat(d,"/").concat(m,"/preview/").concat(t,"/").concat(n.steps[0].type)),Ae(n.steps[0].type)):Ee({},"".concat(N,"/templates/").concat(d,"/").concat(m,"/preview/").concat(t))},funnelId:h,importType:Je,stepId:ne,importing:nt})))),(ze||Ze)&&Object(r.createElement)(ye,{isOpen:Ze||ze,onRequestClose:function(){Xe(!1),Fe(!1),re.group&&(delete re.group,Ee({},Object(f.g)(),re))},onImport:function(){Y?Y():ne||"funnel"===Je&&h?yt(Ue.id):ve(!0)},templateGroup:y,activeGroup:d,templateID:Ue.id,template:Ue.template,activeEditor:m,importing:nt,templateList:i,filters:c,templates:i,hasPRO:jt,previewData:E,isTemplateLoading:p,activeFilter:t,setPreviewErr:ge,parentRoute:N,funnelId:h,importType:Je,updateQueryString:Ee,previewCustomizeEnabled:ee,urlDependency:H,stepId:ne},Et()),!(ze||Ze)&&Et())};ct.prototype={filters:a.a.object.isRequired,templates:a.a.object.isRequired,editors:a.a.object.isRequired,defaultBuilder:a.a.object.isRequired,templateLoading:a.a.func.isRequired,activeTemplateGroup:a.a.string.isRequired,templateGroup:a.a.object.isRequired};var at=ct},397:function(e,t,n){"use strict";var r=n(0),o=n(9),c=n(2),a=n(1),l=(n(458),n(18)),i=n.n(l),u=n(5),s=n.n(u),f=n(6),p=n(21),b=(n(51),n(279));function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=function(e){var t=e.onSearch,n=e.isLoading,l=e.items,i=e.onItemClick,u=e.error,b=e.blurText,d=e.placeholder,v=void 0===d?Object(a.__)("Type to search","funnel-builder"):d,y=e.helpText,O=e.multiGroup,h=void 0!==O&&O,j=e.stepTitle,_=void 0===j?Object(a.__)("details","funnel-builder"):j,w=m(Object(r.useState)(""),2),g=w[0],E=w[1],S=m(Object(r.useState)(!1),2),k=S[0],T=S[1],N=Object(r.useRef)(null),P=function(e,t){i(e),T(!1),t.preventDefault()};Object(r.useEffect)((function(){b&&!k&&E(b)}),[b,k]);var C=Object(r.useRef)();return Object(r.useEffect)((function(){return jQuery("body").on("click",(function(e){jQuery(C.current).find(e.target).length>0?T(!0):T(!1)})),function(){jQuery("body").off("click")}}),[]),Object(r.createElement)("div",{className:s()("bwf-select-auto-box",{"has-help-text":y}),ref:C},Object(r.createElement)("span",{className:"bwf-select-auto-box__search-icon"},Object(r.createElement)(f.a,{icon:"search",height:"16",width:"16",color:p.TEXT_COLOR_3})),Object(r.createElement)("span",{className:"bwf-select-auto__angle-icon"},Object(r.createElement)(f.a,{icon:Object(c.isArray)(l)&&l.length>0&&k?"angle-up":"angle-down",height:"12",width:"12",color:p.TEXT_COLOR_2})),Object(r.createElement)(o.TextControl,{autoComplete:"off",value:g,onChange:function(e){return E(n=e),N.current&&clearTimeout(N.current),void(N.current=setTimeout((function(){return t(n)}),500));var n},placeholder:v}),(!Object(c.isArray)(l)||!!u)&&k&&Object(r.createElement)("div",{className:"bwf-suggestion-panel"},u),Object(c.isArray)(l)&&k&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-suggestion-panel",style:{width:"100%"}},n?Object(r.createElement)("div",null,Object(a.__)("Fetching ".concat(_,"…"),"funnel-builder")):Object(r.createElement)("ul",null,h?l.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-suggestion-panel-".concat(t)},Object(r.createElement)("li",{className:"bwf-suggestion-panel__group"},e.name),e.steps.map((function(e){return Object(r.createElement)("li",{key:e.id,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,e.name))})))})):l.map((function(e){return Object(r.createElement)("li",{key:e.key,onClick:function(t){"no-data"!==e.key&&P(e,t)}},Object(r.createElement)("div",null,Object(a.__)(e.value,"funnel-builder")))}))))),y&&Object(r.createElement)("span",{className:"bwf-select-auto-box__helpText"},y))};v.propTypes={onSearch:i.a.func,isLoading:i.a.bool,items:i.a.oneOfType([i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,value:i.a.string.isRequired})),i.a.array]),onItemClick:i.a.func,onChange:i.a.func,error:i.a.any},t.a=Object(b.a)(v,{onSearch:function(){},isLoading:!1,items:[],onItemClick:function(){},onChange:function(){},error:null})},398:function(e,t,n){},399:function(e,t,n){"use strict";var r=n(0),o=n(5),c=n.n(o),a=(n(540),n(1));t.a=function(e){var t=e.className,n=e.type;return Object(r.createElement)("div",{className:c()("bwf-other-builder-notice",t)},Object(r.createElement)("h3",null,Object(a.__)("How it works","funnel-builder")),Object(r.createElement)("span",null,Object(a.__)("This builder is designed to work with shortcodes. To use the shortcodes in our builder, simply follow these steps:","funnel-builder")),Object(r.createElement)("ol",null,"landing"!==n&&Object(r.createElement)("li",null,Object(a.__)("Copy the shortcodes from the source document or website.","funnel-builder")),Object(r.createElement)("li",null,Object(a.__)("Open the WordPress editor.","funnel-builder")),Object(r.createElement)("li",null,Object(a.__)("Launch your page builder.","funnel-builder")),"landing"!==n&&Object(r.createElement)("li",null,Object(a.__)("Find the area on the page where you want to use the shortcode, and paste it in.","funnel-builder"))))}},400:function(e,t,n){},413:function(e,t,n){"use strict";var r=n(0),o=n(2),c=n(9),a=n(1),l=n(11),i=n.n(l),u=n(37),s=n(4),f=n(397);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(){m=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",i=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof O?t:O,a=Object.create(c.prototype),l=new x(r||[]);return o(a,"_invoke",{value:T(e,n,l)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var b="suspendedStart",d="executing",v="completed",y={};function O(){}function h(){}function j(){}var _={};u(_,a,(function(){return this}));var w=Object.getPrototypeOf,g=w&&w(w(I([])));g&&g!==n&&r.call(g,a)&&(_=g);var E=j.prototype=O.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,c,a,l){var i=f(e[o],e,c);if("throw"!==i.type){var u=i.arg,s=u.value;return s&&"object"==p(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(i.arg)}var c;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return c=c?c.then(o,o):o()}})}function T(t,n,r){var o=b;return function(c,a){if(o===d)throw Error("Generator is already running");if(o===v){if("throw"===c)throw a;return{value:e,done:!0}}for(r.method=c,r.arg=a;;){var l=r.delegate;if(l){var i=N(l,r);if(i){if(i===y)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===b)throw o=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=d;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?v:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=v,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var c=f(o,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,y;var a=c.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,c=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(p(t)+" is not iterable")}return h.prototype=j,o(E,"constructor",{value:j,configurable:!0}),o(j,"constructor",{value:h,configurable:!0}),h.displayName=u(j,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,j):(e.__proto__=j,u(e,i,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,c){void 0===c&&(c=Promise);var a=new k(s(e,n,r,o),c);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(E),u(E,i,"Generator"),u(E,a,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var a=this.tryEntries[c],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var c=o;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var a=c?c.completion:{};return a.type=e,a.arg=t,c?(this.method="next",this.next=c.finallyLoc,y):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function d(e,t,n,r,o,c,a){try{var l=e[c](a),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,o)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=t.type,l=t.title,p=t.is_substep,y=void 0!==p&&p,O=e.onStepSelected,h=e.label,j=void 0===h?Object(a.__)(["offer","wc_order_bump"].includes(n)?"Select ".concat("offer"===n?"Offer":"Order Bump"):"Select Step","funnel-builder"):h,_=e.showCheckbox,w=void 0!==_&&_,g=v(Object(r.useState)(!w),2),E=g[0],S=(g[1],v(Object(r.useState)(!1),2)),k=S[0],T=S[1],N=v(Object(r.useState)(null),2),P=N[0],C=N[1],x=v(Object(r.useState)(!1),2),I=x[0],L=x[1],A=v(Object(r.useState)(null),2),F=A[0],B=A[1],R=Object(r.useRef)(new AbortController),D=I&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",null,Object(r.createElement)(c.Dashicon,{icon:"warning"}),Object(r.createElement)("span",null,Object(a.__)("".concat(l," not found"),"funnel-builder")))),G=function(){var e,t=(e=m().mark((function e(t){var r,c;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.prev=1,r=y&&!0===y?"&is_substep=true":"",e.next=5,i()({path:Object(s.u)("/funnels/step/search/?s=".concat(t,"&type=").concat(n).concat(r)),signal:R.current.signal});case 5:c=e.sent,C(c||null),Object(o.isEmpty)(c.steps)&&Object(o.isEmpty)(c.pages)?L(!0):L(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),"AbortError"===e.t0.name?console.log(e.t0):(C(null),L(!0));case 13:T(!1);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){d(c,r,o,a,l,"next",e)}function l(e){d(c,r,o,a,l,"throw",e)}a(void 0)}))});return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){return G(""),function(){R.current.abort()}}),[]);var U=Object(o.isObject)(P)&&!Object(o.isNull)(P)?b(Object(o.isEmpty)(P)?[]:P):Object(o.isArray)(P)&&!Object(o.isEmpty)(P)?P.map((function(e){return{key:e.id,value:e.name}})):[],M=F&&F.hasOwnProperty("name")?Object(u.decodeEntities)(F.name):"";return Object(r.createElement)(r.Fragment,null,E&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-label"},j),Object(r.createElement)(f.a,{onSearch:function(e){return G(e)},isLoading:k,items:U,multiGroup:Object(o.isObject)(P),error:D,onItemClick:function(e){B(e),O({step:e,copyFrom:E})},blurText:M,placeholder:Object(a.__)("Search…","funnel-builder"),stepTitle:l,helpText:["offer","wc_order_bump"].includes(n)?null:Object(a.__)("Search and select a page from a Funnel, Post or a Page.","funnel-builder")})))}},454:function(e,t,n){},457:function(e,t,n){"use strict";n.d(t,"a",(function(){return N}));var r=n(0),o=n(2),c=n(9),a=n(1),l=n(11),i=n.n(l),u=n(22),s=n(295),f=n(4),p=n(397),b=n(25),m=n(79),d=n(292),v=n(19),y=n(308),O=n(5),h=n.n(O);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=j(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=j(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==j(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(){E=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},a=c.iterator||"@@iterator",l=c.asyncIterator||"@@asyncIterator",i=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof v?t:v,a=Object.create(c.prototype),l=new x(r||[]);return o(a,"_invoke",{value:T(e,n,l)}),a}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var p="suspendedStart",b="executing",m="completed",d={};function v(){}function y(){}function O(){}var h={};u(h,a,(function(){return this}));var _=Object.getPrototypeOf,w=_&&_(_(I([])));w&&w!==n&&r.call(w,a)&&(h=w);var g=O.prototype=v.prototype=Object.create(h);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(o,c,a,l){var i=f(e[o],e,c);if("throw"!==i.type){var u=i.arg,s=u.value;return s&&"object"==j(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,a,l)}),(function(e){n("throw",e,a,l)})):t.resolve(s).then((function(e){u.value=e,a(u)}),(function(e){return n("throw",e,a,l)}))}l(i.arg)}var c;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return c=c?c.then(o,o):o()}})}function T(t,n,r){var o=p;return function(c,a){if(o===b)throw Error("Generator is already running");if(o===m){if("throw"===c)throw a;return{value:e,done:!0}}for(r.method=c,r.arg=a;;){var l=r.delegate;if(l){var i=N(l,r);if(i){if(i===d)continue;return i}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===p)throw o=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=b;var u=f(t,n,r);if("normal"===u.type){if(o=r.done?m:"suspendedYield",u.arg===d)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=m,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var c=f(o,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,d;var a=c.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,d):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,d)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[a];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,c=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(j(t)+" is not iterable")}return y.prototype=O,o(g,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:y,configurable:!0}),y.displayName=u(O,i,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,u(e,i,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,l,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,o,c){void 0===c&&(c=Promise);var a=new k(s(e,n,r,o),c);return t.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},S(g),u(g,i,"Generator"),u(g,a,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=I,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return l.type="throw",l.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var c=this.tryEntries.length-1;c>=0;--c){var a=this.tryEntries[c],l=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var i=r.call(a,"catchLoc"),u=r.call(a,"finallyLoc");if(i&&u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(i){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var c=o;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var a=c?c.completion:{};return a.type=e,a.arg=t,c?(this.method="next",this.next=c.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;C(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),d}},t}function S(e,t,n,r,o,c,a){try{var l=e[c](a),i=l.value}catch(e){return void n(e)}l.done?t(i):Promise.resolve(i).then(r,o)}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,a,l=[],i=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(l.push(r.value),l.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{if(!i&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw o}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.b=function(e){var t,n=e.onCloseModal,l=e.onComplete,i=e.isWorking,p=e.className,O=e.children,j=k(Object(r.useState)(""),2),_=j[0],w=j[1],g=k(Object(r.useState)(""),2),T=g[0],P=g[1],C=k(Object(r.useState)([]),2),x=C[0],I=C[1],L=k(Object(r.useState)(!1),2),A=L[0],F=L[1],B=Object(v.a)("ul").isProFeatureLocked,R=Object(d.a)(),D=R.getCurrentTemplate,G=R.getScratchTemplateType,U=R.getActiveGroup,M=R.getActiveSubFilter,z=D(),q=G(),W=U(),$=M(),V=Object(r.createElement)(r.Fragment,null,"wc_checkout"===W?Object(a.__)("Create Store Checkout","funnel-builder"):Object(a.__)("Create Funnel","funnel-builder")),Y=function(){var e,t=(e=E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("new"!==q&&z.isBuildFromScratch||T){e.next=3;break}return w("Funnel title is required field"),e.abrupt("return");case 3:w(""),l&&l(T,x,z.isBuildFromScratch&&"new"!==q&&A);case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var c=e.apply(t,n);function a(e){S(c,r,o,a,l,"next",e)}function l(e){S(c,r,o,a,l,"throw",e)}a(void 0)}))});return function(){return t.apply(this,arguments)}}(),J=function(){return z.isBuildFromScratch?"new"===q?Object(o.isEmpty)(T.trim())||!1===W&&Object(o.isEmpty)(x):Object(o.isEmpty)(A):Object(o.isEmpty)(T.trim())},H=function(e){return"wc_checkout"===e.type&&$&&y.e.hasOwnProperty(e.type)&&y.e[e.type].hasOwnProperty($)?" - ".concat(y.e[e.type][$]," ")+Object(a.__)("Step","funnel-builder"):""};return Object(r.createElement)(c.Modal,{title:V,className:h()("bwf-admin-modal bwf-admin-modal-small bwf-modal-edit-page bwf-create-new-funnel-modal",p),onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!i,overlayClassName:"bwf-create-funnel-modal__overlay"},O,_&&Object(r.createElement)(m.a,{errorMessage:_}),(!z.isBuildFromScratch||"existing"!==q)&&Object(r.createElement)("div",{className:"bwf-form-fields",onKeyPress:function(e){"Enter"==e.key&&(J()||Y())}},Object(r.createElement)(c.TextControl,{placeholder:Object(a.__)("Enter funnel name","funnel-builder"),label:Object(a.__)("Name","funnel-builder"),value:T,onChange:function(e){return P(e)},disabled:i})),z.isBuildFromScratch&&("new"===q?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-create-new-funnel__add-step-wrap"},"wc_checkout"===W?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mb-12 bwf-flex bwf--g8"},Object(r.createElement)(b.c,{content:Object(a.__)("Checkout","funnel-builder"),border:!0}),Object(r.createElement)(b.c,{content:Object(a.__)("Thank You","funnel-builder"),border:!0})),Object(r.createElement)("span",{className:"help-text"},Object(a.__)("Note: You have to custom build and design the above steps","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,Object(a.__)("Add following steps to funnel","funnel-builder")),Object(r.createElement)(s.a,{value:x,onChange:function(e){I(e)},options:Object.keys(f.ob).map((function(e){return{value:e,label:f.ob[e],isPro:B&&"upsell"===e}})),disabled:i})))):Object(r.createElement)(N,{onSelect:function(e){return F(e)},activeGroup:W})),!z.isBuildFromScratch&&z.steps&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-mb-12 bwf-flex-wrap"},null===(t=z.steps)||void 0===t?void 0:t.filter((function(e){return!B||"upsell"!==e.type})).map((function(e,t){return Object(r.createElement)(b.c,{content:f.ob[e.type]+H(e),border:!0,key:"step-type-".concat(t)})})))),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{onClick:n,className:"bwf-modal-cancel-btn",disabled:i},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,disabled:J()||i,isBusy:i,onClick:Y,className:J()?"bwf-no-ripple":"",name:"add-funnel"},Object(a.__)("Done","funnel-builder"))))};var N=function(e){var t=e.onSelect,n=e.activeGroup,c=e.label,l=void 0===c?Object(a.__)("Funnel","funnel-builder"):c,u=k(Object(r.useState)([]),2),s=u[0],m=u[1],d=k(Object(r.useState)(""),2),v=d[0],y=d[1],O=k(Object(r.useState)({}),2),h=O[0],j=O[1],_=k(Object(r.useState)([]),2),g=_[0],E=_[1],S=k(Object(r.useState)(!0),2),T=S[0],N=S[1],P=function(e){N(!0),i()({path:Object(f.u)("/funnels".concat(Object(f.t)(w({},e))))}).then((function(e){e.status?(m(e.items),Object(o.size)(e.items)?E(e.items.map((function(e){return{key:e.id,value:e.title}}))):E([{key:"no-data",value:"No Data Found"}])):e.items||E([]),N(!1)})).catch((function(e){console.log(e),N(!1)}))};Object(r.useEffect)((function(){Object(o.isEmpty)(v)?P({limit:10,need_steps_data:!0}):P({limit:10,s:v,need_steps_data:!0})}),[v]);var C=Object(r.useMemo)((function(){var e;if(Object(o.isEmpty)(s))return[];var t=null===(e=s.find((function(e){return e.id===h.key})))||void 0===e?void 0:e.steps_data,r=[];return t.forEach((function(e){r.push(e.type),"wc_checkout"===e.type&&e.substeps&&!Object(o.isEmpty)(e.substeps)&&r.push("wc_order_bump")})),r.filter((function(e){return"wc_checkout"!==n||["wc_checkout","wc_thankyou","wc_upsells"].includes(e)})).filter((function(e,t,n){return n.indexOf(e)===t}))}),[h]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",null,l),Object(r.createElement)(p.a,{onSearch:function(e){return y(e)},isLoading:T,items:g,multiGroup:!1,error:"",onItemClick:function(e){t(e.key),j(e)},blurText:h.value,placeholder:Object(a.__)("Search…","funnel-builder"),helpText:Object(a.__)("Search and select a Funnel to import steps","funnel-builder")}),!Object(o.isEmpty)(h)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{className:"bwf-mb-12"},Object(a.__)("Steps Added","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf-flex-wrap bwf--g8 bwf-mb-16"},Object(o.isEmpty)(C)?Object(r.createElement)(b.c,{content:Object(a.__)("No Steps","funnel-builder"),border:!0}):C.map((function(e,t){return Object(r.createElement)(b.c,{content:Object(f.nb)(e),border:!0,key:"steps-".concat(t)})})))))}},458:function(e,t,n){},473:function(e,t,n){"use strict";var r=n(0),o=n(1),c=(n(454),n(9)),a=n(6),l=n(19);t.a=function(e){var t=e.onFileSelected,n=(e.htmlData,e.filetypeArray),i=(e.btnLabel,e.dropZoneContent),u=Object(l.b)().showSnackbar,s=function(e){e&&e[0]&&"type"in e[0]?n.includes(e[0].type)?t(e[0]):u(Object(o.__)("Uploaded file is not valid.","funnel-builder")):u(Object(o.__)("Uploaded file not found","funnel-builder"))},f=n&&n[0]?n[0]:"application/json";return Object(r.createElement)("div",{className:"bwf-component-import-wrapper"},Object(r.createElement)(c.DropZoneProvider,null,Object(r.createElement)("div",{className:"bwf-import-area-wrapper"},Object(r.createElement)(c.FormFileUpload,{isSecondary:!0,accept:f,onChange:function(e){return s(e.target.files)},render:function(e){var t=e.openFileDialog;return Object(r.createElement)("div",{className:"bwf-import-area",onClick:t},i||null,"application/json"===f&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(a.a,{icon:"import-file",size:56}),Object(r.createElement)("div",{className:"bwf-drop-import-heading"},Object(o.__)("Drag or browse a JSON file to import funnel","funnel-builder")),Object(r.createElement)("div",{className:"bwf-drop-import-content"},Object(o.__)("(Maximum file size allowed 10 MB)","funnel-builder"))))}}),Object(r.createElement)(c.DropZone,{onFilesDrop:s,onHTMLDrop:s,onDrop:s}))))}},536:function(e,t,n){},537:function(e,t,n){},538:function(e,t,n){},539:function(e,t,n){},540:function(e,t,n){}}]);