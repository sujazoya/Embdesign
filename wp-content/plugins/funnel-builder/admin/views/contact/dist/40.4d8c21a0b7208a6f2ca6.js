(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1182:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(121),a=n(2),i=n(27),l=n(11),o=n.n(l),s=n(9),u=n(1),b=(n(794),n(4)),f=n(5),d=n.n(f),m=n(6),p=n(361),O=n(28),j=n(29),v=n(76),y=n(292),h=n(51),g=n(346),w=n(13),_=n(523),E=n(32),S=n(47),k=n(20);function N(){N=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof O?t:O,i=Object.create(a.prototype),l=new A(r||[]);return c(i,"_invoke",{value:S(e,n,l)}),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",d="executing",m="completed",p={};function O(){}function j(){}function v(){}var y={};s(y,i,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(T([])));g&&g!==n&&r.call(g,i)&&(y=g);var w=v.prototype=O.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(c,a,i,l){var o=b(e[c],e,a);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"==x(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(o.arg)}var a;c(this,"_invoke",{value:function(e,r){function c(){return new t((function(t,c){n(e,r,t,c)}))}return a=a?a.then(c,c):c()}})}function S(t,n,r){var c=f;return function(a,i){if(c===d)throw Error("Generator is already running");if(c===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var o=k(l,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(c===f)throw c=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);c=d;var s=b(t,n,r);if("normal"===s.type){if(c=r.done?m:"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(c=m,r.method="throw",r.arg=s.arg)}}}function k(t,n){var r=n.method,c=t.iterator[r];if(c===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=b(c,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var c=-1,a=function n(){for(;++c<t.length;)if(r.call(t,c))return n.value=t[c],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(x(t)+" is not iterable")}return j.prototype=v,c(w,"constructor",{value:v,configurable:!0}),c(v,"constructor",{value:j,configurable:!0}),j.displayName=s(v,o,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(E.prototype),s(E.prototype,l,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,c,a){void 0===a&&(a=Promise);var i=new E(u(e,n,r,c),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),s(w,o,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function c(r,c){return l.type="throw",l.arg=t,n.next=r,c&&(n.method="next",n.arg=e),!!c}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return c("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return c(i.catchLoc,!0);if(this.prev<i.finallyLoc)return c(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return c(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return c(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var c=this.tryEntries[n];if(c.tryLoc<=this.prev&&r.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var a=c;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var c=r.arg;P(n)}return c}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function C(e,t,n,r,c,a,i){try{var l=e[a](i),o=l.value}catch(e){return void n(e)}l.done?t(o):Promise.resolve(o).then(r,c)}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){var t=Object(c.useParams)(),n=t.id,a=t.builder,i=e.query,l=e.isOpen,f=e.setModalOpenState,m=e.hasCheckoutStep,h=e.funnelId,A=void 0===h?n:h,T=i.importType,I="wc_checkout"===T?"funnel":T,L=j.a.getAddStepData(),D=Object(O.a)(),F=D.addStep,B=D.addSubStep,z=D.endAddStep,M=D.updateFunnelViewLink,U=D.setCountData,R=D.fetch,q=Object(v.a)(),G=q.setActiveGroup,J=q.setActiveBuilder,Y=q.setActiveSubFilter,V=(0,Object(y.a)().getActiveGroup)(),Q=Object(E.a)().getStatus,$=Object(S.a)().updateStatus,W=Q(),H=P(Object(r.useState)(null),2),K=H[0],X=H[1],Z=i.path.startsWith("/store-checkout"),ee=(0,Object(k.a)().getGlobalCheckout)(),te=("object"===x(ee)?ee:{}).funnel_id,ne=void 0===te?0:te,re=!!a||!!I,ce=function(){f(!1),K&&X(null)};Object(r.useEffect)((function(){return function(){z()}}),[]),Object(r.useEffect)((function(){return L&&"type"in L&&(X(L),f(!0)),function(){ce()}}),[L]);var ae=function(e,t){var n=K.is_substep,r=K.type,c=K.parent_id;e.status&&"data"in e&&(n?e.data&&(B(e.data,r,parseInt(c),!!t),Object(w.k)({},"".concat(Object(b.fb)()?"/store-checkout/bump":"/funnel-bump","/").concat(e.data.id).concat(t?"/design":"/import","&funnel_id=").concat(A))):F(e.data))},ie=P(Object(r.useState)(!1),2),le=ie[0],oe=ie[1],se=P(Object(r.useState)(null),2),ue=se[0],be=se[1],fe=P(Object(r.useState)(!1),2),de=fe[0],me=fe[1],pe=function(){var e,t=(e=N().mark((function e(t){var n,r,c,a,i,l,s,u,f,d,m,p,O,j,v;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!le){e.next=2;break}return e.abrupt("return");case 2:return me(!0),oe(!0),n=K.type,r=void 0===n?"":n,c=K.parent_id,a=void 0===c?0:c,i=K.is_substep,l=void 0!==i&&i,s=t.copyFrom,u=void 0===s?{}:s,f=t.title,d=void 0===f?"":f,(m=u&&u.hasOwnProperty("key")?u.key:0)<1&&(m=u&&u.hasOwnProperty("id")?u.id:0),p="",l&&parseInt(a)>0&&(p="".concat(a,"/substeps/")),Object(b.fb)()&&"wc_order_bump"===r&&(p="".concat(a,"/substeps/")),O="",O="offer"==r?"/funnel-upsell/".concat(a,"/offers"):"/funnels/".concat(A,"/steps/").concat(p),Object(b.fb)()&&(O="/store-checkout/".concat(A,"/step/").concat(p)),j={title:d,inherit_from:m,type:r},e.prev=16,e.next=19,o()({method:"POST",path:Object(b.u)(O),data:j});case 19:(v=e.sent).hasOwnProperty("status")&&v.status?he():be(!1),v.hasOwnProperty("status")&&v.status&&ae(v,m),M(),v.hasOwnProperty("count_data")&&U(v.count_data),p&&"wc_order_bump"===r&&!W.is_orderbump&&$({is_orderbump:!0}),oe(!1),Oe(!1),e.next=37;break;case 29:e.prev=29,e.t0=e.catch(16),console.log("Error While Creating Step: "),console.log(e.t0),be(!1),M(),oe(!1),Oe(!1);case 37:case"end":return e.stop()}}),e,null,[[16,29]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function i(e){C(a,r,c,i,l,"next",e)}function l(e){C(a,r,c,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){X(null),z(),me(!1),be(null),f(!1)};if(e)var n=setTimeout((function(){clearTimeout(n),t()}),2e3);else t()},je=(K||{}).is_substep,ve=!de&&K&&!(void 0!==je&&je)&&Object(r.createElement)(s.Button,{icon:"arrow-left-alt wffn-icon",onClick:function(){return X(null)}}),ye=Object(r.createElement)(r.Fragment,null,ve,K&&"wc_order_bump"===K.type?Object(u.__)("Add Order Bump","funnel-builder"):K&&"popup_title"in K?K.popup_title:"funnel"===I?Z?Object(u.__)("Create Store Checkout","funnel-builder"):Object(u.__)("Funnel Templates","funnel-builder"):Object(u.__)("Add Step","funnel-builder"));Object(r.useEffect)((function(){K||!l&&!re||"upsell"!==V&&(!I&&!Z||a?a||G("landing"):"step"===I?G("wc_checkout"):"funnel"===I&&G("funnel"))}),[l,re]);var he=function(){delete i.importType,delete i.group,J(""),G("funnel"),Y(!1),ce(),Object(w.k)({},Object(w.g)(),i)};return Object(r.createElement)(r.Fragment,null,(l||re)&&Object(r.createElement)(s.Modal,{title:ye,onRequestClose:function(){K&&Oe(),he(),Object(b.fb)()?Object(w.k)({},"/store-checkout"):Object(w.k)({},"/funnels/".concat(A))},className:d()("bwf-admin-modal",{"bwf-admin-modal-full-screen bwf-add-step-modal":!K,"bwf-admin-modal-squeezy bwf-modal-overflow-visible":K}),shouldCloseOnClickOutside:K&&!le,overlayClassName:"wffn_step_template_modal"},!de&&!K&&I&&("funnel"===I?Object(r.createElement)(_.default,{onImportComplete:function(){he(),Z?(R(parseInt(ne)),Object(w.k)({},"/store-checkout")):(R(parseInt(A)),Object(w.k)({},"/funnels/".concat(A)))},isStoreCheckout:Z,storeCheckoutId:ne}):Object(r.createElement)(g.a,{onImportComplete:function(){he(),Z?(R(parseInt(ne)),Object(w.k)({},"/store-checkout")):(R(parseInt(A)),Object(w.k)({},"/funnels/".concat(A)))},isStoreCheckout:Z,storeCheckoutId:ne,hasCheckoutStep:m})),K&&Object(r.createElement)(p.a,{step:K,requestCreateStep:pe,onRequestClose:ce,onCreationScreen:de,clearAndCloseEverything:Oe,creationSuccess:ue,isBusy:le})))},I=n(19);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){D=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof O?t:O,i=Object.create(a.prototype),l=new x(r||[]);return c(i,"_invoke",{value:S(e,n,l)}),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",d="executing",m="completed",p={};function O(){}function j(){}function v(){}var y={};s(y,i,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(P([])));g&&g!==n&&r.call(g,i)&&(y=g);var w=v.prototype=O.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(c,a,i,l){var o=b(e[c],e,a);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"==L(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(o.arg)}var a;c(this,"_invoke",{value:function(e,r){function c(){return new t((function(t,c){n(e,r,t,c)}))}return a=a?a.then(c,c):c()}})}function S(t,n,r){var c=f;return function(a,i){if(c===d)throw Error("Generator is already running");if(c===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var o=k(l,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(c===f)throw c=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);c=d;var s=b(t,n,r);if("normal"===s.type){if(c=r.done?m:"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(c=m,r.method="throw",r.arg=s.arg)}}}function k(t,n){var r=n.method,c=t.iterator[r];if(c===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=b(c,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var c=-1,a=function n(){for(;++c<t.length;)if(r.call(t,c))return n.value=t[c],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(L(t)+" is not iterable")}return j.prototype=v,c(w,"constructor",{value:v,configurable:!0}),c(v,"constructor",{value:j,configurable:!0}),j.displayName=s(v,o,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(E.prototype),s(E.prototype,l,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,c,a){void 0===a&&(a=Promise);var i=new E(u(e,n,r,c),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),s(w,o,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function c(r,c){return l.type="throw",l.arg=t,n.next=r,c&&(n.method="next",n.arg=e),!!c}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return c("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return c(i.catchLoc,!0);if(this.prev<i.finallyLoc)return c(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return c(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return c(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var c=this.tryEntries[n];if(c.tryLoc<=this.prev&&r.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var a=c;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var c=r.arg;C(n)}return c}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function F(e,t,n,r,c,a,i){try{var l=e[a](i),o=l.value}catch(e){return void n(e)}l.done?t(o):Promise.resolve(o).then(r,c)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=e.funnelId,n=void 0===t?0:t,c=Object(I.b)().showSnackbar,a=j.a.getDuplicateStepData(),i=a.step,l=a.stepPos,f=a.shouldDuplicate,d=a.substepOf,m=void 0===d?null:d,p=B(Object(r.useState)(!1),2),v=p[0],y=p[1],g=B(Object(r.useState)(null),2),w=g[0],_=g[1],E=B(Object(r.useState)(null),2),S=E[0],k=E[1],N=Object(O.a)(),C=N.addStep,x=N.addSubStep,P=N.endDuplicateStep,A=N.setCountData,T=function(){var e=setTimeout((function(){P(),clearTimeout(e)}),2e3)},L=function(){var e,t=(e=D().mark((function e(){var t,r,a,s;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.prev=1,r=(t=m&&"id"in m)?"".concat(m.id,"/substeps/"):"",a=Object(b.fb)()&&t?"/store-checkout/".concat(n,"/step/").concat(r):"/funnels/".concat(n,"/steps/").concat(r),"offer"===i.type&&t&&(a="/funnel-upsell/".concat(m.id,"/offers/")),e.next=8,o()({method:"POST",path:Object(b.u)(a),data:{duplicate_id:i.id,type:i.type}});case 8:"status"in(s=e.sent)&&s.status?(t?x(s.data,i.type,m.id,!0):C(s.data,l),_(null),P(),s.hasOwnProperty("count_data")&&A(s.count_data),c(Object(u.__)("Changes Saved","funnel-builder"))):(k({message:Object(u.__)("There are some technical difficulties while duplicating step. Contact Support","funnel-builder")}),_(!1)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),k(e.t0),_(!1);case 17:y(!1),T();case 19:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function i(e){F(a,r,c,i,l,"next",e)}function l(e){F(a,r,c,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){_(null),i&&L()}),[i]),f?Object(r.createElement)(s.Modal,{isDismissible:!1,title:!1===w?Object(u.__)("Failed"):"",onRequestClose:P,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},v&&Object(r.createElement)("div",{className:"bwf-t-center bwf-mt-10"},Object(r.createElement)(h.a,{size:"xxl"}),Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(u.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(u.__)("We are duplicating step in the funnel","funnel-builder"))),!v&&!0===w&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!v&&!0===w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(u.__)("Step Duplicated","funnel-builder")))),!v&&!1===w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:""},Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Error: ","funnel-builder")+S&&"message"in S?S.message:Object(u.__)("There are some technical difficulties while duplicating step. Please contact support","funnel-builder")))),!v&&!1===w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:P},Object(u.__)("OK","funnel-builder"))))):null},U=n(162),R=n(294),q=n(59),G=n(23),J=n(21);function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(e){var t=e.type,n=void 0===t?"upsell":t,c=e.onClick,a=e.modalContent,i=Y(Object(r.useState)(!1),2),l=i[0],s=i[1],f=(Object(O.a)().setShowAddStepModal,Object(v.a)().setActiveGroup),p=Object(G.a)().setStepPromotion;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:d()("bwf-st-c-wrap bwf-st-c__lite-card",["bwf-st-lite-".concat(n)])},Object(r.createElement)("div",{className:"bwf-st-c",onClick:function(){return s(!0)}},Object(r.createElement)("span",{className:"bwf-d-icon-drag",style:{marginTop:"2px"}},Object(r.createElement)(m.a,{icon:"king",color:J.NOTICE_YELLOW,size:20})),Object(r.createElement)("div",{className:"bwf-st-c-title",style:{marginLeft:"-3px"}},Object(r.createElement)("a",{href:"#",onClick:function(e){return e.preventDefault()}},"upsell"===n?Object(u.__)("One Click Upsell Offer","funnel-builder"):Object(u.__)("Order Bump","funnel-builder")),Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-ml-12"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-has-chart bwf-st-c-badge-small bwf-st-c-badge-green bwf-cursor-text"},Object(r.createElement)(m.a,{icon:"chart-increase",width:"14",height:"14",color:"#09B29C"}),Object(r.createElement)("span",null,Object(u.__)("Increases average order value","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("div",{className:"bwf-card-action",onClick:function(){"upsell"===n?(Object(w.k)({importType:"step"}),f("upsell")):c&&c()},role:"button",tabIndex:"-1"},Object(u.__)("View Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-card-action bwf-close-icon",onClick:function(e){var t;e.stopPropagation(),t="/".concat("upsell"===n?"remove-upsell-promotion":"remove-bump-promotion"),p("yes","upsell"===n?"upsell":"bump"),o()({path:Object(b.u)(t),method:"POST",data:{user_id:wffn.current_logged_user}}).then((function(e){e.status||console.log("Failed to remove step promotion.")})).catch((function(e){return console.log(e)}))}},Object(r.createElement)(m.a,{icon:"close",size:12}))))),l&&Object(r.createElement)(q.a,{isOpen:l,onRequestClose:function(){return s(!1)},modalContent:a}))},$=n(37),W=n(42),H=n(111),K=n(78),X=n(459),Z=n(25),ee=n(82),te=n(130),ne=n(129),re=n(75),ce=n(61),ae=n(40),ie=n(81),le=n(55);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==oe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var me=window.wffn.is_ab_experiment,pe=window.wffn.is_ab_experiment_support,Oe={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)(["Order","Bump","AB_Test","Upgrade","Modal"])},je={type:2,status:!0,proLink:Object(b.P)(["Order","Bump","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},ve=function(e){var t,n,c,l=e.bump,f=l._data,p=void 0===f?{}:f,v=l.tags,y=l.experiment_status,h=(l.type,e.bump),g=e.checkoutStep,_=e.checkoutPos,E=e.stepPos,S=e.view,k=e.total,N=e.onSortStart,C=p.title,x=p.status,P=Object(b.C)(),A=j.a.getFunnel(),T=h.id,L=void 0===T?"":T,D=Object(ce.a)().setModalData,F=fe(Object(r.useState)(!1),2),B=F[0],z=F[1],M=fe(Object(r.useState)({}),2),U=M[0],R=M[1],G=fe(Object(r.useState)(!1),2),Y=G[0],V=G[1],Q=fe(Object(r.useState)(!1),2),oe=Q[0],se=Q[1],be=fe(Object(r.useState)(!1),2),de=be[0],ve=be[1],ye=fe(Object(r.useState)(!1),2),he=ye[0],ge=ye[1],we=fe(Object(r.useState)(!1),2),_e=we[0],Ee=we[1],Se=fe(Object(r.useState)({}),2),ke=Se[0],Ne=Se[1],Ce=Object(O.a)(),xe=Ce.startDuplicateStep,Pe=Ce.startDeleteStep,Ae=Ce.setStepTitle,Te=Ce.setUpdateFunnel,Ie=Object(ae.a)(),Le=Ie.setToggleState,De=Ie.setSubStep,Fe=location&&location.search?Object(i.parse)(location.search.substring(1)):{},Be=Object(I.b)().showSnackbar,ze=Object(ie.a)().setExperimentStatus,Me=Object(le.a)().setStepHeaderData,Ue=function(){if(h.hasOwnProperty("id")&&h.id){Ae(Object($.decodeEntities)(C)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(P,"/experiments/").concat(h.id);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(h.id)),Object(w.k)({},e)}},Re=function(e){Ee(!0);var t="/funnel-bump/save-state/".concat(h.id,"?funnel_id=").concat(P);o()({path:Object(b.u)(t),method:"POST",data:{status:!Number(x)}}).then((function(t){t.success?(Le(!Number(x)),Ee(!1),ge(!1),ve(!1),function(e,t){var n=Object(a.cloneDeep)(null==A?void 0:A.steps).map((function(n){return parseInt(n.id)===parseInt(g.id)&&(n.substeps.wc_order_bump=n.substeps.wc_order_bump.map((function(n){return parseInt(n.id)===parseInt(L)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));A.steps=n;var r=JSON.parse(JSON.stringify(A));Te(r)}(Number(x),e),Ne({}),Be(Object(u.__)("Changes Saved","funnel-builder"))):(Le(Number(x)),Ee(!1),ge(!1),ve(!1))})).catch((function(e){console.log(e),Le(Number(x)),Be(Object(u.__)("Status Updation Failed","funnel-builder"))}))},qe={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},Ge={1:"warning",2:"success",3:"default"},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ge[e]:qe[e]},Ye=function(e){if(se(!0),(e=e.trim())===C)V(!1),se(!1);else if(C!==e.trim()){Ae(e);var t='{"title":"'.concat(e,'","slug":"').concat(S.match(/([^\/]*)\/*$/)[1],'"}');o()({path:Object(b.u)("/funnel-bump/save-state/".concat(h.id,"?funnel_id=").concat(P)),data:JSON.parse(t),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);V(!1),se(!1),Be(Object(u.__)("Changes Saved","funnel-builder")),function(e,t){var n=A.steps.map((function(n){if(n.id===e){var r=n.substeps.wc_order_bump.map((function(e){if(e.id===h.id){var n=ue(ue({},e._data),{},{title:t});return ue(ue({},e),{},{_data:n})}return e}));return n.substeps.wc_order_bump=r,n}return n}));A.steps=n;var r=JSON.parse(JSON.stringify(A));Te(r)}(e.step_data.checkout_id,e.step_data.title)})).catch((function(e){console.log(e.message?e.message:e),Ae(C),Be(Object(u.__)("Title Updation Failed","funnel-builder"))}))}},Ve=Object(I.a)(),Qe=Ve.isExpired,$e=Ve.isProFeatureLocked,We=Ve.isBasicFeatureLocked;return Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===E?"is-disabled":"",onClick:function(){return N("up",E)},title:Object(u.__)("Click here to move up","funnel-builder")},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:E===k-1?"is-disabled":"",onClick:function(){return N("down",E)},title:Object(u.__)("Click here to move down","funnel-builder")},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(P,"order_bump",g.id,h.id),onClick:function(e){e.preventDefault(),Me("bump",L,"",{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(w.k)({page:"bwf",path:Object(b.V)(P,"order_bump",g.id,h.id,!1)},"/",{})}},Object($.decodeEntities)(C))),Qe?Object(r.createElement)(Z.c,{content:Object(u.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(a.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"!==e&&"has_rules"!==e||(Me("bump",L,"",{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(w.k)({},v[e].edit,Fe))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(a.isEmpty)(y)&&"4"!==y&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){me&&!$e?pe?(ze(y),De({step:"bump",parentId:g.id}),Ue()):z(!0):R(Oe)}},Object(r.createElement)(Z.c,{content:(t=y,c="warning"===(n=Je(y,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:c}),Object(r.createElement)("span",{className:"".concat(void 0!==c?"bwf-mr-4":"")},Je(t)))),type:Je(y,!0)})),!(x&&1===parseInt(x))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!$e&&me?pe?(ze(y),De({step:"bump",parentId:g.id}),Ue()):z(!0):R(Oe)},title:Object(u.__)("A/B Test Step","funnel-builder"),className:"bwf-list-btn"},Object(r.createElement)(m.a,{icon:$e?"king":"experiment",width:"16",height:"16",color:$e?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:S,title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),V(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Edit","funnel-builder")))),!(x&&1===parseInt(x))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ne({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(C)),"funnel-builder")))}),Re()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(x)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(y)?ve(!0):ge(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){We?R(je):(t(),xe(ue(ue({},h),{},{type:"wc_order_bump"}),0,g))}},Object(r.createElement)(W.a,{justify:"space-between"},Object(r.createElement)(W.c,null,Object(u.__)("Duplicate","funnel-builder")),We&&Object(r.createElement)(W.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),D({title:C}),Pe(ue(ue({},h),{},{type:"wc_order_bump"}),E,ue(ue({},g),{},{stepPos:_}))}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-step-type bwf-step-type-ob"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Order Bump","funnel-builder"),className:"bwf-cursor-default"})))),B&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return z(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(u.__)("Oops it seems old version of Experiments is activated.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_30"})),U.status&&Object(r.createElement)(q.a,{isOpen:U.status,onRequestClose:function(){return R({status:!1})},modalContent:U,type:U.type}),Y&&Object(r.createElement)(X.a,{renameTitle:"Edit Details",title:Object($.decodeEntities)(C),onclose:function(){return V(!1)},updateTitle:function(e){return Ye(e)},isLoading:oe}),he&&Object(r.createElement)(ne.a,{isPublishLoading:_e,onAction:function(){return Re()},onclose:function(){return ge(!1)}}),de&&Object(r.createElement)(te.a,{isPublishLoading:_e,onAction:function(){Re(!0)},onclose:function(){return ve(!1)}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",ke.className),confirmText:ke.confirmText,confirmButtonText:ke.buttonConfirm,cancelButtonText:ke.buttonCancel,onConfirm:ke.onConfirm,isLoading:ke.loading,successMessage:ke.success,errorMessage:ke.error,content:ke.content,onRequestClose:function(){return Ne({status:!1})},modalTitle:ke.modalTitle,isOpen:ke.status,closeIcon:ke.closeIcon}))},ye=n(422),he=n(362);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ne=window.wffn.is_ab_experiment,Ce=window.wffn.is_ab_experiment_support,xe={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("A/B test product price, page layout, messaging, design & more. Create variants, analyze results & uncover hidden revenue.","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)(["Checkout","AB_Test","Upgrade","Modal"])},Pe={type:2,status:!0,proLink:Object(b.P)(["Checkout","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},Ae={bump:!0},Te=function(e){var t=e.step,n=void 0===t?{}:t,c=n._data,l=void 0===c?{}:c,f=n.tags,p=void 0===f?[]:f,v=(n.experiment,n.substeps),y=(void 0===v?{}:v).wc_order_bump,h=void 0===y?[]:y,g=n.id,_=void 0===g?0:g,E=n.experiment_status,S=n.type,N=e.step,C=e.stepPos,x=void 0===C?0:C,P=(e.title,e.isOBFake),A=Object(I.b)().showSnackbar,T=j.a.getFunnel(),L=Object(le.a)().setStepHeaderData,D=Object(b.C)(),F=Se(Object(r.useState)({}),2),B=F[0],z=F[1],M=l.title,U=l.view,R=l.status,G=void 0===R?0:R,Y=Object(ce.a)().setModalData,V=Object(O.a)(),X=V.startDuplicateStep,oe=V.startDeleteStep,se=V.startAddStep,ue=V.setShowProModal,be=V.setShowProModalText,fe=V.setStepTitle,de=(V.fetch,V.sortSubSteps),me=V.setUpdateFunnel,pe=Object(ae.a)(),Oe=pe.setToggleState,je=(pe.setStepData,Object(ie.a)().setExperimentStatus),ge=location&&location.search?Object(i.parse)(location.search.substring(1)):{},we=(0,Object(k.a)().getGlobalCheckout)(),Ee=we&&we.checkout_id&&Number(we.checkout_id)===N.id,ke=Se(Object(r.useState)(p),2),Te=ke[0],Ie=ke[1],Le=Se(Object(r.useState)(!1),2),De=Le[0],Fe=Le[1],Be=Se(Object(r.useState)(!1),2),ze=Be[0],Me=Be[1],Ue=Se(Object(r.useState)(!1),2),Re=Ue[0],qe=Ue[1],Ge=Se(Object(r.useState)(!1),2),Je=Ge[0],Ye=Ge[1],Ve=Se(Object(r.useState)(!1),2),Qe=Ve[0],$e=Ve[1],We=Se(Object(r.useState)(!1),2),He=We[0],Ke=We[1],Xe=Se(Object(r.useState)({}),2),Ze=Xe[0],et=Xe[1];Object(r.useEffect)((function(){0!==Object(a.size)(h)||"no_bump"in p||Ie(_e(_e({},Te),{},{no_bump:{label:Object(u.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[h.length]);var tt,nt,rt,ct=Object(b.ab)("wc_order_bump"),at={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},it={1:"warning",2:"success",3:"default"},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?it[e]:at[e]},ot=function(e){null!==ct&&se(_e(_e({},ct),{},{parent_id:parseInt(_),is_substep:!0,title:"Order Bump"})),!ct&&ue(!0),!ct&&be(Object(u.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()},st=function(){if(_){fe(Object($.decodeEntities)(M)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(D,"/experiments/").concat(_);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(_)),Object(w.k)({},e)}},ut=function(e){Ke(!0);var t="/funnel-".concat(S,"/save-state/").concat(_,"?funnel_id=").concat(D);o()({path:Object(b.u)(t),method:"POST",data:{status:!Number(G)}}).then((function(t){t.success?(Oe(!Number(G)),Ke(!1),$e(!1),Ye(!1),function(e,t){var n=null==T?void 0:T.steps.map((function(n){if(n.id===_){var r=_e(_e({},n._data),{},{status:e?"1":"0"});return _e(_e({},n),{},{_data:r,experiment_status:t?"3":n.experiment_status})}return n}));T.steps=n;var r=JSON.parse(JSON.stringify(T));me(r)}(Number(t.step_data.status),e),et({}),A(Object(u.__)("Changes Saved","funnel-builder"))):(Oe(Number(G)),Ke(!1),$e(!1),Ye(!1))})).catch((function(e){console.log(e),Oe(Number(G)),A("Status Updation Failed")}))},bt=function(e,t){var n=[];"up"===e?n=de(_,"wc_order_bump",t,t-1):"down"===e&&(n=de(_,"wc_order_bump",t,t+1)),o()({path:Object(b.u)("/funnels/steps/order/save/".concat(_,"?type=wc_order_bump")),method:"POST",data:{order:n.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))},ft=function(e,t){if(qe(!0),(e=e.trim())===M&&(null==l?void 0:l.post_name)===t)Me(!1),qe(!1);else{fe(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');o()({path:Object(b.u)("/funnel-".concat(S,"/save-state/").concat(_,"?funnel_id=").concat(D)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Me(!1),qe(!1),function(e,t,n){var r=T.steps.map((function(r){return r.id===Number(_)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));T.steps=r;var c=JSON.parse(JSON.stringify(T));me(c)}(e.step_data.title,t,e.step_data.view_link),A(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),fe(M),A(Object(u.__)("Title Updation Failed","funnel-builder"))}))}},dt=Object(I.a)(),mt=dt.isProFeatureLocked,pt=dt.isBasicFeatureLocked;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(D,"wc_checkout",N.id),onClick:function(e){e.preventDefault(),L("checkout",_,"",{title:M,view_link:U,status:1===Number(G),experiment_status:E}),Object(w.k)({page:"bwf",path:Object(b.V)(D,"wc_checkout",N.id,"",!1)},"/",{})}},Object($.decodeEntities)(M)," ")),Object(a.size)(p)>0&&Object.keys(Te).map((function(e){return("no_bump"!==e||0===Object(a.size)(h))&&"global_checkout"!==e&&Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e?(L("checkout",_,"",{title:M,view_link:U,status:1===Number(G),experiment_status:E}),Object(w.k)({},Te[e].edit,ge)):"no_bump"===e&&(mt?z(Ae):ot(t))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+Te[e].label_class},Te[e].label))})),Ee&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-cursor-text"},Object(r.createElement)("div",{className:"bwf-st-c-badge-small bwf-st-c-badge-yellow"},Object(u.__)("Global Checkout","funnel-builder"))),!Object(a.isEmpty)(E)&&"4"!==E&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Ne&&!mt?Ce?(je(E),st()):Fe(!0):z(xe)}},Object(r.createElement)(Z.c,{content:(tt=E,rt="warning"===(nt=lt(E,!0))?"#B68F40":"success"===nt?"#09B29C":"default"===nt?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:rt}),Object(r.createElement)("span",{className:"".concat(void 0!==rt?"bwf-mr-4":"")},lt(tt)))),type:lt(E,!0)})),!(G&&1===parseInt(G))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),className:"bwf-cursor-default",type:"warning"})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!mt&&Ne?Ce?(je(E),st()):Fe(!0):z(xe)},title:"A/B Test Step",className:"bwf-list-btn"},Object(r.createElement)(m.a,{icon:mt?"king":"experiment",width:"16",height:"16",color:mt?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:Object($.decodeEntities)(U),title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Me(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Edit","funnel-builder")))),!(G&&1===parseInt(G))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{et({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(M)),"funnel-builder")))}),ut()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(G)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(E)?Ye(!0):$e(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Draft","funnel-builder")))),!Object(b.fb)()&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){pt?z(Pe):(t(),X(N,x+1))}},Object(r.createElement)(W.a,{justify:"space-between"},Object(r.createElement)(W.c,null,Object(u.__)("Duplicate","funnel-builder")),pt&&Object(r.createElement)(W.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Y({title:M}),oe(N,x)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!mt})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{className:"bwf-cursor-default",content:Object(b.nb)(S)}))),B.status&&Object(r.createElement)(q.a,{isOpen:B.status,onRequestClose:function(){return z({status:!1})},modalContent:B,type:B.type}),De&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return Fe(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Oops it seems old version of Experiments is activated.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{variant:"primary",onClick:function(){return Fe(!1)}},Object(u.__)("OK","funnel-builder")))),null!==ct&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(h)>0&&h.map((function(e,t){return Object(r.createElement)(ve,{key:t,bump:e,checkoutStep:N,checkoutPos:x,stepPos:t,total:Object(a.size)(h),view:Object($.decodeEntities)(U),onSortStart:bt})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){mt?z(Ae):ot(e)}},mt&&Object(r.createElement)(m.a,{icon:"king",color:J.NOTICE_YELLOW,size:20}),Object(u.__)("Add Order Bump","funnel-builder"))))),P&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(Q,{type:"order_bump",onClick:function(){return ue(!0)},modalContent:{title:Object(u.__)("Order Bump","funnel-builder"),content:{benefits:[Object(u.__)("Boost your sales effortlessly with the Order Bumps. Let users add products with just one click on checkout page.","funnel-builder")]},image:Object(b.O)()+"order-bump.png",proLink:Object(b.P)(["Order","Bump","Upgrade","Modal"])}}))),ze&&Object(r.createElement)(ye.a,{pageUrl:null==l?void 0:l.view_link,pageUrlSlug:null==l?void 0:l.post_name,renameTitle:"Step",title:Object($.decodeEntities)(M),onclose:function(){return Me(!1)},updateDetail:function(e,t){return ft(e,t)},isLoading:Re}),Qe&&Object(r.createElement)(ne.a,{isPublishLoading:He,onAction:function(){return ut()},onclose:function(){return $e(!1)}}),Je&&Object(r.createElement)(te.a,{isPublishLoading:He,onAction:function(){ut(!0)},onclose:function(){return Ye(!1)}}),B.bump&&Object(r.createElement)(he.a,{isOpen:B.bump,onRequestClose:function(){return z({status:!1})}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",Ze.className),confirmText:Ze.confirmText,confirmButtonText:Ze.buttonConfirm,cancelButtonText:Ze.buttonCancel,onConfirm:Ze.onConfirm,isLoading:Ze.loading,successMessage:Ze.success,errorMessage:Ze.error,content:Ze.content,onRequestClose:function(){return et({status:!1})},modalTitle:Ze.modalTitle,isOpen:Ze.status,closeIcon:Ze.closeIcon}))};function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Me=window.wffn.is_ab_experiment,Ue=window.wffn.is_ab_experiment_support,Re={status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)(["Offer","AB_Test","Upgrade","Modal"])},qe={type:2,status:!0,proLink:Object(b.P)(["Offer","Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")},Ge=function(e){var t,n,c,l=e.offer,f=l._data,p=void 0===f?{}:f,v=l.tags,y=(l.experiment,l.experiment_status),h=e.offer,g=e.upsellStep,_=e.upsellPos,E=e.stepPos,S=e.view,k=e.total,N=e.onSortStart,C=p.title,x=p.status,P=h.id,A=void 0===P?"":P,T=Object(b.C)(),L=j.a.getFunnel(),D=Object(ce.a)().setModalData,F=Be(Object(r.useState)(!1),2),B=F[0],z=F[1],M=Be(Object(r.useState)({}),2),U=M[0],R=M[1],G=Be(Object(r.useState)(!1),2),Y=G[0],V=G[1],Q=Be(Object(r.useState)(!1),2),X=Q[0],oe=Q[1],se=Be(Object(r.useState)(!1),2),ue=se[0],be=se[1],fe=Be(Object(r.useState)(!1),2),de=fe[0],me=fe[1],pe=Be(Object(r.useState)(!1),2),Oe=pe[0],je=pe[1],ve=Be(Object(r.useState)({}),2),he=ve[0],ge=ve[1],we=Object(I.a)("ul").isExpired,_e=Object(I.a)(),Ee=_e.isProFeatureLocked,Se=_e.isBasicFeatureLocked,ke=Object(O.a)(),Ne=ke.startDuplicateStep,Ce=ke.startDeleteStep,xe=ke.setStepTitle,Pe=ke.setUpdateFunnel,Ae=Object(ae.a)(),Te=Ae.setToggleState,Ie=Ae.setSubStep,Le=Object(ie.a)().setExperimentStatus,Fe=Object(le.a)().setStepHeaderData,ze=location&&location.search?Object(i.parse)(location.search.substring(1)):{},Ge=Object(I.b)().showSnackbar,Je=function(){if(h.hasOwnProperty("id")&&h.id){xe(Object($.decodeEntities)(C)+Object(u.__)(" A/B Test"));var e="/funnels/".concat(T,"/experiments/").concat(h.id);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(h.id)),Object(w.k)({},e)}},Ye={1:Object(u.__)("A/B Test Draft"),2:Object(u.__)("A/B Test Running"),3:Object(u.__)("A/B Test Paused")},Ve={1:"warning",2:"success",3:"default"},Qe=function(e){je(!0);var t="/funnel-".concat("offer","/save-state/",h.id,"?funnel_id=").concat(T);o()({path:Object(b.u)(t),method:"POST",data:{status:!Number(x)}}).then((function(t){t.success?(Te(!Number(x)),je(!1),me(!1),be(!1),function(e,t){var n=Object(a.cloneDeep)(null==L?void 0:L.steps).map((function(n){return parseInt(n.id)===parseInt(g.id)&&(n.substeps.offer=n.substeps.offer.map((function(n){return parseInt(n.id)===parseInt(A)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));L.steps=n;var r=JSON.parse(JSON.stringify(L));Pe(r)}(Number(x),e),ge({}),Ge(Object(u.__)("Changes Saved","funnel-builder"))):(Te(Number(x)),je(!1),me(!1),be(!1))})).catch((function(e){console.log(e),Te(Number(x)),Ge("Status Updation Failed")}))},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ve[e]:Ye[e]},We=function(e,t){if(oe(!0),(e=e.trim())===C&&(null==p?void 0:p.post_name)===t)V(!1),oe(!1);else{xe(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');o()({path:Object(b.u)("/funnel-".concat("offer","/save-state/",h.id,"?funnel_id=").concat(T)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);V(!1),oe(!1),function(e,t,n,r){var c=L.steps.map((function(c){if(c.id===Number(e)){var a=c.substeps.offer.map((function(e){if(e.id===h.id){var c=De(De({},e._data),{},{title:t,post_name:n,view_link:r});return De(De({},e),{},{_data:c})}return e}));return c.substeps.offer=a,c}return c}));L.steps=c;var a=JSON.parse(JSON.stringify(L));Pe(a)}(e.step_data.upsell_id,e.step_data.title,t,e.step_data.view_link),Ge(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),xe(C),Ge("Title Updation Failed")}))}};return Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===E?"is-disabled":"",onClick:function(){return N("up",E)},title:"Click here to move up"},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:E===k-1?"is-disabled":"",onClick:function(){return N("down",E)},title:"Click here to move down"},Object(r.createElement)(m.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(T,"offer",g.id,h.id),onClick:function(e){e.preventDefault(),Fe("offer",A,A,{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(w.k)({page:"bwf",path:Object(b.V)(T,"offer",g.id,h.id,!1)},"/",{})}},Object($.decodeEntities)(C))),we?Object(r.createElement)(Z.c,{content:Object(u.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(a.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"===e&&(Fe("offer",A,A,{title:C,view_link:S,status:1===Number(x),experiment_status:y}),Object(w.k)({},v[e].edit,ze))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(a.isEmpty)(y)&&"4"!==y&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Me&&!Ee?Ue?(Ie({step:"offer",parentId:g.id}),Le(y),Je()):z(!0):R(Re)}},Object(r.createElement)(Z.c,{content:(t=y,c="warning"===(n=$e(y,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:c}),Object(r.createElement)("span",{className:"".concat(void 0!==c?"bwf-mr-4":"")},$e(t)))),type:$e(y,!0)})),!(x&&1===parseInt(x))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!Ee&&Me?(Le(y),Ue?(Ie({step:"offer",parentId:g.id}),Je()):z(!0)):R(Re)},title:"A/B Test Step",className:"bwf-list-btn"},Object(r.createElement)(m.a,{icon:Ee?"king":"experiment",width:"16",height:"16",color:Ee?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:null==p?void 0:p.view,title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),V(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Edit","funnel-builder")))),!(x&&1===parseInt(x))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{ge({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(C)),"funnel-builder")))}),Qe()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(x)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(y)?be(!0):me(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){Se?R(qe):(t(),Ne(De(De({},h),{},{type:"offer"}),0,g))}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Duplicate","funnel-builder")),Se&&Object(r.createElement)(W.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),D({title:C}),Ce(De(De({},h),{},{type:"offer"}),E,De(De({},g),{},{stepPos:_}))}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-step-type bwf-step-type-ob"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(b.nb)("offer"),className:"bwf-cursor-default"}))),B&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return z(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(u.__)("Oops it seems old version of Experiments is activated.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel."))),Object(r.createElement)("div",{className:"bwf_clear_30"})),U.status&&Object(r.createElement)(q.a,{isOpen:U.status,onRequestClose:function(){return R({status:!1})},modalContent:U,type:U.type}),Y&&Object(r.createElement)(ye.a,{pageUrl:null==p?void 0:p.view_link,pageUrlSlug:null==p?void 0:p.post_name,renameTitle:"Step",title:Object($.decodeEntities)(C),onclose:function(){return V(!1)},updateDetail:function(e,t){return We(e,t)},isLoading:X}),de&&Object(r.createElement)(ne.a,{isPublishLoading:Oe,onAction:function(){return Qe()},onclose:function(){return me(!1)}}),ue&&Object(r.createElement)(te.a,{isPublishLoading:Oe,onAction:function(){Qe(!0)},onclose:function(){return be(!1)}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",he.className),confirmText:he.confirmText,confirmButtonText:he.buttonConfirm,cancelButtonText:he.buttonCancel,onConfirm:he.onConfirm,isLoading:he.loading,successMessage:he.success,errorMessage:he.error,content:he.content,onRequestClose:function(){return ge({status:!1})},modalTitle:he.modalTitle,isOpen:he.status,closeIcon:he.closeIcon}))};function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Je(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return We(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?We(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var He=window.wffn.is_ab_experiment,Ke=window.wffn.is_ab_experiment_support,Xe=function(e){return{status:!0,title:Object(u.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(u.__)("Increased Conversion Rates","funnel-builder"),Object(u.__)("Greater Return on Ad Spend","funnel-builder"),Object(u.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)([e.replace(" ","+"),"AB_Test","Upgrade","Modal"])}},Ze={status:!0,title:Object(u.__)("Add Offer","funnel-builder"),proLink:Object(b.P)(["Add","Offer","Upgrade","Modal"])},et=function(e){return{type:2,status:!0,proLink:Object(b.P)([e.replace(" ","+"),"Duplicate","Upgrade","Modal"]),feature:Object(u.__)("Duplicate Step","funnel-builder")}},tt=function(e){var t=e.step,n=void 0===t?{}:t,c=n._data,l=void 0===c?{}:c,f=n.tags,p=void 0===f?[]:f,y=n.type,h=n.substeps,g=(void 0===h?{}:h).offer,_=void 0===g?[]:g,E=(n.experiment,n.experiment_status),S=e.stepPos,k=e.step,N=e.title,C=l.title,x=l.view,P=l.status,A=Object(b.C)(),T=j.a.getFunnel(),L=$e(Object(r.useState)(!1),2),D=L[0],F=L[1],B=$e(Object(r.useState)(p),2),z=B[0],M=B[1],U=$e(Object(r.useState)(!1),2),R=U[0],G=U[1],Y=$e(Object(r.useState)(!1),2),V=Y[0],Q=Y[1],oe=$e(Object(r.useState)(!1),2),se=oe[0],ue=oe[1],be=$e(Object(r.useState)(!1),2),fe=be[0],de=be[1],me=$e(Object(r.useState)(!1),2),pe=me[0],Oe=me[1],je=$e(Object(r.useState)({}),2),ve=je[0],he=je[1],ge=$e(Object(r.useState)({}),2),we=ge[0],_e=ge[1],Ee=Object(I.a)(),Se=Ee.isProFeatureLocked,ke=Ee.isBasicFeatureLocked,Ne=Object(I.a)("ul").isExpired,Ce=Object(O.a)(),xe=Ce.startDuplicateStep,Pe=Ce.startDeleteStep,Ae=Ce.setStepTitle,Te=Ce.sortSubSteps,Ie=Ce.setUpdateFunnel,Le=Object(ae.a)().setToggleState,De=Object(le.a)().setStepHeaderData,Fe=Object(ce.a)().setModalData,Be=Object(v.a)(),ze=Be.setActiveGroup,Me=Be.setImportOffer,Ue=Object(ie.a)().setExperimentStatus,Re=Object(I.b)().showSnackbar,qe=location&&location.search?Object(i.parse)(location.search.substring(1)):{},Je=function(){if(k&&k.hasOwnProperty("id")&&k.id){Ae(Object($.decodeEntities)(C)+Object(u.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(A,"/experiments/").concat(k.id);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(k.id)),Object(w.k)({},e)}},Ye=function(e){Oe(!0);var t="/funnel-".concat(y,"/save-state/").concat(k.id,"?funnel_id=").concat(A);o()({path:Object(b.u)(t),method:"POST",data:{status:!Number(P)}}).then((function(t){t.success?(Le(!Number(P)),Oe(!1),de(!1),ue(!1),function(e,t,n){var r=null==T?void 0:T.steps.map((function(r){if(r.id===k.id){r.experiment_status=n;var c=Ve(Ve({},r._data),{},{status:e?"1":"0",experiment_status:t?"3":r.experiment_status});return Ve(Ve({},r),{},{_data:c})}return r}));T.steps=r;var c=JSON.parse(JSON.stringify(T));Ie(c)}(Number(t.step_data.status),e,t.step_data.experiment_status),he({}),Re(Object(u.__)("Changes Saved","funnel-builder"))):(Le(Number(P)),Oe(!1),de(!1),ue(!1))})).catch((function(e){console.log(e),Le(P),Re("Status Updation Failed")}))},Qe={1:Object(u.__)("A/B Test Draft","funnel-builder"),2:Object(u.__)("A/B Test Running","funnel-builder"),3:Object(u.__)("A/B Test Paused","funnel-builder")},We={1:"warning",2:"success",3:"default"},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?We[e]:Qe[e]};Object(r.useEffect)((function(){0!==Object(a.size)(_)||"wc_upsells"!==y||"no_offers"in p?Object(a.size)(_)>0&&M(p):M(Ve(Ve({},z),{},{no_offers:{offerlabel:Object(u.__)("No offers","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[_.length]);var nt,rt,ct,at=function(e){e.preventDefault(),ze("upsell"),Me({parent_id:parseInt(k.id),parent_title:k._data.title}),Object(w.k)({importType:"step"})},it=function(e,t){if(Q(!0),(e=e.trim())!==C||(null==l?void 0:l.post_name)!==t&&"wc_upsells"!=y){Ae(e);var n='{"title":"'.concat(e,'","slug":"').concat("wc_upsells"==y?x.match(/([^\/]*)\/*$/)[1]:t,'"}');o()({path:Object(b.u)("/funnel-".concat(y,"/save-state/").concat(k.id,"?funnel_id=").concat(A)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);G(!1),Q(!1),function(e,t,n){var r=T.steps.map((function(r){return r.id===Number(k.id)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));T.steps=r;var c=JSON.parse(JSON.stringify(T));Ie(c)}(e.step_data.title,t,e.step_data.view_link),Re(Object(u.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Ae(C),Re("Title Updation Failed")}))}else G(!1),Q(!1)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(A,y,k.id),className:"bwf-card-action",onClick:function(e){e.preventDefault(),De(Object(b.W)(y),k.id,"",{title:C,view_link:x,status:1===Number(P),experiment_status:E}),Object(w.k)({page:"bwf",path:Object(b.V)(A,y,k.id,"",!1)},"/",{})}},Object($.decodeEntities)(C))),"wc_upsells"===y&&Ne?Object(r.createElement)(Z.c,{content:Object(u.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(a.size)(z)>0&&Object.keys(z).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e||"has_rules"===e?(De(Object(b.W)(y),k.id,"",{title:C,view_link:x,status:1===Number(P),experiment_status:E}),Object(w.k)({},z[e].edit,qe)):"no_offers"===e&&at(t)}},Object(r.createElement)("div",{className:d()("bwf-st-c-badge-small",z[e].label_class)},z[e].hasOwnProperty("offerlabel")?z[e].offerlabel:z[e].label))})),!Object(a.isEmpty)(E)&&"4"!==E&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){!Se&&He?Ke?(Ue(E),Je()):F(!0):_e(Xe)}},Object(r.createElement)(Z.c,{content:(nt=E,ct="warning"===(rt=tt(E,!0))?"#B68F40":"success"===rt?"#09B29C":"default"===rt?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:ct}),Object(r.createElement)("span",{className:"".concat(void 0!==ct?"bwf-mr-4":"")},tt(nt)))),type:tt(E,!0)})),!(P&&1===parseInt(P))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(u.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!Se&&He?Ke?(Je(),Ue(E)):F(!0):_e(Xe(N))},title:"A/B Test Step",className:"bwf-list-btn ".concat("wc_upsells"===y?"bwf-visibility-hidden":"")},Object(r.createElement)(m.a,{icon:Se?"king":"experiment",width:"16",height:"16",color:Se?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(u.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:Object($.decodeEntities)(x),title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(m.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(u.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action is-ellipsis-menu"},Object(r.createElement)(H.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),G(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Edit","funnel-builder")))),!(P&&1===parseInt(P))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{he({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(u.__)("Please wait! Publishing ".concat(Object($.decodeEntities)(C)),"funnel-builder")))}),Ye()}catch(e){console.log(Object(u.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Publish","funnel-builder")))),["1",1].includes(P)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(E)?ue(!0):de(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){ke?_e(et(N)):(t(),xe(k,S+1))}},Object(r.createElement)(W.a,{justify:"space-between"},Object(r.createElement)(W.c,null,Object(u.__)("Duplicate","funnel-builder")),ke&&Object(r.createElement)(W.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Fe({title:C}),Pe(k,S)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(u.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!Se})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{className:"bwf-cursor-default",content:"wc_upsells"===y?Object(u.__)("Upsell","funnel-builder"):Object(b.nb)(y)}))),we.status&&Object(r.createElement)(q.a,{isOpen:we.status,onRequestClose:function(){return _e({status:!1})},modalContent:we,type:we.type}),D&&Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return F(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Oops it seems old version of Experiments is activated."))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(u.__)("Please deactivate, You won't loose existing experiments for the funnel.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(s.Button,{variant:"primary",onClick:function(){return F(!1)}},Object(u.__)("OK")))),"wc_upsells"==y&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(_)>0&&_.map((function(e,t){return Object(r.createElement)(Ge,{key:t,offer:e,upsellStep:k,upsellPos:S,stepPos:t,total:Object(a.size)(_),view:Object($.decodeEntities)(x),onSortStart:function(e,t){return function(e,t,n){var r=[];"up"===t?r=Te(e,"offer",n,n-1):"down"===t&&(r=Te(e,"offer",n,n+1)),o()({path:Object(b.u)("/funnels/steps/order/save/".concat(e,"?type=offer")),method:"POST",data:{order:r.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))}(k.id,e,t)}})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){Ne?_e(Ze):at(e)}},Ne&&Object(r.createElement)(m.a,{icon:"king",color:J.NOTICE_YELLOW,size:20}),Object(u.__)("Add Offer","funnel-builder"))))),R&&("wc_upsells"==y?Object(r.createElement)(X.a,{renameTitle:"Edit Details",title:Object($.decodeEntities)(C),onclose:function(){return G(!1)},updateTitle:function(e){return it(e)},isLoading:V}):Object(r.createElement)(ye.a,{pageUrl:null==l?void 0:l.view_link,pageUrlSlug:null==l?void 0:l.post_name,renameTitle:"Step",title:Object($.decodeEntities)(C),onclose:function(){return G(!1)},updateDetail:function(e,t){return it(e,t)},isLoading:V})),fe&&Object(r.createElement)(ne.a,{isPublishLoading:pe,onAction:function(){return Ye()},onclose:function(){return de(!1)}}),se&&Object(r.createElement)(te.a,{isPublishLoading:pe,onAction:function(){Ye(!0)},onclose:function(){return ue(!1)}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",ve.className),confirmText:ve.confirmText,confirmButtonText:ve.buttonConfirm,cancelButtonText:ve.buttonCancel,onConfirm:ve.onConfirm,isLoading:ve.loading,successMessage:ve.success,errorMessage:ve.error,content:ve.content,onRequestClose:function(){return he({status:!1})},modalTitle:ve.modalTitle,isOpen:ve.status,closeIcon:ve.closeIcon}))};function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ot=function(e){var t=e.step,n=void 0===t?{}:t,i=n._data,l=void 0===i?{}:i,o=n.tags,f=void 0===o?[]:o,p=(n.experiment,n.substeps),j=(void 0===p?{}:p).wc_order_bump,v=void 0===j?[]:j,y=n.id,h=void 0===y?0:y,g=(n.experiment_status,e.step),_=e.stepPos,E=void 0===_?0:_,S=e.title,k=e.isOBFake,N=Object(I.a)(),C=N.isProFeatureLocked,x=(N.isExpired,Object(c.useParams)().id,l.title,l.view),P=(l.edit,l.status,Object(ce.a)().setModalData,Object(O.a)()),A=P.startAddStep,T=P.setShowProModal,L=P.setShowProModalText,D=P.setShowAddStepModal,F=it(Object(r.useState)({}),2),B=F[0],z=F[1],M=it(Object(r.useState)(f),2),U=M[0],R=M[1];Object(r.useEffect)((function(){0!==Object(a.size)(v)||"no_bump"in f||R(ct(ct({},U),{},{no_bump:{label:Object(u.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[v.length]);var q=Object(b.ab)("wc_order_bump");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{style:{color:"#353030"}},Object(u.__)("No Checkout Created","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("span",{className:"bwf-card-action",style:{minWidth:"110px"}}),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)(s.Button,{isSecondary:!0,className:"bwf-btn-small",onClick:function(){Object(w.k)({importType:"step"}),D(!0)}},Object(u.__)("Create Checkout","funnel-builder")))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!C})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-st-c-badge-small bwf-st-c-badge-gray bwf-cursor-text"},S))),null!==q&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(a.size)(v)>0&&v.map((function(e,t){return Object(r.createElement)(ve,{key:t,bump:e,checkoutStep:g,checkoutPos:E,stepPos:t,view:Object($.decodeEntities)(x)})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(s.Button,{isSecondary:!0,onClick:function(e){C?z({bump:!0}):function(e){null!==q&&A(ct(ct({},q),{},{parent_id:parseInt(h),is_substep:!0,title:Object(u.__)("Order Bump","funnel-builder")})),!q&&T(!0),!q&&L(Object(u.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()}(e)}},C&&Object(r.createElement)(m.a,{icon:"king",color:J.NOTICE_YELLOW,size:20}),Object(u.__)("Add Order Bump","funnel-builder"))))),k&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(Q,{type:"order_bump",onClick:function(){return T(!0)},modalContent:{title:Object(u.__)("Order Bump","funnel-builder"),content:{benefits:[Object(u.__)("Eye-catching bump styles","funnel-builder"),Object(u.__)("Targeted offers based on cart contents","funnel-builder"),Object(u.__)("Increased product discoverability","funnel-builder")]},image:Object(b.O)()+"order-bump.png",proLink:Object(b.P)(["Order","Bump","Upgrade","Modal"])}}))),B.bump&&Object(r.createElement)(he.a,{isOpen:B.bump,onRequestClose:function(){return z({status:!1})}}))},st=["step","step","provided","isDragging"];function ut(){return(ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var bt=Object(R.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-d-icon-drag"},Object(r.createElement)(m.a,{icon:"ul",size:"20"}))})),ft=function(e){var t=e.step,n=void 0===t?{}:t,c=n.type,i=n.experiment,l=void 0===i?[]:i,o=e.step,s=e.provided,f=e.isDragging,m=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,st),p=Object(b.Y)(c);if(!o)return null;return Object(r.createElement)("div",ut({className:d()("bwf-st-c-wrap",{"is-dragging":f}),ref:s.innerRef},s.draggableProps),Object(r.createElement)("div",{className:"bwf-st-c"},0<Object(a.size)(l)&&Object(r.createElement)("div",{className:"bwf-ab-tag"},Object(r.createElement)("div",{className:"bwf-ab--text"},Object(u.__)("A/B","funnel-builder"))),Object(r.createElement)(bt,{provided:s}),function(){switch(c){case"wc_checkout":return Object(r.createElement)(Te,ut({step:o,title:null==p?void 0:p.title},m));case"wc_native":return Object(r.createElement)(ot,ut({step:o,title:Object(u.__)("Checkout Page","funnel-builder")},m));default:return Object(r.createElement)(tt,ut({step:o,title:null==p?void 0:p.title},m))}}()))},dt=Object(R.b)(ft);function mt(){return(mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var pt=Object(R.a)((function(e){var t=e.items,n=e.stepPromotions,c=e.provided,a=Object(I.a)().isLite,i=Object(I.a)("ul").isLite,l=!1,o=!1;return Object(r.createElement)("div",mt({className:"bwf-f-steps",ref:c.innerRef},c.droppableProps),t.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-st-c-".concat(t)},Object(r.createElement)(dt,{key:"item-".concat(e.id),index:t,step:e,id:e.id,stepPos:t,isOBFake:!(!["wc_checkout","wc_native"].includes(e.type)||"yes"===n.bump)&&!(o||!a||Object(b.ab)("wc_order_bump")||(o=!0,0))}),["wc_checkout","wc_native"].includes(e.type)&&"yes"!==n.upsell&&(!l&&i?(l=!0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Q,{modalContent:{title:Object(u.__)("One Click Upsell Offer","funnel-builder"),content:{benefits:[Object(u.__)("Grab buyer's attention and make post purchase One Click Upsells based on items purchased. Let them accept offers with a single click.","funnel-builder")]},image:Object(b.O)()+"upsell.png",proLink:Object(b.P)(["One","Click","Upsell","Upgrade","Modal"])}}))):""))})))})),Ot=function(){return Object(r.createElement)("div",{className:"bwf-steps-container"},Object(r.createElement)("div",{className:"bwf-f-steps is-placeholder"},Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})))))))},jt=n(289);n(795),n(22);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kt=function(e){var t=_t(Object(r.useState)([]),2),n=t[0],c=t[1],i=_t(Object(r.useState)([]),2),l=i[0],f=i[1],d=_t(Object(r.useState)([]),2),p=d[0],v=d[1],y=_t(Object(r.useState)(!1),2),g=y[0],w=y[1],_=_t(Object(r.useState)(!1),2),E=_[0],S=_[1],k=_t(Object(r.useState)(!0),2),N=k[0],C=k[1],x=_t(Object(r.useState)([]),2),P=x[0],A=x[1],T=e.isOpen,L=e.onRequestClose,D=e.funnelID,F=(e.stepsListTypes,Object(I.b)().showSnackbar),B=j.a.getFunnel(),z=(j.a.getFunnelSteps(),Object(O.a)().setUpdateFunnel);Object(r.useEffect)((function(){var e=[];P.map((function(t){[0,"0"].includes(t.status)&&e.push({type:t.type,id:Number(t.id)}),Object(a.size)(t.subStep)&&t.subStep.map((function(n){[0,"0"].includes(n.status)&&e.push({type:n.type,id:Number(n.id),subParentId:Number(t.id)})}))})),v(e)}),[P]);Object(r.useEffect)((function(){if(Object(a.size)(B.steps)){var e=B.steps.map((function(e){var t,n,r,c,i;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(c=r.substeps)||void 0===c||null===(c=c.wc_order_bump)||void 0===c?void 0:c.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(i=r.substeps)||void 0===i||null===(i=i.offer)||void 0===i?void 0:i.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return[0,"0"].includes(e.status)||Object(a.size)(e.subStep)&&Object(a.size)(n)?e:void 0}));A(e)}}),[]);var M=function(e,t){c((function(e){return[].concat(yt(e),[t])}));var n="";n="/funnel-".concat(e,"/save-state/").concat(t,"?funnel_id=").concat(D),o()({path:Object(b.u)(n),method:"POST",data:{status:!0}}).then((function(e){var n,r;e.success?(c((function(e){return[e.filter((function(e){return e!==t}))]})),f((function(e){return[].concat(yt(e),[t])})),e.step_data.hasOwnProperty("upsell_id")&&(n=e.step_data.upsell_id,r="offer"),e.step_data.hasOwnProperty("checkout_id")&&(n=e.step_data.checkout_id,r="wc_order_bump"),function(e,t,n,r){var c=null==B?void 0:B.steps.map((function(c){if(n&&c.id===Number(n)){var a=c.substeps[r].map((function(e){var n=gt(gt({},e._data),{},{status:t.includes(e.id)?"1":e._data.status});return gt(gt({},e),{},{_data:n})})),i=gt(gt({},c.substeps),{},wt({},r,a));return gt(gt({},c),{},{substeps:i})}if(t.includes(c.id)){var l=gt(gt({},c._data),{},{status:e?"1":"0"});return gt(gt({},c),{},{_data:l})}return c}));B.steps=c;var a=JSON.parse(JSON.stringify(B));z(a)}(!0,[t],n,r)):(e.message||e.msg)&&F(e.message||e.msg)})).catch((function(e){console.log(e),F(Object(u.__)("Status Updation Failed","funnel-builder"))}))},U=function(){w(!0);var e="/funnels/".concat(D,"/publish-all");o()({path:Object(b.u)(e),method:"POST",data:{steps:JSON.stringify(p)}}).then((function(e){e.status?(Object(a.size)(e.steps)&&p.map((function(e){var t=null==B?void 0:B.steps.map((function(t){if(t.id===e.subParentId){var n=t.substeps["Offer"===e.type?"offer":"wc_order_bump"].map((function(t){var n=gt(gt({},t._data),{},{status:Number(e.id)===Number(t.id)?"1":t._data.status});return gt(gt({},t),{},{_data:n})})),r=gt(gt({},t.substeps),{},wt({},"Offer"===e.type?"offer":"wc_order_bump",n));return gt(gt({},t),{},{substeps:r})}if(Number(e.id)===Number(t.id)){var c=gt(gt({},t._data),{},{status:"1"});return gt(gt({},t),{},{_data:c})}return t}));B.steps=t;var n=JSON.parse(JSON.stringify(B));z(n)})),w(!1),S(!0)):(e.message||e.msg)&&F(e.message||e.msg)})).catch((function(e){console.log(e),F(Object(u.__)("Status Updation Failed","funnel-builder"))}))};return Object(r.useEffect)((function(){var e=0;P.map((function(t){[0,"0"].includes(t.status)&&(e+=1),t.subStep.map((function(t){[0,"0"].includes(t.status)&&(e+=1)}))})),e&&e<2&&C(!1)}),[P,B]),T&&Object(r.createElement)("div",null,Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-publish-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!0,onRequestClose:function(){return L()}},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(u.__)("Publish Steps","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},!E&&N&&Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return U()}},Object(r.createElement)("span",{style:gt({},g&&{visibility:"hidden"})},Object(u.__)("Publish All","funnel-builder")),g&&Object(r.createElement)(h.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(u.__)("Close"),onClick:function(){return L()}},Object(r.createElement)(m.a,{icon:"close",height:20,width:20})))),Object(r.createElement)("div",{className:"bwf-info"},Object(u.__)("Following steps need to publish to make accessible to your customers:","funnel-builder")),P.map((function(e,t){var c;return Object(r.createElement)("div",{key:t,className:"bwf-draft-list"},Object(r.createElement)("div",{className:"bwf-title"},Object($.decodeEntities)(e.title)),Object(r.createElement)(Z.c,{content:"wc_upsells"===e.type?Object(u.__)("One Click Upsell","funnel-builder"):Object(b.nb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary components-button bwf-ripple ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(h.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||l.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(m.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(u.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!l.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(u.__)("Publish","funnel-builder")),Object(a.size)(e.subStep)&&Object(a.size)(null==e||null===(c=e.subStep)||void 0===c?void 0:c.filter((function(e){return[0,"0"].includes(e.status)})))?e.subStep.map((function(e,t){if([0,"0"].includes(e.status))return Object(r.createElement)(r.Fragment,{key:t},Object(r.createElement)("div",{className:"bwf-title bwf-sub-step"},Object(r.createElement)("span",null,Object($.decodeEntities)(e.title))),Object(r.createElement)(Z.c,{content:Object(b.nb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary bwf-ripple components-button".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(h.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||l.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(m.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(u.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!l.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary bwf-ripple components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(u.__)("Publish","funnel-builder")))})):null)}))))},Nt=n(156),Ct=n(83),xt=(n(796),n(79));n(754);function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(){At=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,c=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",o=a.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function u(e,t,n,r){var a=t&&t.prototype instanceof O?t:O,i=Object.create(a.prototype),l=new x(r||[]);return c(i,"_invoke",{value:S(e,n,l)}),i}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",d="executing",m="completed",p={};function O(){}function j(){}function v(){}var y={};s(y,i,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(P([])));g&&g!==n&&r.call(g,i)&&(y=g);var w=v.prototype=O.prototype=Object.create(y);function _(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(c,a,i,l){var o=b(e[c],e,a);if("throw"!==o.type){var s=o.arg,u=s.value;return u&&"object"==Pt(u)&&r.call(u,"__await")?t.resolve(u.__await).then((function(e){n("next",e,i,l)}),(function(e){n("throw",e,i,l)})):t.resolve(u).then((function(e){s.value=e,i(s)}),(function(e){return n("throw",e,i,l)}))}l(o.arg)}var a;c(this,"_invoke",{value:function(e,r){function c(){return new t((function(t,c){n(e,r,t,c)}))}return a=a?a.then(c,c):c()}})}function S(t,n,r){var c=f;return function(a,i){if(c===d)throw Error("Generator is already running");if(c===m){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var l=r.delegate;if(l){var o=k(l,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(c===f)throw c=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);c=d;var s=b(t,n,r);if("normal"===s.type){if(c=r.done?m:"suspendedYield",s.arg===p)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(c=m,r.method="throw",r.arg=s.arg)}}}function k(t,n){var r=n.method,c=t.iterator[r];if(c===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var a=b(c,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,p;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function x(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var c=-1,a=function n(){for(;++c<t.length;)if(r.call(t,c))return n.value=t[c],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Pt(t)+" is not iterable")}return j.prototype=v,c(w,"constructor",{value:v,configurable:!0}),c(v,"constructor",{value:j,configurable:!0}),j.displayName=s(v,o,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(E.prototype),s(E.prototype,l,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,c,a){void 0===a&&(a=Promise);var i=new E(u(e,n,r,c),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(w),s(w,o,"Generator"),s(w,i,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function c(r,c){return l.type="throw",l.arg=t,n.next=r,c&&(n.method="next",n.arg=e),!!c}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],l=i.completion;if("root"===i.tryLoc)return c("end");if(i.tryLoc<=this.prev){var o=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(o&&s){if(this.prev<i.catchLoc)return c(i.catchLoc,!0);if(this.prev<i.finallyLoc)return c(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return c(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return c(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var c=this.tryEntries[n];if(c.tryLoc<=this.prev&&r.call(c,"finallyLoc")&&this.prev<c.finallyLoc){var a=c;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,p):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var c=r.arg;C(n)}return c}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function Tt(e,t,n,r,c,a,i){try{var l=e[a](i),o=l.value}catch(e){return void n(e)}l.done?t(o):Promise.resolve(o).then(r,c)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(c.useParams)(),n=t.id,l=t.builder,f=t.filter,d=e.funnelId,p=void 0===d?n:d,y=location&&location.search?Object(i.parse)(location.search.substring(1)):{},h=Object(Nt.a)().resetFlowData,E=Object(Ct.a)().resetCanvasData,S=y.importType,N=Object(O.a)(),C=N.fetch,x=N.sortSteps,P=N.updateFunnelViewLink,A=N.setShowProModal,L=N.setShowAddStepModal,D=N.setIsFunnelEmpty,F=N.setFunnelSteps,B=N.setLoading,z=Object(r.useRef)(!0),R=j.a.getFunnelID,q=j.a.getFunnel,G=j.a.getFunnelStatus,J=j.a.getFunnelLoading,Y=j.a.getFunnelError,V=j.a.getShowProModal,Q=j.a.getShowAddStepModal,$=j.a.getIsFunnelEmpty,W=R(),H=q(),K=(G(),J()),X=Y(),Z=V(),ee=Q(),te=$(),ne=(0,Object(k.a)().getStepPromotion)(),re=Object(ie.a)().setControlTitle,ce=Ft(Object(r.useState)(!1),2),ae=ce[0],le=ce[1],oe=Object(I.b)(),se=oe.showSnackbar,ue=oe.hideSnackbar,be=Ft(Object(r.useState)(!1),2),fe=be[0],de=be[1],me=Ft(Object(r.useState)(!1),2),pe=me[0],Oe=me[1],je=Ft(Object(r.useState)(""),2),ve=je[0],ye=je[1],ge=Ft(Object(r.useState)([]),2),we=ge[0],_e=ge[1],Ee=Ft(Object(r.useState)({}),2),Se=(Ee[0],Ee[1]),ke=Ft(Object(r.useState)([]),2),Ne=ke[0],Ce=ke[1],xe=Object(b.fb)(),Pe=Object(v.a)().setActiveGroup;Object(r.useEffect)((function(){(parseInt(W)!==parseInt(p)||Object(a.isEmpty)(H))&&(B(!0),C(parseInt(p)))}),[]),Object(r.useEffect)((function(){re(null),de(!1)}),[K]);var Ae=function(e,t){return e.filter((function(e){return e.type===t}))},Te=function(){var e="";if(!xe&&!K&&!ae&&H&&H.steps&&H.steps.length&&Array.isArray(H.steps)){var t=Object(a.size)(Ae(H.steps,"wc_checkout")),n=Ae(H.steps,"wc_thankyou"),r=Ae(H.steps,"wc_upsells");t?t&&(function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_upsells"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(H.steps)||function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_thankyou"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(H.steps)?(Object(a.size)(n)&&Object(a.size)(r)?e="".concat(Object(u.__)("Make sure that your <strong>Thank You</strong> step and <strong>One-Click Upsell offers</strong> step are placed below the <strong>checkout</strong> step.","funnel-builder")):Object(a.size)(n)?e="".concat(Object(u.__)("Make sure that your <strong>Thank You</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder")):Object(a.size)(r)&&(e="".concat(Object(u.__)("Make sure that your <strong>One-Click Upsell offers</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder"))),ye(e)):ye("")):function(e){var t=Ae(e,"wc_thankyou"),n=Ae(e,"wc_upsells"),r="";Object(a.size)(t)&&Object(a.size)(n)?r="".concat(Object(u.__)("To trigger <strong>Thank You</strong> and <strong>One Click Upsell offers</strong> steps, you need to create a <strong>Checkout step</strong>.","funnel-builder")):Object(a.size)(t)&&!Object(a.size)(n)?r="".concat(Object(u.__)("To trigger <strong>Thank You</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder")):!Object(a.size)(t)&&Object(a.size)(n)&&(r="".concat(Object(u.__)("To trigger <strong>One Click Upsell offers</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder"))),ye(r)}(H.steps)}};Object(r.useEffect)((function(){"step"!==S&&Te()}),[H,ae,S]),Object(r.useEffect)((function(){return function(){te&&D(!1),ue()}}),[]),Object(r.useEffect)((function(){S&&!xe&&(f?Pe(f):"funnel"!==S||l?"step"===S&&!l&&z.current&&Pe("wc_checkout"):Pe("landing")),z.current&&(z.current=!1)}),[S]);Object(r.useEffect)((function(){if(Object(a.size)(H)){var e,t=null==H||null===(e=H.steps)||void 0===e?void 0:e.map((function(e){var t,n,r,c,i;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(c=r.substeps)||void 0===c||null===(c=c.wc_order_bump)||void 0===c?void 0:c.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(a.size)(null==r?void 0:r.substeps)?null==r||null===(i=r.substeps)||void 0===i||null===(i=i.offer)||void 0===i?void 0:i.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return Object(a.size)(e.subStep)&&Object(a.size)(n)?e.subStep=n:[0,"0"].includes(e.status)?(e.subStep=[],e):void 0})),n=[];t.map((function(e){if("wc_checkout"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_checkout"),"wc_upsells"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_upsells"),"wc_checkout"===e.type&&Object(a.size)(e.subStep)){var t,r=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(a.size)(r)).fill("bump").forEach((function(){n.push("bump")}))}if("wc_upsells"===e.type&&Object(a.size)(e.subStep)){var c,i=null==e||null===(c=e.subStep)||void 0===c?void 0:c.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(a.size)(i)).fill("offer").forEach((function(){n.push("offer")}))}["wc_checkout","wc_upsells"].includes(e.type)||Object(a.size)(e.subStep)||n.push(e.type)}));var r=n.reduce((function(e,t){return Lt(Lt({},e),{},Dt({},t,(e[t]||0)+1))}),{});Ce(n),Se(r),_e(t),h(),E(),pe||F(null==H?void 0:H.steps)}}),[H]);var Ie=function(){var e,t=(e=At().mark((function e(t){var n,r,c;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldIndex,r=t.newIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:return c=x(n,r),le(!0),e.prev=5,e.next=8,o()({path:Object(b.u)("/funnels/".concat(p)),method:"PUT",data:{steps:JSON.stringify(c.map((function(e){return{id:e.id,type:e.type}})))}});case 8:Object(b.fb)()||P(c.length>0?c[0]._data.view:""),se(Object(u.__)("Steps Updated","funnel-builder")),setTimeout((function(){return le(!1)}),2e3),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),x(r,n),Object(b.fb)()||P(c.length>0?c[0]._data.view:""),se(Object(u.__)("Steps Updation Failed","funnel-builder")),setTimeout((function(){return le(!1)}),2e3);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,c){var a=e.apply(t,n);function i(e){Tt(a,r,c,i,l,"next",e)}function l(e){Tt(a,r,c,i,l,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(S&&!xe)return Object(r.createElement)(r.Fragment,null,"funnel"===S?Object(r.createElement)(_.default,{onImportComplete:function(){C(parseInt(p)),delete y.importType,delete y.group,Object(w.k)({},"/funnels/".concat(p),y)}}):Object(r.createElement)(g.a,{onImportComplete:function(){C(parseInt(p)),delete y.importType,delete y.group,Object(w.k)({},"/funnels/".concat(p),y)}}));if(!fe&&!K&&!te&&X)return Object(r.createElement)(xt.a,{errorMessage:X.hasOwnProperty("message")?X.message:Object(u.__)("Unable to load Funnel Steps","funnel-builder")});var Le=[{type:"icon",data:{content:Object(r.createElement)(m.a,{icon:"zero-step-alt",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(u.__)("Start building your funnel","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(u.__)("Add a new step or pick a pre-built funnel","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(u.__)("Add New Step","funnel-builder"),proCheck:!1,onClick:function(){Object(w.k)({importType:"step"}),Pe("landing"),xe&&L(!0)}},{text:Object(u.__)("View Funnels","funnel-builder"),proCheck:!1,props:{isPrimary:!1,isSecondary:!0},onClick:function(){xe?(L(!0),Object(w.k)({importType:"wc_checkout"})):Object(w.k)({importType:"funnel"})}}]}}];return!(H&&H.hasOwnProperty("steps")&&Object(a.isArray)(H.steps)&&0!==Object(a.size)(H.steps)||K||fe)?Object(r.createElement)(jt.a,{data:Le}):Object(r.createElement)(r.Fragment,null,fe||K?Object(r.createElement)(Ot,null):Object(r.createElement)(r.Fragment,null,Object(b.fb)()&&Object(a.some)(H.steps,{type:"wc_native"})&&Object(r.createElement)("div",null,Object(a.some)(H.steps,{type:"wc_native"})&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Notice,{status:"warning",isDismissible:!1,className:"bwf-component-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(m.a,{icon:"shield",style:{margin:0}})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(u.__)("You are using the default WooCommerce checkout page. Order bumps, upsell & thank you pages will work with the default checkout page. However, we recommend adding an optimized checkout page from FunnelKit.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf-steps-container"},Object(a.size)(ve)?Object(r.createElement)("div",{className:"bwf-publish-container bwf-no-action",dangerouslySetInnerHTML:{__html:ve}}):null,Object(r.createElement)(pt,{items:H.steps,onSortEnd:Ie,helperClass:"bwf-steps-drag__helper",stepPromotions:ne}))),Object(r.createElement)(M,{funnelId:p}),Object(r.createElement)(U.a,{funnelId:p}),Z&&Object(r.createElement)(he.a,{isOpen:Z,onRequestClose:function(){return A(!1)}}),Object(r.createElement)(T,{query:y,isOpen:ee,setModalOpenState:function(e){L(e)},hasCheckoutStep:H&&H.steps&&Object(a.isArray)(H.steps)&&H.steps.some((function(e){return"wc_checkout"===e.type})),funnelId:p}),pe&&Object(r.createElement)(kt,{isOpen:pe,stepsList:we,funnelID:p,stepsListTypes:Ne,onRequestClose:function(){return Oe(!1)}}))}},289:function(e,t,n){"use strict";var r=n(0),c=n(5),a=n.n(c),i=n(2),l=n(9),o=n(42),s=(n(303),n(6));function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,c=e.className,f=e.center,d=void 0!==f&&f,m=e.isDismissive,p=void 0!==m&&m,O=e.onDismisal,j=void 0===O?function(){}:O,v=e.isProFeatureLocked;if(Object(i.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:a()("bwf-zero-state",c,{"bwf-block-t-center":d})},p&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return j()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(s.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(o.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(o.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(o.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(o.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(s.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(o.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(l.Button,b({isPrimary:!0,key:t,onClick:e.onClick,className:"".concat(e.className," bwf-no-ripple")},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(s.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===u(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},294:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return f}));var r=n(0),c=n(282);function a(){return(a=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e){return function(t){return Object(r.createElement)(c.a,{onDragEnd:function(e){var n=e.destination,r=e.source;if(n){var c=Array.from(t.items),a=i(c.splice(r.index,1),1)[0];c.splice(n.index,0,a),t.onSortEnd&&t.onSortEnd({oldIndex:r.index,newIndex:n.index,items:c})}}},Object(r.createElement)(c.c,{droppableId:"droppable"},(function(n){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(e,a({},n.droppableProps,t,{provided:n})),n.placeholder)})))}},s=["id","index"];function u(){return(u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var b=function(e){return function(t){var n=t.id,a=t.index,i=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(t,s);return Object(r.createElement)(c.b,{draggableId:n.toString(),index:a,key:n},(function(t,n){return Object(r.createElement)(e,u({index:a,provided:t},i,{isDragging:n.isDragging}))}))}},f=function(e){return function(t){var n;return Object(r.createElement)("div",null===(n=t.provided)||void 0===n?void 0:n.dragHandleProps,Object(r.createElement)(e,t))}}},303:function(e,t,n){},346:function(e,t,n){"use strict";var r=n(0),c=n(121),a=n(2),i=n(1),l=n(391),o=n(292),s=n(76),u=n(308);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(o.a)(),n=t.getTemplates,b=t.getBuilders,d=t.getDefaultBuilder,m=t.templateLoading,O=t.getActiveBuilder,j=t.getActiveGroup,v=t.getCurrentTemplate,y=t.getActiveStep,h=t.getActiveSubFilter,g=e.onImportComplete,w=e.isStoreCheckout,_=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,k=e.stepId,N=e.funnelId,C=Object(s.a)(),x=C.setActiveGroup,P=(C.setActiveSubFilter,C.setActiveBuilder),A=C.setCurrentTemplate,T=p(p({wc_checkout:Object(i.__)("Checkout","funnel-builder")},!w&&{landing:Object(i.__)("Sales","funnel-builder")}),{},{upsell:Object(i.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(i.__)("Thank You","funnel-builder")},!w&&{optin:Object(i.__)("Optin","funnel-builder"),optin_ty:Object(i.__)("Optin Confirmation","funnel-builder")}),I=Object(c.useParams)(),L=I.id,D=I.filter,F=I.builder,B=I.templateId,z=f(Object(r.useState)(!1),2),M=z[0],U=z[1],R=n();Object(r.useEffect)((function(){return F&&(x(D),P(F),A({id:B})),function(){x("funnel")}}),[]);var q=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(a.isEmpty)(R)&&!M&&F){var e=R[D][F][B];A({id:B,template:e}),U(!0)}}),[R]);var G=b(),J=d(),Y=O(),V=m(),Q=j(),$=v(),W=(y(),h()),H=function(){var e=J;return Object(a.isEmpty)(Y)||(e=Y),G&&G[Q]&&!G[Q][e]&&(e=G[Q][J]?J:"elementor"),e},K=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&W&&Y?R[t][Y][e].group_type[n||W]:e},X=function(e){return"wc_checkout"===Q?W===e.no_steps:"optin"!==Q||e.group.includes(W)},Z=function(e,t,n){var r="";return"landing"===Q?r="sp":"optin"===Q?r="op":"optin_ty"===Q?r="op-confirmed":"wc_checkout"===Q?r="checkouts":"upsell"===Q?r="offer":"wc_thankyou"===Q&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===Q&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ee=w?"/store-checkout":0===L?"/templates":"/funnels/".concat(L);return Object(r.createElement)(l.a,{filters:u.e,templates:R,activeBuilder:H(),templateCards:function(){if(Object(a.isEmpty)(R)||Object(a.isEmpty)([Q]))return{};var e=H(),t={};return R[Q]&&R[Q][e]&&(t=R[Q][e]),t}(),editors:G,defaultBuilder:J,isTemplateLoading:V,activeTemplateGroup:Q,templateGroup:T,previewData:function(){if(Object(a.isEmpty)(R)||"funnel"===Q)return{};var e={},t=[],n=[];try{var r=H();for(var c in t=[],R[Q][r]){var i=R[Q][r][c];if(!i.build_from_scratch&&X(i)){var l={};if(l.id=c,l.funnel=i.group_type?i.group_type[Object.keys(i.group_type)[0]]:c,l.slug=c,l.name=i.name,l.thumbnail=i.thumbnail,l.template=null==$?void 0:$.id,l.pro=i.pro,l.group_type=i.group_type,l.type=Q,l.preview=null==i?void 0:i.prevslug,t.push(l),i.group_type)Object.values(i.group_type).forEach((function(e){var t=R[Q][r][e];n.push({id:null==t?void 0:t.prevslug,preview:Z(0,t,r)})}));else n.push({id:null==i?void 0:i.prevslug,preview:Z(0,i,r)})}}var o=R[Q][r][K(null==$?void 0:$.id,Q)];e.activeTemplate={thumbnail:K(null==$?void 0:$.id,Q),preview:Z(null==$||$.id,o,r),slug:K(null==$?void 0:$.id,Q),name:null!=$&&$.id?R[Q][r][null==$?void 0:$.id].name:"",pro:null!=$&&$.id?R[Q][r][null==$?void 0:$.id].pro:"",tempPro:null!=$&&$.id?R[Q][r][K(null==$?void 0:$.id,Q,!("wc_checkout"!==Q&&"optin"!==Q||!q($.template))&&q($.template))].pro:"",group:Q,filters:!!o.group_type&&Object.keys(o.group_type),type:Q,funnelGroup:[Q],prevId:o.prevslug},e.thumbnails=t,e.previews=n}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:k&&N?N:w&&_?_:L,onImportComplete:g,templateFilterCheck:function(e,t){return"wc_checkout"===Q?t===e.no_steps:"optin"!==Q||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:W,showDefaultEditorNotice:!1,isStoreCheckout:w,parentRoute:ee,showTemplatesNav:!(k||w&&0===L),urlDependency:S,stepId:k,importApiPrefix:w?"store-checkout":"funnels"})}},361:function(e,t,n){"use strict";var r=n(0),c=n(2),a=n(1),i=n(9),l=n(413),o=n(22),s=n(281),u=n(304),b=n(19);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,d=e.onRequestClose,m=e.onCreationScreen,p=e.creationSuccess,O=e.clearAndCloseEverything,j=e.isBusy,v=e.errors,y=Object(b.a)(),h=y.isProFeatureLocked,g=y.isBasic,w=Object(b.a)("ck").isProFeatureLocked,_=g&&"wc_checkout"===(null==t?void 0:t.type)?w:h,E=f(Object(r.useState)(""),2),S=E[0],k=E[1],N=f(Object(r.useState)(""),2),C=N[0],x=N[1],P=f(Object(r.useState)(null),2),A=P[0],T=P[1],I=f(Object(r.useState)(null!=v?v:{}),2),L=I[0],D=I[1],F=f(Object(r.useState)("new"),2),B=F[0],z=F[1],M=f(Object(r.useState)(!1),2),U=M[0],R=M[1];Object(r.useEffect)((function(){D(v)}),[v]),Object(r.useEffect)((function(){var e;x(null==A||null===(e=A.step)||void 0===e?void 0:e.name),"new"===B&&Object(c.isEmpty)(S.trim())||"existing"===B&&Object(c.isEmpty)(C)?R(!0):R(!1)}),[B,A,S,C]);var q=function(){if(!U){var t=e.errors;A&&A.copyFrom&&!A.step&&(t.copyFrom=Object(a.__)("Copy From: This field is required","funnel-builder")),0===Object(c.size)(t)?n({copyFrom:A&&A.hasOwnProperty("step")?A.step:null,title:"existing"===B?"".concat(C," Copy"):S}):D(t)}};return Object(r.createElement)(r.Fragment,null,L&&Object(c.size)(L)>0&&Object(r.createElement)(u.a,{status:"error",isDismissible:!0,onRemove:function(){return D({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(L).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},L[e])})))),j||!m||p?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){q(),e.preventDefault()}},Object(r.createElement)(s.a,{options:[{value:"new",label:Object(a.__)("Create New","funnel-builder")},{value:"existing",label:Object(a.__)("Clone Existing","funnel-builder"),isPro:_}],selected:B,onChange:function(e){z(e)},className:"bwf-add-bump_radio-items"}),"new"===B?Object(r.createElement)(i.TextControl,{label:Object(a.__)("Name","funnel-builder"),placeholder:Object(a.__)("Enter Name","funnel-builder"),value:S,onChange:function(e){return k(e)}}):null,"existing"===B?Object(r.createElement)(l.a,{step:t,onStepSelected:function(e){return T(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(o.a,{className:"bwf-modal-cancel-btn",onClick:d},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(o.a,{isPrimary:!0,onClick:q,disabled:U,isBusy:j,className:U?"bwf-no-ripple":""},Object(a.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(a.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(o.a,{isPrimary:!0,onClick:function(){d(),O()}},Object(a.__)("OK","funnel-builder")))))}},362:function(e,t,n){"use strict";var r=n(0),c=n(9),a=n(1),i=n(4),l=n(5),o=n.n(l),s=n(6),u=n(11),b=n.n(u),f=n(401),d=n(80);function m(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,l=p(Object(r.useState)({default_css:"",skin_all:{}}),2),u=l[0],O=l[1],j=p(Object(r.useState)(!0),2),v=j[0],y=j[1];return Object(r.useEffect)((function(){b()({path:Object(i.u)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&O({skin_all:e.skin_all,default_css:e.default_css}),y(!1)})).catch((function(e){y(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(c.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(a.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(d.a,{isPrimary:!0,proLink:Object(i.P)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(s.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:o()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},m(new Array(8)).map((function(e,t){return Object(r.createElement)(f.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,u.default_css),Object.keys(u.skin_all).map((function(e){var t=u.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},401:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p}));var r=n(0),c=n(327),a=n(4),i=n(2),l=n(443),o=n(5),s=n.n(o),u={image:l.a},b=function(e,t,n,a){return e.map((function(e,l){return"richeditor"===e.type&&(e.openMergeTagModal=a,e.id="richeditor-".concat(l),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:l},(Object(i.isEmpty)(e.toggler)||f(t,e.toggler,e))&&Object(r.createElement)(c.a,{input:e,formProps:n(e.key),values:t,customMapField:u}))}))},f=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var c=0;c<r.length;c++)if(t.value.indexOf(r[c])>-1){n=!0;break}}else Object(a.v)(r)==Object(a.v)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},d=function(e,t){if(e.selectors&&e.stylekey&&!Object(i.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,c="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(c)):t+="".concat(r,"{").concat(c,"}")}return t},m=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(c).addClass(e.contentClass):jQuery(c).show():e.contentClass?jQuery(c).removeClass(e.contentClass):jQuery(c).hide()}break;case"select":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;e.value&&Object(i.isArray)(e.allClasses)?(jQuery(a).removeClass(e.allClasses),jQuery(a).addClass(e.value)):r=d(e,r)}break;case"color":if(e.selectors){var l=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,o="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(l,"{").concat(o,"}")}if(e.isHover&&e.hoverSelectors){var s=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,u="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(s,"{").concat(u,"}")}break;case"dimension-control":if(e.selectors){var b=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,f="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(b,"{").concat(f,"}"),r+="".concat(b,"{").concat(f,"}")}break;case"box-shadow":if(e.selectors){var m=e.value,p=m.h_offset,O=m.v_offset,j=m.blur,v=m.spread,y=m.color,h=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(i.isEmpty)(p)||Object(i.isEmpty)(O)||Object(i.isEmpty)(j)||Object(i.isEmpty)(v)||Object(i.isEmpty)(y))){var g="".concat(e.stylekey,":").concat(p,"px ").concat(O,"px ").concat(j,"px ").concat(v,"px ").concat(y,";");r+="".concat(h,"{").concat(g,"}")}}break;case"image":if(e.selectors){var w,_,E,S,k,N,C=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(i.isEmpty)(null==e||null===(w=e.value)||void 0===w?void 0:w.custom_url))if(jQuery(C+" img").length)jQuery(C+" img").attr("src",null==e||null===(k=e.value)||void 0===k?void 0:k.image_url);else jQuery(C).find("svg").remove(),jQuery(C).append('<img src="'+(null==e||null===(N=e.value)||void 0===N?void 0:N.image_url)+'" alt="order bump" />');else if(Object(i.isEmpty)(null==e||null===(_=e.value)||void 0===_?void 0:_.custom_url))jQuery(C+" img").attr("src","").attr("srcset","");else{var x,P;if(jQuery(C+" img").length)jQuery(C+" img").attr("src",null==e||null===(x=e.value)||void 0===x?void 0:x.custom_url).attr("srcset","");else jQuery(C).find("svg").remove(),jQuery(C).append('<img src="'+(null==e||null===(P=e.value)||void 0===P?void 0:P.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var A,T,I=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,L=null!==(A=null==e||null===(T=e.value)||void 0===T?void 0:T.position)&&void 0!==A?A:"left";if(null!=e&&e.alignmentClassList){var D=Object.values(null==e?void 0:e.alignmentClassList),F=null==e?void 0:e.alignmentClassList[L];jQuery(I).removeClass(D).addClass(F)}}var B=null!==(E=null==e||null===(S=e.value)||void 0===S?void 0:S.width)&&void 0!==E?E:"100";B&&(r+="".concat(C,"{max-width: ").concat(B,"px;}"))}break;default:r=d(e,r)}})),t(r)}))},p=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:s()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n}),style:{background:"#ffffff"}},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},422:function(e,t,n){"use strict";var r=n(0),c=n(9),a=n(1),i=n(2),l=(n(542),n(22));function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,s=e.title,u=e.updateDetail,b=e.isLoading,f=e.pageUrlSlug,d=o(Object(r.useState)(s),2),m=d[0],p=d[1],O=o(Object(r.useState)(f),2),j=O[0],v=O[1],y=o(Object(r.useState)(""),2),h=y[0],g=y[1],w=Object(i.isEmpty)(null==m?void 0:m.trim())||Object(i.isEmpty)(null==j?void 0:j.trim()),_=Object(r.useRef)();return Object(r.useEffect)((function(){var e=null==t?void 0:t.split("/");_.current=e.slice(0,Object(i.isEmpty)(e[e.length-1])?-2:-1).join("/"),g(t)}),[t]),Object(r.createElement)(c.Modal,{title:Object(a.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Name","funnel-builder")),Object(r.createElement)(c.TextControl,{value:m,onChange:function(e){p(e)},className:Object(i.size)(null==m?void 0:m.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(w)return;u(m,j)}}}),Object(i.size)(null==m?void 0:m.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(a.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(c.TextControl,{value:j,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),g(_.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(i.size)(null==j?void 0:j.trim())?"":"bwf-error-border"}),Object(i.size)(null==j?void 0:j.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(a.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},h))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(l.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(l.a,{isPrimary:!0,onClick:function(){return u(m,j)},disabled:w,isBusy:b,className:w?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},443:function(e,t,n){"use strict";var r=n(0),c=n(5),a=n.n(c),i=n(2),l=n(9),o=n(52),s=n(1),u=n(277),b=(n(460),n(6));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,c,a,i,l=[],o=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);o=!0);}catch(e){s=!0,c=e}finally{try{if(!o&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw c}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=[{label:Object(s.__)("Product","funnel-builder"),value:"product"},{label:Object(s.__)("Custom","funnel-builder"),value:"custom"}],y=function(e){var t,n=e.onChange,c=e.value,f=e.label,d=e.className,p=Object(o.useInstanceId)(y),j="inspector-bump-image-".concat(p),h=a()("components-bump-image",d),g=O(Object(r.useState)(c.type),2),w=g[0],_=g[1],E=O(Object(r.useState)(c.custom_url),2),S=E[0],k=E[1],N=function(e){n(e)},C=function(e,n){e.preventDefault(),t||(t=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=t.state().get("selection").first().toJSON();N(m(m({},c),{},{custom_url:e.url,type:"custom"})),k(e.url)})),t.open()};return Object(r.createElement)(l.BaseControl,{label:f,className:h,id:j},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(i.isEmpty)(v)&&Object(r.createElement)(l.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},v.map((function(e,t){return Object(r.createElement)(l.Button,{key:t,variant:e.value===w?"primary":"",onClick:function(){_(e.value),"product"===e.value?(delete c.custom_url,N(m(m({},c),{},{type:e.value}))):Object(i.isEmpty)(S)||N(m(m({},c),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===w?Object(r.createElement)("img",{src:null==c?void 0:c.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){k(""),N(m(m({},c),{},{type:"product",custom_url:""}))}},Object(r.createElement)(b.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:C},Object(r.createElement)(b.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:C},Object(r.createElement)(b.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(s.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(l.TextControl,{type:"number",label:Object(s.__)("Width (px)","funnel-builder"),max:400,value:null==c?void 0:c.width,onChange:function(e){N(m(m({},c),{},{width:e}))}}),Object(r.createElement)(u.b,{label:Object(s.__)("Image Position","funnel-builder"),options:[{label:Object(s.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(s.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(s.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==c?void 0:c.position,onChange:function(e){N(m(m({},c),{},{position:e}))}})))))};t.a=y},460:function(e,t,n){},542:function(e,t,n){},794:function(e,t,n){},795:function(e,t,n){},796:function(e,t,n){}}]);