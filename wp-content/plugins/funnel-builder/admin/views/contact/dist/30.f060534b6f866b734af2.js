(window.webpackJsonp=window.webpackJsonp||[]).push([[30,9,23,40],{1182:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(121),c=n(2),o=n(27),i=n(11),l=n.n(i),u=n(9),s=n(1),b=(n(794),n(4)),f=n(5),d=n.n(f),p=n(6),m=n(361),O=n(28),y=n(29),v=n(76),j=n(292),h=n(51),g=n(346),w=n(13),_=n(523),E=n(32),S=n(47),k=n(20);function N(){N=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},o=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof O?t:O,o=Object.create(c.prototype),i=new A(r||[]);return a(o,"_invoke",{value:S(e,n,i)}),o}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",d="executing",p="completed",m={};function O(){}function y(){}function v(){}var j={};u(j,o,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(T([])));g&&g!==n&&r.call(g,o)&&(j=g);var w=v.prototype=O.prototype=Object.create(j);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,c,o,i){var l=b(e[a],e,c);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==C(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(s).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,i)}))}i(l.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function S(t,n,r){var a=f;return function(c,o){if(a===d)throw Error("Generator is already running");if(a===p){if("throw"===c)throw o;return{value:e,done:!0}}for(r.method=c,r.arg=o;;){var i=r.delegate;if(i){var l=k(i,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=b(t,n,r);if("normal"===u.type){if(a=r.done?p:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function k(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var c=b(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,m;var o=c.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function x(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(x,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(C(t)+" is not iterable")}return y.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(E.prototype),u(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var o=new E(s(e,n,r,a),c);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),u(w,l,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var o=this.tryEntries[c],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function x(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var T=function(e){var t=Object(a.useParams)(),n=t.id,c=t.builder,o=e.query,i=e.isOpen,f=e.setModalOpenState,p=e.hasCheckoutStep,h=e.funnelId,A=void 0===h?n:h,T=o.importType,I="wc_checkout"===T?"funnel":T,L=y.a.getAddStepData(),D=Object(O.a)(),F=D.addStep,B=D.addSubStep,z=D.endAddStep,M=D.updateFunnelViewLink,U=D.setCountData,R=D.fetch,G=Object(v.a)(),q=G.setActiveGroup,J=G.setActiveBuilder,$=G.setActiveSubFilter,Y=(0,Object(j.a)().getActiveGroup)(),V=Object(E.a)().getStatus,H=Object(S.a)().updateStatus,Q=V(),W=P(Object(r.useState)(null),2),K=W[0],X=W[1],Z=o.path.startsWith("/store-checkout"),ee=(0,Object(k.a)().getGlobalCheckout)(),te=("object"===C(ee)?ee:{}).funnel_id,ne=void 0===te?0:te,re=!!c||!!I,ae=function(){f(!1),K&&X(null)};Object(r.useEffect)((function(){return function(){z()}}),[]),Object(r.useEffect)((function(){return L&&"type"in L&&(X(L),f(!0)),function(){ae()}}),[L]);var ce=function(e,t){var n=K.is_substep,r=K.type,a=K.parent_id;e.status&&"data"in e&&(n?e.data&&(B(e.data,r,parseInt(a),!!t),Object(w.k)({},"".concat(Object(b.fb)()?"/store-checkout/bump":"/funnel-bump","/").concat(e.data.id).concat(t?"/design":"/import","&funnel_id=").concat(A))):F(e.data))},oe=P(Object(r.useState)(!1),2),ie=oe[0],le=oe[1],ue=P(Object(r.useState)(null),2),se=ue[0],be=ue[1],fe=P(Object(r.useState)(!1),2),de=fe[0],pe=fe[1],me=function(){var e,t=(e=N().mark((function e(t){var n,r,a,c,o,i,u,s,f,d,p,m,O,y,v;return N().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ie){e.next=2;break}return e.abrupt("return");case 2:return pe(!0),le(!0),n=K.type,r=void 0===n?"":n,a=K.parent_id,c=void 0===a?0:a,o=K.is_substep,i=void 0!==o&&o,u=t.copyFrom,s=void 0===u?{}:u,f=t.title,d=void 0===f?"":f,(p=s&&s.hasOwnProperty("key")?s.key:0)<1&&(p=s&&s.hasOwnProperty("id")?s.id:0),m="",i&&parseInt(c)>0&&(m="".concat(c,"/substeps/")),Object(b.fb)()&&"wc_order_bump"===r&&(m="".concat(c,"/substeps/")),O="",O="offer"==r?"/funnel-upsell/".concat(c,"/offers"):"/funnels/".concat(A,"/steps/").concat(m),Object(b.fb)()&&(O="/store-checkout/".concat(A,"/step/").concat(m)),y={title:d,inherit_from:p,type:r},e.prev=16,e.next=19,l()({method:"POST",path:Object(b.u)(O),data:y});case 19:(v=e.sent).hasOwnProperty("status")&&v.status?he():be(!1),v.hasOwnProperty("status")&&v.status&&ce(v,p),M(),v.hasOwnProperty("count_data")&&U(v.count_data),m&&"wc_order_bump"===r&&!Q.is_orderbump&&H({is_orderbump:!0}),le(!1),Oe(!1),e.next=37;break;case 29:e.prev=29,e.t0=e.catch(16),console.log("Error While Creating Step: "),console.log(e.t0),be(!1),M(),le(!1),Oe(!1);case 37:case"end":return e.stop()}}),e,null,[[16,29]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){x(c,r,a,o,i,"next",e)}function i(e){x(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}(),Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){X(null),z(),pe(!1),be(null),f(!1)};if(e)var n=setTimeout((function(){clearTimeout(n),t()}),2e3);else t()},ye=(K||{}).is_substep,ve=!de&&K&&!(void 0!==ye&&ye)&&Object(r.createElement)(u.Button,{icon:"arrow-left-alt wffn-icon",onClick:function(){return X(null)}}),je=Object(r.createElement)(r.Fragment,null,ve,K&&"wc_order_bump"===K.type?Object(s.__)("Add Order Bump","funnel-builder"):K&&"popup_title"in K?K.popup_title:"funnel"===I?Z?Object(s.__)("Create Store Checkout","funnel-builder"):Object(s.__)("Funnel Templates","funnel-builder"):Object(s.__)("Add Step","funnel-builder"));Object(r.useEffect)((function(){K||!i&&!re||"upsell"!==Y&&(!I&&!Z||c?c||q("landing"):"step"===I?q("wc_checkout"):"funnel"===I&&q("funnel"))}),[i,re]);var he=function(){delete o.importType,delete o.group,J(""),q("funnel"),$(!1),ae(),Object(w.k)({},Object(w.g)(),o)};return Object(r.createElement)(r.Fragment,null,(i||re)&&Object(r.createElement)(u.Modal,{title:je,onRequestClose:function(){K&&Oe(),he(),Object(b.fb)()?Object(w.k)({},"/store-checkout"):Object(w.k)({},"/funnels/".concat(A))},className:d()("bwf-admin-modal",{"bwf-admin-modal-full-screen bwf-add-step-modal":!K,"bwf-admin-modal-squeezy bwf-modal-overflow-visible":K}),shouldCloseOnClickOutside:K&&!ie,overlayClassName:"wffn_step_template_modal"},!de&&!K&&I&&("funnel"===I?Object(r.createElement)(_.default,{onImportComplete:function(){he(),Z?(R(parseInt(ne)),Object(w.k)({},"/store-checkout")):(R(parseInt(A)),Object(w.k)({},"/funnels/".concat(A)))},isStoreCheckout:Z,storeCheckoutId:ne}):Object(r.createElement)(g.a,{onImportComplete:function(){he(),Z?(R(parseInt(ne)),Object(w.k)({},"/store-checkout")):(R(parseInt(A)),Object(w.k)({},"/funnels/".concat(A)))},isStoreCheckout:Z,storeCheckoutId:ne,hasCheckoutStep:p})),K&&Object(r.createElement)(m.a,{step:K,requestCreateStep:me,onRequestClose:ae,onCreationScreen:de,clearAndCloseEverything:Oe,creationSuccess:se,isBusy:ie})))},I=n(19);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(){D=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},o=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof O?t:O,o=Object.create(c.prototype),i=new C(r||[]);return a(o,"_invoke",{value:S(e,n,i)}),o}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",d="executing",p="completed",m={};function O(){}function y(){}function v(){}var j={};u(j,o,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(P([])));g&&g!==n&&r.call(g,o)&&(j=g);var w=v.prototype=O.prototype=Object.create(j);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,c,o,i){var l=b(e[a],e,c);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==L(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(s).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,i)}))}i(l.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function S(t,n,r){var a=f;return function(c,o){if(a===d)throw Error("Generator is already running");if(a===p){if("throw"===c)throw o;return{value:e,done:!0}}for(r.method=c,r.arg=o;;){var i=r.delegate;if(i){var l=k(i,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=b(t,n,r);if("normal"===u.type){if(a=r.done?p:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function k(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var c=b(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,m;var o=c.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(L(t)+" is not iterable")}return y.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(E.prototype),u(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var o=new E(s(e,n,r,a),c);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),u(w,l,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var o=this.tryEntries[c],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function F(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var M=function(e){var t=e.funnelId,n=void 0===t?0:t,a=Object(I.b)().showSnackbar,c=y.a.getDuplicateStepData(),o=c.step,i=c.stepPos,f=c.shouldDuplicate,d=c.substepOf,p=void 0===d?null:d,m=B(Object(r.useState)(!1),2),v=m[0],j=m[1],g=B(Object(r.useState)(null),2),w=g[0],_=g[1],E=B(Object(r.useState)(null),2),S=E[0],k=E[1],N=Object(O.a)(),x=N.addStep,C=N.addSubStep,P=N.endDuplicateStep,A=N.setCountData,T=function(){var e=setTimeout((function(){P(),clearTimeout(e)}),2e3)},L=function(){var e,t=(e=D().mark((function e(){var t,r,c,u;return D().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.prev=1,r=(t=p&&"id"in p)?"".concat(p.id,"/substeps/"):"",c=Object(b.fb)()&&t?"/store-checkout/".concat(n,"/step/").concat(r):"/funnels/".concat(n,"/steps/").concat(r),"offer"===o.type&&t&&(c="/funnel-upsell/".concat(p.id,"/offers/")),e.next=8,l()({method:"POST",path:Object(b.u)(c),data:{duplicate_id:o.id,type:o.type}});case 8:"status"in(u=e.sent)&&u.status?(t?C(u.data,o.type,p.id,!0):x(u.data,i),_(null),P(),u.hasOwnProperty("count_data")&&A(u.count_data),a(Object(s.__)("Changes Saved","funnel-builder"))):(k({message:Object(s.__)("There are some technical difficulties while duplicating step. Contact Support","funnel-builder")}),_(!1)),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0),k(e.t0),_(!1);case 17:j(!1),T();case 19:case"end":return e.stop()}}),e,null,[[1,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){F(c,r,a,o,i,"next",e)}function i(e){F(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){_(null),o&&L()}),[o]),f?Object(r.createElement)(u.Modal,{isDismissible:!1,title:!1===w?Object(s.__)("Failed"):"",onRequestClose:P,className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header"},v&&Object(r.createElement)("div",{className:"bwf-t-center bwf-mt-10"},Object(r.createElement)(h.a,{size:"xxl"}),Object(r.createElement)("div",{className:"bwf-h1 bwf-mt-20"},Object(s.__)("Please wait…","funnel-builder")),Object(r.createElement)("div",{className:"bwf-h4 bwf-h4-grey"},Object(s.__)("We are duplicating step in the funnel","funnel-builder"))),!v&&!0===w&&Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{style:{width:"100px",display:"inline-block"},dangerouslySetInnerHTML:{__html:wffn.icons.success_check}})),!v&&!0===w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1"}," ",Object(s.__)("Step Duplicated","funnel-builder")))),!v&&!1===w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:""},Object(r.createElement)("div",{className:"bwf-p"},Object(s.__)("Error: ","funnel-builder")+S&&"message"in S?S.message:Object(s.__)("There are some technical difficulties while duplicating step. Please contact support","funnel-builder")))),!v&&!1===w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.Button,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:P},Object(s.__)("OK","funnel-builder"))))):null},U=n(162),R=n(294),G=n(59),q=n(23),J=n(21);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var V=function(e){var t=e.type,n=void 0===t?"upsell":t,a=e.onClick,c=e.modalContent,o=$(Object(r.useState)(!1),2),i=o[0],u=o[1],f=(Object(O.a)().setShowAddStepModal,Object(v.a)().setActiveGroup),m=Object(q.a)().setStepPromotion;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:d()("bwf-st-c-wrap bwf-st-c__lite-card",["bwf-st-lite-".concat(n)])},Object(r.createElement)("div",{className:"bwf-st-c",onClick:function(){return u(!0)}},Object(r.createElement)("span",{className:"bwf-d-icon-drag",style:{marginTop:"2px"}},Object(r.createElement)(p.a,{icon:"king",color:J.NOTICE_YELLOW,size:20})),Object(r.createElement)("div",{className:"bwf-st-c-title",style:{marginLeft:"-3px"}},Object(r.createElement)("a",{href:"#",onClick:function(e){return e.preventDefault()}},"upsell"===n?Object(s.__)("One Click Upsell Offer","funnel-builder"):Object(s.__)("Order Bump","funnel-builder")),Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-ml-12"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-has-chart bwf-st-c-badge-small bwf-st-c-badge-green bwf-cursor-text"},Object(r.createElement)(p.a,{icon:"chart-increase",width:"14",height:"14",color:"#09B29C"}),Object(r.createElement)("span",null,Object(s.__)("Increases average order value","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("div",{className:"bwf-card-action",onClick:function(){"upsell"===n?(Object(w.k)({importType:"step"}),f("upsell")):a&&a()},role:"button",tabIndex:"-1"},Object(s.__)("View Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-card-action bwf-close-icon",onClick:function(e){var t;e.stopPropagation(),t="/".concat("upsell"===n?"remove-upsell-promotion":"remove-bump-promotion"),m("yes","upsell"===n?"upsell":"bump"),l()({path:Object(b.u)(t),method:"POST",data:{user_id:wffn.current_logged_user}}).then((function(e){e.status||console.log("Failed to remove step promotion.")})).catch((function(e){return console.log(e)}))}},Object(r.createElement)(p.a,{icon:"close",size:12}))))),i&&Object(r.createElement)(G.a,{isOpen:i,onRequestClose:function(){return u(!1)},modalContent:c}))},H=n(37),Q=n(42),W=n(111),K=n(78),X=n(459),Z=n(25),ee=n(82),te=n(130),ne=n(129),re=n(75),ae=n(61),ce=n(40),oe=n(81),ie=n(55);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=le(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==le(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return de(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?de(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var pe=window.wffn.is_ab_experiment,me=window.wffn.is_ab_experiment_support,Oe={status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("Increased Conversion Rates","funnel-builder"),Object(s.__)("Greater Return on Ad Spend","funnel-builder"),Object(s.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)(["Order","Bump","AB_Test","Upgrade","Modal"])},ye={type:2,status:!0,proLink:Object(b.P)(["Order","Bump","Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")},ve=function(e){var t,n,a,i=e.bump,f=i._data,m=void 0===f?{}:f,v=i.tags,j=i.experiment_status,h=(i.type,e.bump),g=e.checkoutStep,_=e.checkoutPos,E=e.stepPos,S=e.view,k=e.total,N=e.onSortStart,x=m.title,C=m.status,P=Object(b.C)(),A=y.a.getFunnel(),T=h.id,L=void 0===T?"":T,D=Object(ae.a)().setModalData,F=fe(Object(r.useState)(!1),2),B=F[0],z=F[1],M=fe(Object(r.useState)({}),2),U=M[0],R=M[1],q=fe(Object(r.useState)(!1),2),$=q[0],Y=q[1],V=fe(Object(r.useState)(!1),2),le=V[0],ue=V[1],be=fe(Object(r.useState)(!1),2),de=be[0],ve=be[1],je=fe(Object(r.useState)(!1),2),he=je[0],ge=je[1],we=fe(Object(r.useState)(!1),2),_e=we[0],Ee=we[1],Se=fe(Object(r.useState)({}),2),ke=Se[0],Ne=Se[1],xe=Object(O.a)(),Ce=xe.startDuplicateStep,Pe=xe.startDeleteStep,Ae=xe.setStepTitle,Te=xe.setUpdateFunnel,Ie=Object(ce.a)(),Le=Ie.setToggleState,De=Ie.setSubStep,Fe=location&&location.search?Object(o.parse)(location.search.substring(1)):{},Be=Object(I.b)().showSnackbar,ze=Object(oe.a)().setExperimentStatus,Me=Object(ie.a)().setStepHeaderData,Ue=function(){if(h.hasOwnProperty("id")&&h.id){Ae(Object(H.decodeEntities)(x)+Object(s.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(P,"/experiments/").concat(h.id);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(h.id)),Object(w.k)({},e)}},Re=function(e){Ee(!0);var t="/funnel-bump/save-state/".concat(h.id,"?funnel_id=").concat(P);l()({path:Object(b.u)(t),method:"POST",data:{status:!Number(C)}}).then((function(t){t.success?(Le(!Number(C)),Ee(!1),ge(!1),ve(!1),function(e,t){var n=Object(c.cloneDeep)(null==A?void 0:A.steps).map((function(n){return parseInt(n.id)===parseInt(g.id)&&(n.substeps.wc_order_bump=n.substeps.wc_order_bump.map((function(n){return parseInt(n.id)===parseInt(L)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));A.steps=n;var r=JSON.parse(JSON.stringify(A));Te(r)}(Number(C),e),Ne({}),Be(Object(s.__)("Changes Saved","funnel-builder"))):(Le(Number(C)),Ee(!1),ge(!1),ve(!1))})).catch((function(e){console.log(e),Le(Number(C)),Be(Object(s.__)("Status Updation Failed","funnel-builder"))}))},Ge={1:Object(s.__)("A/B Test Draft","funnel-builder"),2:Object(s.__)("A/B Test Running","funnel-builder"),3:Object(s.__)("A/B Test Paused","funnel-builder")},qe={1:"warning",2:"success",3:"default"},Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?qe[e]:Ge[e]},$e=function(e){if(ue(!0),(e=e.trim())===x)Y(!1),ue(!1);else if(x!==e.trim()){Ae(e);var t='{"title":"'.concat(e,'","slug":"').concat(S.match(/([^\/]*)\/*$/)[1],'"}');l()({path:Object(b.u)("/funnel-bump/save-state/".concat(h.id,"?funnel_id=").concat(P)),data:JSON.parse(t),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Y(!1),ue(!1),Be(Object(s.__)("Changes Saved","funnel-builder")),function(e,t){var n=A.steps.map((function(n){if(n.id===e){var r=n.substeps.wc_order_bump.map((function(e){if(e.id===h.id){var n=se(se({},e._data),{},{title:t});return se(se({},e),{},{_data:n})}return e}));return n.substeps.wc_order_bump=r,n}return n}));A.steps=n;var r=JSON.parse(JSON.stringify(A));Te(r)}(e.step_data.checkout_id,e.step_data.title)})).catch((function(e){console.log(e.message?e.message:e),Ae(x),Be(Object(s.__)("Title Updation Failed","funnel-builder"))}))}},Ye=Object(I.a)(),Ve=Ye.isExpired,He=Ye.isProFeatureLocked,Qe=Ye.isBasicFeatureLocked;return Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===E?"is-disabled":"",onClick:function(){return N("up",E)},title:Object(s.__)("Click here to move up","funnel-builder")},Object(r.createElement)(p.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:E===k-1?"is-disabled":"",onClick:function(){return N("down",E)},title:Object(s.__)("Click here to move down","funnel-builder")},Object(r.createElement)(p.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(P,"order_bump",g.id,h.id),onClick:function(e){e.preventDefault(),Me("bump",L,"",{title:x,view_link:S,status:1===Number(C),experiment_status:j}),Object(w.k)({page:"bwf",path:Object(b.V)(P,"order_bump",g.id,h.id,!1)},"/",{})}},Object(H.decodeEntities)(x))),Ve?Object(r.createElement)(Z.c,{content:Object(s.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(c.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"!==e&&"has_rules"!==e||(Me("bump",L,"",{title:x,view_link:S,status:1===Number(C),experiment_status:j}),Object(w.k)({},v[e].edit,Fe))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(c.isEmpty)(j)&&"4"!==j&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){pe&&!He?me?(ze(j),De({step:"bump",parentId:g.id}),Ue()):z(!0):R(Oe)}},Object(r.createElement)(Z.c,{content:(t=j,a="warning"===(n=Je(j,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:a}),Object(r.createElement)("span",{className:"".concat(void 0!==a?"bwf-mr-4":"")},Je(t)))),type:Je(j,!0)})),!(C&&1===parseInt(C))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(s.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!He&&pe?me?(ze(j),De({step:"bump",parentId:g.id}),Ue()):z(!0):R(Oe)},title:Object(s.__)("A/B Test Step","funnel-builder"),className:"bwf-list-btn"},Object(r.createElement)(p.a,{icon:He?"king":"experiment",width:"16",height:"16",color:He?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(s.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:S,title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(p.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Y(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Edit","funnel-builder")))),!(C&&1===parseInt(C))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ne({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(x)),"funnel-builder")))}),Re()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(C)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(j)?ve(!0):ge(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){Qe?R(ye):(t(),Ce(se(se({},h),{},{type:"wc_order_bump"}),0,g))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(s.__)("Duplicate","funnel-builder")),Qe&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),D({title:x}),Pe(se(se({},h),{},{type:"wc_order_bump"}),E,se(se({},g),{},{stepPos:_}))}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-step-type bwf-step-type-ob"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(s.__)("Order Bump","funnel-builder"),className:"bwf-cursor-default"})))),B&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return z(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(s.__)("Oops it seems old version of Experiments is activated.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_30"})),U.status&&Object(r.createElement)(G.a,{isOpen:U.status,onRequestClose:function(){return R({status:!1})},modalContent:U,type:U.type}),$&&Object(r.createElement)(X.a,{renameTitle:"Edit Details",title:Object(H.decodeEntities)(x),onclose:function(){return Y(!1)},updateTitle:function(e){return $e(e)},isLoading:le}),he&&Object(r.createElement)(ne.a,{isPublishLoading:_e,onAction:function(){return Re()},onclose:function(){return ge(!1)}}),de&&Object(r.createElement)(te.a,{isPublishLoading:_e,onAction:function(){Re(!0)},onclose:function(){return ve(!1)}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",ke.className),confirmText:ke.confirmText,confirmButtonText:ke.buttonConfirm,cancelButtonText:ke.buttonCancel,onConfirm:ke.onConfirm,isLoading:ke.loading,successMessage:ke.success,errorMessage:ke.error,content:ke.content,onRequestClose:function(){return Ne({status:!1})},modalTitle:ke.modalTitle,isOpen:ke.status,closeIcon:ke.closeIcon}))},je=n(422),he=n(362);function ge(e){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(Object(n),!0).forEach((function(t){Ee(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ee(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ke(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ne=window.wffn.is_ab_experiment,xe=window.wffn.is_ab_experiment_support,Ce={status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("A/B test product price, page layout, messaging, design & more. Create variants, analyze results & uncover hidden revenue.","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)(["Checkout","AB_Test","Upgrade","Modal"])},Pe={type:2,status:!0,proLink:Object(b.P)(["Checkout","Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")},Ae={bump:!0},Te=function(e){var t=e.step,n=void 0===t?{}:t,a=n._data,i=void 0===a?{}:a,f=n.tags,m=void 0===f?[]:f,v=(n.experiment,n.substeps),j=(void 0===v?{}:v).wc_order_bump,h=void 0===j?[]:j,g=n.id,_=void 0===g?0:g,E=n.experiment_status,S=n.type,N=e.step,x=e.stepPos,C=void 0===x?0:x,P=(e.title,e.isOBFake),A=Object(I.b)().showSnackbar,T=y.a.getFunnel(),L=Object(ie.a)().setStepHeaderData,D=Object(b.C)(),F=Se(Object(r.useState)({}),2),B=F[0],z=F[1],M=i.title,U=i.view,R=i.status,q=void 0===R?0:R,$=Object(ae.a)().setModalData,Y=Object(O.a)(),X=Y.startDuplicateStep,le=Y.startDeleteStep,ue=Y.startAddStep,se=Y.setShowProModal,be=Y.setShowProModalText,fe=Y.setStepTitle,de=(Y.fetch,Y.sortSubSteps),pe=Y.setUpdateFunnel,me=Object(ce.a)(),Oe=me.setToggleState,ye=(me.setStepData,Object(oe.a)().setExperimentStatus),ge=location&&location.search?Object(o.parse)(location.search.substring(1)):{},we=(0,Object(k.a)().getGlobalCheckout)(),Ee=we&&we.checkout_id&&Number(we.checkout_id)===N.id,ke=Se(Object(r.useState)(m),2),Te=ke[0],Ie=ke[1],Le=Se(Object(r.useState)(!1),2),De=Le[0],Fe=Le[1],Be=Se(Object(r.useState)(!1),2),ze=Be[0],Me=Be[1],Ue=Se(Object(r.useState)(!1),2),Re=Ue[0],Ge=Ue[1],qe=Se(Object(r.useState)(!1),2),Je=qe[0],$e=qe[1],Ye=Se(Object(r.useState)(!1),2),Ve=Ye[0],He=Ye[1],Qe=Se(Object(r.useState)(!1),2),We=Qe[0],Ke=Qe[1],Xe=Se(Object(r.useState)({}),2),Ze=Xe[0],et=Xe[1];Object(r.useEffect)((function(){0!==Object(c.size)(h)||"no_bump"in m||Ie(_e(_e({},Te),{},{no_bump:{label:Object(s.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[h.length]);var tt,nt,rt,at=Object(b.ab)("wc_order_bump"),ct={1:Object(s.__)("A/B Test Draft","funnel-builder"),2:Object(s.__)("A/B Test Running","funnel-builder"),3:Object(s.__)("A/B Test Paused","funnel-builder")},ot={1:"warning",2:"success",3:"default"},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?ot[e]:ct[e]},lt=function(e){null!==at&&ue(_e(_e({},at),{},{parent_id:parseInt(_),is_substep:!0,title:"Order Bump"})),!at&&se(!0),!at&&be(Object(s.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()},ut=function(){if(_){fe(Object(H.decodeEntities)(M)+Object(s.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(D,"/experiments/").concat(_);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(_)),Object(w.k)({},e)}},st=function(e){Ke(!0);var t="/funnel-".concat(S,"/save-state/").concat(_,"?funnel_id=").concat(D);l()({path:Object(b.u)(t),method:"POST",data:{status:!Number(q)}}).then((function(t){t.success?(Oe(!Number(q)),Ke(!1),He(!1),$e(!1),function(e,t){var n=null==T?void 0:T.steps.map((function(n){if(n.id===_){var r=_e(_e({},n._data),{},{status:e?"1":"0"});return _e(_e({},n),{},{_data:r,experiment_status:t?"3":n.experiment_status})}return n}));T.steps=n;var r=JSON.parse(JSON.stringify(T));pe(r)}(Number(t.step_data.status),e),et({}),A(Object(s.__)("Changes Saved","funnel-builder"))):(Oe(Number(q)),Ke(!1),He(!1),$e(!1))})).catch((function(e){console.log(e),Oe(Number(q)),A("Status Updation Failed")}))},bt=function(e,t){var n=[];"up"===e?n=de(_,"wc_order_bump",t,t-1):"down"===e&&(n=de(_,"wc_order_bump",t,t+1)),l()({path:Object(b.u)("/funnels/steps/order/save/".concat(_,"?type=wc_order_bump")),method:"POST",data:{order:n.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))},ft=function(e,t){if(Ge(!0),(e=e.trim())===M&&(null==i?void 0:i.post_name)===t)Me(!1),Ge(!1);else{fe(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');l()({path:Object(b.u)("/funnel-".concat(S,"/save-state/").concat(_,"?funnel_id=").concat(D)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Me(!1),Ge(!1),function(e,t,n){var r=T.steps.map((function(r){return r.id===Number(_)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));T.steps=r;var a=JSON.parse(JSON.stringify(T));pe(a)}(e.step_data.title,t,e.step_data.view_link),A(Object(s.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),fe(M),A(Object(s.__)("Title Updation Failed","funnel-builder"))}))}},dt=Object(I.a)(),pt=dt.isProFeatureLocked,mt=dt.isBasicFeatureLocked;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(D,"wc_checkout",N.id),onClick:function(e){e.preventDefault(),L("checkout",_,"",{title:M,view_link:U,status:1===Number(q),experiment_status:E}),Object(w.k)({page:"bwf",path:Object(b.V)(D,"wc_checkout",N.id,"",!1)},"/",{})}},Object(H.decodeEntities)(M)," ")),Object(c.size)(m)>0&&Object.keys(Te).map((function(e){return("no_bump"!==e||0===Object(c.size)(h))&&"global_checkout"!==e&&Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e?(L("checkout",_,"",{title:M,view_link:U,status:1===Number(q),experiment_status:E}),Object(w.k)({},Te[e].edit,ge)):"no_bump"===e&&(pt?z(Ae):lt(t))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+Te[e].label_class},Te[e].label))})),Ee&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap bwf-cursor-text"},Object(r.createElement)("div",{className:"bwf-st-c-badge-small bwf-st-c-badge-yellow"},Object(s.__)("Global Checkout","funnel-builder"))),!Object(c.isEmpty)(E)&&"4"!==E&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Ne&&!pt?xe?(ye(E),ut()):Fe(!0):z(Ce)}},Object(r.createElement)(Z.c,{content:(tt=E,rt="warning"===(nt=it(E,!0))?"#B68F40":"success"===nt?"#09B29C":"default"===nt?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:rt}),Object(r.createElement)("span",{className:"".concat(void 0!==rt?"bwf-mr-4":"")},it(tt)))),type:it(E,!0)})),!(q&&1===parseInt(q))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(s.__)("Draft","funnel-builder"),className:"bwf-cursor-default",type:"warning"})),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!pt&&Ne?xe?(ye(E),ut()):Fe(!0):z(Ce)},title:"A/B Test Step",className:"bwf-list-btn"},Object(r.createElement)(p.a,{icon:pt?"king":"experiment",width:"16",height:"16",color:pt?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(s.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:Object(H.decodeEntities)(U),title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(p.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Me(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Edit","funnel-builder")))),!(q&&1===parseInt(q))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{et({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(M)),"funnel-builder")))}),st()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(q)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(E)?$e(!0):He(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Draft","funnel-builder")))),!Object(b.fb)()&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){mt?z(Pe):(t(),X(N,C+1))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(s.__)("Duplicate","funnel-builder")),mt&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),$({title:M}),le(N,C)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!pt})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{className:"bwf-cursor-default",content:Object(b.nb)(S)}))),B.status&&Object(r.createElement)(G.a,{isOpen:B.status,onRequestClose:function(){return z({status:!1})},modalContent:B,type:B.type}),De&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return Fe(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(s.__)("Oops it seems old version of Experiments is activated.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel.","funnel-builder")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.Button,{variant:"primary",onClick:function(){return Fe(!1)}},Object(s.__)("OK","funnel-builder")))),null!==at&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(c.size)(h)>0&&h.map((function(e,t){return Object(r.createElement)(ve,{key:t,bump:e,checkoutStep:N,checkoutPos:C,stepPos:t,total:Object(c.size)(h),view:Object(H.decodeEntities)(U),onSortStart:bt})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(e){pt?z(Ae):lt(e)}},pt&&Object(r.createElement)(p.a,{icon:"king",color:J.NOTICE_YELLOW,size:20}),Object(s.__)("Add Order Bump","funnel-builder"))))),P&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(V,{type:"order_bump",onClick:function(){return se(!0)},modalContent:{title:Object(s.__)("Order Bump","funnel-builder"),content:{benefits:[Object(s.__)("Boost your sales effortlessly with the Order Bumps. Let users add products with just one click on checkout page.","funnel-builder")]},image:Object(b.O)()+"order-bump.png",proLink:Object(b.P)(["Order","Bump","Upgrade","Modal"])}}))),ze&&Object(r.createElement)(je.a,{pageUrl:null==i?void 0:i.view_link,pageUrlSlug:null==i?void 0:i.post_name,renameTitle:"Step",title:Object(H.decodeEntities)(M),onclose:function(){return Me(!1)},updateDetail:function(e,t){return ft(e,t)},isLoading:Re}),Ve&&Object(r.createElement)(ne.a,{isPublishLoading:We,onAction:function(){return st()},onclose:function(){return He(!1)}}),Je&&Object(r.createElement)(te.a,{isPublishLoading:We,onAction:function(){st(!0)},onclose:function(){return $e(!1)}}),B.bump&&Object(r.createElement)(he.a,{isOpen:B.bump,onRequestClose:function(){return z({status:!1})}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",Ze.className),confirmText:Ze.confirmText,confirmButtonText:Ze.buttonConfirm,cancelButtonText:Ze.buttonCancel,onConfirm:Ze.onConfirm,isLoading:Ze.loading,successMessage:Ze.success,errorMessage:Ze.error,content:Ze.content,onRequestClose:function(){return et({status:!1})},modalTitle:Ze.modalTitle,isOpen:Ze.status,closeIcon:Ze.closeIcon}))};function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ze(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Me=window.wffn.is_ab_experiment,Ue=window.wffn.is_ab_experiment_support,Re={status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("Increased Conversion Rates","funnel-builder"),Object(s.__)("Greater Return on Ad Spend","funnel-builder"),Object(s.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)(["Offer","AB_Test","Upgrade","Modal"])},Ge={type:2,status:!0,proLink:Object(b.P)(["Offer","Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")},qe=function(e){var t,n,a,i=e.offer,f=i._data,m=void 0===f?{}:f,v=i.tags,j=(i.experiment,i.experiment_status),h=e.offer,g=e.upsellStep,_=e.upsellPos,E=e.stepPos,S=e.view,k=e.total,N=e.onSortStart,x=m.title,C=m.status,P=h.id,A=void 0===P?"":P,T=Object(b.C)(),L=y.a.getFunnel(),D=Object(ae.a)().setModalData,F=Be(Object(r.useState)(!1),2),B=F[0],z=F[1],M=Be(Object(r.useState)({}),2),U=M[0],R=M[1],q=Be(Object(r.useState)(!1),2),$=q[0],Y=q[1],V=Be(Object(r.useState)(!1),2),X=V[0],le=V[1],ue=Be(Object(r.useState)(!1),2),se=ue[0],be=ue[1],fe=Be(Object(r.useState)(!1),2),de=fe[0],pe=fe[1],me=Be(Object(r.useState)(!1),2),Oe=me[0],ye=me[1],ve=Be(Object(r.useState)({}),2),he=ve[0],ge=ve[1],we=Object(I.a)("ul").isExpired,_e=Object(I.a)(),Ee=_e.isProFeatureLocked,Se=_e.isBasicFeatureLocked,ke=Object(O.a)(),Ne=ke.startDuplicateStep,xe=ke.startDeleteStep,Ce=ke.setStepTitle,Pe=ke.setUpdateFunnel,Ae=Object(ce.a)(),Te=Ae.setToggleState,Ie=Ae.setSubStep,Le=Object(oe.a)().setExperimentStatus,Fe=Object(ie.a)().setStepHeaderData,ze=location&&location.search?Object(o.parse)(location.search.substring(1)):{},qe=Object(I.b)().showSnackbar,Je=function(){if(h.hasOwnProperty("id")&&h.id){Ce(Object(H.decodeEntities)(x)+Object(s.__)(" A/B Test"));var e="/funnels/".concat(T,"/experiments/").concat(h.id);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(h.id)),Object(w.k)({},e)}},$e={1:Object(s.__)("A/B Test Draft"),2:Object(s.__)("A/B Test Running"),3:Object(s.__)("A/B Test Paused")},Ye={1:"warning",2:"success",3:"default"},Ve=function(e){ye(!0);var t="/funnel-".concat("offer","/save-state/",h.id,"?funnel_id=").concat(T);l()({path:Object(b.u)(t),method:"POST",data:{status:!Number(C)}}).then((function(t){t.success?(Te(!Number(C)),ye(!1),pe(!1),be(!1),function(e,t){var n=Object(c.cloneDeep)(null==L?void 0:L.steps).map((function(n){return parseInt(n.id)===parseInt(g.id)&&(n.substeps.offer=n.substeps.offer.map((function(n){return parseInt(n.id)===parseInt(A)&&(n._data.status=0===parseInt(e)?"1":"0",n.experiment_status=t?"3":n.experiment_status),n}))),n}));L.steps=n;var r=JSON.parse(JSON.stringify(L));Pe(r)}(Number(C),e),ge({}),qe(Object(s.__)("Changes Saved","funnel-builder"))):(Te(Number(C)),ye(!1),pe(!1),be(!1))})).catch((function(e){console.log(e),Te(Number(C)),qe("Status Updation Failed")}))},He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Ye[e]:$e[e]},Qe=function(e,t){if(le(!0),(e=e.trim())===x&&(null==m?void 0:m.post_name)===t)Y(!1),le(!1);else{Ce(e);var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');l()({path:Object(b.u)("/funnel-".concat("offer","/save-state/",h.id,"?funnel_id=").concat(T)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);Y(!1),le(!1),function(e,t,n,r){var a=L.steps.map((function(a){if(a.id===Number(e)){var c=a.substeps.offer.map((function(e){if(e.id===h.id){var a=De(De({},e._data),{},{title:t,post_name:n,view_link:r});return De(De({},e),{},{_data:a})}return e}));return a.substeps.offer=c,a}return a}));L.steps=a;var c=JSON.parse(JSON.stringify(L));Pe(c)}(e.step_data.upsell_id,e.step_data.title,t,e.step_data.view_link),qe(Object(s.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Ce(x),qe("Title Updation Failed")}))}};return Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{className:"bwf-move-icons"},Object(r.createElement)("span",{className:0===E?"is-disabled":"",onClick:function(){return N("up",E)},title:"Click here to move up"},Object(r.createElement)(p.a,{icon:"angle-down",width:16,height:16})),Object(r.createElement)("span",{className:E===k-1?"is-disabled":"",onClick:function(){return N("down",E)},title:"Click here to move down"},Object(r.createElement)(p.a,{icon:"angle-down",width:16,height:16}))),Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(T,"offer",g.id,h.id),onClick:function(e){e.preventDefault(),Fe("offer",A,A,{title:x,view_link:S,status:1===Number(C),experiment_status:j}),Object(w.k)({page:"bwf",path:Object(b.V)(T,"offer",g.id,h.id,!1)},"/",{})}},Object(H.decodeEntities)(x))),we?Object(r.createElement)(Z.c,{content:Object(s.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(c.size)(v)>0&&Object.keys(v).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(){"no_product"===e&&(Fe("offer",A,A,{title:x,view_link:S,status:1===Number(C),experiment_status:j}),Object(w.k)({},v[e].edit,ze))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+v[e].label_class},v[e].label))})),!Object(c.isEmpty)(j)&&"4"!==j&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){Me&&!Ee?Ue?(Ie({step:"offer",parentId:g.id}),Le(j),Je()):z(!0):R(Re)}},Object(r.createElement)(Z.c,{content:(t=j,a="warning"===(n=He(j,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:a}),Object(r.createElement)("span",{className:"".concat(void 0!==a?"bwf-mr-4":"")},He(t)))),type:He(j,!0)})),!(C&&1===parseInt(C))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(s.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!Ee&&Me?(Le(j),Ue?(Ie({step:"offer",parentId:g.id}),Je()):z(!0)):R(Re)},title:"A/B Test Step",className:"bwf-list-btn"},Object(r.createElement)(p.a,{icon:Ee?"king":"experiment",width:"16",height:"16",color:Ee?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(s.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:null==m?void 0:m.view,title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(p.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action  is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Y(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Edit","funnel-builder")))),!(C&&1===parseInt(C))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{ge({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(x)),"funnel-builder")))}),Ve()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(C)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(j)?be(!0):pe(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){Se?R(Ge):(t(),Ne(De(De({},h),{},{type:"offer"}),0,g))}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Duplicate","funnel-builder")),Se&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),D({title:x}),xe(De(De({},h),{},{type:"offer"}),E,De(De({},g),{},{stepPos:_}))}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-step-type bwf-step-type-ob"},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(b.nb)("offer"),className:"bwf-cursor-default"}))),B&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return z(!1)}},Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-h1 bwf_align_center"},Object(s.__)("Oops it seems old version of Experiments is activated.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-p"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel."))),Object(r.createElement)("div",{className:"bwf_clear_30"})),U.status&&Object(r.createElement)(G.a,{isOpen:U.status,onRequestClose:function(){return R({status:!1})},modalContent:U,type:U.type}),$&&Object(r.createElement)(je.a,{pageUrl:null==m?void 0:m.view_link,pageUrlSlug:null==m?void 0:m.post_name,renameTitle:"Step",title:Object(H.decodeEntities)(x),onclose:function(){return Y(!1)},updateDetail:function(e,t){return Qe(e,t)},isLoading:X}),de&&Object(r.createElement)(ne.a,{isPublishLoading:Oe,onAction:function(){return Ve()},onclose:function(){return pe(!1)}}),se&&Object(r.createElement)(te.a,{isPublishLoading:Oe,onAction:function(){Ve(!0)},onclose:function(){return be(!1)}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",he.className),confirmText:he.confirmText,confirmButtonText:he.buttonConfirm,cancelButtonText:he.buttonCancel,onConfirm:he.onConfirm,isLoading:he.loading,successMessage:he.success,errorMessage:he.error,content:he.content,onRequestClose:function(){return ge({status:!1})},modalTitle:he.modalTitle,isOpen:he.status,closeIcon:he.closeIcon}))};function Je(e){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){Ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ve(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Je(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Je(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var We=window.wffn.is_ab_experiment,Ke=window.wffn.is_ab_experiment_support,Xe=function(e){return{status:!0,title:Object(s.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(s.__)("Increased Conversion Rates","funnel-builder"),Object(s.__)("Greater Return on Ad Spend","funnel-builder"),Object(s.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(b.O)()+"AB-testing.png",proLink:Object(b.P)([e.replace(" ","+"),"AB_Test","Upgrade","Modal"])}},Ze={status:!0,title:Object(s.__)("Add Offer","funnel-builder"),proLink:Object(b.P)(["Add","Offer","Upgrade","Modal"])},et=function(e){return{type:2,status:!0,proLink:Object(b.P)([e.replace(" ","+"),"Duplicate","Upgrade","Modal"]),feature:Object(s.__)("Duplicate Step","funnel-builder")}},tt=function(e){var t=e.step,n=void 0===t?{}:t,a=n._data,i=void 0===a?{}:a,f=n.tags,m=void 0===f?[]:f,j=n.type,h=n.substeps,g=(void 0===h?{}:h).offer,_=void 0===g?[]:g,E=(n.experiment,n.experiment_status),S=e.stepPos,k=e.step,N=e.title,x=i.title,C=i.view,P=i.status,A=Object(b.C)(),T=y.a.getFunnel(),L=He(Object(r.useState)(!1),2),D=L[0],F=L[1],B=He(Object(r.useState)(m),2),z=B[0],M=B[1],U=He(Object(r.useState)(!1),2),R=U[0],q=U[1],$=He(Object(r.useState)(!1),2),Y=$[0],V=$[1],le=He(Object(r.useState)(!1),2),ue=le[0],se=le[1],be=He(Object(r.useState)(!1),2),fe=be[0],de=be[1],pe=He(Object(r.useState)(!1),2),me=pe[0],Oe=pe[1],ye=He(Object(r.useState)({}),2),ve=ye[0],he=ye[1],ge=He(Object(r.useState)({}),2),we=ge[0],_e=ge[1],Ee=Object(I.a)(),Se=Ee.isProFeatureLocked,ke=Ee.isBasicFeatureLocked,Ne=Object(I.a)("ul").isExpired,xe=Object(O.a)(),Ce=xe.startDuplicateStep,Pe=xe.startDeleteStep,Ae=xe.setStepTitle,Te=xe.sortSubSteps,Ie=xe.setUpdateFunnel,Le=Object(ce.a)().setToggleState,De=Object(ie.a)().setStepHeaderData,Fe=Object(ae.a)().setModalData,Be=Object(v.a)(),ze=Be.setActiveGroup,Me=Be.setImportOffer,Ue=Object(oe.a)().setExperimentStatus,Re=Object(I.b)().showSnackbar,Ge=location&&location.search?Object(o.parse)(location.search.substring(1)):{},Je=function(){if(k&&k.hasOwnProperty("id")&&k.id){Ae(Object(H.decodeEntities)(x)+Object(s.__)(" A/B Test","funnel-builder"));var e="/funnels/".concat(A,"/experiments/").concat(k.id);Object(b.fb)()&&(e="/store-checkout/experiments/".concat(k.id)),Object(w.k)({},e)}},$e=function(e){Oe(!0);var t="/funnel-".concat(j,"/save-state/").concat(k.id,"?funnel_id=").concat(A);l()({path:Object(b.u)(t),method:"POST",data:{status:!Number(P)}}).then((function(t){t.success?(Le(!Number(P)),Oe(!1),de(!1),se(!1),function(e,t,n){var r=null==T?void 0:T.steps.map((function(r){if(r.id===k.id){r.experiment_status=n;var a=Ye(Ye({},r._data),{},{status:e?"1":"0",experiment_status:t?"3":r.experiment_status});return Ye(Ye({},r),{},{_data:a})}return r}));T.steps=r;var a=JSON.parse(JSON.stringify(T));Ie(a)}(Number(t.step_data.status),e,t.step_data.experiment_status),he({}),Re(Object(s.__)("Changes Saved","funnel-builder"))):(Le(Number(P)),Oe(!1),de(!1),se(!1))})).catch((function(e){console.log(e),Le(P),Re("Status Updation Failed")}))},Ve={1:Object(s.__)("A/B Test Draft","funnel-builder"),2:Object(s.__)("A/B Test Running","funnel-builder"),3:Object(s.__)("A/B Test Paused","funnel-builder")},Qe={1:"warning",2:"success",3:"default"},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?Qe[e]:Ve[e]};Object(r.useEffect)((function(){0!==Object(c.size)(_)||"wc_upsells"!==j||"no_offers"in m?Object(c.size)(_)>0&&M(m):M(Ye(Ye({},z),{},{no_offers:{offerlabel:Object(s.__)("No offers","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[_.length]);var nt,rt,at,ct=function(e){e.preventDefault(),ze("upsell"),Me({parent_id:parseInt(k.id),parent_title:k._data.title}),Object(w.k)({importType:"step"})},ot=function(e,t){if(V(!0),(e=e.trim())!==x||(null==i?void 0:i.post_name)!==t&&"wc_upsells"!=j){Ae(e);var n='{"title":"'.concat(e,'","slug":"').concat("wc_upsells"==j?C.match(/([^\/]*)\/*$/)[1]:t,'"}');l()({path:Object(b.u)("/funnel-".concat(j,"/save-state/").concat(k.id,"?funnel_id=").concat(A)),data:JSON.parse(n),method:"POST"}).then((function(e){if(!e.success)throw new Error(e.msg);q(!1),V(!1),function(e,t,n){var r=T.steps.map((function(r){return r.id===Number(k.id)?(r._data.title=e,r._data.post_name=t,r._data.view_link=n,r):r}));T.steps=r;var a=JSON.parse(JSON.stringify(T));Ie(a)}(e.step_data.title,t,e.step_data.view_link),Re(Object(s.__)("Changes Saved","funnel-builder"))})).catch((function(e){console.log(e.message?e.message:e),Ae(x),Re("Title Updation Failed")}))}else q(!1),V(!1)};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title bwf-mr-16"},Object(r.createElement)("a",{href:Object(b.V)(A,j,k.id),className:"bwf-card-action",onClick:function(e){e.preventDefault(),De(Object(b.W)(j),k.id,"",{title:x,view_link:C,status:1===Number(P),experiment_status:E}),Object(w.k)({page:"bwf",path:Object(b.V)(A,j,k.id,"",!1)},"/",{})}},Object(H.decodeEntities)(x))),"wc_upsells"===j&&Ne?Object(r.createElement)(Z.c,{content:Object(s.__)("License Expired","funnel-builder"),type:"danger"}):Object(r.createElement)(r.Fragment,null,Object(c.size)(z)>0&&Object.keys(z).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_product"===e||"has_rules"===e?(De(Object(b.W)(j),k.id,"",{title:x,view_link:C,status:1===Number(P),experiment_status:E}),Object(w.k)({},z[e].edit,Ge)):"no_offers"===e&&ct(t)}},Object(r.createElement)("div",{className:d()("bwf-st-c-badge-small",z[e].label_class)},z[e].hasOwnProperty("offerlabel")?z[e].offerlabel:z[e].label))})),!Object(c.isEmpty)(E)&&"4"!==E&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){!Se&&We?Ke?(Ue(E),Je()):F(!0):_e(Xe)}},Object(r.createElement)(Z.c,{content:(nt=E,at="warning"===(rt=tt(E,!0))?"#B68F40":"success"===rt?"#09B29C":"default"===rt?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(ee.a,{fill:at}),Object(r.createElement)("span",{className:"".concat(void 0!==at?"bwf-mr-4":"")},tt(nt)))),type:tt(E,!0)})),!(P&&1===parseInt(P))&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{content:Object(s.__)("Draft","funnel-builder"),type:"warning",className:"bwf-cursor-default"}))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("a",{target:"_blank",onClick:function(){!Se&&We?Ke?(Je(),Ue(E)):F(!0):_e(Xe(N))},title:"A/B Test Step",className:"bwf-list-btn ".concat("wc_upsells"===j?"bwf-visibility-hidden":"")},Object(r.createElement)(p.a,{icon:Se?"king":"experiment",width:"16",height:"16",color:Se?J.NOTICE_YELLOW:J.TEXT_COLOR_2}),Object(r.createElement)("span",null,Object(s.__)("A/B Test","funnel-builder"))),Object(r.createElement)("a",{href:Object(H.decodeEntities)(C),title:"View Step",className:"bwf-list-btn",target:"_blank",rel:"noreferrer"},Object(r.createElement)(p.a,{icon:"view",width:"16",height:"16"}),Object(r.createElement)("span",null,Object(s.__)("Preview","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-action is-ellipsis-menu"},Object(r.createElement)(W.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),q(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Edit","funnel-builder")))),!(P&&1===parseInt(P))&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),function(){try{he({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(s.__)("Please wait! Publishing ".concat(Object(H.decodeEntities)(x)),"funnel-builder")))}),$e()}catch(e){console.log(Object(s.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Publish","funnel-builder")))),["1",1].includes(P)&&Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(E)?se(!0):de(!0)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Draft","funnel-builder")))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){ke?_e(et(N)):(t(),Ce(k,S+1))}},Object(r.createElement)(Q.a,{justify:"space-between"},Object(r.createElement)(Q.c,null,Object(s.__)("Duplicate","funnel-builder")),ke&&Object(r.createElement)(Q.c,null,Object(r.createElement)(Z.b,null)))),Object(r.createElement)(K.a,{isClickable:!0,onInvoke:function(){t(),Fe({title:x}),Pe(k,S)}},Object(r.createElement)(Q.a,{justify:"flex-start"},Object(r.createElement)(Q.c,null,Object(s.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!Se})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)(Z.c,{className:"bwf-cursor-default",content:"wc_upsells"===j?Object(s.__)("Upsell","funnel-builder"):Object(b.nb)(j)}))),we.status&&Object(r.createElement)(G.a,{isOpen:we.status,onRequestClose:function(){return _e({status:!1})},modalContent:we,type:we.type}),D&&Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return F(!1)}},Object(r.createElement)("div",{className:"bwf-modal-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(s.__)("Oops it seems old version of Experiments is activated."))),Object(r.createElement)("div",{className:"bwf-modal-content"},Object(s.__)("Please deactivate, You won't loose existing experiments for the funnel.")),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.Button,{variant:"primary",onClick:function(){return F(!1)}},Object(s.__)("OK")))),"wc_upsells"==j&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(c.size)(_)>0&&_.map((function(e,t){return Object(r.createElement)(qe,{key:t,offer:e,upsellStep:k,upsellPos:S,stepPos:t,total:Object(c.size)(_),view:Object(H.decodeEntities)(C),onSortStart:function(e,t){return function(e,t,n){var r=[];"up"===t?r=Te(e,"offer",n,n-1):"down"===t&&(r=Te(e,"offer",n,n+1)),l()({path:Object(b.u)("/funnels/steps/order/save/".concat(e,"?type=offer")),method:"POST",data:{order:r.map((function(e){return e.id}))}}).then((function(e){e.success||console.log(e)})).catch((function(e){console.log(e)}))}(k.id,e,t)}})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(e){Ne?_e(Ze):ct(e)}},Ne&&Object(r.createElement)(p.a,{icon:"king",color:J.NOTICE_YELLOW,size:20}),Object(s.__)("Add Offer","funnel-builder"))))),R&&("wc_upsells"==j?Object(r.createElement)(X.a,{renameTitle:"Edit Details",title:Object(H.decodeEntities)(x),onclose:function(){return q(!1)},updateTitle:function(e){return ot(e)},isLoading:Y}):Object(r.createElement)(je.a,{pageUrl:null==i?void 0:i.view_link,pageUrlSlug:null==i?void 0:i.post_name,renameTitle:"Step",title:Object(H.decodeEntities)(x),onclose:function(){return q(!1)},updateDetail:function(e,t){return ot(e,t)},isLoading:Y})),fe&&Object(r.createElement)(ne.a,{isPublishLoading:me,onAction:function(){return $e()},onclose:function(){return de(!1)}}),ue&&Object(r.createElement)(te.a,{isPublishLoading:me,onAction:function(){$e(!0)},onclose:function(){return se(!1)}}),Object(r.createElement)(re.a,{className:d()("bwf-admin-modal-squeezy",ve.className),confirmText:ve.confirmText,confirmButtonText:ve.buttonConfirm,cancelButtonText:ve.buttonCancel,onConfirm:ve.onConfirm,isLoading:ve.loading,successMessage:ve.success,errorMessage:ve.error,content:ve.content,onRequestClose:function(){return he({status:!1})},modalTitle:ve.modalTitle,isOpen:ve.status,closeIcon:ve.closeIcon}))};function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ct(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=nt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==nt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return it(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?it(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var lt=function(e){var t=e.step,n=void 0===t?{}:t,o=n._data,i=void 0===o?{}:o,l=n.tags,f=void 0===l?[]:l,m=(n.experiment,n.substeps),y=(void 0===m?{}:m).wc_order_bump,v=void 0===y?[]:y,j=n.id,h=void 0===j?0:j,g=(n.experiment_status,e.step),_=e.stepPos,E=void 0===_?0:_,S=e.title,k=e.isOBFake,N=Object(I.a)(),x=N.isProFeatureLocked,C=(N.isExpired,Object(a.useParams)().id,i.title,i.view),P=(i.edit,i.status,Object(ae.a)().setModalData,Object(O.a)()),A=P.startAddStep,T=P.setShowProModal,L=P.setShowProModalText,D=P.setShowAddStepModal,F=ot(Object(r.useState)({}),2),B=F[0],z=F[1],M=ot(Object(r.useState)(f),2),U=M[0],R=M[1];Object(r.useEffect)((function(){0!==Object(c.size)(v)||"no_bump"in f||R(at(at({},U),{},{no_bump:{label:Object(s.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}}))}),[v.length]);var G=Object(b.ab)("wc_order_bump");return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{style:{color:"#353030"}},Object(s.__)("No Checkout Created","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-card-controls"},Object(r.createElement)("span",{className:"bwf-card-action",style:{minWidth:"110px"}}),Object(r.createElement)("div",{className:"bwf-card-action"},Object(r.createElement)(u.Button,{isSecondary:!0,className:"bwf-btn-small",onClick:function(){Object(w.k)({importType:"step"}),D(!0)}},Object(s.__)("Create Checkout","funnel-builder")))),Object(r.createElement)("div",{className:d()("bwf-step-type",{"bwf-step-type-checkout":!x})},Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head bwf-st-c-badge-small bwf-st-c-badge-gray bwf-cursor-text"},S))),null!==G&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap"},Object(c.size)(v)>0&&v.map((function(e,t){return Object(r.createElement)(ve,{key:t,bump:e,checkoutStep:g,checkoutPos:E,stepPos:t,view:Object(H.decodeEntities)(C)})})),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-action-wrap"},Object(r.createElement)(u.Button,{isSecondary:!0,onClick:function(e){x?z({bump:!0}):function(e){null!==G&&A(at(at({},G),{},{parent_id:parseInt(h),is_substep:!0,title:Object(s.__)("Order Bump","funnel-builder")})),!G&&T(!0),!G&&L(Object(s.__)("Order Bump is a part of Funnel Builder Pro","funnel-builder")),e.preventDefault()}(e)}},x&&Object(r.createElement)(p.a,{icon:"king",color:J.NOTICE_YELLOW,size:20}),Object(s.__)("Add Order Bump","funnel-builder"))))),k&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-clear"}),Object(r.createElement)("div",{className:"bwf-st-c-sub-st-wrap is-ob-fake"},Object(r.createElement)(V,{type:"order_bump",onClick:function(){return T(!0)},modalContent:{title:Object(s.__)("Order Bump","funnel-builder"),content:{benefits:[Object(s.__)("Eye-catching bump styles","funnel-builder"),Object(s.__)("Targeted offers based on cart contents","funnel-builder"),Object(s.__)("Increased product discoverability","funnel-builder")]},image:Object(b.O)()+"order-bump.png",proLink:Object(b.P)(["Order","Bump","Upgrade","Modal"])}}))),B.bump&&Object(r.createElement)(he.a,{isOpen:B.bump,onRequestClose:function(){return z({status:!1})}}))},ut=["step","step","provided","isDragging"];function st(){return(st=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var bt=Object(R.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-d-icon-drag"},Object(r.createElement)(p.a,{icon:"ul",size:"20"}))})),ft=function(e){var t=e.step,n=void 0===t?{}:t,a=n.type,o=n.experiment,i=void 0===o?[]:o,l=e.step,u=e.provided,f=e.isDragging,p=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ut),m=Object(b.Y)(a);if(!l)return null;return Object(r.createElement)("div",st({className:d()("bwf-st-c-wrap",{"is-dragging":f}),ref:u.innerRef},u.draggableProps),Object(r.createElement)("div",{className:"bwf-st-c"},0<Object(c.size)(i)&&Object(r.createElement)("div",{className:"bwf-ab-tag"},Object(r.createElement)("div",{className:"bwf-ab--text"},Object(s.__)("A/B","funnel-builder"))),Object(r.createElement)(bt,{provided:u}),function(){switch(a){case"wc_checkout":return Object(r.createElement)(Te,st({step:l,title:null==m?void 0:m.title},p));case"wc_native":return Object(r.createElement)(lt,st({step:l,title:Object(s.__)("Checkout Page","funnel-builder")},p));default:return Object(r.createElement)(tt,st({step:l,title:null==m?void 0:m.title},p))}}()))},dt=Object(R.b)(ft);function pt(){return(pt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var mt=Object(R.a)((function(e){var t=e.items,n=e.stepPromotions,a=e.provided,c=Object(I.a)().isLite,o=Object(I.a)("ul").isLite,i=!1,l=!1;return Object(r.createElement)("div",pt({className:"bwf-f-steps",ref:a.innerRef},a.droppableProps),t.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"bwf-st-c-".concat(t)},Object(r.createElement)(dt,{key:"item-".concat(e.id),index:t,step:e,id:e.id,stepPos:t,isOBFake:!(!["wc_checkout","wc_native"].includes(e.type)||"yes"===n.bump)&&!(l||!c||Object(b.ab)("wc_order_bump")||(l=!0,0))}),["wc_checkout","wc_native"].includes(e.type)&&"yes"!==n.upsell&&(!i&&o?(i=!0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(V,{modalContent:{title:Object(s.__)("One Click Upsell Offer","funnel-builder"),content:{benefits:[Object(s.__)("Grab buyer's attention and make post purchase One Click Upsells based on items purchased. Let them accept offers with a single click.","funnel-builder")]},image:Object(b.O)()+"upsell.png",proLink:Object(b.P)(["One","Click","Upsell","Upgrade","Modal"])}}))):""))})))})),Ot=function(){return Object(r.createElement)("div",{className:"bwf-steps-container"},Object(r.createElement)("div",{className:"bwf-f-steps is-placeholder"},Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"}))))),Object(r.createElement)("div",{className:"bwf-st-c-wrap"},Object(r.createElement)("div",{className:"bwf-st-c-head"}),Object(r.createElement)("div",{className:"bwf-st-c"},Object(r.createElement)("span",{style:{visibility:"hidden",margin:0,width:"15px"},title:"Click here and start drag and drop",className:"bwf-d-icon-drag dashicons dashicons-menu"}),Object(r.createElement)("div",{className:"bwf-st-c-title"},Object(r.createElement)("span",{className:"is-placeholder long"})),Object(r.createElement)("div",{className:"bwf-card-controls bwf-loading-card"},Object(r.createElement)("a",{target:"_blank",href:"",title:"View Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})),Object(r.createElement)("a",{href:"",title:"Edit Step",className:"bwf-card-action"},Object(r.createElement)("span",{className:"is-placeholder"})))))))},yt=n(289);n(795),n(22);function vt(e){return(vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jt(e){return function(e){if(Array.isArray(e))return St(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Et(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ht(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=vt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=vt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==vt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||Et(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){if(e){if("string"==typeof e)return St(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var kt=function(e){var t=_t(Object(r.useState)([]),2),n=t[0],a=t[1],o=_t(Object(r.useState)([]),2),i=o[0],f=o[1],d=_t(Object(r.useState)([]),2),m=d[0],v=d[1],j=_t(Object(r.useState)(!1),2),g=j[0],w=j[1],_=_t(Object(r.useState)(!1),2),E=_[0],S=_[1],k=_t(Object(r.useState)(!0),2),N=k[0],x=k[1],C=_t(Object(r.useState)([]),2),P=C[0],A=C[1],T=e.isOpen,L=e.onRequestClose,D=e.funnelID,F=(e.stepsListTypes,Object(I.b)().showSnackbar),B=y.a.getFunnel(),z=(y.a.getFunnelSteps(),Object(O.a)().setUpdateFunnel);Object(r.useEffect)((function(){var e=[];P.map((function(t){[0,"0"].includes(t.status)&&e.push({type:t.type,id:Number(t.id)}),Object(c.size)(t.subStep)&&t.subStep.map((function(n){[0,"0"].includes(n.status)&&e.push({type:n.type,id:Number(n.id),subParentId:Number(t.id)})}))})),v(e)}),[P]);Object(r.useEffect)((function(){if(Object(c.size)(B.steps)){var e=B.steps.map((function(e){var t,n,r,a,o;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(a=r.substeps)||void 0===a||null===(a=a.wc_order_bump)||void 0===a?void 0:a.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(o=r.substeps)||void 0===o||null===(o=o.offer)||void 0===o?void 0:o.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return[0,"0"].includes(e.status)||Object(c.size)(e.subStep)&&Object(c.size)(n)?e:void 0}));A(e)}}),[]);var M=function(e,t){a((function(e){return[].concat(jt(e),[t])}));var n="";n="/funnel-".concat(e,"/save-state/").concat(t,"?funnel_id=").concat(D),l()({path:Object(b.u)(n),method:"POST",data:{status:!0}}).then((function(e){var n,r;e.success?(a((function(e){return[e.filter((function(e){return e!==t}))]})),f((function(e){return[].concat(jt(e),[t])})),e.step_data.hasOwnProperty("upsell_id")&&(n=e.step_data.upsell_id,r="offer"),e.step_data.hasOwnProperty("checkout_id")&&(n=e.step_data.checkout_id,r="wc_order_bump"),function(e,t,n,r){var a=null==B?void 0:B.steps.map((function(a){if(n&&a.id===Number(n)){var c=a.substeps[r].map((function(e){var n=gt(gt({},e._data),{},{status:t.includes(e.id)?"1":e._data.status});return gt(gt({},e),{},{_data:n})})),o=gt(gt({},a.substeps),{},wt({},r,c));return gt(gt({},a),{},{substeps:o})}if(t.includes(a.id)){var i=gt(gt({},a._data),{},{status:e?"1":"0"});return gt(gt({},a),{},{_data:i})}return a}));B.steps=a;var c=JSON.parse(JSON.stringify(B));z(c)}(!0,[t],n,r)):(e.message||e.msg)&&F(e.message||e.msg)})).catch((function(e){console.log(e),F(Object(s.__)("Status Updation Failed","funnel-builder"))}))},U=function(){w(!0);var e="/funnels/".concat(D,"/publish-all");l()({path:Object(b.u)(e),method:"POST",data:{steps:JSON.stringify(m)}}).then((function(e){e.status?(Object(c.size)(e.steps)&&m.map((function(e){var t=null==B?void 0:B.steps.map((function(t){if(t.id===e.subParentId){var n=t.substeps["Offer"===e.type?"offer":"wc_order_bump"].map((function(t){var n=gt(gt({},t._data),{},{status:Number(e.id)===Number(t.id)?"1":t._data.status});return gt(gt({},t),{},{_data:n})})),r=gt(gt({},t.substeps),{},wt({},"Offer"===e.type?"offer":"wc_order_bump",n));return gt(gt({},t),{},{substeps:r})}if(Number(e.id)===Number(t.id)){var a=gt(gt({},t._data),{},{status:"1"});return gt(gt({},t),{},{_data:a})}return t}));B.steps=t;var n=JSON.parse(JSON.stringify(B));z(n)})),w(!1),S(!0)):(e.message||e.msg)&&F(e.message||e.msg)})).catch((function(e){console.log(e),F(Object(s.__)("Status Updation Failed","funnel-builder"))}))};return Object(r.useEffect)((function(){var e=0;P.map((function(t){[0,"0"].includes(t.status)&&(e+=1),t.subStep.map((function(t){[0,"0"].includes(t.status)&&(e+=1)}))})),e&&e<2&&x(!1)}),[P,B]),T&&Object(r.createElement)("div",null,Object(r.createElement)(u.Modal,{className:"bwf-admin-modal bwf-publish-modal bwf-admin-modal-squeezy bwf-admin-modal-no-header",isDismissible:!0,onRequestClose:function(){return L()}},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(s.__)("Publish Steps","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},!E&&N&&Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return U()}},Object(r.createElement)("span",{style:gt({},g&&{visibility:"hidden"})},Object(s.__)("Publish All","funnel-builder")),g&&Object(r.createElement)(h.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(s.__)("Close"),onClick:function(){return L()}},Object(r.createElement)(p.a,{icon:"close",height:20,width:20})))),Object(r.createElement)("div",{className:"bwf-info"},Object(s.__)("Following steps need to publish to make accessible to your customers:","funnel-builder")),P.map((function(e,t){var a;return Object(r.createElement)("div",{key:t,className:"bwf-draft-list"},Object(r.createElement)("div",{className:"bwf-title"},Object(H.decodeEntities)(e.title)),Object(r.createElement)(Z.c,{content:"wc_upsells"===e.type?Object(s.__)("One Click Upsell","funnel-builder"):Object(b.nb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary components-button bwf-ripple ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(h.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||i.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(p.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(s.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!i.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(s.__)("Publish","funnel-builder")),Object(c.size)(e.subStep)&&Object(c.size)(null==e||null===(a=e.subStep)||void 0===a?void 0:a.filter((function(e){return[0,"0"].includes(e.status)})))?e.subStep.map((function(e,t){if([0,"0"].includes(e.status))return Object(r.createElement)(r.Fragment,{key:t},Object(r.createElement)("div",{className:"bwf-title bwf-sub-step"},Object(r.createElement)("span",null,Object(H.decodeEntities)(e.title))),Object(r.createElement)(Z.c,{content:Object(b.nb)(e.type)}),n.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-loading-btn is-secondary bwf-ripple components-button".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(h.a,{color:"#0073aa",style:{position:"absolute"}})),!n.includes(e.id)&&(E||i.includes(e.id))&&Object(r.createElement)("div",{className:"is-publish bwf-publish-btn components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden")},Object(r.createElement)(p.a,{icon:"check-circle",size:"16"}),Object(r.createElement)("span",null,Object(s.__)("Published","funnel-builder"))),!E&&!n.includes(e.id)&&!i.includes(e.id)&&Object(r.createElement)("div",{className:"bwf-btn-small bwf-h-30 bwf-t-right is-secondary bwf-ripple components-button ".concat([0,"0"].includes(e.status)?"":"bwf-visibility-hidden"),onClick:function(){return M(e.type,e.id)}},Object(s.__)("Publish","funnel-builder")))})):null)}))))},Nt=n(156),xt=n(83),Ct=(n(796),n(79));n(754);function Pt(e){return(Pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function At(){At=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},o=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof O?t:O,o=Object.create(c.prototype),i=new C(r||[]);return a(o,"_invoke",{value:S(e,n,i)}),o}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",d="executing",p="completed",m={};function O(){}function y(){}function v(){}var j={};u(j,o,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(P([])));g&&g!==n&&r.call(g,o)&&(j=g);var w=v.prototype=O.prototype=Object.create(j);function _(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,c,o,i){var l=b(e[a],e,c);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Pt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(s).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,i)}))}i(l.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function S(t,n,r){var a=f;return function(c,o){if(a===d)throw Error("Generator is already running");if(a===p){if("throw"===c)throw o;return{value:e,done:!0}}for(r.method=c,r.arg=o;;){var i=r.delegate;if(i){var l=k(i,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=b(t,n,r);if("normal"===u.type){if(a=r.done?p:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function k(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,k(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var c=b(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,m;var o=c.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function P(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(Pt(t)+" is not iterable")}return y.prototype=v,a(w,"constructor",{value:v,configurable:!0}),a(v,"constructor",{value:y,configurable:!0}),y.displayName=u(v,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,u(e,l,"GeneratorFunction")),e.prototype=Object.create(w),e},t.awrap=function(e){return{__await:e}},_(E.prototype),u(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var o=new E(s(e,n,r,a),c);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},_(w),u(w,l,"Generator"),u(w,o,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=P,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var o=this.tryEntries[c],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:P(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function Tt(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Pt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Pt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(a.useParams)(),n=t.id,i=t.builder,f=t.filter,d=e.funnelId,m=void 0===d?n:d,j=location&&location.search?Object(o.parse)(location.search.substring(1)):{},h=Object(Nt.a)().resetFlowData,E=Object(xt.a)().resetCanvasData,S=j.importType,N=Object(O.a)(),x=N.fetch,C=N.sortSteps,P=N.updateFunnelViewLink,A=N.setShowProModal,L=N.setShowAddStepModal,D=N.setIsFunnelEmpty,F=N.setFunnelSteps,B=N.setLoading,z=Object(r.useRef)(!0),R=y.a.getFunnelID,G=y.a.getFunnel,q=y.a.getFunnelStatus,J=y.a.getFunnelLoading,$=y.a.getFunnelError,Y=y.a.getShowProModal,V=y.a.getShowAddStepModal,H=y.a.getIsFunnelEmpty,Q=R(),W=G(),K=(q(),J()),X=$(),Z=Y(),ee=V(),te=H(),ne=(0,Object(k.a)().getStepPromotion)(),re=Object(oe.a)().setControlTitle,ae=Ft(Object(r.useState)(!1),2),ce=ae[0],ie=ae[1],le=Object(I.b)(),ue=le.showSnackbar,se=le.hideSnackbar,be=Ft(Object(r.useState)(!1),2),fe=be[0],de=be[1],pe=Ft(Object(r.useState)(!1),2),me=pe[0],Oe=pe[1],ye=Ft(Object(r.useState)(""),2),ve=ye[0],je=ye[1],ge=Ft(Object(r.useState)([]),2),we=ge[0],_e=ge[1],Ee=Ft(Object(r.useState)({}),2),Se=(Ee[0],Ee[1]),ke=Ft(Object(r.useState)([]),2),Ne=ke[0],xe=ke[1],Ce=Object(b.fb)(),Pe=Object(v.a)().setActiveGroup;Object(r.useEffect)((function(){(parseInt(Q)!==parseInt(m)||Object(c.isEmpty)(W))&&(B(!0),x(parseInt(m)))}),[]),Object(r.useEffect)((function(){re(null),de(!1)}),[K]);var Ae=function(e,t){return e.filter((function(e){return e.type===t}))},Te=function(){var e="";if(!Ce&&!K&&!ce&&W&&W.steps&&W.steps.length&&Array.isArray(W.steps)){var t=Object(c.size)(Ae(W.steps,"wc_checkout")),n=Ae(W.steps,"wc_thankyou"),r=Ae(W.steps,"wc_upsells");t?t&&(function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_upsells"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(W.steps)||function(e){for(var t=!1,n=e.length-1;n>=0;n--)"wc_thankyou"===e[n].type?t=!0:"wc_checkout"===e[n].type&&(t=!1);return t}(W.steps)?(Object(c.size)(n)&&Object(c.size)(r)?e="".concat(Object(s.__)("Make sure that your <strong>Thank You</strong> step and <strong>One-Click Upsell offers</strong> step are placed below the <strong>checkout</strong> step.","funnel-builder")):Object(c.size)(n)?e="".concat(Object(s.__)("Make sure that your <strong>Thank You</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder")):Object(c.size)(r)&&(e="".concat(Object(s.__)("Make sure that your <strong>One-Click Upsell offers</strong> step is placed below the <strong>checkout</strong> step.","funnel-builder"))),je(e)):je("")):function(e){var t=Ae(e,"wc_thankyou"),n=Ae(e,"wc_upsells"),r="";Object(c.size)(t)&&Object(c.size)(n)?r="".concat(Object(s.__)("To trigger <strong>Thank You</strong> and <strong>One Click Upsell offers</strong> steps, you need to create a <strong>Checkout step</strong>.","funnel-builder")):Object(c.size)(t)&&!Object(c.size)(n)?r="".concat(Object(s.__)("To trigger <strong>Thank You</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder")):!Object(c.size)(t)&&Object(c.size)(n)&&(r="".concat(Object(s.__)("To trigger <strong>One Click Upsell offers</strong> step, you need to create a <strong>Checkout step</strong>.","funnel-builder"))),je(r)}(W.steps)}};Object(r.useEffect)((function(){"step"!==S&&Te()}),[W,ce,S]),Object(r.useEffect)((function(){return function(){te&&D(!1),se()}}),[]),Object(r.useEffect)((function(){S&&!Ce&&(f?Pe(f):"funnel"!==S||i?"step"===S&&!i&&z.current&&Pe("wc_checkout"):Pe("landing")),z.current&&(z.current=!1)}),[S]);Object(r.useEffect)((function(){if(Object(c.size)(W)){var e,t=null==W||null===(e=W.steps)||void 0===e?void 0:e.map((function(e){var t,n,r,a,o;return{type:null==e?void 0:e.type,id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status,subStep:(r=e,"wc_checkout"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(a=r.substeps)||void 0===a||null===(a=a.wc_order_bump)||void 0===a?void 0:a.map((function(e){var t,n;return{type:"bump",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):"wc_upsells"===(null==r?void 0:r.type)&&Object(c.size)(null==r?void 0:r.substeps)?null==r||null===(o=r.substeps)||void 0===o||null===(o=o.offer)||void 0===o?void 0:o.map((function(e){var t,n;return{type:"Offer",id:null==e?void 0:e.id,title:null==e||null===(t=e._data)||void 0===t?void 0:t.title,status:null==e||null===(n=e._data)||void 0===n?void 0:n.status}})):[])}})).filter((function(e){var t,n=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));return Object(c.size)(e.subStep)&&Object(c.size)(n)?e.subStep=n:[0,"0"].includes(e.status)?(e.subStep=[],e):void 0})),n=[];t.map((function(e){if("wc_checkout"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_checkout"),"wc_upsells"===e.type&&[0,"0"].includes(e.status)&&n.push("wc_upsells"),"wc_checkout"===e.type&&Object(c.size)(e.subStep)){var t,r=null==e||null===(t=e.subStep)||void 0===t?void 0:t.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(c.size)(r)).fill("bump").forEach((function(){n.push("bump")}))}if("wc_upsells"===e.type&&Object(c.size)(e.subStep)){var a,o=null==e||null===(a=e.subStep)||void 0===a?void 0:a.filter((function(e){return[0,"0"].includes(e.status)}));Array(Object(c.size)(o)).fill("offer").forEach((function(){n.push("offer")}))}["wc_checkout","wc_upsells"].includes(e.type)||Object(c.size)(e.subStep)||n.push(e.type)}));var r=n.reduce((function(e,t){return Lt(Lt({},e),{},Dt({},t,(e[t]||0)+1))}),{});xe(n),Se(r),_e(t),h(),E(),me||F(null==W?void 0:W.steps)}}),[W]);var Ie=function(){var e,t=(e=At().mark((function e(t){var n,r,a;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.oldIndex,r=t.newIndex,n!==r){e.next=3;break}return e.abrupt("return");case 3:return a=C(n,r),ie(!0),e.prev=5,e.next=8,l()({path:Object(b.u)("/funnels/".concat(m)),method:"PUT",data:{steps:JSON.stringify(a.map((function(e){return{id:e.id,type:e.type}})))}});case 8:Object(b.fb)()||P(a.length>0?a[0]._data.view:""),ue(Object(s.__)("Steps Updated","funnel-builder")),setTimeout((function(){return ie(!1)}),2e3),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),C(r,n),Object(b.fb)()||P(a.length>0?a[0]._data.view:""),ue(Object(s.__)("Steps Updation Failed","funnel-builder")),setTimeout((function(){return ie(!1)}),2e3);case 19:case"end":return e.stop()}}),e,null,[[5,13]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){Tt(c,r,a,o,i,"next",e)}function i(e){Tt(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(e){return t.apply(this,arguments)}}();if(S&&!Ce)return Object(r.createElement)(r.Fragment,null,"funnel"===S?Object(r.createElement)(_.default,{onImportComplete:function(){x(parseInt(m)),delete j.importType,delete j.group,Object(w.k)({},"/funnels/".concat(m),j)}}):Object(r.createElement)(g.a,{onImportComplete:function(){x(parseInt(m)),delete j.importType,delete j.group,Object(w.k)({},"/funnels/".concat(m),j)}}));if(!fe&&!K&&!te&&X)return Object(r.createElement)(Ct.a,{errorMessage:X.hasOwnProperty("message")?X.message:Object(s.__)("Unable to load Funnel Steps","funnel-builder")});var Le=[{type:"icon",data:{content:Object(r.createElement)(p.a,{icon:"zero-step-alt",width:"202",height:"151"})}},{type:"content",data:{class:"bwf-zero-state-heading-1",content:Object(s.__)("Start building your funnel","funnel-builder")}},{type:"content",data:{class:"bwf-zero-state-heading-2",content:Object(s.__)("Add a new step or pick a pre-built funnel","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(s.__)("Add New Step","funnel-builder"),proCheck:!1,onClick:function(){Object(w.k)({importType:"step"}),Pe("landing"),Ce&&L(!0)}},{text:Object(s.__)("View Funnels","funnel-builder"),proCheck:!1,props:{isPrimary:!1,isSecondary:!0},onClick:function(){Ce?(L(!0),Object(w.k)({importType:"wc_checkout"})):Object(w.k)({importType:"funnel"})}}]}}];return!(W&&W.hasOwnProperty("steps")&&Object(c.isArray)(W.steps)&&0!==Object(c.size)(W.steps)||K||fe)?Object(r.createElement)(yt.a,{data:Le}):Object(r.createElement)(r.Fragment,null,fe||K?Object(r.createElement)(Ot,null):Object(r.createElement)(r.Fragment,null,Object(b.fb)()&&Object(c.some)(W.steps,{type:"wc_native"})&&Object(r.createElement)("div",null,Object(c.some)(W.steps,{type:"wc_native"})&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.Notice,{status:"warning",isDismissible:!1,className:"bwf-component-notice"},Object(r.createElement)("div",{className:"bwf-flex bwf--g12 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(p.a,{icon:"shield",style:{margin:0}})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(s.__)("You are using the default WooCommerce checkout page. Order bumps, upsell & thank you pages will work with the default checkout page. However, we recommend adding an optimized checkout page from FunnelKit.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_clear_20"}))),Object(r.createElement)("div",{className:"bwf-steps-container"},Object(c.size)(ve)?Object(r.createElement)("div",{className:"bwf-publish-container bwf-no-action",dangerouslySetInnerHTML:{__html:ve}}):null,Object(r.createElement)(mt,{items:W.steps,onSortEnd:Ie,helperClass:"bwf-steps-drag__helper",stepPromotions:ne}))),Object(r.createElement)(M,{funnelId:m}),Object(r.createElement)(U.a,{funnelId:m}),Z&&Object(r.createElement)(he.a,{isOpen:Z,onRequestClose:function(){return A(!1)}}),Object(r.createElement)(T,{query:j,isOpen:ee,setModalOpenState:function(e){L(e)},hasCheckoutStep:W&&W.steps&&Object(c.isArray)(W.steps)&&W.steps.some((function(e){return"wc_checkout"===e.type})),funnelId:m}),me&&Object(r.createElement)(kt,{isOpen:me,stepsList:we,funnelID:m,stepsListTypes:Ne,onRequestClose:function(){return Oe(!1)}}))}},284:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n(5),c=n.n(a),o=(n(299),["className","onChange","label","color","disabled"]);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=e.className,n=e.onChange,a=e.label,u=e.color,s=e.disabled,b=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,o),f=l(Object(r.useState)(!0),2),d=f[0],p=f[1],m=Object(r.useRef)();return Object(r.createElement)("div",{className:c()("bwf-checkbox-control bwf-checkbox",t)},Object(r.createElement)("span",{className:"bwf-checkbox-control-inner"},Object(r.createElement)("input",i({type:"checkbox"},b,{onChange:function(e){s||(n(e.target.checked),p(!1))},ref:m,className:c()({"bwf-no-animation":d,"bwf-disable":s}),style:{"--current-checkbox-color":u}}))),a&&Object(r.createElement)("label",{className:"bwf-checkbox-control__label ".concat(s?"bwf-disable":""),onClick:function(){return m.current.click()}},a))}},286:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(2),c=n(5),o=n.n(c),i=n(52),l=n(9),u=(n(4),n(1)),s=n(60);n(316);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.label,n=void 0===t?"":t,c=e.id,f=void 0===c?"":c,d=e.value,p=e.onChange,m=void 0===p?a.noop:p,O=e.className,y=e.style,v=void 0===y?{}:y,j=e.isHover,h=e.hoverVal,g=void 0===h?"":h,w="inspector-color-".concat(Object(i.useInstanceId)(l.ColorPicker)),_=b(Object(r.useState)(!1),2),E=_[0],S=_[1],k=b(Object(r.useState)(),2),N=k[0],x=k[1],C=b(Object(r.useState)(0),2),P=C[0],A=C[1],T=j?Object(a.isArray)(d)?d:[d,g]:d,I=function(e){if(j){var t=T;return t[P]=e.hex,void m(t,{id:f})}m(e.hex,{id:f})},L=j?T[P]:T;return Object(r.createElement)("div",{className:o()("components-color-field",O),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:w},n),j&&Object(r.createElement)(l.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(l.Button,{className:o()("is-secondary-gray is-small",{"is-selected":0===P}),onClick:function(){return A(0)}},Object(u.__)("Default","funnel-builder")),Object(r.createElement)(l.Button,{className:o()("is-secondary-gray is-small",{"is-selected":1===P}),onClick:function(){return A(1)}},Object(u.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(l.ColorIndicator,{colorValue:L,ref:x,className:o()({"is-empty":Object(a.isEmpty)(L)})}),Object(r.createElement)("span",{className:"indicator-text"},L||"Select")),E&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:N},Object(r.createElement)(l.ColorPicker,{color:L,onChangeComplete:I}),Object(r.createElement)(l.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(u.__)("Reset","funnel-builder")))))}},289:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n.n(a),o=n(2),i=n(9),l=n(42),u=(n(303),n(6));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,a=e.className,f=e.center,d=void 0!==f&&f,p=e.isDismissive,m=void 0!==p&&p,O=e.onDismisal,y=void 0===O?function(){}:O,v=e.isProFeatureLocked;if(Object(o.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:c()("bwf-zero-state",a,{"bwf-block-t-center":d})},m&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return y()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(l.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(l.a,{key:"layout-block-"+t,className:c()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(l.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(l.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(l.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(i.Button,b({isPrimary:!0,key:t,onClick:e.onClick,className:"".concat(e.className," bwf-no-ripple")},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},291:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(56),o=n(2),i=n(9);n(5),n(305);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.value,n=void 0===t?"":t,i=e.onChange,l=e.keyid,u=e.openMergeTagModal,b=e.customSettings,d=void 0===b?{}:b,p=e.toolbar,m=e.quicktags,O=void 0!==m&&m,y=Object(r.useRef)(!1),v=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(y.current){var e=window.tinymce.get("editor-bwf"+l);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),v.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,a=["lists","link"];Object(o.isEmpty)(r)||(a=[].concat(f(Object(o.isArray)(r)?r:r.split(",")),f(a))),wp.editor.initialize("editor-bwf"+l,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:p||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:f(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+l,plugins:a},d),quicktags:!!O&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(o.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,i(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){c.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==c.BACKSPACE&&t.keyCode!==c.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===c.F10&&t.stopPropagation()})),u&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(a.__)("Merge Tags","funnel-builder"),tooltip:Object(a.__)("Merge Tags","funnel-builder"),onclick:function(){u(!0)}}),e.on("init",(function(){null==e||e.setContent(v.current),n!==v.current&&i(v.current)}))}function r(){"complete"===document.readyState&&e()}return y.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",r),function(){document.removeEventListener("readystatechange",r),wp.oldEditor.remove("editor-bwf"+l)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+l,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){i(e.target.value)},onBlur:function(e){i(e.target.value)}}))};function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,a=m(Object(r.useState)("visual"),2),c=a[0],o=(a[1],m(Object(r.useState)(),2)),l=o[0],u=o[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===c&&Object(r.createElement)(p,e),n&&"text"==c&&Object(r.createElement)(i.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:l,onChange:function(t){null!=e&&e.onChange(t)}}))))}},294:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return f}));var r=n(0),a=n(282);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var l=function(e){return function(t){return Object(r.createElement)(a.a,{onDragEnd:function(e){var n=e.destination,r=e.source;if(n){var a=Array.from(t.items),c=o(a.splice(r.index,1),1)[0];a.splice(n.index,0,c),t.onSortEnd&&t.onSortEnd({oldIndex:r.index,newIndex:n.index,items:a})}}},Object(r.createElement)(a.c,{droppableId:"droppable"},(function(n){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(e,c({},n.droppableProps,t,{provided:n})),n.placeholder)})))}},u=["id","index"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var b=function(e){return function(t){var n=t.id,c=t.index,o=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,u);return Object(r.createElement)(a.b,{draggableId:n.toString(),index:c,key:n},(function(t,n){return Object(r.createElement)(e,s({index:c,provided:t},o,{isDragging:n.isDragging}))}))}},f=function(e){return function(t){var n;return Object(r.createElement)("div",null===(n=t.provided)||void 0===n?void 0:n.dragHandleProps,Object(r.createElement)(e,t))}}},299:function(e,t,n){},303:function(e,t,n){},305:function(e,t,n){},316:function(e,t,n){},327:function(e,t,n){"use strict";var r=n(9),a=n(0),c=n(5),o=n.n(c),i=n(295),l=n(284),u=n(277),s=n(2),b=n(337),f=["ajax_cb","options"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=n(291),y=["value","onChange","id","label","className"];function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var j=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,c=e.id,i=e.label,l=e.className,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,y);function s(e){r(e,c)}return Object(a.createElement)("div",{className:o()("components-richeditor",l)},i&&Object(a.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:c},i),Object(a.createElement)(O.a,v({content:n,value:n,setContent:s,onChange:s,keyid:c},u)))},h=n(6),g=function(e){var t=e.label,n=e.copy_text;return Object(a.createElement)("div",{className:o()("components-copier")},t&&Object(a.createElement)("label",{className:"components-label"},t),n&&Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-copier-text"},n," "),Object(a.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(a.createElement)(h.a,{icon:"duplicate",size:20}),"Copy")))},w=n(281),_=n(286),E=n(1),S=(n(330),n(4)),k=n(279);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=N(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==N(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var n=e.split(" ");return T(T(T(T({},t.attrTop,Object(s.isEmpty)(n[0])?"0":n[0]),t.attrRight,Object(s.isEmpty)(n[1])?"0":n[1]),t.attrBottom,Object(s.isEmpty)(n[2])?"0":n[2]),t.attrLeft,Object(s.isEmpty)(n[3])?"0":n[3])}return T(T(T(T({},t.attrTop,"0"),t.attrRight,"0"),t.attrBottom,"0"),t.attrLeft,"0")},L={label:Object(E.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(E.__)("Top","funnel-builder"),labelRight:Object(E.__)("Right","funnel-builder"),labelBottom:Object(E.__)("Bottom","funnel-builder"),labelLeft:Object(E.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"},D=Object(k.a)((function(e){var t=e.value,n=void 0===t?{}:t,c=e.label,i=e.type,l=e.onChange,u=void 0===l?s.noop:l,b=(e.defaultSync,I(n,e)),f="",d=P(Object(a.useState)(!Object(S.k)(Object.values(b))),2),p=d[0],m=d[1],O=P(Object(a.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,T(T(T(T({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),2),y=O[0],v=O[1];f=y&&y[e.attrUnit]?y[e.attrUnit]:"px",Object(a.useEffect)((function(){v(C(C({},y),I(n,e)))}),[n]),Object(a.useEffect)((function(){v(Object(s.cloneDeep)(Object(s.defaultsDeep)(b,T(T(T(T({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),f=y&&y[e.attrUnit]?y[e.attrUnit]:"px"}),[]);var j=function(t,r){var a=t.target.value;if(p)!function(t){"padding"===i&&(t=t.toString().replace(/-/g,""));var r=C({},y);if(r[e.attrTop]=t,r[e.attrRight]=t,r[e.attrBottom]=t,r[e.attrLeft]=t,Object(s.isString)(n)){var a="".concat(r[e.attrTop]," ").concat(r[e.attrRight]," ").concat(r[e.attrBottom]," ").concat(r[e.attrLeft]);u(a)}else u(r)}(a);else{"padding"===i&&(a=a.toString().replace(/-/g,""));var c=C({},y);if(c[r]=a,Object(s.isString)(n)){var o="".concat(c[e.attrTop]," ").concat(c[e.attrRight]," ").concat(c[e.attrBottom]," ").concat(c[e.attrLeft]);u(o)}else u(c)}};return Object(a.createElement)("div",{className:"bwf-dimensions-control-component"},c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrTop)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrTop],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrRight)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrRight],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrBottom)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrBottom],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrLeft)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrLeft],min:"padding"===e.type?0:"%"===f?-100:e.min,max:"%"===f?100:e.max,"data-attribute":i}),Object(a.createElement)(r.Button,{className:o()("components-bwf-dimensions-control_reset",{"is-lock":p}),label:Object(E.__)("Reset","funnel-builder"),onClick:function(){return m((function(e){return!e}))},isSmall:!0},Object(a.createElement)(h.a,{icon:p?"lock":"unlock",size:"16"}))),Object(a.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))}),L),F=n(52);n(331);function B(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var M=[{id:"h-offset",selectindex:0,label:Object(E.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(E.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(E.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(E.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(E.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(E.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],U=function(e){var t=e.typography,n=e.setTypography,r=e.settingOptions,c=e.label,o=Object(F.useInstanceId)(U,"bwf-field-item");return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-box-shadow-control-component ",id:o},c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},r.map((function(e){return e.type?"color"===e.type?"":void 0:Object(a.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(a.createElement)("input",{type:"number",value:t[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(r){var a=r.target.value;a=e.hasOwnProperty("allownegative")&&e.allownegative?r.target.value:a<0?0:a;var c=B(t);c[e.selectindex]=a,n(c)}}),Object(a.createElement)("label",{htmlFor:e.id},e.label))})))),Object(a.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"}," ",Object(a.createElement)("label",{className:"components-base-control__label"},Object(E.__)("Shadow Color","funnel-builder")),Object(a.createElement)(_.a,{value:t[4],onChange:function(e){var r=B(t);r[4]=e,n(r)}})))},R=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,c=n.h_offset,o=void 0===c?"":c,i=n.v_offset,l=void 0===i?"":i,u=n.blur,s=void 0===u?"":u,b=n.spread,f=void 0===b?"":b,d=n.color,p=void 0===d?"":d,m=n.inset,O=[o,l,s,f,p,void 0===m?"":m];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(U,{typography:O,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:M,label:r}))};n(332);function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return J(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=e.value,n=e.onChange,c=e.label,o=e.defaultCustomValue,i=q(Object(a.useState)(""),2),l=i[0],b=i[1],f=q(Object(a.useState)(""),2),d=f[0],p=f[1];return Object(a.useEffect)((function(){Object(s.isEmpty)(d)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(p("auto"),b("100%")):(p("custom"),b(t)))}),[t]),Object(a.createElement)(a.Fragment,null,c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)("div",{className:"bwf-width-control"},Object(a.createElement)(r.TextControl,G({value:l,onChange:function(e){n(e),b(e)},disabled:"auto"===d},"custom"===d&&{type:"number",min:"0"})),Object(a.createElement)(u.a,{options:[{key:"auto",label:Object(E.__)("Auto","funnel-builder")},{key:"custom",label:Object(E.__)("Custom","funnel-builder")}],selected:d,onChange:function(e){p(e),"auto"===e?(n(""),b("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?o:t),b(o))}})))},Y=n(74),V=["label","tooltip"];function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(){return(X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var Z={checkbox:l.a,radio:w.a,select:u.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:i.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,f),o=p(Object(a.useState)(r),2),i=o[0],l=o[1],u=p(Object(a.useState)(!1),2),m=u[0],O=u[1];Object(a.useEffect)((function(){Object(s.isEmpty)(i)&&y()}),[i]);var y=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),l(t),O(!0)}})}))};return Object(a.createElement)(a.Fragment,null,m?Object(a.createElement)(b.a,d({options:i},c)):Object(a.createElement)("div",{className:"setting-form-field"},Object(a.createElement)("div",{className:"is-placeholder long"})))},richeditor:j,richtext:j,copier:g,color:_.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,V);return Object(a.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(a.createElement)(Y.a,{toolTipText:n,size:280,position:"bottom right"},Object(a.createElement)(h.a,{icon:"info",size:16}))),Object(a.createElement)(r.ToggleControl,X({},c,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":D,"box-shadow":R,"bwf-label":function(e){var t=e.label,n=e.class;return Object(a.createElement)("span",{className:o()("bwf_label",n)},t)},width:$};t.a=function(e){var t=e.input,n=e.formProps,c=e.values,i=e.customMapField,l=void 0===i?{}:i,u=W(W({},Z),l),b=u.text;if(t.type.toLowerCase()in u&&(b=u[t.type.toLowerCase()]),t.ajax_cb&&(b=u.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(c)){var f=c[t.id];if(Object(s.isEmpty)(f))c[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof f[0]){var d=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&f.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},d.push(t)}else if("string"==typeof e.value.id&&f.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},d.push(n)}})),c[t.id]=d}}var p,m;return Object(a.createElement)("div",{className:o()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(a.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(a.createElement)(b,W(W({label:t.label},(p=t,m=Object.assign({},p.props),p.type.toLowerCase()in u||(m.type=p.type.toLowerCase()),m.placeholder=p.placeholder,m.options=p.options,p.checkboxlabel&&(m.checkboxlabel=p.checkboxlabel),p.multiple&&(m.multiple=p.multiple),p.ajax_cb&&(m.ajax_cb=p.ajax_cb),"copier"===p.type&&(m=p),"width"===p.type&&(m=p),"color"===p.type&&(m=p,p.isHover&&p.hoverKey&&(m.hoverVal=c[p.hoverKey])),"richeditor"!==p.type&&"richtext"!==p.type&&"textarea"!==p.type||(m=p),"number"===p.type&&(m.min=p.min,m.max=p.max),"select"===p.type&&(m.excludeSelectedOptions=!1,m.options&&(m.options=m.options.map((function(e){return"object"!==H(e.value)&&(e.key="object"!==H(e.value)?e.value:e.key,e.value={id:e.value}),e}))),p.multiple&&(m.excludeSelectedOptions=!0,m.inlineTags=!0)),"richeditor"===p.type&&(m.id=p.id),"bwf-toggle"===p.type&&(m.tooltip=p.tooltip),"input"!==p.type&&"text"!==p.type&&"textarea"!==p.type||(m.placeholder=Object(E.__)("Type here…","funnel-builder")),"text"===p.type&&p.disabled&&(m.disabled=p.disabled),"toggle"===p.type&&(m.className="bwf-tooglecontrol-advance",m.tooltip=p.tooltip,m.label=p.label),m.keyid=p.key,m)),n)),t.hint&&Object(a.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},346:function(e,t,n){"use strict";var r=n(0),a=n(121),c=n(2),o=n(1),i=n(391),l=n(292),u=n(76),s=n(308);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(l.a)(),n=t.getTemplates,b=t.getBuilders,d=t.getDefaultBuilder,p=t.templateLoading,O=t.getActiveBuilder,y=t.getActiveGroup,v=t.getCurrentTemplate,j=t.getActiveStep,h=t.getActiveSubFilter,g=e.onImportComplete,w=e.isStoreCheckout,_=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,k=e.stepId,N=e.funnelId,x=Object(u.a)(),C=x.setActiveGroup,P=(x.setActiveSubFilter,x.setActiveBuilder),A=x.setCurrentTemplate,T=m(m({wc_checkout:Object(o.__)("Checkout","funnel-builder")},!w&&{landing:Object(o.__)("Sales","funnel-builder")}),{},{upsell:Object(o.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(o.__)("Thank You","funnel-builder")},!w&&{optin:Object(o.__)("Optin","funnel-builder"),optin_ty:Object(o.__)("Optin Confirmation","funnel-builder")}),I=Object(a.useParams)(),L=I.id,D=I.filter,F=I.builder,B=I.templateId,z=f(Object(r.useState)(!1),2),M=z[0],U=z[1],R=n();Object(r.useEffect)((function(){return F&&(C(D),P(F),A({id:B})),function(){C("funnel")}}),[]);var G=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(c.isEmpty)(R)&&!M&&F){var e=R[D][F][B];A({id:B,template:e}),U(!0)}}),[R]);var q=b(),J=d(),$=O(),Y=p(),V=y(),H=v(),Q=(j(),h()),W=function(){var e=J;return Object(c.isEmpty)($)||(e=$),q&&q[V]&&!q[V][e]&&(e=q[V][J]?J:"elementor"),e},K=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&Q&&$?R[t][$][e].group_type[n||Q]:e},X=function(e){return"wc_checkout"===V?Q===e.no_steps:"optin"!==V||e.group.includes(Q)},Z=function(e,t,n){var r="";return"landing"===V?r="sp":"optin"===V?r="op":"optin_ty"===V?r="op-confirmed":"wc_checkout"===V?r="checkouts":"upsell"===V?r="offer":"wc_thankyou"===V&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===V&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ee=w?"/store-checkout":0===L?"/templates":"/funnels/".concat(L);return Object(r.createElement)(i.a,{filters:s.e,templates:R,activeBuilder:W(),templateCards:function(){if(Object(c.isEmpty)(R)||Object(c.isEmpty)([V]))return{};var e=W(),t={};return R[V]&&R[V][e]&&(t=R[V][e]),t}(),editors:q,defaultBuilder:J,isTemplateLoading:Y,activeTemplateGroup:V,templateGroup:T,previewData:function(){if(Object(c.isEmpty)(R)||"funnel"===V)return{};var e={},t=[],n=[];try{var r=W();for(var a in t=[],R[V][r]){var o=R[V][r][a];if(!o.build_from_scratch&&X(o)){var i={};if(i.id=a,i.funnel=o.group_type?o.group_type[Object.keys(o.group_type)[0]]:a,i.slug=a,i.name=o.name,i.thumbnail=o.thumbnail,i.template=null==H?void 0:H.id,i.pro=o.pro,i.group_type=o.group_type,i.type=V,i.preview=null==o?void 0:o.prevslug,t.push(i),o.group_type)Object.values(o.group_type).forEach((function(e){var t=R[V][r][e];n.push({id:null==t?void 0:t.prevslug,preview:Z(0,t,r)})}));else n.push({id:null==o?void 0:o.prevslug,preview:Z(0,o,r)})}}var l=R[V][r][K(null==H?void 0:H.id,V)];e.activeTemplate={thumbnail:K(null==H?void 0:H.id,V),preview:Z(null==H||H.id,l,r),slug:K(null==H?void 0:H.id,V),name:null!=H&&H.id?R[V][r][null==H?void 0:H.id].name:"",pro:null!=H&&H.id?R[V][r][null==H?void 0:H.id].pro:"",tempPro:null!=H&&H.id?R[V][r][K(null==H?void 0:H.id,V,!("wc_checkout"!==V&&"optin"!==V||!G(H.template))&&G(H.template))].pro:"",group:V,filters:!!l.group_type&&Object.keys(l.group_type),type:V,funnelGroup:[V],prevId:l.prevslug},e.thumbnails=t,e.previews=n}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:k&&N?N:w&&_?_:L,onImportComplete:g,templateFilterCheck:function(e,t){return"wc_checkout"===V?t===e.no_steps:"optin"!==V||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:Q,showDefaultEditorNotice:!1,isStoreCheckout:w,parentRoute:ee,showTemplatesNav:!(k||w&&0===L),urlDependency:S,stepId:k,importApiPrefix:w?"store-checkout":"funnels"})}},361:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(1),o=n(9),i=n(413),l=n(22),u=n(281),s=n(304),b=n(19);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,d=e.onRequestClose,p=e.onCreationScreen,m=e.creationSuccess,O=e.clearAndCloseEverything,y=e.isBusy,v=e.errors,j=Object(b.a)(),h=j.isProFeatureLocked,g=j.isBasic,w=Object(b.a)("ck").isProFeatureLocked,_=g&&"wc_checkout"===(null==t?void 0:t.type)?w:h,E=f(Object(r.useState)(""),2),S=E[0],k=E[1],N=f(Object(r.useState)(""),2),x=N[0],C=N[1],P=f(Object(r.useState)(null),2),A=P[0],T=P[1],I=f(Object(r.useState)(null!=v?v:{}),2),L=I[0],D=I[1],F=f(Object(r.useState)("new"),2),B=F[0],z=F[1],M=f(Object(r.useState)(!1),2),U=M[0],R=M[1];Object(r.useEffect)((function(){D(v)}),[v]),Object(r.useEffect)((function(){var e;C(null==A||null===(e=A.step)||void 0===e?void 0:e.name),"new"===B&&Object(a.isEmpty)(S.trim())||"existing"===B&&Object(a.isEmpty)(x)?R(!0):R(!1)}),[B,A,S,x]);var G=function(){if(!U){var t=e.errors;A&&A.copyFrom&&!A.step&&(t.copyFrom=Object(c.__)("Copy From: This field is required","funnel-builder")),0===Object(a.size)(t)?n({copyFrom:A&&A.hasOwnProperty("step")?A.step:null,title:"existing"===B?"".concat(x," Copy"):S}):D(t)}};return Object(r.createElement)(r.Fragment,null,L&&Object(a.size)(L)>0&&Object(r.createElement)(s.a,{status:"error",isDismissible:!0,onRemove:function(){return D({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(L).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},L[e])})))),y||!p||m?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){G(),e.preventDefault()}},Object(r.createElement)(u.a,{options:[{value:"new",label:Object(c.__)("Create New","funnel-builder")},{value:"existing",label:Object(c.__)("Clone Existing","funnel-builder"),isPro:_}],selected:B,onChange:function(e){z(e)},className:"bwf-add-bump_radio-items"}),"new"===B?Object(r.createElement)(o.TextControl,{label:Object(c.__)("Name","funnel-builder"),placeholder:Object(c.__)("Enter Name","funnel-builder"),value:S,onChange:function(e){return k(e)}}):null,"existing"===B?Object(r.createElement)(i.a,{step:t,onStepSelected:function(e){return T(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(l.a,{className:"bwf-modal-cancel-btn",onClick:d},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(l.a,{isPrimary:!0,onClick:G,disabled:U,isBusy:y,className:U?"bwf-no-ripple":""},Object(c.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(c.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(l.a,{isPrimary:!0,onClick:function(){d(),O()}},Object(c.__)("OK","funnel-builder")))))}},362:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(1),o=n(4),i=n(5),l=n.n(i),u=n(6),s=n(11),b=n.n(s),f=n(401),d=n(80);function p(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,i=m(Object(r.useState)({default_css:"",skin_all:{}}),2),s=i[0],O=i[1],y=m(Object(r.useState)(!0),2),v=y[0],j=y[1];return Object(r.useEffect)((function(){b()({path:Object(o.u)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&O({skin_all:e.skin_all,default_css:e.default_css}),j(!1)})).catch((function(e){j(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(a.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(c.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(d.a,{isPrimary:!0,proLink:Object(o.P)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(u.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:l()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},p(new Array(8)).map((function(e,t){return Object(r.createElement)(f.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,s.default_css),Object.keys(s.skin_all).map((function(e){var t=s.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},401:function(e,t,n){"use strict";n.d(t,"c",(function(){return b})),n.d(t,"b",(function(){return p})),n.d(t,"a",(function(){return m}));var r=n(0),a=n(327),c=n(4),o=n(2),i=n(443),l=n(5),u=n.n(l),s={image:i.a},b=function(e,t,n,c){return e.map((function(e,i){return"richeditor"===e.type&&(e.openMergeTagModal=c,e.id="richeditor-".concat(i),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:i},(Object(o.isEmpty)(e.toggler)||f(t,e.toggler,e))&&Object(r.createElement)(a.a,{input:e,formProps:n(e.key),values:t,customMapField:s}))}))},f=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var a=0;a<r.length;a++)if(t.value.indexOf(r[a])>-1){n=!0;break}}else Object(c.v)(r)==Object(c.v)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},d=function(e,t){if(e.selectors&&e.stylekey&&!Object(o.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,a="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(a)):t+="".concat(r,"{").concat(a,"}")}return t},p=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(a).addClass(e.contentClass):jQuery(a).show():e.contentClass?jQuery(a).removeClass(e.contentClass):jQuery(a).hide()}break;case"select":if(e.selectors){var c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;e.value&&Object(o.isArray)(e.allClasses)?(jQuery(c).removeClass(e.allClasses),jQuery(c).addClass(e.value)):r=d(e,r)}break;case"color":if(e.selectors){var i=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,l="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(i,"{").concat(l,"}")}if(e.isHover&&e.hoverSelectors){var u=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,s="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(u,"{").concat(s,"}")}break;case"dimension-control":if(e.selectors){var b=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,f="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(b,"{").concat(f,"}"),r+="".concat(b,"{").concat(f,"}")}break;case"box-shadow":if(e.selectors){var p=e.value,m=p.h_offset,O=p.v_offset,y=p.blur,v=p.spread,j=p.color,h=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(o.isEmpty)(m)||Object(o.isEmpty)(O)||Object(o.isEmpty)(y)||Object(o.isEmpty)(v)||Object(o.isEmpty)(j))){var g="".concat(e.stylekey,":").concat(m,"px ").concat(O,"px ").concat(y,"px ").concat(v,"px ").concat(j,";");r+="".concat(h,"{").concat(g,"}")}}break;case"image":if(e.selectors){var w,_,E,S,k,N,x=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(o.isEmpty)(null==e||null===(w=e.value)||void 0===w?void 0:w.custom_url))if(jQuery(x+" img").length)jQuery(x+" img").attr("src",null==e||null===(k=e.value)||void 0===k?void 0:k.image_url);else jQuery(x).find("svg").remove(),jQuery(x).append('<img src="'+(null==e||null===(N=e.value)||void 0===N?void 0:N.image_url)+'" alt="order bump" />');else if(Object(o.isEmpty)(null==e||null===(_=e.value)||void 0===_?void 0:_.custom_url))jQuery(x+" img").attr("src","").attr("srcset","");else{var C,P;if(jQuery(x+" img").length)jQuery(x+" img").attr("src",null==e||null===(C=e.value)||void 0===C?void 0:C.custom_url).attr("srcset","");else jQuery(x).find("svg").remove(),jQuery(x).append('<img src="'+(null==e||null===(P=e.value)||void 0===P?void 0:P.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var A,T,I=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,L=null!==(A=null==e||null===(T=e.value)||void 0===T?void 0:T.position)&&void 0!==A?A:"left";if(null!=e&&e.alignmentClassList){var D=Object.values(null==e?void 0:e.alignmentClassList),F=null==e?void 0:e.alignmentClassList[L];jQuery(I).removeClass(D).addClass(F)}}var B=null!==(E=null==e||null===(S=e.value)||void 0===S?void 0:S.width)&&void 0!==E?E:"100";B&&(r+="".concat(x,"{max-width: ").concat(B,"px;}"))}break;default:r=d(e,r)}})),t(r)}))},m=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:u()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n}),style:{background:"#ffffff"}},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},422:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(1),o=n(2),i=(n(542),n(22));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,u=e.title,s=e.updateDetail,b=e.isLoading,f=e.pageUrlSlug,d=l(Object(r.useState)(u),2),p=d[0],m=d[1],O=l(Object(r.useState)(f),2),y=O[0],v=O[1],j=l(Object(r.useState)(""),2),h=j[0],g=j[1],w=Object(o.isEmpty)(null==p?void 0:p.trim())||Object(o.isEmpty)(null==y?void 0:y.trim()),_=Object(r.useRef)();return Object(r.useEffect)((function(){var e=null==t?void 0:t.split("/");_.current=e.slice(0,Object(o.isEmpty)(e[e.length-1])?-2:-1).join("/"),g(t)}),[t]),Object(r.createElement)(a.Modal,{title:Object(c.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(c.__)("Name","funnel-builder")),Object(r.createElement)(a.TextControl,{value:p,onChange:function(e){m(e)},className:Object(o.size)(null==p?void 0:p.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(w)return;s(p,y)}}}),Object(o.size)(null==p?void 0:p.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(c.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(a.TextControl,{value:y,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),g(_.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(o.size)(null==y?void 0:y.trim())?"":"bwf-error-border"}),Object(o.size)(null==y?void 0:y.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(c.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},h))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(i.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(i.a,{isPrimary:!0,onClick:function(){return s(p,y)},disabled:w,isBusy:b,className:w?"bwf-no-ripple":""},Object(c.__)("Update","funnel-builder"))))}},443:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n.n(a),o=n(2),i=n(9),l=n(52),u=n(1),s=n(277),b=(n(460),n(6));function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=[{label:Object(u.__)("Product","funnel-builder"),value:"product"},{label:Object(u.__)("Custom","funnel-builder"),value:"custom"}],j=function(e){var t,n=e.onChange,a=e.value,f=e.label,d=e.className,m=Object(l.useInstanceId)(j),y="inspector-bump-image-".concat(m),h=c()("components-bump-image",d),g=O(Object(r.useState)(a.type),2),w=g[0],_=g[1],E=O(Object(r.useState)(a.custom_url),2),S=E[0],k=E[1],N=function(e){n(e)},x=function(e,n){e.preventDefault(),t||(t=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=t.state().get("selection").first().toJSON();N(p(p({},a),{},{custom_url:e.url,type:"custom"})),k(e.url)})),t.open()};return Object(r.createElement)(i.BaseControl,{label:f,className:h,id:y},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(o.isEmpty)(v)&&Object(r.createElement)(i.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},v.map((function(e,t){return Object(r.createElement)(i.Button,{key:t,variant:e.value===w?"primary":"",onClick:function(){_(e.value),"product"===e.value?(delete a.custom_url,N(p(p({},a),{},{type:e.value}))):Object(o.isEmpty)(S)||N(p(p({},a),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===w?Object(r.createElement)("img",{src:null==a?void 0:a.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){k(""),N(p(p({},a),{},{type:"product",custom_url:""}))}},Object(r.createElement)(b.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:x},Object(r.createElement)(b.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:x},Object(r.createElement)(b.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(u.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(i.TextControl,{type:"number",label:Object(u.__)("Width (px)","funnel-builder"),max:400,value:null==a?void 0:a.width,onChange:function(e){N(p(p({},a),{},{width:e}))}}),Object(r.createElement)(s.b,{label:Object(u.__)("Image Position","funnel-builder"),options:[{label:Object(u.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(u.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(u.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==a?void 0:a.position,onChange:function(e){N(p(p({},a),{},{position:e}))}})))))};t.a=j},459:function(e,t,n){"use strict";var r=n(0),a=n(9),c=n(1),o=n(2),i=(n(575),n(22));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.onclose,n=e.title,u=e.updateTitle,s=e.isLoading,b=e.renameTitle,f=l(Object(r.useState)(n),2),d=f[0],p=f[1],m=Object(o.isEmpty)(d.trim());return Object(r.createElement)(a.Modal,{title:b,className:"bwf-admin-modal bwf-admin-modal-small bwf-rename-funnel-modal",onRequestClose:function(){return t()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(c.__)("Title","funnel-builder")),Object(r.createElement)(a.TextControl,{value:d,onChange:function(e){p(e)},className:m?"bwf-error-border":"",onKeyDown:function(e){if("Enter"===e.key){if(m)return;u(d)}}}),m?Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Title is required","funnel-builder")):null,Object(r.createElement)("div",{className:"bwf-rename-funnel-modal__actions"},Object(r.createElement)(i.a,{className:"bwf-modal-cancel-btn",onClick:t},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(i.a,{isPrimary:!0,onClick:function(){return u(d)},disabled:m,isBusy:s,className:m?"bwf-no-ripple":""},Object(c.__)("Update","funnel-builder"))))}},460:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(121),c=n(2),o=n(1),i=n(391),l=n(292),u=n(76),s=n(4),b=n(13),f=function(e){var t=Object(r.useRef)(!0),n=Object(l.a)(),a=n.getTemplates,o=n.getActiveBuilder,i=n.getActiveGroup,u=Object(c.isEmpty)(a()),s=i(),b=o();Object(r.useEffect)((function(){var n,r;t.current||!e.current||u||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[u,s,b]),Object(r.useEffect)((function(){t.current&&!Object(c.isEmpty)(b)&&(window.scrollTo(0,0),t.current=!1)}),[b])},d=n(19),p=n(308);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=m(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=m(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==m(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(d.a)("ul").isProFeatureLocked,n=Object(l.a)(),m=n.getTemplates,O=n.getBuilders,v=(n.getFilters,n.getDefaultBuilder),j=n.templateLoading,h=n.getActiveBuilder,g=n.getActiveSubFilter,w=n.getActiveGroup,_=n.getCurrentTemplate,E=Object(u.a)().setActiveGroup,S=e.onImportComplete,k=e.isStoreCheckout,N=void 0!==k&&k,x=e.scratchConfirmModalData,C=e.storeCheckoutId,P=e.isStoreChekoutExists,A=void 0!==P&&P,T=e.templateListNotice,I=e.showImportNotice,L=e.urlDependency,D=void 0===L||L,F=e.showEditors,B=void 0===F||F,z=e.showTemplatesNav,M=void 0===z||z,U=e.showBuildFromScratch,R=void 0===U||U,G=e.showSelectedTemplates,q=void 0!==G&&G,J=e.previewCustomizeEnabled,$=void 0!==J&&J,Y=e.hideTabs,V=void 0===Y?[]:Y,H=Object(b.i)().importType,Q=m(),W=O(),K=JSON.parse(JSON.stringify(W)),X=v(),Z=h(),ee=j(),te=g(),ne=_(),re=Object(a.useParams)(),ae=re.id,ce=void 0===ae?0:ae,oe=re.filter,ie=void 0===oe?"funnel":oe,le=re.builder,ue=re.templateId,se=re.step,be=Object(r.useRef)();f(!Object(s.fb)()&&be);var fe,de=D?ue:ne.id,pe=D?se:ne.activeStep,me=N&&C?C:ce,Oe=w(),ye=me||N||!D?Oe:ie,ve={funnel:Object(o.__)("All","funnel-builder"),wc_checkout:Object(o.__)("Checkout","funnel-builder"),landing:Object(o.__)("Sales Funnels","funnel-builder"),optin:Object(o.__)("Lead Funnels","funnel-builder")};((me||A||V.includes("wc_checkout"))&&delete ve.wc_checkout,A&&(ve.upsell&&delete ve.upsell,me||(ve.wc_checkout=Object(o.__)("Checkout","funnel-builder"))),!t||me||V.includes("upsell")||(ve.upsell=Object(o.__)("One Click Upsell","funnel-builder")),K&&K.wc_checkout&&K.wc_checkout.customizer&&delete K.wc_checkout.customizer,"funnel"===H)&&(null===(fe=K[ye])||void 0===fe||delete fe.wp_editor);Object(r.useEffect)((function(){return function(){E("funnel")}}),[]);var je=function(){var e=le||X;return Object(c.isEmpty)(Z)||(e=Z),K&&K[ye]&&!K[ye][e]&&(e=K[ye][X]?X:"elementor"),e},he=["1","2","3","inline","popup"],ge=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&he.includes(te)?Q[t][Z][e].group_type[te]:e},we={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},_e=function(e,t,n){var r=we.hasOwnProperty(e)?we[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},Ee=Object(s.fb)()?"/store-checkout":me?"/funnels/".concat(me):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(i.a,{filters:p.e,templates:Q,activeBuilder:je(),templateCards:function(){if(Object(c.isEmpty)(Q)||Object(c.isEmpty)([ye]))return{};var e,t=je(),n={};if("upsell"===ye)n=null===(e=Q[ye])||void 0===e?void 0:e[t];else if("funnel"===ye){var r=Q[ye][t];for(var a in r){var o,i=r[a];if(r[a].hasOwnProperty("group")||q&&!q.includes(i.name))if(!(i.group.includes("sales")||i.group.includes("optin")||null!==(o=r[a])&&void 0!==o&&o.build_from_scratch))continue;n[a]=r[a]}}else for(var l in Q.funnel[t]){var u=Q.funnel[t][l];(!q||q&&q.includes(u.name))&&("landing"===ye&&u.group.includes("sales")||"optin"===ye&&u.group.includes("optin")||"wc_checkout"===ye&&u.group.includes("wc_checkout"))&&(n[l]=u)}return n}(),editors:K,defaultBuilder:X,isTemplateLoading:ee,activeTemplateGroup:ye,templateGroup:ve,previewData:function(){if(Object(c.isEmpty)(Q)||!de)return{};var e={success:!0},t=[],n=[];try{var r=je();if("upsell"===ye){t=[];var a=r;for(var i in"oxy"===a&&(a="oxygen"),"customizer"===a&&(a="elementor"),Q[ye][r]){var l=Q[ye][r][i];if(!l.build_from_scratch){var u={};u.id=i,u.funnel=i,u.slug=i,u.name=l.name,u.thumbnail=l.thumbnail,u.template=de,u.pro=l.pro,u.preview="https://templates-".concat(a,".funnelswp.com/offer/").concat(null==l?void 0:l.prevslug,"/"),u.group_type={},u.type="upsell",t.push(u),n.push({id:i,preview:"https://templates-".concat(a,".funnelswp.com/offer/").concat(null==l?void 0:l.prevslug,"/")})}}e.activeTemplate={id:de,thumbnail:de,preview:"https://templates-".concat(a,".funnelswp.com/offer/").concat(Q[ye][r][de].prevslug,"/"),slug:de,prevId:de,name:Q[ye][r][de].name,pro:Q[ye][r][de].pro,tempPro:Q[ye][r][de].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(ye){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var b=Q.funnel[r][de];t=b.steps?b.steps.map((function(e){var t=Q[e.type][r][ge(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+ge(e.slug,e.type));var a="";switch(e.type){case"landing":a=Object(o.__)("Sales Page","funnel-builder");break;case"wc_checkout":a=Object(o.__)("Checkout Page","funnel-builder");break;case"upsell":a=Object(o.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":a=Object(o.__)("Thank You Page","funnel-builder");break;case"optin":a=Object(o.__)("Optin Page","funnel-builder");break;case"optin_ty":a=Object(o.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var a=Q[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(a.prevslug),preview:_e(e.type,a,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:_e(e.type,t,r)});return{id:"".concat(e.type,"-").concat(de),slug:ge(e.slug,e.type),funnel:de,step:e.type,name:a,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:_e(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var f=b?b.steps.filter((function(e){return e.type===pe})):[],d=Q[f[0].type][r][ge(f[0].slug,f[0].type)];e.activeTemplate={thumbnail:"".concat(pe,"-").concat(de),prevId:"".concat(pe,"-").concat(d.prevslug),preview:_e(f[0].type,d,r),slug:de,name:Q.funnel[r][de].name,pro:Q.funnel[r][de].pro,tempPro:Q.funnel[r][de].pro,group:"funnel",filters:!!d.group_type&&Object.keys(d.group_type),type:pe,funnelGroup:b.group,filter:"wc_checkout"===pe?d.no_steps:d.group?d.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:me,onImportComplete:S,templateFilterCheck:function(e){return!me||"funnel"===H||!1===te||!1===te||!(!me||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:N,parentRoute:Ee,showTemplatesNav:M,showBuildFromScratch:!!R&&("funnel"!==H||N&&!me),funnelTitleModalData:y({},N&&{title:Object(o.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:x,importApiPrefix:N?"store-checkout":"funnels",templateListNotice:T,showImportNotice:I,urlDependency:D,showEditors:B,previewCustomizeEnabled:$,listRef:be}))}},542:function(e,t,n){},575:function(e,t,n){},754:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n.n(a),o=n(9),i=n(1),l=n(6),u=n(21),s=n(11),b=n.n(s),f=n(22),d=n(19),p=n(28),m=n(23),O=n(4);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(){v=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},o=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",l=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof O?t:O,o=Object.create(c.prototype),i=new A(r||[]);return a(o,"_invoke",{value:N(e,n,i)}),o}function b(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var f="suspendedStart",d="executing",p="completed",m={};function O(){}function j(){}function h(){}var g={};u(g,o,(function(){return this}));var w=Object.getPrototypeOf,_=w&&w(w(T([])));_&&_!==n&&r.call(_,o)&&(g=_);var E=h.prototype=O.prototype=Object.create(g);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,t){function n(a,c,o,i){var l=b(e[a],e,c);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==y(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,o,i)}),(function(e){n("throw",e,o,i)})):t.resolve(s).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,i)}))}i(l.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function N(t,n,r){var a=f;return function(c,o){if(a===d)throw Error("Generator is already running");if(a===p){if("throw"===c)throw o;return{value:e,done:!0}}for(r.method=c,r.arg=o;;){var i=r.delegate;if(i){var l=x(i,r);if(l){if(l===m)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===f)throw a=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=b(t,n,r);if("normal"===u.type){if(a=r.done?p:"suspendedYield",u.arg===m)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=p,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var c=b(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,m;var o=c.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[o];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(y(t)+" is not iterable")}return j.prototype=h,a(E,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:j,configurable:!0}),j.displayName=u(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,u(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(k.prototype),u(k.prototype,i,(function(){return this})),t.AsyncIterator=k,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var o=new k(s(e,n,r,a),c);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(E),u(E,l,"Generator"),u(E,o,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var o=this.tryEntries[c],i=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=r.call(o,"catchLoc"),u=r.call(o,"finallyLoc");if(l&&u){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;P(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function j(e,t,n,r,a,c,o){try{var i=e[c](o),l=i.value}catch(e){return void n(e)}i.done?t(l):Promise.resolve(l).then(r,a)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,o,i=[],l=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);l=!0);}catch(e){u=!0,a=e}finally{try{if(!l&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var w=function(e){var t=e.funnelId,n=e.funnelStatus,a=Object(d.b)().showSnackbar,c=Object(p.a)().setFunnelStatus,o=Object(m.a)().setGlobalCheckout,l=h(Object(r.useState)(!1),2),u=l[0],s=l[1],y=function(){var e,r=(e=v().mark((function e(){var r,l;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=["Draft",!1].includes(n)?"Published":"Draft",e.prev=1,s(!0),e.next=5,b()({method:"POST",path:Object(O.u)("/store-checkout/".concat(t,"/status"))});case 5:(l=e.sent).status&&(a("Published"===r?Object(i.__)("Store Checkout Enabled","funnel-builder"):Object(i.__)("Store Checkout Disabled","funnel-builder")),c(t,r),o({funnel_status:l.result},!0)),s(!1),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),console.log("toggleStoreCheckoutStatus:",e.t0),a(e.t0.message),s(!1);case 15:case"end":return e.stop()}}),e,null,[[1,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function o(e){j(c,r,a,o,i,"next",e)}function i(e){j(c,r,a,o,i,"throw",e)}o(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(f.a,{className:"is-danger",onClick:y,isBusy:u,isSmall:!0},Object(i.__)("Enable Store Checkout","funnel-builder"))},_=n(32),E=n(20);t.a=function(e){var t=e.className,n=Object(_.a)().isStatusLoading,a=(0,Object(E.a)().getGlobalCheckout)()||{},s=a.funnel_id,b=a.funnel_status;return n||["Published",!0].includes(b)?null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.Notice,{status:"info",isDismissible:!1,className:c()("bwf-component-notice bwf-store-checkout-enable-notice",t)},Object(r.createElement)("div",{className:"bwf-flex bwf--g4 bwf--align-start"},Object(r.createElement)("span",{className:"bwf-flex"},Object(r.createElement)(l.a,{icon:"info",style:{margin:0},color:u.DANGER_COLOR})),Object(r.createElement)("p",{className:"bwf-notice-content"},Object(i.__)("Store Checkout is currently disabled. Click Enable to override the current checkout of this store.","funnel-builder"))),Object(r.createElement)(w,{funnelId:s,funnelStatus:b})))}},794:function(e,t,n){},795:function(e,t,n){},796:function(e,t,n){}}]);