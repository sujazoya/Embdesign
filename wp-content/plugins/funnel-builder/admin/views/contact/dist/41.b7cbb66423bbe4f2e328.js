(window.webpackJsonp=window.webpackJsonp||[]).push([[41,2,6,9],Array(278).concat([function(e,t,n){var r;try{r={cloneDeep:n(657),constant:n(430),defaults:n(658),each:n(489),filter:n(492),find:n(659),flatten:n(516),forEach:n(490),forIn:n(663),has:n(547),isUndefined:n(501),last:n(664),map:n(502),mapValues:n(665),max:n(666),merge:n(668),min:n(674),minBy:n(675),now:n(566),pick:n(676),range:n(681),reduce:n(504),sortBy:n(684),uniqueId:n(689),values:n(509),zipObject:n(690)}}catch(e){}r||(r=window._),e.exports=r},,,,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),o=n(5),a=n.n(o),i=(n(299),["className","onChange","label","color","disabled"]);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=e.className,n=e.onChange,o=e.label,l=e.color,s=e.disabled,f=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,i),d=u(Object(r.useState)(!0),2),p=d[0],b=d[1],h=Object(r.useRef)();return Object(r.createElement)("div",{className:a()("bwf-checkbox-control bwf-checkbox",t)},Object(r.createElement)("span",{className:"bwf-checkbox-control-inner"},Object(r.createElement)("input",c({type:"checkbox"},f,{onChange:function(e){s||(n(e.target.checked),b(!1))},ref:h,className:a()({"bwf-no-animation":p,"bwf-disable":s}),style:{"--current-checkbox-color":l}}))),o&&Object(r.createElement)("label",{className:"bwf-checkbox-control__label ".concat(s?"bwf-disable":""),onClick:function(){return h.current.click()}},o))}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var r=n(0),o=n(2),a=n(5),i=n.n(a),c=n(52),u=n(9),l=(n(4),n(1)),s=n(60);n(316);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function p(e){var t=e.label,n=void 0===t?"":t,a=e.id,d=void 0===a?"":a,p=e.value,b=e.onChange,h=void 0===b?o.noop:b,y=e.className,m=e.style,v=void 0===m?{}:m,g=e.isHover,O=e.hoverVal,w=void 0===O?"":O,j="inspector-color-".concat(Object(c.useInstanceId)(u.ColorPicker)),E=f(Object(r.useState)(!1),2),_=E[0],S=E[1],x=f(Object(r.useState)(),2),k=x[0],P=x[1],C=f(Object(r.useState)(0),2),N=C[0],T=C[1],D=g?Object(o.isArray)(p)?p:[p,w]:p,I=function(e){if(g){var t=D;return t[N]=e.hex,void h(t,{id:d})}h(e.hex,{id:d})},A=g?D[N]:D;return Object(r.createElement)("div",{className:i()("components-color-field",y),style:v},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:j},n),g&&Object(r.createElement)(u.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(u.Button,{className:i()("is-secondary-gray is-small",{"is-selected":0===N}),onClick:function(){return T(0)}},Object(l.__)("Default","funnel-builder")),Object(r.createElement)(u.Button,{className:i()("is-secondary-gray is-small",{"is-selected":1===N}),onClick:function(){return T(1)}},Object(l.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(u.ColorIndicator,{colorValue:A,ref:P,className:i()({"is-empty":Object(o.isEmpty)(A)})}),Object(r.createElement)("span",{className:"indicator-text"},A||"Select")),_&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:k},Object(r.createElement)(u.ColorPicker,{color:A,onChangeComplete:I}),Object(r.createElement)(u.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(l.__)("Reset","funnel-builder")))))}},function(e,t,n){"use strict";var r=n(278),o=n(300).Graph;function a(e,t,n,o){var a;do{a=r.uniqueId(o)}while(e.hasNode(a));return n.dummy=t,e.setNode(a,n),a}function i(e){return r.max(r.map(e.nodes(),(function(t){var n=e.node(t).rank;if(!r.isUndefined(n))return n})))}e.exports={addDummyNode:a,simplify:function(e){var t=(new o).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){var r=t.edge(n.v,n.w)||{weight:0,minlen:1},o=e.edge(n);t.setEdge(n.v,n.w,{weight:r.weight+o.weight,minlen:Math.max(r.minlen,o.minlen)})})),t},asNonCompoundGraph:function(e){var t=new o({multigraph:e.isMultigraph()}).setGraph(e.graph());return r.forEach(e.nodes(),(function(n){e.children(n).length||t.setNode(n,e.node(n))})),r.forEach(e.edges(),(function(n){t.setEdge(n,e.edge(n))})),t},successorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.outEdges(t),(function(t){n[t.w]=(n[t.w]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},predecessorWeights:function(e){var t=r.map(e.nodes(),(function(t){var n={};return r.forEach(e.inEdges(t),(function(t){n[t.v]=(n[t.v]||0)+e.edge(t).weight})),n}));return r.zipObject(e.nodes(),t)},intersectRect:function(e,t){var n,r,o=e.x,a=e.y,i=t.x-o,c=t.y-a,u=e.width/2,l=e.height/2;if(!i&&!c)throw new Error("Not possible to find intersection inside of the rectangle");Math.abs(c)*u>Math.abs(i)*l?(c<0&&(l=-l),n=l*i/c,r=l):(i<0&&(u=-u),n=u,r=u*c/i);return{x:o+n,y:a+r}},buildLayerMatrix:function(e){var t=r.map(r.range(i(e)+1),(function(){return[]}));return r.forEach(e.nodes(),(function(n){var o=e.node(n),a=o.rank;r.isUndefined(a)||(t[a][o.order]=n)})),t},normalizeRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank})));r.forEach(e.nodes(),(function(n){var o=e.node(n);r.has(o,"rank")&&(o.rank-=t)}))},removeEmptyRanks:function(e){var t=r.min(r.map(e.nodes(),(function(t){return e.node(t).rank}))),n=[];r.forEach(e.nodes(),(function(r){var o=e.node(r).rank-t;n[o]||(n[o]=[]),n[o].push(r)}));var o=0,a=e.graph().nodeRankFactor;r.forEach(n,(function(t,n){r.isUndefined(t)&&n%a!=0?--o:o&&r.forEach(t,(function(t){e.node(t).rank+=o}))}))},addBorderNode:function(e,t,n,r){var o={width:0,height:0};arguments.length>=4&&(o.rank=n,o.order=r);return a(e,"border",o,t)},maxRank:i,partition:function(e,t){var n={lhs:[],rhs:[]};return r.forEach(e,(function(e){t(e)?n.lhs.push(e):n.rhs.push(e)})),n},time:function(e,t){var n=r.now();try{return t()}finally{console.log(e+" time: "+(r.now()-n)+"ms")}},notime:function(e,t){return t()}}},function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(5),a=n.n(o),i=n(2),c=n(9),u=n(42),l=(n(303),n(6));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,o=e.className,d=e.center,p=void 0!==d&&d,b=e.isDismissive,h=void 0!==b&&b,y=e.onDismisal,m=void 0===y?function(){}:y,v=e.isProFeatureLocked;if(Object(i.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:a()("bwf-zero-state",o,{"bwf-block-t-center":p})},h&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return m()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(l.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(u.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(u.a,{key:"layout-block-"+t,className:a()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(u.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(u.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),v&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(l.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(u.a,{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(c.Button,f({isPrimary:!0,key:t,onClick:e.onClick,className:"".concat(e.className," bwf-no-ripple")},e.props),!1!==e.proCheck&&v&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(l.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:a()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return ku})),n.d(t,"b",(function(){return gu})),n.d(t,"c",(function(){return ju})),n.d(t,"d",(function(){return Ec})),n.d(t,"e",(function(){return Pu})),n.d(t,"f",(function(){return Qc})),n.d(t,"g",(function(){return Di})),n.d(t,"h",(function(){return Ti})),n.d(t,"i",(function(){return Ci})),n.d(t,"j",(function(){return ct})),n.d(t,"k",(function(){return Ke})),n.d(t,"l",(function(){return Ge})),n.d(t,"m",(function(){return pc}));var r=n(3),o=n.n(r),a=n(30),i=n.n(a);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e){if("string"==typeof e||"number"==typeof e)return""+e;let t="";if(Array.isArray(e))for(let n,r=0;r<e.length;r++)""!==(n=l(e[r]))&&(t+=(t&&" ")+n);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var f="function"==typeof Symbol&&Symbol.observable||"@@observable",d=function(){return Math.random().toString(36).substring(7).split("").join(".")},p={INIT:"@@redux/INIT"+d(),REPLACE:"@@redux/REPLACE"+d(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+d()}};function b(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function h(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(h)(e,t)}if("function"!=typeof e)throw new Error(s(2));var o=e,a=t,i=[],c=i,u=!1;function l(){c===i&&(c=i.slice())}function d(){if(u)throw new Error(s(3));return a}function y(e){if("function"!=typeof e)throw new Error(s(4));if(u)throw new Error(s(5));var t=!0;return l(),c.push(e),function(){if(t){if(u)throw new Error(s(6));t=!1,l();var n=c.indexOf(e);c.splice(n,1),i=null}}}function m(e){if(!b(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if(u)throw new Error(s(9));try{u=!0,a=o(a,e)}finally{u=!1}for(var t=i=c,n=0;n<t.length;n++){(0,t[n])()}return e}function v(e){if("function"!=typeof e)throw new Error(s(10));o=e,m({type:p.REPLACE})}function g(){var e,t=y;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(d())}return n(),{unsubscribe:t(n)}}})[f]=function(){return this},e}return m({type:p.INIT}),(r={dispatch:m,subscribe:y,getState:d,replaceReducer:v})[f]=g,r}function y(e,t){return function(){return t(e.apply(this,arguments))}}function m(e,t){if("function"==typeof e)return y(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));var n={};for(var r in e){var o=e[r];"function"==typeof o&&(n[r]=y(o,t))}return n}function v(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach((function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})})),t}var g={exports:{}},O={exports:{}},w={},j="function"==typeof Symbol&&Symbol.for,E=j?Symbol.for("react.element"):60103,_=j?Symbol.for("react.portal"):60106,S=j?Symbol.for("react.fragment"):60107,x=j?Symbol.for("react.strict_mode"):60108,k=j?Symbol.for("react.profiler"):60114,P=j?Symbol.for("react.provider"):60109,C=j?Symbol.for("react.context"):60110,N=j?Symbol.for("react.async_mode"):60111,T=j?Symbol.for("react.concurrent_mode"):60111,D=j?Symbol.for("react.forward_ref"):60112,I=j?Symbol.for("react.suspense"):60113,A=j?Symbol.for("react.suspense_list"):60120,M=j?Symbol.for("react.memo"):60115,L=j?Symbol.for("react.lazy"):60116,R=j?Symbol.for("react.block"):60121,F=j?Symbol.for("react.fundamental"):60117,B=j?Symbol.for("react.responder"):60118,q=j?Symbol.for("react.scope"):60119;function z(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case E:switch(e=e.type){case N:case T:case S:case k:case x:case I:return e;default:switch(e=e&&e.$$typeof){case C:case D:case L:case M:case P:return e;default:return t}}case _:return t}}}function U(e){return z(e)===T}w.AsyncMode=N,w.ConcurrentMode=T,w.ContextConsumer=C,w.ContextProvider=P,w.Element=E,w.ForwardRef=D,w.Fragment=S,w.Lazy=L,w.Memo=M,w.Portal=_,w.Profiler=k,w.StrictMode=x,w.Suspense=I,w.isAsyncMode=function(e){return U(e)||z(e)===N},w.isConcurrentMode=U,w.isContextConsumer=function(e){return z(e)===C},w.isContextProvider=function(e){return z(e)===P},w.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===E},w.isForwardRef=function(e){return z(e)===D},w.isFragment=function(e){return z(e)===S},w.isLazy=function(e){return z(e)===L},w.isMemo=function(e){return z(e)===M},w.isPortal=function(e){return z(e)===_},w.isProfiler=function(e){return z(e)===k},w.isStrictMode=function(e){return z(e)===x},w.isSuspense=function(e){return z(e)===I},w.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===S||e===T||e===k||e===x||e===I||e===A||"object"==typeof e&&null!==e&&(e.$$typeof===L||e.$$typeof===M||e.$$typeof===P||e.$$typeof===C||e.$$typeof===D||e.$$typeof===F||e.$$typeof===B||e.$$typeof===q||e.$$typeof===R)},w.typeOf=z,O.exports=w;var Y=Object.getOwnPropertySymbols,V=Object.prototype.hasOwnProperty,H=Object.prototype.propertyIsEnumerable;function G(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(e){r[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}})()&&Object.assign,Function.call.bind(Object.prototype.hasOwnProperty);function X(e,t,n,r,o){}X.resetWarningCache=function(){0};O.exports;function K(){}function $(){}$.resetWarningCache=K;g.exports=function(){function e(e,t,n,r,o,a){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==a){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:$,resetWarningCache:K};return n.PropTypes=n,n}();g.exports;var W=o.a.createContext(null);var Z=function(e){e()},Q=function(){return Z};var J={notify:function(){},get:function(){return[]}};function ee(e,t){var n,r=J;function o(){i.onStateChange&&i.onStateChange()}function a(){n||(n=t?t.addNestedSub(o):e.subscribe(o),r=function(){var e=Q(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e((function(){for(var e=t;e;)e.callback(),e=e.next}))},get:function(){for(var e=[],n=t;n;)e.push(n),n=n.next;return e},subscribe:function(e){var r=!0,o=n={callback:e,next:null,prev:n};return o.prev?o.prev.next=o:t=o,function(){r&&null!==t&&(r=!1,o.next?o.next.prev=o.prev:n=o.prev,o.prev?o.prev.next=o.next:t=o.next)}}}}())}var i={addNestedSub:function(e){return a(),r.subscribe(e)},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:o,isSubscribed:function(){return Boolean(n)},trySubscribe:a,tryUnsubscribe:function(){n&&(n(),n=void 0,r.clear(),r=J)},getListeners:function(){return r}};return i}var te="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?r.useLayoutEffect:r.useEffect;function ne(e){var t=e.store,n=e.context,a=e.children,i=Object(r.useMemo)((function(){var e=ee(t);return e.onStateChange=e.notifyNestedSubs,{store:t,subscription:e}}),[t]),c=Object(r.useMemo)((function(){return t.getState()}),[t]);te((function(){var e=i.subscription;return e.trySubscribe(),c!==t.getState()&&e.notifyNestedSubs(),function(){e.tryUnsubscribe(),e.onStateChange=null}}),[i,c]);var u=n||W;return o.a.createElement(u.Provider,{value:i},a)}var re=O.exports,oe={};oe[re.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},oe[re.Memo]={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0};var ae={},ie=60103,ce=60106,ue=60107,le=60108,se=60114,fe=60109,de=60110,pe=60112,be=60113,he=60120,ye=60115,me=60116,ve=60121,ge=60122,Oe=60117,we=60129,je=60131;if("function"==typeof Symbol&&Symbol.for){var Ee=Symbol.for;ie=Ee("react.element"),ce=Ee("react.portal"),ue=Ee("react.fragment"),le=Ee("react.strict_mode"),se=Ee("react.profiler"),fe=Ee("react.provider"),de=Ee("react.context"),pe=Ee("react.forward_ref"),be=Ee("react.suspense"),he=Ee("react.suspense_list"),ye=Ee("react.memo"),me=Ee("react.lazy"),ve=Ee("react.block"),ge=Ee("react.server.block"),Oe=Ee("react.fundamental"),we=Ee("react.debug_trace_mode"),je=Ee("react.legacy_hidden")}function _e(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case ie:switch(e=e.type){case ue:case se:case le:case be:case he:return e;default:switch(e=e&&e.$$typeof){case de:case pe:case me:case ye:case fe:return e;default:return t}}case ce:return t}}}var Se=fe,xe=ie,ke=pe,Pe=ue,Ce=me,Ne=ye,Te=ce,De=se,Ie=le,Ae=be;function Me(){return Object(r.useContext)(W)}function Le(e){void 0===e&&(e=W);var t=e===W?Me:function(){return Object(r.useContext)(e)};return function(){return t().store}}ae.ContextConsumer=de,ae.ContextProvider=Se,ae.Element=xe,ae.ForwardRef=ke,ae.Fragment=Pe,ae.Lazy=Ce,ae.Memo=Ne,ae.Portal=Te,ae.Profiler=De,ae.StrictMode=Ie,ae.Suspense=Ae,ae.isAsyncMode=function(){return!1},ae.isConcurrentMode=function(){return!1},ae.isContextConsumer=function(e){return _e(e)===de},ae.isContextProvider=function(e){return _e(e)===fe},ae.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===ie},ae.isForwardRef=function(e){return _e(e)===pe},ae.isFragment=function(e){return _e(e)===ue},ae.isLazy=function(e){return _e(e)===me},ae.isMemo=function(e){return _e(e)===ye},ae.isPortal=function(e){return _e(e)===ce},ae.isProfiler=function(e){return _e(e)===se},ae.isStrictMode=function(e){return _e(e)===le},ae.isSuspense=function(e){return _e(e)===be},ae.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===ue||e===se||e===we||e===le||e===be||e===he||e===je||"object"==typeof e&&null!==e&&(e.$$typeof===me||e.$$typeof===ye||e.$$typeof===fe||e.$$typeof===de||e.$$typeof===pe||e.$$typeof===Oe||e.$$typeof===ve||e[0]===ge)},ae.typeOf=_e;var Re=Le();function Fe(e){void 0===e&&(e=W);var t=e===W?Re:Le(e);return function(){return t().dispatch}}var Be=Fe(),qe=function(e,t){return e===t};function ze(e){void 0===e&&(e=W);var t=e===W?Me:function(){return Object(r.useContext)(e)};return function(e,n){void 0===n&&(n=qe);var o=t(),a=function(e,t,n,o){var a,i=Object(r.useReducer)((function(e){return e+1}),0)[1],c=Object(r.useMemo)((function(){return ee(n,o)}),[n,o]),u=Object(r.useRef)(),l=Object(r.useRef)(),s=Object(r.useRef)(),f=Object(r.useRef)(),d=n.getState();try{if(e!==l.current||d!==s.current||u.current){var p=e(d);a=void 0!==f.current&&t(p,f.current)?f.current:p}else a=f.current}catch(e){throw u.current&&(e.message+="\nThe error may be correlated with this previous error:\n"+u.current.stack+"\n\n"),e}return te((function(){l.current=e,s.current=d,f.current=a,u.current=void 0})),te((function(){function e(){try{var e=n.getState();if(e===s.current)return;var r=l.current(e);if(t(r,f.current))return;f.current=r,s.current=e}catch(e){u.current=e}i()}return c.onStateChange=e,c.trySubscribe(),e(),function(){return c.tryUnsubscribe()}}),[n,c]),a}(e,n,o.store,o.subscription);return Object(r.useDebugValue)(a),a}}var Ue,Ye=ze();function Ve(e,t){return{type:e,payload:t}}Ue=a.unstable_batchedUpdates,Z=Ue;var He=Object.freeze({__proto__:null,setOnConnect:function(e){return Ve("SET_ON_CONNECT",{onConnect:e})},setOnConnectStart:function(e){return Ve("SET_ON_CONNECT_START",{onConnectStart:e})},setOnConnectStop:function(e){return Ve("SET_ON_CONNECT_STOP",{onConnectStop:e})},setOnConnectEnd:function(e){return Ve("SET_ON_CONNECT_END",{onConnectEnd:e})},setElements:function(e){return Ve("SET_ELEMENTS",e)},updateNodeDimensions:function(e){return Ve("UPDATE_NODE_DIMENSIONS",e)},updateNodePos:function(e){return Ve("UPDATE_NODE_POS",e)},updateNodePosDiff:function(e){return Ve("UPDATE_NODE_POS_DIFF",e)},setUserSelection:function(e){return Ve("SET_USER_SELECTION",e)},updateUserSelection:function(e){return Ve("UPDATE_USER_SELECTION",e)},unsetUserSelection:function(){return Ve("UNSET_USER_SELECTION")},setSelection:function(e){return Ve("SET_SELECTION",{selectionActive:e})},unsetNodesSelection:function(){return Ve("UNSET_NODES_SELECTION",{nodesSelectionActive:!1})},resetSelectedElements:function(){return Ve("RESET_SELECTED_ELEMENTS",{selectedElements:null})},setSelectedElements:function(e){return Ve("SET_SELECTED_ELEMENTS",e)},addSelectedElements:function(e){return Ve("ADD_SELECTED_ELEMENTS",e)},updateTransform:function(e){return Ve("UPDATE_TRANSFORM",{transform:e})},updateSize:function(e){return Ve("UPDATE_SIZE",{width:e.width||500,height:e.height||500})},initD3Zoom:function(e){return Ve("INIT_D3ZOOM",e)},setMinZoom:function(e){return Ve("SET_MINZOOM",e)},setMaxZoom:function(e){return Ve("SET_MAXZOOM",e)},setTranslateExtent:function(e){return Ve("SET_TRANSLATEEXTENT",e)},setConnectionPosition:function(e){return Ve("SET_CONNECTION_POSITION",{connectionPosition:e})},setConnectionNodeId:function(e){return Ve("SET_CONNECTION_NODEID",e)},setSnapToGrid:function(e){return Ve("SET_SNAPTOGRID",{snapToGrid:e})},setSnapGrid:function(e){return Ve("SET_SNAPGRID",{snapGrid:e})},setInteractive:function(e){return Ve("SET_INTERACTIVE",{nodesDraggable:e,nodesConnectable:e,elementsSelectable:e})},setNodesDraggable:function(e){return Ve("SET_NODES_DRAGGABLE",{nodesDraggable:e})},setNodesConnectable:function(e){return Ve("SET_NODES_CONNECTABLE",{nodesConnectable:e})},setElementsSelectable:function(e){return Ve("SET_ELEMENTS_SELECTABLE",{elementsSelectable:e})},setMultiSelectionActive:function(e){return Ve("SET_MULTI_SELECTION_ACTIVE",{multiSelectionActive:e})},setConnectionMode:function(e){return Ve("SET_CONNECTION_MODE",{connectionMode:e})},setNodeExtent:function(e){return Ve("SET_NODE_EXTENT",e)}});function Ge(e){var t=Be(),n=e(He);return Object(r.useMemo)((function(){return m(n,t)}),[t,n])}var Xe=Ye,Ke=function(){return Re()};function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function We(e,t){if(e){if("string"==typeof e)return $e(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$e(e,t):void 0}}function Ze(e){return function(e){if(Array.isArray(e))return $e(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||We(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}}(e,t)||We(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Je=function(e){var t=null==e?void 0:e.target;return["INPUT","SELECT","TEXTAREA","BUTTON"].includes(null==t?void 0:t.nodeName)||(null==t?void 0:t.hasAttribute("contenteditable"))},et=function(e){return{width:e.offsetWidth,height:e.offsetHeight}},tt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(e,t),n)},nt=function(e,t){return{x:tt(e.x,t[0][0],t[1][0]),y:tt(e.y,t[0][1],t[1][1])}},rt=function(e){var t=Qe(Object(r.useState)(!1),2),n=t[0],o=t[1];return Object(r.useEffect)((function(){if(void 0!==e){var t=function(t){Je(t)||t.key!==e&&t.keyCode!==e||(t.preventDefault(),o(!0))},n=function(t){Je(t)||t.key!==e&&t.keyCode!==e||o(!1)},r=function(){return o(!1)};return window.addEventListener("keydown",t),window.addEventListener("keyup",n),window.addEventListener("blur",r),function(){window.removeEventListener("keydown",t),window.removeEventListener("keyup",n),window.removeEventListener("blur",r)}}}),[e,o]),n};function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function at(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var it=function(e){return"id"in e&&"source"in e&&"target"in e},ct=function(e){return"id"in e&&!("source"in e)&&!("target"in e)},ut=function(e,t,n,r){var o=e.x,a=e.y,i=Qe(t,3),c=i[0],u=i[1],l=i[2],s=Qe(r,2),f=s[0],d=s[1],p={x:(o-c)/l,y:(a-u)/l};return n?{x:f*Math.round(p.x/f),y:d*Math.round(p.y/d)}:p},lt=function(e){return function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return ut(t,r,o,a)}},st=function(e,t){var n,r;return at(at({},e),{},{id:e.id.toString(),type:e.type||"default",__rf:{position:nt(e.position,t),width:(null===(n=e.style)||void 0===n?void 0:n.width)||null,height:(null===(r=e.style)||void 0===r?void 0:r.height)||null,handleBounds:{},isDragging:!1}})},ft=function(e){return at(at({},e),{},{source:e.source.toString(),target:e.target.toString(),sourceHandle:e.sourceHandle?e.sourceHandle.toString():null,targetHandle:e.targetHandle?e.targetHandle.toString():null,id:e.id.toString(),type:e.type||"default"})},dt=function(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}},pt=function(e){var t=e.x,n=e.y;return{x:t,y:n,x2:t+e.width,y2:n+e.height}},bt=function(e){var t=e.x,n=e.y;return{x:t,y:n,width:e.x2-t,height:e.y2-n}},ht=function(e){var t=e.reduce((function(e,t){var n=t.__rf,r=(n=void 0===n?{}:n).position,o=n.width,a=n.height;return dt(e,pt(at(at({},r),{},{width:o,height:a})))}),{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return bt(t)},yt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0,1],r=Qe(n,3),o=r[0],a=r[1],i=r[2],c=arguments.length>3&&void 0!==arguments[3]&&arguments[3],u=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=pt({x:(t.x-o)/i,y:(t.y-a)/i,width:t.width/i,height:t.height/i});return e.filter((function(e){var t=e.selectable,n=void 0===t||t,r=e.__rf,o=r.position,a=r.width,i=r.height,s=r.isDragging;if(u&&!n)return!1;var f=pt(at(at({},o),{},{width:a,height:i})),d=Math.max(0,Math.min(l.x2,f.x2)-Math.max(l.x,f.x)),p=Math.max(0,Math.min(l.y2,f.y2)-Math.max(l.y,f.y)),b=Math.ceil(d*p);return!(null!==a&&null!==i&&!s)||(c?b>0:b>=a*i)}))},mt=function(e,t){var n=e.map((function(e){return e.id}));return t.filter((function(e){return n.includes(e.source)||n.includes(e.target)}))},vt=function(e,t){return[].concat(Ze(e.map((function(e){var t=at({},e);return t.position=t.__rf.position,delete t.__rf,t}))),Ze(t.map((function(e){return at({},e)}))))},gt=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges;return vt(r,void 0===o?[]:o)}},Ot=function(e){return function(){var t=e.getState(),n=t.nodes,r=void 0===n?[]:n,o=t.edges,a=void 0===o?[]:o,i=t.transform;return{elements:vt(r,a),position:[i[0],i[1]],zoom:i[2]}}},wt=function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.1,i=t/(e.width*(1+a)),c=n/(e.height*(1+a)),u=Math.min(i,c),l=tt(u,r,o),s=e.x+e.width/2,f=e.y+e.height/2,d=t/2-s*l,p=n/2-f*l;return[d,p,l]},jt={value:()=>{}};function Et(){for(var e,t=0,n=arguments.length,r={};t<n;++t){if(!(e=arguments[t]+"")||e in r||/[\s.]/.test(e))throw new Error("illegal type: "+e);r[e]=[]}return new _t(r)}function _t(e){this._=e}function St(e,t){return e.trim().split(/^|\s+/).map((function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}}))}function xt(e,t){for(var n,r=0,o=e.length;r<o;++r)if((n=e[r]).name===t)return n.value}function kt(e,t,n){for(var r=0,o=e.length;r<o;++r)if(e[r].name===t){e[r]=jt,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}_t.prototype=Et.prototype={constructor:_t,on:function(e,t){var n,r=this._,o=St(e+"",r),a=-1,i=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<i;)if(n=(e=o[a]).type)r[n]=kt(r[n],e.name,t);else if(null==t)for(n in r)r[n]=kt(r[n],e.name,null);return this}for(;++a<i;)if((n=(e=o[a]).type)&&(n=xt(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new _t(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=0,n=(r=this._[e]).length;a<n;++a)r[a].value.apply(t,o)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],o=0,a=r.length;o<a;++o)r[o].value.apply(t,n)}};var Pt="http://www.w3.org/1999/xhtml",Ct={svg:"http://www.w3.org/2000/svg",xhtml:Pt,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Nt(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),Ct.hasOwnProperty(t)?{space:Ct[t],local:e}:e}function Tt(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Pt&&t.documentElement.namespaceURI===Pt?t.createElement(e):t.createElementNS(n,e)}}function Dt(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function It(e){var t=Nt(e);return(t.local?Dt:Tt)(t)}function At(){}function Mt(e){return null==e?At:function(){return this.querySelector(e)}}function Lt(e){return null==e?[]:Array.isArray(e)?e:Array.from(e)}function Rt(){return[]}function Ft(e){return null==e?Rt:function(){return this.querySelectorAll(e)}}function Bt(e){return function(){return this.matches(e)}}function qt(e){return function(t){return t.matches(e)}}var zt=Array.prototype.find;function Ut(){return this.firstElementChild}var Yt=Array.prototype.filter;function Vt(){return Array.from(this.children)}function Ht(e){return new Array(e.length)}function Gt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function Xt(e){return function(){return e}}function Kt(e,t,n,r,o,a){for(var i,c=0,u=t.length,l=a.length;c<l;++c)(i=t[c])?(i.__data__=a[c],r[c]=i):n[c]=new Gt(e,a[c]);for(;c<u;++c)(i=t[c])&&(o[c]=i)}function $t(e,t,n,r,o,a,i){var c,u,l,s=new Map,f=t.length,d=a.length,p=new Array(f);for(c=0;c<f;++c)(u=t[c])&&(p[c]=l=i.call(u,u.__data__,c,t)+"",s.has(l)?o[c]=u:s.set(l,u));for(c=0;c<d;++c)l=i.call(e,a[c],c,a)+"",(u=s.get(l))?(r[c]=u,u.__data__=a[c],s.delete(l)):n[c]=new Gt(e,a[c]);for(c=0;c<f;++c)(u=t[c])&&s.get(p[c])===u&&(o[c]=u)}function Wt(e){return e.__data__}function Zt(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function Qt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Jt(e){return function(){this.removeAttribute(e)}}function en(e){return function(){this.removeAttributeNS(e.space,e.local)}}function tn(e,t){return function(){this.setAttribute(e,t)}}function nn(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function rn(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function on(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function an(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function cn(e){return function(){this.style.removeProperty(e)}}function un(e,t,n){return function(){this.style.setProperty(e,t,n)}}function ln(e,t,n){return function(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function sn(e,t){return e.style.getPropertyValue(t)||an(e).getComputedStyle(e,null).getPropertyValue(t)}function fn(e){return function(){delete this[e]}}function dn(e,t){return function(){this[e]=t}}function pn(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function bn(e){return e.trim().split(/^|\s+/)}function hn(e){return e.classList||new yn(e)}function yn(e){this._node=e,this._names=bn(e.getAttribute("class")||"")}function mn(e,t){for(var n=hn(e),r=-1,o=t.length;++r<o;)n.add(t[r])}function vn(e,t){for(var n=hn(e),r=-1,o=t.length;++r<o;)n.remove(t[r])}function gn(e){return function(){mn(this,e)}}function On(e){return function(){vn(this,e)}}function wn(e,t){return function(){(t.apply(this,arguments)?mn:vn)(this,e)}}function jn(){this.textContent=""}function En(e){return function(){this.textContent=e}}function _n(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Sn(){this.innerHTML=""}function xn(e){return function(){this.innerHTML=e}}function kn(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Pn(){this.nextSibling&&this.parentNode.appendChild(this)}function Cn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nn(){return null}function Tn(){var e=this.parentNode;e&&e.removeChild(this)}function Dn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function In(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function An(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}function Mn(e){return function(){var t=this.__on;if(t){for(var n,r=0,o=-1,a=t.length;r<a;++r)n=t[r],e.type&&n.type!==e.type||n.name!==e.name?t[++o]=n:this.removeEventListener(n.type,n.listener,n.options);++o?t.length=o:delete this.__on}}}function Ln(e,t,n){return function(){var r,o=this.__on,a=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(o)for(var i=0,c=o.length;i<c;++i)if((r=o[i]).type===e.type&&r.name===e.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=a,r.options=n),void(r.value=t);this.addEventListener(e.type,a,n),r={type:e.type,name:e.name,value:t,listener:a,options:n},o?o.push(r):this.__on=[r]}}function Rn(e,t,n){var r=an(e),o=r.CustomEvent;"function"==typeof o?o=new o(t,n):(o=r.document.createEvent("Event"),n?(o.initEvent(t,n.bubbles,n.cancelable),o.detail=n.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function Fn(e,t){return function(){return Rn(this,e,t)}}function Bn(e,t){return function(){return Rn(this,e,t.apply(this,arguments))}}Gt.prototype={constructor:Gt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},yn.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var qn=[null];function zn(e,t){this._groups=e,this._parents=t}function Un(){return new zn([[document.documentElement]],qn)}function Yn(e){return"string"==typeof e?new zn([[document.querySelector(e)]],[document.documentElement]):new zn([[e]],qn)}function Vn(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}zn.prototype=Un.prototype={constructor:zn,select:function(e){"function"!=typeof e&&(e=Mt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i,c=t[o],u=c.length,l=r[o]=new Array(u),s=0;s<u;++s)(a=c[s])&&(i=e.call(a,a.__data__,s,c))&&("__data__"in a&&(i.__data__=a.__data__),l[s]=i);return new zn(r,this._parents)},selectAll:function(e){e="function"==typeof e?function(e){return function(){return Lt(e.apply(this,arguments))}}(e):Ft(e);for(var t=this._groups,n=t.length,r=[],o=[],a=0;a<n;++a)for(var i,c=t[a],u=c.length,l=0;l<u;++l)(i=c[l])&&(r.push(e.call(i,i.__data__,l,c)),o.push(i));return new zn(r,o)},selectChild:function(e){return this.select(null==e?Ut:function(e){return function(){return zt.call(this.children,e)}}("function"==typeof e?e:qt(e)))},selectChildren:function(e){return this.selectAll(null==e?Vt:function(e){return function(){return Yt.call(this.children,e)}}("function"==typeof e?e:qt(e)))},filter:function(e){"function"!=typeof e&&(e=Bt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,u=r[o]=[],l=0;l<c;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&u.push(a);return new zn(r,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,Wt);var n=t?$t:Kt,r=this._parents,o=this._groups;"function"!=typeof e&&(e=Xt(e));for(var a=o.length,i=new Array(a),c=new Array(a),u=new Array(a),l=0;l<a;++l){var s=r[l],f=o[l],d=f.length,p=Zt(e.call(s,s&&s.__data__,l,r)),b=p.length,h=c[l]=new Array(b),y=i[l]=new Array(b),m=u[l]=new Array(d);n(s,f,h,y,m,p,t);for(var v,g,O=0,w=0;O<b;++O)if(v=h[O]){for(O>=w&&(w=O+1);!(g=y[w])&&++w<b;);v._next=g||null}}return(i=new zn(i,r))._enter=c,i._exit=u,i},enter:function(){return new zn(this._enter||this._groups.map(Ht),this._parents)},exit:function(){return new zn(this._exit||this._groups.map(Ht),this._parents)},join:function(e,t,n){var r=this.enter(),o=this,a=this.exit();return"function"==typeof e?(r=e(r))&&(r=r.selection()):r=r.append(e+""),null!=t&&(o=t(o))&&(o=o.selection()),null==n?a.remove():n(a),r&&o?r.merge(o).order():o},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,o=n.length,a=r.length,i=Math.min(o,a),c=new Array(o),u=0;u<i;++u)for(var l,s=n[u],f=r[u],d=s.length,p=c[u]=new Array(d),b=0;b<d;++b)(l=s[b]||f[b])&&(p[b]=l);for(;u<o;++u)c[u]=n[u];return new zn(c,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r,o=e[t],a=o.length-1,i=o[a];--a>=0;)(r=o[a])&&(i&&4^r.compareDocumentPosition(i)&&i.parentNode.insertBefore(r,i),i=r);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=Qt);for(var n=this._groups,r=n.length,o=new Array(r),a=0;a<r;++a){for(var i,c=n[a],u=c.length,l=o[a]=new Array(u),s=0;s<u;++s)(i=c[s])&&(l[s]=i);l.sort(t)}return new zn(o,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],o=0,a=r.length;o<a;++o){var i=r[o];if(i)return i}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var o,a=t[n],i=0,c=a.length;i<c;++i)(o=a[i])&&e.call(o,o.__data__,i,a);return this},attr:function(e,t){var n=Nt(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==t?n.local?en:Jt:"function"==typeof t?n.local?on:rn:n.local?nn:tn)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?cn:"function"==typeof t?ln:un)(e,t,null==n?"":n)):sn(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?fn:"function"==typeof t?pn:dn)(e,t)):this.node()[e]},classed:function(e,t){var n=bn(e+"");if(arguments.length<2){for(var r=hn(this.node()),o=-1,a=n.length;++o<a;)if(!r.contains(n[o]))return!1;return!0}return this.each(("function"==typeof t?wn:t?gn:On)(n,t))},text:function(e){return arguments.length?this.each(null==e?jn:("function"==typeof e?_n:En)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Sn:("function"==typeof e?kn:xn)(e)):this.node().innerHTML},raise:function(){return this.each(Pn)},lower:function(){return this.each(Cn)},append:function(e){var t="function"==typeof e?e:It(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:It(e),r=null==t?Nn:"function"==typeof t?t:Mt(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Tn)},clone:function(e){return this.select(e?In:Dn)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var r,o,a=An(e+""),i=a.length;if(!(arguments.length<2)){for(c=t?Ln:Mn,r=0;r<i;++r)this.each(c(a[r],t,n));return this}var c=this.node().__on;if(c)for(var u,l=0,s=c.length;l<s;++l)for(r=0,u=c[l];r<i;++r)if((o=a[r]).type===u.type&&o.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?Bn:Fn)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r,o=e[t],a=0,i=o.length;a<i;++a)(r=o[a])&&(yield r)}};const Hn={capture:!0,passive:!1};function Gn(e){e.preventDefault(),e.stopImmediatePropagation()}function Xn(e){var t=e.document.documentElement,n=Yn(e).on("dragstart.drag",Gn,Hn);"onselectstart"in t?n.on("selectstart.drag",Gn,Hn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Kn(e,t){var n=e.document.documentElement,r=Yn(e).on("dragstart.drag",null);t&&(r.on("click.drag",Gn,Hn),setTimeout((function(){r.on("click.drag",null)}),0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function $n(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Wn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Zn(){}var Qn="\\s*([+-]?\\d+)\\s*",Jn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",er="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tr=/^#([0-9a-f]{3,8})$/,nr=new RegExp("^rgb\\("+[Qn,Qn,Qn]+"\\)$"),rr=new RegExp("^rgb\\("+[er,er,er]+"\\)$"),or=new RegExp("^rgba\\("+[Qn,Qn,Qn,Jn]+"\\)$"),ar=new RegExp("^rgba\\("+[er,er,er,Jn]+"\\)$"),ir=new RegExp("^hsl\\("+[Jn,er,er]+"\\)$"),cr=new RegExp("^hsla\\("+[Jn,er,er,Jn]+"\\)$"),ur={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function lr(){return this.rgb().formatHex()}function sr(){return this.rgb().formatRgb()}function fr(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tr.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?dr(t):3===n?new yr(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?pr(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?pr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=nr.exec(e))?new yr(t[1],t[2],t[3],1):(t=rr.exec(e))?new yr(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=or.exec(e))?pr(t[1],t[2],t[3],t[4]):(t=ar.exec(e))?pr(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=ir.exec(e))?Or(t[1],t[2]/100,t[3]/100,1):(t=cr.exec(e))?Or(t[1],t[2]/100,t[3]/100,t[4]):ur.hasOwnProperty(e)?dr(ur[e]):"transparent"===e?new yr(NaN,NaN,NaN,0):null}function dr(e){return new yr(e>>16&255,e>>8&255,255&e,1)}function pr(e,t,n,r){return r<=0&&(e=t=n=NaN),new yr(e,t,n,r)}function br(e){return e instanceof Zn||(e=fr(e)),e?new yr((e=e.rgb()).r,e.g,e.b,e.opacity):new yr}function hr(e,t,n,r){return 1===arguments.length?br(e):new yr(e,t,n,null==r?1:r)}function yr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function mr(){return"#"+gr(this.r)+gr(this.g)+gr(this.b)}function vr(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function gr(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function Or(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jr(e,t,n,r)}function wr(e){if(e instanceof jr)return new jr(e.h,e.s,e.l,e.opacity);if(e instanceof Zn||(e=fr(e)),!e)return new jr;if(e instanceof jr)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,o=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,c=a-o,u=(a+o)/2;return c?(i=t===a?(n-r)/c+6*(n<r):n===a?(r-t)/c+2:(t-n)/c+4,c/=u<.5?a+o:2-a-o,i*=60):c=u>0&&u<1?0:i,new jr(i,c,u,e.opacity)}function jr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function Er(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}$n(Zn,fr,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:lr,formatHex:lr,formatHsl:function(){return wr(this).formatHsl()},formatRgb:sr,toString:sr}),$n(yr,hr,Wn(Zn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new yr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:mr,formatHex:mr,formatRgb:vr,toString:vr})),$n(jr,(function(e,t,n,r){return 1===arguments.length?wr(e):new jr(e,t,n,null==r?1:r)}),Wn(Zn,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new jr(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new jr(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,o=2*n-r;return new yr(Er(e>=240?e-240:e+120,o,r),Er(e,o,r),Er(e<120?e+240:e-120,o,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var _r=e=>()=>e;function Sr(e){return 1==(e=+e)?xr:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):_r(isNaN(t)?n:t)}}function xr(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):_r(isNaN(e)?t:e)}var kr=function e(t){var n=Sr(t);function r(e,t){var r=n((e=hr(e)).r,(t=hr(t)).r),o=n(e.g,t.g),a=n(e.b,t.b),i=xr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=o(t),e.b=a(t),e.opacity=i(t),e+""}}return r.gamma=e,r}(1);function Pr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Cr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Nr=new RegExp(Cr.source,"g");function Tr(e,t){var n,r,o,a=Cr.lastIndex=Nr.lastIndex=0,i=-1,c=[],u=[];for(e+="",t+="";(n=Cr.exec(e))&&(r=Nr.exec(t));)(o=r.index)>a&&(o=t.slice(a,o),c[i]?c[i]+=o:c[++i]=o),(n=n[0])===(r=r[0])?c[i]?c[i]+=r:c[++i]=r:(c[++i]=null,u.push({i:i,x:Pr(n,r)})),a=Nr.lastIndex;return a<t.length&&(o=t.slice(a),c[i]?c[i]+=o:c[++i]=o),c.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,r=0;r<t;++r)c[(n=u[r]).i]=n.x(e);return c.join("")})}var Dr,Ir=180/Math.PI,Ar={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Mr(e,t,n,r,o,a){var i,c,u;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(c=Math.sqrt(n*n+r*r))&&(n/=c,r/=c,u/=c),e*r<t*n&&(e=-e,t=-t,u=-u,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Ir,skewX:Math.atan(u)*Ir,scaleX:i,scaleY:c}}function Lr(e,t,n,r){function o(e){return e.length?e.pop()+" ":""}return function(a,i){var c=[],u=[];return a=e(a),i=e(i),function(e,r,o,a,i,c){if(e!==o||r!==a){var u=i.push("translate(",null,t,null,n);c.push({i:u-4,x:Pr(e,o)},{i:u-2,x:Pr(r,a)})}else(o||a)&&i.push("translate("+o+t+a+n)}(a.translateX,a.translateY,i.translateX,i.translateY,c,u),function(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(o(n)+"rotate(",null,r)-2,x:Pr(e,t)})):t&&n.push(o(n)+"rotate("+t+r)}(a.rotate,i.rotate,c,u),function(e,t,n,a){e!==t?a.push({i:n.push(o(n)+"skewX(",null,r)-2,x:Pr(e,t)}):t&&n.push(o(n)+"skewX("+t+r)}(a.skewX,i.skewX,c,u),function(e,t,n,r,a,i){if(e!==n||t!==r){var c=a.push(o(a)+"scale(",null,",",null,")");i.push({i:c-4,x:Pr(e,n)},{i:c-2,x:Pr(t,r)})}else 1===n&&1===r||a.push(o(a)+"scale("+n+","+r+")")}(a.scaleX,a.scaleY,i.scaleX,i.scaleY,c,u),a=i=null,function(e){for(var t,n=-1,r=u.length;++n<r;)c[(t=u[n]).i]=t.x(e);return c.join("")}}}var Rr=Lr((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ar:Mr(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Fr=Lr((function(e){return null==e?Ar:(Dr||(Dr=document.createElementNS("http://www.w3.org/2000/svg","g")),Dr.setAttribute("transform",e),(e=Dr.transform.baseVal.consolidate())?Mr((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Ar)}),", ",")",")");function Br(e){return((e=Math.exp(e))+1/e)/2}var qr,zr,Ur=function e(t,n,r){function o(e,o){var a,i,c=e[0],u=e[1],l=e[2],s=o[0],f=o[1],d=o[2],p=s-c,b=f-u,h=p*p+b*b;if(h<1e-12)i=Math.log(d/l)/t,a=function(e){return[c+e*p,u+e*b,l*Math.exp(t*e*i)]};else{var y=Math.sqrt(h),m=(d*d-l*l+r*h)/(2*l*n*y),v=(d*d-l*l-r*h)/(2*d*n*y),g=Math.log(Math.sqrt(m*m+1)-m),O=Math.log(Math.sqrt(v*v+1)-v);i=(O-g)/t,a=function(e){var r=e*i,o=Br(g),a=l/(n*y)*(o*function(e){return((e=Math.exp(2*e))-1)/(e+1)}(t*r+g)-function(e){return((e=Math.exp(e))-1/e)/2}(g));return[c+a*p,u+a*b,l*o/Br(t*r+g)]}}return a.duration=1e3*i*t/Math.SQRT2,a}return o.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},o}(Math.SQRT2,2,4),Yr=0,Vr=0,Hr=0,Gr=0,Xr=0,Kr=0,$r="object"==typeof performance&&performance.now?performance:Date,Wr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zr(){return Xr||(Wr(Qr),Xr=$r.now()+Kr)}function Qr(){Xr=0}function Jr(){this._call=this._time=this._next=null}function eo(e,t,n){var r=new Jr;return r.restart(e,t,n),r}function to(){Xr=(Gr=$r.now())+Kr,Yr=Vr=0;try{!function(){Zr(),++Yr;for(var e,t=qr;t;)(e=Xr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Yr}()}finally{Yr=0,function(){var e,t,n=qr,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:qr=t);zr=e,ro(r)}(),Xr=0}}function no(){var e=$r.now(),t=e-Gr;t>1e3&&(Kr-=t,Gr=e)}function ro(e){Yr||(Vr&&(Vr=clearTimeout(Vr)),e-Xr>24?(e<1/0&&(Vr=setTimeout(to,e-$r.now()-Kr)),Hr&&(Hr=clearInterval(Hr))):(Hr||(Gr=$r.now(),Hr=setInterval(no,1e3)),Yr=1,Wr(to)))}function oo(e,t,n){var r=new Jr;return t=null==t?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}Jr.prototype=eo.prototype={constructor:Jr,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?Zr():+n)+(null==t?0:+t),this._next||zr===this||(zr?zr._next=this:qr=this,zr=this),this._call=e,this._time=n,ro()},stop:function(){this._call&&(this._call=null,this._time=1/0,ro())}};var ao=Et("start","end","cancel","interrupt"),io=[];function co(e,t,n,r,o,a){var i=e.__transition;if(i){if(n in i)return}else e.__transition={};!function(e,t,n){var r,o=e.__transition;function a(u){var l,s,f,d;if(1!==n.state)return c();for(l in o)if((d=o[l]).name===n.name){if(3===d.state)return oo(a);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete o[l]):+l<t&&(d.state=6,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete o[l])}if(oo((function(){3===n.state&&(n.state=4,n.timer.restart(i,n.delay,n.time),i(u))})),n.state=2,n.on.call("start",e,e.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(f=n.tween.length),l=0,s=-1;l<f;++l)(d=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(r[++s]=d);r.length=s+1}}function i(t){for(var o=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=5,1),a=-1,i=r.length;++a<i;)r[a].call(e,o);5===n.state&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){for(var r in n.state=6,n.timer.stop(),delete o[t],o)return;delete e.__transition}o[t]=n,n.timer=eo((function(e){n.state=1,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}),0,n.time)}(e,n,{name:t,index:r,group:o,on:ao,tween:io,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:0})}function uo(e,t){var n=so(e,t);if(n.state>0)throw new Error("too late; already scheduled");return n}function lo(e,t){var n=so(e,t);if(n.state>3)throw new Error("too late; already running");return n}function so(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fo(e,t){var n,r,o,a=e.__transition,i=!0;if(a){for(o in t=null==t?null:t+"",a)(n=a[o]).name===t?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete a[o]):i=!1;i&&delete e.__transition}}function po(e,t){var n,r;return function(){var o=lo(this,e),a=o.tween;if(a!==n)for(var i=0,c=(r=n=a).length;i<c;++i)if(r[i].name===t){(r=r.slice()).splice(i,1);break}o.tween=r}}function bo(e,t,n){var r,o;if("function"!=typeof n)throw new Error;return function(){var a=lo(this,e),i=a.tween;if(i!==r){o=(r=i).slice();for(var c={name:t,value:n},u=0,l=o.length;u<l;++u)if(o[u].name===t){o[u]=c;break}u===l&&o.push(c)}a.tween=o}}function ho(e,t,n){var r=e._id;return e.each((function(){var e=lo(this,r);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return so(e,r).value[t]}}function yo(e,t){var n;return("number"==typeof t?Pr:t instanceof fr?kr:(n=fr(t))?(t=n,kr):Tr)(e,t)}function mo(e){return function(){this.removeAttribute(e)}}function vo(e){return function(){this.removeAttributeNS(e.space,e.local)}}function go(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttribute(e);return i===a?null:i===r?o:o=t(r=i,n)}}function Oo(e,t,n){var r,o,a=n+"";return function(){var i=this.getAttributeNS(e.space,e.local);return i===a?null:i===r?o:o=t(r=i,n)}}function wo(e,t,n){var r,o,a;return function(){var i,c,u=n(this);if(null!=u)return(i=this.getAttribute(e))===(c=u+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,u));this.removeAttribute(e)}}function jo(e,t,n){var r,o,a;return function(){var i,c,u=n(this);if(null!=u)return(i=this.getAttributeNS(e.space,e.local))===(c=u+"")?null:i===r&&c===o?a:(o=c,a=t(r=i,u));this.removeAttributeNS(e.space,e.local)}}function Eo(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _o(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function So(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&_o(e,o)),n}return o._value=t,o}function xo(e,t){var n,r;function o(){var o=t.apply(this,arguments);return o!==r&&(n=(r=o)&&Eo(e,o)),n}return o._value=t,o}function ko(e,t){return function(){uo(this,e).delay=+t.apply(this,arguments)}}function Po(e,t){return t=+t,function(){uo(this,e).delay=t}}function Co(e,t){return function(){lo(this,e).duration=+t.apply(this,arguments)}}function No(e,t){return t=+t,function(){lo(this,e).duration=t}}function To(e,t){if("function"!=typeof t)throw new Error;return function(){lo(this,e).ease=t}}function Do(e,t,n){var r,o,a=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?uo:lo;return function(){var i=a(this,e),c=i.on;c!==r&&(o=(r=c).copy()).on(t,n),i.on=o}}var Io=Un.prototype.constructor;function Ao(e){return function(){this.style.removeProperty(e)}}function Mo(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Lo(e,t,n){var r,o;function a(){var a=t.apply(this,arguments);return a!==o&&(r=(o=a)&&Mo(e,a,n)),r}return a._value=t,a}function Ro(e){return function(t){this.textContent=e.call(this,t)}}function Fo(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Ro(r)),t}return r._value=e,r}var Bo=0;function qo(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function zo(){return++Bo}var Uo=Un.prototype;qo.prototype={constructor:qo,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Mt(e));for(var r=this._groups,o=r.length,a=new Array(o),i=0;i<o;++i)for(var c,u,l=r[i],s=l.length,f=a[i]=new Array(s),d=0;d<s;++d)(c=l[d])&&(u=e.call(c,c.__data__,d,l))&&("__data__"in c&&(u.__data__=c.__data__),f[d]=u,co(f[d],t,n,d,f,so(c,n)));return new qo(a,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Ft(e));for(var r=this._groups,o=r.length,a=[],i=[],c=0;c<o;++c)for(var u,l=r[c],s=l.length,f=0;f<s;++f)if(u=l[f]){for(var d,p=e.call(u,u.__data__,f,l),b=so(u,n),h=0,y=p.length;h<y;++h)(d=p[h])&&co(d,t,n,h,p,b);a.push(p),i.push(u)}return new qo(a,i,t,n)},selectChild:Uo.selectChild,selectChildren:Uo.selectChildren,filter:function(e){"function"!=typeof e&&(e=Bt(e));for(var t=this._groups,n=t.length,r=new Array(n),o=0;o<n;++o)for(var a,i=t[o],c=i.length,u=r[o]=[],l=0;l<c;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&u.push(a);return new qo(r,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,o=n.length,a=Math.min(r,o),i=new Array(r),c=0;c<a;++c)for(var u,l=t[c],s=n[c],f=l.length,d=i[c]=new Array(f),p=0;p<f;++p)(u=l[p]||s[p])&&(d[p]=u);for(;c<r;++c)i[c]=t[c];return new qo(i,this._parents,this._name,this._id)},selection:function(){return new Io(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=zo(),r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],u=c.length,l=0;l<u;++l)if(i=c[l]){var s=so(i,t);co(i,e,n,l,c,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new qo(r,this._parents,e,n)},call:Uo.call,nodes:Uo.nodes,node:Uo.node,size:Uo.size,empty:Uo.empty,each:Uo.each,on:function(e,t){var n=this._id;return arguments.length<2?so(this.node(),n).on.on(e):this.each(Do(n,e,t))},attr:function(e,t){var n=Nt(e),r="transform"===n?Fr:yo;return this.attrTween(e,"function"==typeof t?(n.local?jo:wo)(n,r,ho(this,"attr."+e,t)):null==t?(n.local?vo:mo)(n):(n.local?Oo:go)(n,r,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var r=Nt(e);return this.tween(n,(r.local?So:xo)(r,t))},style:function(e,t,n){var r="transform"==(e+="")?Rr:yo;return null==t?this.styleTween(e,function(e,t){var n,r,o;return function(){var a=sn(this,e),i=(this.style.removeProperty(e),sn(this,e));return a===i?null:a===n&&i===r?o:o=t(n=a,r=i)}}(e,r)).on("end.style."+e,Ao(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var r,o,a;return function(){var i=sn(this,e),c=n(this),u=c+"";return null==c&&(this.style.removeProperty(e),u=c=sn(this,e)),i===u?null:i===r&&u===o?a:(o=u,a=t(r=i,c))}}(e,r,ho(this,"style."+e,t))).each(function(e,t){var n,r,o,a,i="style."+t,c="end."+i;return function(){var u=lo(this,e),l=u.on,s=null==u.value[i]?a||(a=Ao(t)):void 0;l===n&&o===s||(r=(n=l).copy()).on(c,o=s),u.on=r}}(this._id,e)):this.styleTween(e,function(e,t,n){var r,o,a=n+"";return function(){var i=sn(this,e);return i===a?null:i===r?o:o=t(r=i,n)}}(e,r,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==t)return this.tween(r,null);if("function"!=typeof t)throw new Error;return this.tween(r,Lo(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(ho(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,Fo(e))},remove:function(){return this.on("end.remove",function(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}(this._id))},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r,o=so(this.node(),n).tween,a=0,i=o.length;a<i;++a)if((r=o[a]).name===e)return r.value;return null}return this.each((null==t?po:bo)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?ko:Po)(t,e)):so(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Co:No)(t,e)):so(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(To(t,e)):so(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;lo(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,r=n._id,o=n.size();return new Promise((function(a,i){var c={value:i},u={value:function(){0==--o&&a()}};n.each((function(){var n=lo(this,r),o=n.on;o!==e&&((t=(e=o).copy())._.cancel.push(c),t._.interrupt.push(c),t._.end.push(u)),n.on=t})),0===o&&a()}))},[Symbol.iterator]:Uo[Symbol.iterator]};var Yo={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function Vo(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Un.prototype.interrupt=function(e){return this.each((function(){fo(this,e)}))},Un.prototype.transition=function(e){var t,n;e instanceof qo?(t=e._id,e=e._name):(t=zo(),(n=Yo).time=Zr(),e=null==e?null:e+"");for(var r=this._groups,o=r.length,a=0;a<o;++a)for(var i,c=r[a],u=c.length,l=0;l<u;++l)(i=c[l])&&co(i,e,t,l,c,n||Vo(i,t));return new qo(r,this._parents,e,t)};var Ho=e=>()=>e;function Go(e,{sourceEvent:t,target:n,transform:r,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:o}})}function Xo(e,t,n){this.k=e,this.x=t,this.y=n}Xo.prototype={constructor:Xo,scale:function(e){return 1===e?this:new Xo(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new Xo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Ko=new Xo(1,0,0);function $o(e){e.stopImmediatePropagation()}function Wo(e){e.preventDefault(),e.stopImmediatePropagation()}function Zo(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function Qo(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function Jo(){return this.__zoom||Ko}function ea(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function ta(){return navigator.maxTouchPoints||"ontouchstart"in this}function na(e,t,n){var r=e.invertX(t[0][0])-n[0][0],o=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}var ra,oa,aa,ia,ca,ua;!function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"}(ra||(ra={})),function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"}(oa||(oa={})),function(e){e.Lines="lines",e.Dots="dots"}(aa||(aa={})),function(e){e.Strict="strict",e.Loose="loose"}(ia||(ia={})),function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep"}(ca||(ca={})),function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"}(ua||(ua={}));var la=function(e){return{x:e.x,y:e.y,zoom:e.k}},sa=function(e){return e.target.closest(".nowheel")},fa=function(e){var t=e.onMove,n=e.onMoveStart,a=e.onMoveEnd,i=e.zoomOnScroll,c=void 0===i||i,u=e.zoomOnPinch,l=void 0===u||u,s=e.panOnScroll,f=void 0!==s&&s,d=e.panOnScrollSpeed,p=void 0===d?.5:d,b=e.panOnScrollMode,h=void 0===b?ua.Free:b,y=e.zoomOnDoubleClick,m=void 0===y||y,v=e.selectionKeyPressed,g=e.elementsSelectable,O=e.paneMoveable,w=void 0===O||O,j=e.defaultPosition,E=void 0===j?[0,0]:j,_=e.defaultZoom,S=void 0===_?1:_,x=e.translateExtent,k=e.zoomActivationKeyCode,P=e.preventScrolling,C=void 0===P||P,N=e.children,T=Object(r.useRef)(null),D=Object(r.useRef)({x:0,y:0,zoom:0}),I=Ke(),A=Xe((function(e){return e.d3Zoom})),M=Xe((function(e){return e.d3Selection})),L=Xe((function(e){return e.d3ZoomHandler})),R=Ge((function(e){return e.initD3Zoom})),F=Ge((function(e){return e.updateTransform})),B=rt(k);return function(e){var t=Ge((function(e){return e.updateSize}));Object(r.useEffect)((function(){var n,r=function(){if(e.current){var n=et(e.current);0!==n.height&&0!==n.width||console.warn("The React Flow parent container needs a width and a height to render the graph."),t(n)}};return r(),window.onresize=r,e.current&&(n=new ResizeObserver((function(){return r()}))).observe(e.current),function(){window.onresize=null,n&&e.current&&n.unobserve(e.current)}}),[])}(T),Object(r.useEffect)((function(){if(T.current){var e=I.getState(),t=void 0!==x?x:e.translateExtent,n=function(){var e,t,n,r=Zo,o=Qo,a=na,i=ea,c=ta,u=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],s=250,f=Ur,d=Et("start","zoom","end"),p=0,b=10;function h(e){e.property("__zoom",Jo).on("wheel.zoom",j,{passive:!1}).on("mousedown.zoom",E).on("dblclick.zoom",_).filter(c).on("touchstart.zoom",S).on("touchmove.zoom",x).on("touchend.zoom touchcancel.zoom",k).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new Xo(t,e.x,e.y)}function m(e,t,n){var r=t[0]-n[0]*e.k,o=t[1]-n[1]*e.k;return r===e.x&&o===e.y?e:new Xo(e.k,r,o)}function v(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function g(e,t,n,r){e.on("start.zoom",(function(){O(this,arguments).event(r).start()})).on("interrupt.zoom end.zoom",(function(){O(this,arguments).event(r).end()})).tween("zoom",(function(){var e=this,a=arguments,i=O(e,a).event(r),c=o.apply(e,a),u=null==n?v(c):"function"==typeof n?n.apply(e,a):n,l=Math.max(c[1][0]-c[0][0],c[1][1]-c[0][1]),s=e.__zoom,d="function"==typeof t?t.apply(e,a):t,p=f(s.invert(u).concat(l/s.k),d.invert(u).concat(l/d.k));return function(e){if(1===e)e=d;else{var t=p(e),n=l/t[2];e=new Xo(n,u[0]-t[0]*n,u[1]-t[1]*n)}i.zoom(null,e)}}))}function O(e,t,n){return!n&&e.__zooming||new w(e,t)}function w(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=o.apply(e,t),this.taps=0}function j(e,...t){if(r.apply(this,arguments)){var n=O(this,t).event(e),o=this.__zoom,c=Math.max(u[0],Math.min(u[1],o.k*Math.pow(2,i.apply(this,arguments)))),s=Vn(e);if(n.wheel)n.mouse[0][0]===s[0]&&n.mouse[0][1]===s[1]||(n.mouse[1]=o.invert(n.mouse[0]=s)),clearTimeout(n.wheel);else{if(o.k===c)return;n.mouse=[s,o.invert(s)],fo(this),n.start()}Wo(e),n.wheel=setTimeout(f,150),n.zoom("mouse",a(m(y(o,c),n.mouse[0],n.mouse[1]),n.extent,l))}function f(){n.wheel=null,n.end()}}function E(e,...t){if(!n&&r.apply(this,arguments)){var o=e.currentTarget,i=O(this,t,!0).event(e),c=Yn(e.view).on("mousemove.zoom",d,!0).on("mouseup.zoom",b,!0),u=Vn(e,o),s=e.clientX,f=e.clientY;Xn(e.view),$o(e),i.mouse=[u,this.__zoom.invert(u)],fo(this),i.start()}function d(e){if(Wo(e),!i.moved){var t=e.clientX-s,n=e.clientY-f;i.moved=t*t+n*n>p}i.event(e).zoom("mouse",a(m(i.that.__zoom,i.mouse[0]=Vn(e,o),i.mouse[1]),i.extent,l))}function b(e){c.on("mousemove.zoom mouseup.zoom",null),Kn(e.view,i.moved),Wo(e),i.event(e).end()}}function _(e,...t){if(r.apply(this,arguments)){var n=this.__zoom,i=Vn(e.changedTouches?e.changedTouches[0]:e,this),c=n.invert(i),u=n.k*(e.shiftKey?.5:2),f=a(m(y(n,u),i,c),o.apply(this,t),l);Wo(e),s>0?Yn(this).transition().duration(s).call(g,f,i,e):Yn(this).call(h.transform,f,i,e)}}function S(n,...o){if(r.apply(this,arguments)){var a,i,c,u,l=n.touches,s=l.length,f=O(this,o,n.changedTouches.length===s).event(n);for($o(n),i=0;i<s;++i)u=[u=Vn(c=l[i],this),this.__zoom.invert(u),c.identifier],f.touch0?f.touch1||f.touch0[2]===u[2]||(f.touch1=u,f.taps=0):(f.touch0=u,a=!0,f.taps=1+!!e);e&&(e=clearTimeout(e)),a&&(f.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),500)),fo(this),f.start())}}function x(e,...t){if(this.__zooming){var n,r,o,i,c=O(this,t).event(e),u=e.changedTouches,s=u.length;for(Wo(e),n=0;n<s;++n)o=Vn(r=u[n],this),c.touch0&&c.touch0[2]===r.identifier?c.touch0[0]=o:c.touch1&&c.touch1[2]===r.identifier&&(c.touch1[0]=o);if(r=c.that.__zoom,c.touch1){var f=c.touch0[0],d=c.touch0[1],p=c.touch1[0],b=c.touch1[1],h=(h=p[0]-f[0])*h+(h=p[1]-f[1])*h,v=(v=b[0]-d[0])*v+(v=b[1]-d[1])*v;r=y(r,Math.sqrt(h/v)),o=[(f[0]+p[0])/2,(f[1]+p[1])/2],i=[(d[0]+b[0])/2,(d[1]+b[1])/2]}else{if(!c.touch0)return;o=c.touch0[0],i=c.touch0[1]}c.zoom("touch",a(m(r,o,i),c.extent,l))}}function k(e,...r){if(this.__zooming){var o,a,i=O(this,r).event(e),c=e.changedTouches,u=c.length;for($o(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),500),o=0;o<u;++o)a=c[o],i.touch0&&i.touch0[2]===a.identifier?delete i.touch0:i.touch1&&i.touch1[2]===a.identifier&&delete i.touch1;if(i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0)i.touch0[1]=this.__zoom.invert(i.touch0[0]);else if(i.end(),2===i.taps&&(a=Vn(a,this),Math.hypot(t[0]-a[0],t[1]-a[1])<b)){var l=Yn(this).on("dblclick.zoom");l&&l.apply(this,arguments)}}}return h.transform=function(e,t,n,r){var o=e.selection?e.selection():e;o.property("__zoom",Jo),e!==o?g(e,t,n,r):o.interrupt().each((function(){O(this,arguments).event(r).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},h.scaleBy=function(e,t,n,r){h.scaleTo(e,(function(){var e=this.__zoom.k,n="function"==typeof t?t.apply(this,arguments):t;return e*n}),n,r)},h.scaleTo=function(e,t,n,r){h.transform(e,(function(){var e=o.apply(this,arguments),r=this.__zoom,i=null==n?v(e):"function"==typeof n?n.apply(this,arguments):n,c=r.invert(i),u="function"==typeof t?t.apply(this,arguments):t;return a(m(y(r,u),i,c),e,l)}),n,r)},h.translateBy=function(e,t,n,r){h.transform(e,(function(){return a(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),o.apply(this,arguments),l)}),null,r)},h.translateTo=function(e,t,n,r,i){h.transform(e,(function(){var e=o.apply(this,arguments),i=this.__zoom,c=null==r?v(e):"function"==typeof r?r.apply(this,arguments):r;return a(Ko.translate(c[0],c[1]).scale(i.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,l)}),r,i)},w.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Yn(this.that).datum();d.call(e,this.that,new Go(e,{sourceEvent:this.sourceEvent,target:h,type:e,transform:this.that.__zoom,dispatch:d}),t)}},h.wheelDelta=function(e){return arguments.length?(i="function"==typeof e?e:Ho(+e),h):i},h.filter=function(e){return arguments.length?(r="function"==typeof e?e:Ho(!!e),h):r},h.touchable=function(e){return arguments.length?(c="function"==typeof e?e:Ho(!!e),h):c},h.extent=function(e){return arguments.length?(o="function"==typeof e?e:Ho([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),h):o},h.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],h):[u[0],u[1]]},h.translateExtent=function(e){return arguments.length?(l[0][0]=+e[0][0],l[1][0]=+e[1][0],l[0][1]=+e[0][1],l[1][1]=+e[1][1],h):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},h.constrain=function(e){return arguments.length?(a=e,h):a},h.duration=function(e){return arguments.length?(s=+e,h):s},h.interpolate=function(e){return arguments.length?(f=e,h):f},h.on=function(){var e=d.on.apply(d,arguments);return e===d?h:e},h.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,h):Math.sqrt(p)},h.tapDistance=function(e){return arguments.length?(b=+e,h):b},h}().scaleExtent([e.minZoom,e.maxZoom]).translateExtent(t),r=Yn(T.current).call(n),o=tt(E[0],t[0][0],t[1][0]),a=tt(E[1],t[0][1],t[1][1]),i=tt(S,e.minZoom,e.maxZoom),c=Ko.translate(o,a).scale(i);n.transform(r,c),R({d3Zoom:n,d3Selection:r,d3ZoomHandler:r.on("wheel.zoom"),transform:[o,a,i]})}}),[]),Object(r.useEffect)((function(){M&&A&&(f&&!B?M.on("wheel",(function(e){if(sa(e))return!1;e.preventDefault(),e.stopImmediatePropagation();var t=M.property("__zoom").k||1;if(e.ctrlKey&&l){var n=Vn(e),r=-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*10,o=t*Math.pow(2,r);A.scaleTo(M,o,n)}else{var a=1===e.deltaMode?20:1,i=h===ua.Vertical?0:e.deltaX*a,c=h===ua.Horizontal?0:e.deltaY*a;A.translateBy(M,-i/t*p,-c/t*p)}})).on("wheel.zoom",null):void 0!==L&&M.on("wheel",(function(e){if(!C||sa(e))return null;e.preventDefault()})).on("wheel.zoom",L))}),[f,h,M,A,L,B,l,C]),Object(r.useEffect)((function(){A&&(v?A.on("zoom",null):A.on("zoom",(function(e){if(F([e.transform.x,e.transform.y,e.transform.k]),t){var n=la(e.transform);t(n)}})))}),[v,A,F,t]),Object(r.useEffect)((function(){A&&(n?A.on("start",(function(e){var t=la(e.transform);D.current=t,n(t)})):A.on("start",null))}),[A,n]),Object(r.useEffect)((function(){A&&(a?A.on("end",(function(e){if(function(e,t){return e.x!==t.x||e.y!==t.y||e.zoom!==t.k}(D.current,e.transform)){var t=la(e.transform);D.current=t,a(t)}})):A.on("end",null))}),[A,a]),Object(r.useEffect)((function(){A&&A.filter((function(e){var t=B||c,n=l&&e.ctrlKey;return!!(w||t||f||m||l)&&(!v&&(!(!m&&"dblclick"===e.type)&&((!sa(e)||"wheel"!==e.type)&&((!e.target.closest(".react-flow__node")&&!e.target.closest(".react-flow__edge")||"wheel"===e.type)&&((!e.target.closest(".react-flow__nodesselection")||"wheel"===e.type)&&(!(!l&&e.ctrlKey&&"wheel"===e.type)&&(!!(t||f||n||"wheel"!==e.type)&&(!!(w||"mousedown"!==e.type&&"touchstart"!==e.type)&&!(e.ctrlKey&&"wheel"!==e.type||e.button)))))))))}))}),[A,c,l,f,m,w,v,g,B]),o.a.createElement("div",{className:"react-flow__renderer react-flow__zoompane",ref:T},N)};function da(e){var t=e.target.closest(".react-flow");if(t){var n=t.getBoundingClientRect();return{x:e.clientX-n.left,y:e.clientY-n.top}}}var pa=function(){var e=Xe((function(e){return e.userSelectionRect}));return e.draw?o.a.createElement("div",{className:"react-flow__selection",style:{width:e.width,height:e.height,transform:"translate(".concat(e.x,"px, ").concat(e.y,"px)")}}):null},ba=Object(r.memo)((function(e){var t=e.selectionKeyPressed,n=Xe((function(e){return e.selectionActive})),r=Xe((function(e){return e.elementsSelectable})),a=Ge((function(e){return e.setUserSelection})),i=Ge((function(e){return e.updateUserSelection})),c=Ge((function(e){return e.unsetUserSelection})),u=Ge((function(e){return e.unsetNodesSelection}));if(!r||!(n||t))return null;return o.a.createElement("div",{className:"react-flow__selectionpane",onMouseDown:function(e){var t=da(e);t&&a(t)},onMouseMove:function(e){if(t&&n){var r=da(e);r&&i(r)}},onMouseUp:function(){return c()},onMouseLeave:function(){c(),u()}},o.a.createElement(pa,null))})),ha={exports:{}},ya={};function ma(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ma(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var va=v(Object.freeze({__proto__:null,default:function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=ma(e))&&(r&&(r+=" "),r+=t);return r}})),ga={},Oa={};Object.defineProperty(Oa,"__esModule",{value:!0}),Oa.findInArray=function(e,t){for(var n=0,r=e.length;n<r;n++)if(t.apply(t,[e[n],n,e]))return e[n]},Oa.isFunction=function(e){return"function"==typeof e||"[object Function]"===Object.prototype.toString.call(e)},Oa.isNum=function(e){return"number"==typeof e&&!isNaN(e)},Oa.int=function(e){return parseInt(e,10)},Oa.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))};var wa={};Object.defineProperty(wa,"__esModule",{value:!0}),wa.getPrefix=Ea,wa.browserPrefixToKey=_a,wa.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},wa.default=void 0;var ja=["Moz","Webkit","O","ms"];function Ea(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"==typeof window)return"";var r=null===(e=window.document)||void 0===e||null===(t=e.documentElement)||void 0===t?void 0:t.style;if(!r)return"";if(n in r)return"";for(var o=0;o<ja.length;o++)if(_a(n,ja[o])in r)return ja[o];return""}function _a(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,r=0;r<e.length;r++)n?(t+=e[r].toUpperCase(),n=!1):"-"===e[r]?n=!0:t+=e[r];return t}(e)):e}var Sa=Ea();function xa(e){return(xa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}wa.default=Sa,Object.defineProperty(ga,"__esModule",{value:!0}),ga.matchesSelector=Aa,ga.matchesSelectorAndParentsTo=function(e,t,n){var r=e;do{if(Aa(r,t))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1},ga.addEvent=function(e,t,n,r){if(!e)return;var o=Ta({capture:!0},r);e.addEventListener?e.addEventListener(t,n,o):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},ga.removeEvent=function(e,t,n,r){if(!e)return;var o=Ta({capture:!0},r);e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},ga.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ka.int)(n.borderTopWidth),t+=(0,ka.int)(n.borderBottomWidth)},ga.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,ka.int)(n.borderLeftWidth),t+=(0,ka.int)(n.borderRightWidth)},ga.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ka.int)(n.paddingTop),t-=(0,ka.int)(n.paddingBottom)},ga.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,ka.int)(n.paddingLeft),t-=(0,ka.int)(n.paddingRight)},ga.offsetXYFromParent=function(e,t,n){var r=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),o=(e.clientX+t.scrollLeft-r.left)/n,a=(e.clientY+t.scrollTop-r.top)/n;return{x:o,y:a}},ga.createCSSTransform=function(e,t){var n=Ma(e,t,"px");return Da({},(0,Pa.browserPrefixToKey)("transform",Pa.default),n)},ga.createSVGTransform=function(e,t){return Ma(e,t,"")},ga.getTranslation=Ma,ga.getTouch=function(e,t){return e.targetTouches&&(0,ka.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,ka.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},ga.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},ga.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&La(e.body,"react-draggable-transparent-selection")},ga.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&Ra(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(e){}},ga.addClassName=La,ga.removeClassName=Ra;var ka=Oa,Pa=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==xa(e)&&"function"!=typeof e)return{default:e};var n=Ca(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(wa);function Ca(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ca=function(e){return e?n:t})(e)}function Na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ta(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Na(Object(n),!0).forEach((function(t){Da(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Da(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ia="";function Aa(e,t){return Ia||(Ia=(0,ka.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,ka.isFunction)(e[t])}))),!!(0,ka.isFunction)(e[Ia])&&e[Ia](t)}function Ma(e,t,n){var r=e.x,o=e.y,a="translate(".concat(r).concat(n,",").concat(o).concat(n,")");if(t){var i="".concat("string"==typeof t.x?t.x:t.x+n),c="".concat("string"==typeof t.y?t.y:t.y+n);a="translate(".concat(i,", ").concat(c,")")+a}return a}function La(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function Ra(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}var Fa={};Object.defineProperty(Fa,"__esModule",{value:!0}),Fa.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var r=e.props.bounds;r="string"==typeof r?r:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(r);var o=za(e);if("string"==typeof r){var a,i=o.ownerDocument,c=i.defaultView;if(!((a="parent"===r?o.parentNode:i.querySelector(r))instanceof c.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var u=a,l=c.getComputedStyle(o),s=c.getComputedStyle(u);r={left:-o.offsetLeft+(0,Ba.int)(s.paddingLeft)+(0,Ba.int)(l.marginLeft),top:-o.offsetTop+(0,Ba.int)(s.paddingTop)+(0,Ba.int)(l.marginTop),right:(0,qa.innerWidth)(u)-(0,qa.outerWidth)(o)-o.offsetLeft+(0,Ba.int)(s.paddingRight)-(0,Ba.int)(l.marginRight),bottom:(0,qa.innerHeight)(u)-(0,qa.outerHeight)(o)-o.offsetTop+(0,Ba.int)(s.paddingBottom)-(0,Ba.int)(l.marginBottom)}}(0,Ba.isNum)(r.right)&&(t=Math.min(t,r.right));(0,Ba.isNum)(r.bottom)&&(n=Math.min(n,r.bottom));(0,Ba.isNum)(r.left)&&(t=Math.max(t,r.left));(0,Ba.isNum)(r.top)&&(n=Math.max(n,r.top));return[t,n]},Fa.snapToGrid=function(e,t,n){var r=Math.round(t/e[0])*e[0],o=Math.round(n/e[1])*e[1];return[r,o]},Fa.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},Fa.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},Fa.getControlPosition=function(e,t,n){var r="number"==typeof t?(0,qa.getTouch)(e,t):null;if("number"==typeof t&&!r)return null;var o=za(n),a=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,qa.offsetXYFromParent)(r||e,a,n.props.scale)},Fa.createCoreData=function(e,t,n){var r=e.state,o=!(0,Ba.isNum)(r.lastX),a=za(e);return o?{node:a,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:a,deltaX:t-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:t,y:n}},Fa.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var Ba=Oa,qa=ga;function za(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}var Ua={},Ya={};function Va(e){return(Va="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(Ya,"__esModule",{value:!0}),Ya.default=function(){},Object.defineProperty(Ua,"__esModule",{value:!0}),Ua.default=void 0;var Ha=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==Va(e)&&"function"!=typeof e)return{default:e};var n=Ja(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if("default"!==a&&Object.prototype.hasOwnProperty.call(e,a)){var i=o?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}r.default=e,n&&n.set(e,r);return r}(o.a),Ga=Qa(g.exports),Xa=Qa(i.a),Ka=ga,$a=Fa,Wa=Oa,Za=Qa(Ya);function Qa(e){return e&&e.__esModule?e:{default:e}}function Ja(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(Ja=function(e){return e?n:t})(e)}function ei(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ti(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ri(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oi(e,t){return(oi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ai(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ui(e);if(t){var o=ui(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ii(this,n)}}function ii(e,t){if(t&&("object"===Va(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ci(e)}function ci(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var si={start:"touchstart",move:"touchmove",stop:"touchend"},fi={start:"mousedown",move:"mousemove",stop:"mouseup"},di=fi,pi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oi(e,t)}(a,e);var t,n,r,o=ai(a);function a(){var e;ni(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return li(ci(e=o.call.apply(o,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),li(ci(e),"mounted",!1),li(ci(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"==typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var r=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof r.defaultView.Node)||e.props.handle&&!(0,Ka.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,Ka.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var o=(0,Ka.getTouchIdentifier)(t);e.setState({touchIdentifier:o});var a=(0,$a.getControlPosition)(t,o,ci(e));if(null!=a){var i=a.x,c=a.y,u=(0,$a.createCoreData)(ci(e),i,c);(0,Za.default)("DraggableCore: handleDragStart: %j",u),(0,Za.default)("calling",e.props.onStart),!1!==e.props.onStart(t,u)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,Ka.addUserSelectStyles)(r),e.setState({dragging:!0,lastX:i,lastY:c}),(0,Ka.addEvent)(r,di.move,e.handleDrag),(0,Ka.addEvent)(r,di.stop,e.handleDragStop))}}})),li(ci(e),"handleDrag",(function(t){var n=(0,$a.getControlPosition)(t,e.state.touchIdentifier,ci(e));if(null!=n){var r=n.x,o=n.y;if(Array.isArray(e.props.grid)){var a=r-e.state.lastX,i=o-e.state.lastY,c=ei((0,$a.snapToGrid)(e.props.grid,a,i),2);if(a=c[0],i=c[1],!a&&!i)return;r=e.state.lastX+a,o=e.state.lastY+i}var u=(0,$a.createCoreData)(ci(e),r,o);if((0,Za.default)("DraggableCore: handleDrag: %j",u),!1!==e.props.onDrag(t,u)&&!1!==e.mounted)e.setState({lastX:r,lastY:o});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(t){var l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(l)}}})),li(ci(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,$a.getControlPosition)(t,e.state.touchIdentifier,ci(e));if(null!=n){var r=n.x,o=n.y,a=(0,$a.createCoreData)(ci(e),r,o);if(!1===e.props.onStop(t,a)||!1===e.mounted)return!1;var i=e.findDOMNode();i&&e.props.enableUserSelectHack&&(0,Ka.removeUserSelectStyles)(i.ownerDocument),(0,Za.default)("DraggableCore: handleDragStop: %j",a),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),i&&((0,Za.default)("DraggableCore: Removing handlers"),(0,Ka.removeEvent)(i.ownerDocument,di.move,e.handleDrag),(0,Ka.removeEvent)(i.ownerDocument,di.stop,e.handleDragStop))}}})),li(ci(e),"onMouseDown",(function(t){return di=fi,e.handleDragStart(t)})),li(ci(e),"onMouseUp",(function(t){return di=fi,e.handleDragStop(t)})),li(ci(e),"onTouchStart",(function(t){return di=si,e.handleDragStart(t)})),li(ci(e),"onTouchEnd",(function(t){return di=si,e.handleDragStop(t)})),e}return t=a,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,Ka.addEvent)(e,si.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,Ka.removeEvent)(t,fi.move,this.handleDrag),(0,Ka.removeEvent)(t,si.move,this.handleDrag),(0,Ka.removeEvent)(t,fi.stop,this.handleDragStop),(0,Ka.removeEvent)(t,si.stop,this.handleDragStop),(0,Ka.removeEvent)(e,si.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ka.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:Xa.default.findDOMNode(this)}},{key:"render",value:function(){return Ha.cloneElement(Ha.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&ri(t.prototype,n),r&&ri(t,r),a}(Ha.Component);Ua.default=pi,li(pi,"displayName","DraggableCore"),li(pi,"propTypes",{allowAnyClick:Ga.default.bool,disabled:Ga.default.bool,enableUserSelectHack:Ga.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:Ga.default.arrayOf(Ga.default.number),handle:Ga.default.string,cancel:Ga.default.string,nodeRef:Ga.default.object,onStart:Ga.default.func,onDrag:Ga.default.func,onStop:Ga.default.func,onMouseDown:Ga.default.func,scale:Ga.default.number,className:Wa.dontSetMe,style:Wa.dontSetMe,transform:Wa.dontSetMe}),li(pi,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1}),function(e){function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"DraggableCore",{enumerable:!0,get:function(){return f.default}}),e.default=void 0;var n=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==t(e)&&"function"!=typeof e)return{default:e};var r=h(n);if(r&&r.has(e))return r.get(e);var o={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var c=a?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(o,i,c):o[i]=e[i]}o.default=e,r&&r.set(e,o);return o}(o.a),r=b(g.exports),a=b(i.a),c=b(va),u=ga,l=Fa,s=Oa,f=b(Ua),d=b(Ya),p=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function b(e){return e&&e.__esModule?e:{default:e}}function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,a=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(s,e);var t,r,o,i=S(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),C(k(t=i.call(this,e)),"onDragStart",(function(e,n){if((0,d.default)("Draggable: onDragStart: %j",n),!1===t.props.onStart(e,(0,l.createDraggableData)(k(t),n)))return!1;t.setState({dragging:!0,dragged:!0})})),C(k(t),"onDrag",(function(e,n){if(!t.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",n);var r=(0,l.createDraggableData)(k(t),n),o={x:r.x,y:r.y};if(t.props.bounds){var a=o.x,i=o.y;o.x+=t.state.slackX,o.y+=t.state.slackY;var c=w((0,l.getBoundPosition)(k(t),o.x,o.y),2),u=c[0],s=c[1];o.x=u,o.y=s,o.slackX=t.state.slackX+(a-o.x),o.slackY=t.state.slackY+(i-o.y),r.x=o.x,r.y=o.y,r.deltaX=o.x-t.state.x,r.deltaY=o.y-t.state.y}if(!1===t.props.onDrag(e,r))return!1;t.setState(o)})),C(k(t),"onDragStop",(function(e,n){if(!t.state.dragging)return!1;if(!1===t.props.onStop(e,(0,l.createDraggableData)(k(t),n)))return!1;(0,d.default)("Draggable: onDragStop: %j",n);var r={dragging:!1,slackX:0,slackY:0};if(Boolean(t.props.position)){var o=t.props.position,a=o.x,i=o.y;r.x=a,r.y=i}t.setState(r)})),t.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:O({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),t}return t=s,o=[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,r=t.prevPropsPosition;return!n||r&&n.x===r.x&&n.y===r.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:r}),{x:n.x,y:n.y,prevPropsPosition:O({},n)})}}],(r=[{key:"componentDidMount",value:function(){void 0!==window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var e,t,n;return null!==(e=null===(t=this.props)||void 0===t||null===(n=t.nodeRef)||void 0===n?void 0:n.current)&&void 0!==e?e:a.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props;t.axis,t.bounds;var r=t.children,o=t.defaultPosition,a=t.defaultClassName,i=t.defaultClassNameDragging,s=t.defaultClassNameDragged,d=t.position,b=t.positionOffset;t.scale;var h=m(t,p),v={},g=null,w=!Boolean(d)||this.state.dragging,j=d||o,E={x:(0,l.canDragX)(this)&&w?this.state.x:j.x,y:(0,l.canDragY)(this)&&w?this.state.y:j.y};this.state.isElementSVG?g=(0,u.createSVGTransform)(E,b):v=(0,u.createCSSTransform)(E,b);var _=(0,c.default)(r.props.className||"",a,(C(e={},i,this.state.dragging),C(e,s,this.state.dragged),e));return n.createElement(f.default,y({},h,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(r),{className:_,style:O(O({},r.props.style),v),transform:g}))}}])&&E(t.prototype,r),o&&E(t,o),s}(n.Component);e.default=N,C(N,"displayName","Draggable"),C(N,"propTypes",O(O({},f.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:s.dontSetMe,style:s.dontSetMe,transform:s.dontSetMe})),C(N,"defaultProps",O(O({},f.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))}(ya);var bi=ya.default,hi=ya.DraggableCore;ha.exports=bi,ha.exports.default=bi;var yi=ha.exports.DraggableCore=hi,mi=ha.exports;function vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vi(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Oi=function(e){var t=e.onSelectionDragStart,n=e.onSelectionDrag,a=e.onSelectionDragStop,i=e.onSelectionContextMenu,c=Qe(Xe((function(e){return e.transform})),3),u=c[0],l=c[1],s=c[2],f=Xe((function(e){return e.selectedNodesBbox})),d=Xe((function(e){return e.selectionActive})),p=Xe((function(e){return e.selectedElements})),b=Xe((function(e){return e.snapToGrid})),h=Xe((function(e){return e.snapGrid})),y=Xe((function(e){return e.nodes})),m=Ge((function(e){return e.updateNodePosDiff})),v=Object(r.useRef)(null),g=Object(r.useMemo)((function(){return b?h:[1,1]}),[b,h]),O=Object(r.useMemo)((function(){return p?p.filter(ct).map((function(e){var t=y.find((function(t){return t.id===e.id}));return gi(gi({},t),{},{position:null==t?void 0:t.__rf.position})})):[]}),[p,y]),w=Object(r.useMemo)((function(){return{transform:"translate(".concat(u,"px,").concat(l,"px) scale(").concat(s,")")}}),[u,l,s]),j=Object(r.useMemo)((function(){return{width:f.width,height:f.height,top:f.y,left:f.x}}),[f]),E=Object(r.useCallback)((function(e){null==t||t(e,O)}),[t,O]),_=Object(r.useCallback)((function(e,t){n&&n(e,O),m({diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,O,m]),S=Object(r.useCallback)((function(e){m({isDragging:!1}),null==a||a(e,O)}),[O,a]),x=Object(r.useCallback)((function(e){var t=p?p.filter(ct).map((function(e){return y.find((function(t){return t.id===e.id}))})):[];null==i||i(e,t)}),[i]);return!p||d?null:o.a.createElement("div",{className:"react-flow__nodesselection",style:w},o.a.createElement(mi,{scale:s,grid:g,onStart:function(e){return E(e)},onDrag:function(e,t){return _(e,t)},onStop:function(e){return S(e)},nodeRef:v,enableUserSelectHack:!1},o.a.createElement("div",{ref:v,className:"react-flow__nodesselection-rect",onContextMenu:x,style:j})))},wi=function(e){var t=e.children,n=e.onPaneClick,a=e.onPaneContextMenu,i=e.onPaneScroll,c=e.onElementsRemove,u=e.deleteKeyCode,l=e.onMove,s=e.onMoveStart,f=e.onMoveEnd,d=e.selectionKeyCode,p=e.multiSelectionKeyCode,b=e.zoomActivationKeyCode,h=e.elementsSelectable,y=e.zoomOnScroll,m=e.zoomOnPinch,v=e.panOnScroll,g=e.panOnScrollSpeed,O=e.panOnScrollMode,w=e.zoomOnDoubleClick,j=e.paneMoveable,E=e.defaultPosition,_=e.defaultZoom,S=e.translateExtent,x=e.preventScrolling,k=e.onSelectionDragStart,P=e.onSelectionDrag,C=e.onSelectionDragStop,N=e.onSelectionContextMenu,T=Ge((function(e){return e.unsetNodesSelection})),D=Ge((function(e){return e.resetSelectedElements})),I=Xe((function(e){return e.nodesSelectionActive})),A=rt(d);!function(e){var t=e.deleteKeyCode,n=e.multiSelectionKeyCode,o=e.onElementsRemove,a=Ke(),i=Ge((function(e){return e.unsetNodesSelection})),c=Ge((function(e){return e.setMultiSelectionActive})),u=Ge((function(e){return e.resetSelectedElements})),l=rt(t),s=rt(n);Object(r.useEffect)((function(){var e=a.getState(),t=e.edges,n=e.selectedElements;if(o&&l&&n){var r=n.filter(ct),c=mt(r,t),s=[].concat(Ze(n),Ze(c)).reduce((function(e,t){return e.set(t.id,t)}),new Map);o(Array.from(s.values())),i(),u()}}),[l]),Object(r.useEffect)((function(){c(s)}),[s])}({onElementsRemove:c,deleteKeyCode:u,multiSelectionKeyCode:p});var M=Object(r.useCallback)((function(e){null==n||n(e),T(),D()}),[n]),L=Object(r.useCallback)((function(e){null==a||a(e)}),[a]),R=Object(r.useCallback)((function(e){null==i||i(e)}),[i]);return o.a.createElement(fa,{onMove:l,onMoveStart:s,onMoveEnd:f,selectionKeyPressed:A,elementsSelectable:h,zoomOnScroll:y,zoomOnPinch:m,panOnScroll:v,panOnScrollSpeed:g,panOnScrollMode:O,zoomOnDoubleClick:w,paneMoveable:j,defaultPosition:E,defaultZoom:_,translateExtent:S,zoomActivationKeyCode:b,preventScrolling:x},t,o.a.createElement(ba,{selectionKeyPressed:A}),I&&o.a.createElement(Oi,{onSelectionDragStart:k,onSelectionDrag:P,onSelectionDragStop:C,onSelectionContextMenu:N}),o.a.createElement("div",{className:"react-flow__pane",onClick:M,onContextMenu:L,onWheel:R}))};wi.displayName="FlowRenderer";var ji=Object(r.memo)(wi),Ei=function(e){var t=Xe((function(e){return e.transform})),n=Xe((function(e){return e.selectedElements})),a=Xe((function(e){return e.nodesDraggable})),i=Xe((function(e){return e.nodesConnectable})),c=Xe((function(e){return e.elementsSelectable})),u=Xe((function(e){return e.width})),l=Xe((function(e){return e.height})),s=Xe((function(e){return e.nodes})),f=Ge((function(e){return e.updateNodeDimensions})),d=e.onlyRenderVisibleElements?yt(s,{x:0,y:0,width:u,height:l},t,!0):s,p=Object(r.useMemo)((function(){return{transform:"translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")")}}),[t[0],t[1],t[2]]),b=Object(r.useMemo)((function(){return"undefined"==typeof ResizeObserver?null:new ResizeObserver((function(e){var t=e.map((function(e){return{id:e.target.getAttribute("data-id"),nodeElement:e.target}}));f(t)}))}),[]);return o.a.createElement("div",{className:"react-flow__nodes",style:p},d.map((function(r){var u=r.type||"default",l=e.nodeTypes[u]||e.nodeTypes.default;e.nodeTypes[u]||console.warn('Node type "'.concat(u,'" not found. Using fallback type "default".'));var s=!!(r.draggable||a&&void 0===r.draggable),f=!!(r.selectable||c&&void 0===r.selectable),d=!!(r.connectable||i&&void 0===r.connectable);return o.a.createElement(l,{key:r.id,id:r.id,className:r.className,style:r.style,type:u,data:r.data,sourcePosition:r.sourcePosition,targetPosition:r.targetPosition,isHidden:r.isHidden,xPos:r.__rf.position.x,yPos:r.__rf.position.y,isDragging:r.__rf.isDragging,isInitialized:null!==r.__rf.width&&null!==r.__rf.height,snapGrid:e.snapGrid,snapToGrid:e.snapToGrid,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onElementClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onNodeDoubleClick:e.onNodeDoubleClick,onNodeDragStart:e.onNodeDragStart,onNodeDrag:e.onNodeDrag,onNodeDragStop:e.onNodeDragStop,scale:t[2],selected:(null==n?void 0:n.some((function(e){return e.id===r.id})))||!1,isDraggable:s,isSelectable:f,isConnectable:d,resizeObserver:b,dragHandle:r.dragHandle})})))};Ei.displayName="NodeRenderer";var _i=Object(r.memo)(Ei),Si=["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"];function xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ki=function(e){var t=e.x,n=e.y,a=e.label,i=e.labelStyle,s=void 0===i?{}:i,f=e.labelShowBg,d=void 0===f||f,p=e.labelBgStyle,b=void 0===p?{}:p,h=e.labelBgPadding,y=void 0===h?[2,4]:h,m=e.labelBgBorderRadius,v=void 0===m?2:m,g=e.children,O=e.className,w=u(e,Si),j=Object(r.useRef)(null),E=Qe(Object(r.useState)({x:0,y:0,width:0,height:0}),2),_=E[0],S=E[1],x=l(["react-flow__edge-textwrapper",O]);return Object(r.useEffect)((function(){if(j.current){var e=j.current.getBBox();S({x:e.x,y:e.y,width:e.width,height:e.height})}}),[a]),void 0!==a&&a?o.a.createElement("g",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xi(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({transform:"translate(".concat(t-_.width/2," ").concat(n-_.height/2,")"),className:x},w),d&&o.a.createElement("rect",{width:_.width+2*y[0],x:-y[0],y:-y[1],height:_.height+2*y[1],className:"react-flow__edge-textbg",style:b,rx:v,ry:v}),o.a.createElement("text",{className:"react-flow__edge-text",y:_.height/2,dy:"0.3em",ref:j,style:s},a),g):null},Pi=Object(r.memo)(ki),Ci=function(e,t){return void 0!==t&&t?"url(#".concat(t,")"):void 0!==e?"url(#react-flow__".concat(e,")"):"none"},Ni=[ra.Left,ra.Right],Ti=function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,o=e.targetY,a=e.sourcePosition,i=void 0===a?ra.Bottom:a,c=e.targetPosition,u=void 0===c?ra.Top:c,l=Ni.includes(i),s=Ni.includes(u);if(l&&!s||s&&!l){var f=l?Math.abs(r-t):0,d=t>r?t-f:t+f,p=l?0:Math.abs(o-n);return[d,n<o?n+p:n-p,f,p]}var b=Math.abs(r-t)/2,h=r<t?r+b:r-b,y=Math.abs(o-n)/2;return[h,o<n?o+y:o-y,b,y]};function Di(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?ra.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,u=void 0===c?ra.Top:c,l=e.centerX,s=e.centerY,f=Qe(Ti({sourceX:t,sourceY:n,targetX:a,targetY:i}),2),d=f[0],p=f[1],b=[ra.Left,ra.Right],h=void 0!==l?l:d,y=void 0!==s?s:p,m="M".concat(t,",").concat(n," C").concat(t,",").concat(y," ").concat(a,",").concat(y," ").concat(a,",").concat(i);return b.includes(o)&&b.includes(u)?m="M".concat(t,",").concat(n," C").concat(h,",").concat(n," ").concat(h,",").concat(i," ").concat(a,",").concat(i):b.includes(u)?m="M".concat(t,",").concat(n," Q").concat(t,",").concat(i," ").concat(a,",").concat(i):b.includes(o)&&(m="M".concat(t,",").concat(n," Q").concat(a,",").concat(n," ").concat(a,",").concat(i)),m}var Ii=Object(r.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.sourcePosition,c=void 0===i?ra.Bottom:i,u=e.targetPosition,l=void 0===u?ra.Top:u,s=e.label,f=e.labelStyle,d=e.labelShowBg,p=e.labelBgStyle,b=e.labelBgPadding,h=e.labelBgBorderRadius,y=e.style,m=e.arrowHeadType,v=e.markerEndId,g=Qe(Ti({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:c,targetPosition:l}),2),O=g[0],w=g[1],j=Di({sourceX:t,sourceY:n,sourcePosition:c,targetX:r,targetY:a,targetPosition:l}),E=s?o.a.createElement(Pi,{x:O,y:w,label:s,labelStyle:f,labelShowBg:d,labelBgStyle:p,labelBgPadding:b,labelBgBorderRadius:h}):null,_=Ci(m,v);return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:y,d:j,className:"react-flow__edge-path",markerEnd:_}),E)})),Ai=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},Mi=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Li=function(e,t,n){return"L ".concat(e,",").concat(t-n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},Ri=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t-n)},Fi=function(e,t,n){return"L ".concat(e+n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)},Bi=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e+n,",").concat(t)},qi=function(e,t,n){return"L ".concat(e,",").concat(t+n,"Q ").concat(e,",").concat(t," ").concat(e-n,",").concat(t)},zi=function(e,t,n){return"L ".concat(e-n,",").concat(t,"Q ").concat(e,",").concat(t," ").concat(e,",").concat(t+n)};function Ui(e){var t=e.sourceX,n=e.sourceY,r=e.sourcePosition,o=void 0===r?ra.Bottom:r,a=e.targetX,i=e.targetY,c=e.targetPosition,u=void 0===c?ra.Top:c,l=e.borderRadius,s=void 0===l?5:l,f=e.centerX,d=e.centerY,p=Qe(Ti({sourceX:t,sourceY:n,targetX:a,targetY:i}),4),b=p[0],h=p[1],y=p[2],m=p[3],v=Math.min(s,Math.abs(a-t)),g=Math.min(s,Math.abs(i-n)),O=Math.min(v,g,y,m),w=[ra.Left,ra.Right],j=void 0!==f?f:b,E=void 0!==d?d:h,_=null,S=null;return t<=a?(_=n<=i?Ai(t,E,O):Bi(t,E,O),S=n<=i?zi(a,E,O):Ri(a,E,O)):(_=n<i?Li(t,E,O):qi(t,E,O),S=n<i?Fi(a,E,O):Mi(a,E,O)),w.includes(o)&&w.includes(u)?t<=a?(_=n<=i?zi(j,n,O):Ri(j,n,O),S=n<=i?Ai(j,i,O):Bi(j,i,O)):(o===ra.Right&&u===ra.Left||o===ra.Left&&u===ra.Right||o===ra.Left&&u===ra.Left)&&(_=n<=i?Fi(j,n,O):Mi(j,n,O),S=n<=i?Li(j,i,O):qi(j,i,O)):w.includes(o)&&!w.includes(u)?(_=t<=a?n<=i?zi(a,n,O):Ri(a,n,O):n<=i?Fi(a,n,O):Mi(a,n,O),S=""):!w.includes(o)&&w.includes(u)&&(_=t<=a?n<=i?Ai(t,i,O):Bi(t,i,O):n<=i?Li(t,i,O):qi(t,i,O),S=""),"M ".concat(t,",").concat(n).concat(_).concat(S,"L ").concat(a,",").concat(i)}var Yi=Object(r.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.label,c=e.labelStyle,u=e.labelShowBg,l=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.sourcePosition,b=void 0===p?ra.Bottom:p,h=e.targetPosition,y=void 0===h?ra.Top:h,m=e.arrowHeadType,v=e.markerEndId,g=e.borderRadius,O=void 0===g?5:g,w=Qe(Ti({sourceX:t,sourceY:n,targetX:r,targetY:a,sourcePosition:b,targetPosition:y}),2),j=w[0],E=w[1],_=Ui({sourceX:t,sourceY:n,sourcePosition:b,targetX:r,targetY:a,targetPosition:y,borderRadius:O}),S=Ci(m,v),x=i?o.a.createElement(Pi,{x:j,y:E,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:f}):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:d,className:"react-flow__edge-path",d:_,markerEnd:S}),x)})),Vi=function(e){var t=e.connectionNodeId,n=e.connectionHandleId,a=e.connectionHandleType,i=e.connectionLineStyle,c=e.connectionPositionX,u=e.connectionPositionY,l=e.connectionLineType,s=void 0===l?ca.Bezier:l,f=e.nodes,d=void 0===f?[]:f,p=e.transform,b=e.isConnectable,h=e.CustomConnectionLineComponent,y=Qe(Object(r.useState)(null),2),m=y[0],v=y[1],g=t,O=n;if(Object(r.useEffect)((function(){var e=d.find((function(e){return e.id===g}))||null;v(e)}),[]),!m||!b)return null;var w=function(e,t,n){var r="source"===n?"target":"source",o=t.__rf.handleBounds[n]||t.__rf.handleBounds[r];return e?o.find((function(t){return t.id===e})):o[0]}(O,m,a),j=w?w.x+w.width/2:m.__rf.width/2,E=w?w.y+w.height/2:m.__rf.height,_=m.__rf.position.x+j,S=m.__rf.position.y+E,x=(c-p[0])/p[2],k=(u-p[1])/p[2],P=(null==w?void 0:w.position)===ra.Left||(null==w?void 0:w.position)===ra.Right?ra.Left:ra.Top;if(h)return o.a.createElement("g",{className:"react-flow__connection"},o.a.createElement(h,{sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P,connectionLineType:s,connectionLineStyle:i,sourceNode:m,sourceHandle:w}));var C="";return C=s===ca.Bezier?Di({sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P}):s===ca.Step?Ui({sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P,borderRadius:0}):s===ca.SmoothStep?Ui({sourceX:_,sourceY:S,sourcePosition:null==w?void 0:w.position,targetX:x,targetY:k,targetPosition:P}):"M".concat(_,",").concat(S," ").concat(x,",").concat(k),o.a.createElement("g",{className:"react-flow__connection"},o.a.createElement("path",{d:C,className:"react-flow__connection-path",style:i}))},Hi=function(e){var t=e.id,n=e.children;return o.a.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:"12.5",markerHeight:"12.5",viewBox:"-10 -10 20 20",orient:"auto",refX:"0",refY:"0"},n)},Gi=function(e){var t=e.color;return o.a.createElement("defs",null,o.a.createElement(Hi,{id:"react-flow__arrowclosed"},o.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1",fill:t,points:"-5,-4 0,0 -5,4 -5,-4"})),o.a.createElement(Hi,{id:"react-flow__arrow"},o.a.createElement("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",fill:"none",points:"-5,-4 0,0 -5,4"})))};function Xi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ki(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Gi.displayName="MarkerDefinitions";var $i=Object(r.memo)((function(e){return o.a.createElement(Yi,Ki(Ki({},e),{},{borderRadius:0}))})),Wi=Object(r.memo)((function(e){var t=e.sourceX,n=e.sourceY,r=e.targetX,a=e.targetY,i=e.label,c=e.labelStyle,u=e.labelShowBg,l=e.labelBgStyle,s=e.labelBgPadding,f=e.labelBgBorderRadius,d=e.style,p=e.arrowHeadType,b=e.markerEndId,h=Math.abs(a-n)/2,y=a<n?a+h:a-h,m=Math.abs(r-t)/2,v=r<t?r+m:r-m,g=Ci(p,b),O=i?o.a.createElement(Pi,{x:v,y:y,label:i,labelStyle:c,labelShowBg:u,labelBgStyle:l,labelBgPadding:s,labelBgBorderRadius:f}):null;return o.a.createElement(o.a.Fragment,null,o.a.createElement("path",{style:d,className:"react-flow__edge-path",d:"M ".concat(t,",").concat(n,"L ").concat(r,",").concat(a),markerEnd:g}),O)}));function Zi(e,t,n,r,o,a,i){var c=i.elementFromPoint(e.clientX,e.clientY),u=(null==c?void 0:c.classList.contains("target"))||!1,l=(null==c?void 0:c.classList.contains("source"))||!1,s={elementBelow:c,isValid:!1,connection:{source:null,target:null,sourceHandle:null,targetHandle:null},isHoveringHandle:!1};if(c&&(u||l)&&(s.isHoveringHandle=!0,t!==ia.Strict||(n&&l||!n&&u))){var f=c.getAttribute("data-nodeid"),d=c.getAttribute("data-handleid"),p=n?{source:f,sourceHandle:d,target:r,targetHandle:o}:{source:r,sourceHandle:o,target:f,targetHandle:d};s.connection=p,s.isValid=a(p)}return s}function Qi(e){null==e||e.classList.remove("react-flow__handle-valid"),null==e||e.classList.remove("react-flow__handle-connecting")}function Ji(e,t,n,r,o,a,i,c,u,l,s,f,d,p){var b,h,y,m=e.target.closest(".react-flow"),v=(b=e.target,(null===(h=b.getRootNode)||void 0===h?void 0:h.call(b))||(null===(y=window)||void 0===y?void 0:y.document));if(v){var g=v.elementFromPoint(e.clientX,e.clientY),O=null==g?void 0:g.classList.contains("target"),w=null==g?void 0:g.classList.contains("source");if(m&&(O||w||l)){var j,E=l||(O?"target":"source"),_=m.getBoundingClientRect();o({x:e.clientX-_.left,y:e.clientY-_.top}),r({connectionNodeId:n,connectionHandleId:t,connectionHandleType:E}),null==f||f(e,{nodeId:n,handleId:t,handleType:E}),v.addEventListener("mousemove",S),v.addEventListener("mouseup",(function e(o){var f=Zi(o,u,i,n,t,c,v),b=f.connection,h=f.isValid;null==d||d(o),h&&(null==a||a(b)),null==p||p(o),l&&s&&s(o),Qi(j),r({connectionNodeId:null,connectionHandleId:null,connectionHandleType:null}),v.removeEventListener("mousemove",S),v.removeEventListener("mouseup",e)}))}}function S(e){o({x:e.clientX-_.left,y:e.clientY-_.top});var r=Zi(e,u,i,n,t,c,v),a=r.connection,l=r.elementBelow,s=r.isValid;if(!r.isHoveringHandle)return Qi(j);!(a.source===a.target)&&l&&(j=l,l.classList.add("react-flow__handle-connecting"),l.classList.toggle("react-flow__handle-valid",s))}}var ec=function(e,t,n){return n===ra.Left?e-t:n===ra.Right?e+t:e},tc=function(e,t,n){return n===ra.Top?e-t:n===ra.Bottom?e+t:e},nc=function(e){var t=e.className,n=e.position,r=e.centerX,a=e.centerY,i=e.radius,c=void 0===i?10:i;return o.a.createElement("circle",{className:l(["react-flow__edgeupdater",t]),cx:ec(r,c,n),cy:tc(a,c,n),r:c,stroke:"transparent",fill:"transparent"})},rc=function(e){var t=function(t){var n=t.id,a=t.className,i=t.type,c=t.data,u=t.onClick,s=t.onEdgeDoubleClick,f=t.selected,d=t.animated,p=t.label,b=t.labelStyle,h=t.labelShowBg,y=t.labelBgStyle,m=t.labelBgPadding,v=t.labelBgBorderRadius,g=t.style,O=t.arrowHeadType,w=t.source,j=t.target,E=t.sourceX,_=t.sourceY,S=t.targetX,x=t.targetY,k=t.sourcePosition,P=t.targetPosition,C=t.elementsSelectable,N=t.markerEndId,T=t.isHidden,D=t.sourceHandleId,I=t.targetHandleId,A=t.handleEdgeUpdate,M=t.onConnectEdge,L=t.onContextMenu,R=t.onMouseEnter,F=t.onMouseMove,B=t.onMouseLeave,q=t.edgeUpdaterRadius,z=t.onEdgeUpdateStart,U=t.onEdgeUpdateEnd,Y=Ge((function(e){return e.addSelectedElements})),V=Ge((function(e){return e.setConnectionNodeId})),H=Ge((function(e){return e.unsetNodesSelection})),G=Ge((function(e){return e.setConnectionPosition})),X=Xe((function(e){return e.connectionMode})),K=Qe(Object(r.useState)(!1),2),$=K[0],W=K[1],Z=!C&&!u,Q=l(["react-flow__edge","react-flow__edge-".concat(i),a,{selected:f,animated:d,inactive:Z,updating:$}]),J=Object(r.useMemo)((function(){var e={id:n,source:w,target:j,type:i};return D&&(e.sourceHandle=D),I&&(e.targetHandle=I),void 0!==c&&(e.data=c),e}),[n,w,j,i,D,I,c]),ee=Object(r.useCallback)((function(e){C&&(H(),Y(J)),null==u||u(e,J)}),[C,J,u]),te=Object(r.useCallback)((function(e){null==s||s(e,J)}),[J,s]),ne=Object(r.useCallback)((function(e){null==L||L(e,J)}),[J,L]),re=Object(r.useCallback)((function(e){null==R||R(e,J)}),[J,L]),oe=Object(r.useCallback)((function(e){null==F||F(e,J)}),[J,L]),ae=Object(r.useCallback)((function(e){null==B||B(e,J)}),[J,L]),ie=Object(r.useCallback)((function(e,t){var n=t?j:w,r=t?I:D,o=t;null==z||z(e,J),Ji(e,r,n,V,G,M,o,(function(){return!0}),X,t?"target":"source",U?function(e){return U(e,J)}:void 0)}),[n,w,j,i,D,I,V,G,J,M]),ce=Object(r.useCallback)((function(e){ie(e,!0)}),[n,w,D,ie]),ue=Object(r.useCallback)((function(e){ie(e,!1)}),[n,j,I,ie]),le=Object(r.useCallback)((function(){return W(!0)}),[W]),se=Object(r.useCallback)((function(){return W(!1)}),[W]);return T?null:o.a.createElement("g",{className:Q,onClick:ee,onDoubleClick:te,onContextMenu:ne,onMouseEnter:re,onMouseMove:oe,onMouseLeave:ae},o.a.createElement(e,{id:n,source:w,target:j,selected:f,animated:d,label:p,labelStyle:b,labelShowBg:h,labelBgStyle:y,labelBgPadding:m,labelBgBorderRadius:v,data:c,style:g,arrowHeadType:O,sourceX:E,sourceY:_,targetX:S,targetY:x,sourcePosition:k,targetPosition:P,markerEndId:N,sourceHandleId:D,targetHandleId:I}),A&&o.a.createElement("g",{onMouseDown:ce,onMouseEnter:le,onMouseOut:se},o.a.createElement(nc,{position:k,centerX:E,centerY:_,radius:q})),A&&o.a.createElement("g",{onMouseDown:ue,onMouseEnter:le,onMouseOut:se},o.a.createElement(nc,{position:P,centerX:S,centerY:x,radius:q})))};return t.displayName="EdgeWrapper",Object(r.memo)(t)};function oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ac(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ic(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=((null==n?void 0:n.x)||0)+t.__rf.position.x,o=((null==n?void 0:n.y)||0)+t.__rf.position.y,a=(null==n?void 0:n.width)||t.__rf.width,i=(null==n?void 0:n.height)||t.__rf.height;switch(e){case ra.Top:return{x:r+a/2,y:o};case ra.Right:return{x:r+a,y:o+i/2};case ra.Bottom:return{x:r+a/2,y:o+i};case ra.Left:return{x:r,y:o+i/2}}}function cc(e,t){if(!e)return null;var n=null;return 1!==e.length&&t?t&&(n=e.find((function(e){return e.id===t}))):n=e[0],void 0===n?null:n}var uc=function(e){var t=e.edge,n=e.props,a=e.nodes,i=e.selectedElements,c=e.elementsSelectable,u=e.transform,l=e.width,s=e.height,f=e.onlyRenderVisibleElements,d=e.connectionMode,p=t.sourceHandle||null,b=t.targetHandle||null,h=function(e,t){return t.reduce((function(t,n){return n.id===e.source&&(t.sourceNode=n),n.id===e.target&&(t.targetNode=n),t}),{sourceNode:null,targetNode:null})}(t,a),y=h.sourceNode,m=h.targetNode,v=Object(r.useCallback)((function(e){var r;null===(r=n.onEdgeUpdate)||void 0===r||r.call(n,t,e)}),[t,n.onEdgeUpdate]);if(!y)return console.warn("couldn't create edge for source id: ".concat(t.source,"; edge id: ").concat(t.id)),null;if(!m)return console.warn("couldn't create edge for target id: ".concat(t.target,"; edge id: ").concat(t.id)),null;if(!y.__rf.width||!m.__rf.width)return null;var g=t.type||"default",O=n.edgeTypes[g]||n.edgeTypes.default,w=m.__rf.handleBounds,j=d===ia.Strict?w.target:w.target||w.source,E=cc(y.__rf.handleBounds.source,p),_=cc(j,b),S=E?E.position:ra.Bottom,x=_?_.position:ra.Top;if(!E)return console.warn("couldn't create edge for source handle id: ".concat(p,"; edge id: ").concat(t.id)),null;if(!_)return console.warn("couldn't create edge for target handle id: ".concat(b,"; edge id: ").concat(t.id)),null;var k=function(e,t,n,r,o,a){var i=ic(n,e,t),c=ic(a,r,o);return{sourceX:i.x,sourceY:i.y,targetX:c.x,targetY:c.y}}(y,E,S,m,_,x),P=k.sourceX,C=k.sourceY,N=k.targetX,T=k.targetY;if(!(!f||function(e){var t=e.sourcePos,n=e.targetPos,r=e.width,o=e.height,a=e.transform,i={x:Math.min(t.x,n.x),y:Math.min(t.y,n.y),x2:Math.max(t.x,n.x),y2:Math.max(t.y,n.y)};i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1);var c=pt({x:(0-a[0])/a[2],y:(0-a[1])/a[2],width:r/a[2],height:o/a[2]}),u=Math.max(0,Math.min(c.x2,i.x2)-Math.max(c.x,i.x)),l=Math.max(0,Math.min(c.y2,i.y2)-Math.max(c.y,i.y));return Math.ceil(u*l)>0}({sourcePos:{x:P,y:C},targetPos:{x:N,y:T},width:l,height:s,transform:u})))return null;var D=(null==i?void 0:i.some((function(e){return it(e)&&e.id===t.id})))||!1;return o.a.createElement(O,{key:t.id,id:t.id,className:t.className,type:t.type,data:t.data,onClick:n.onElementClick,selected:D,animated:t.animated,label:t.label,labelStyle:t.labelStyle,labelShowBg:t.labelShowBg,labelBgStyle:t.labelBgStyle,labelBgPadding:t.labelBgPadding,labelBgBorderRadius:t.labelBgBorderRadius,style:t.style,arrowHeadType:t.arrowHeadType,source:t.source,target:t.target,sourceHandleId:p,targetHandleId:b,sourceX:P,sourceY:C,targetX:N,targetY:T,sourcePosition:S,targetPosition:x,elementsSelectable:c,markerEndId:n.markerEndId,isHidden:t.isHidden,onConnectEdge:v,handleEdgeUpdate:void 0!==n.onEdgeUpdate,onContextMenu:n.onEdgeContextMenu,onMouseEnter:n.onEdgeMouseEnter,onMouseMove:n.onEdgeMouseMove,onMouseLeave:n.onEdgeMouseLeave,edgeUpdaterRadius:n.edgeUpdaterRadius,onEdgeDoubleClick:n.onEdgeDoubleClick,onEdgeUpdateStart:n.onEdgeUpdateStart,onEdgeUpdateEnd:n.onEdgeUpdateEnd})},lc=function(e){var t=Xe((function(e){return e.transform})),n=Xe((function(e){return e.nodes})),r=Xe((function(e){return e.edges})),a=Xe((function(e){return e.connectionNodeId})),i=Xe((function(e){return e.connectionHandleId})),c=Xe((function(e){return e.connectionHandleType})),u=Xe((function(e){return e.connectionPosition})),l=Xe((function(e){return e.selectedElements})),s=Xe((function(e){return e.nodesConnectable})),f=Xe((function(e){return e.elementsSelectable})),d=Xe((function(e){return e.width})),p=Xe((function(e){return e.height}));if(!d)return null;var b=e.connectionLineType,h=e.arrowHeadColor,y=e.connectionLineStyle,m=e.connectionLineComponent,v=e.onlyRenderVisibleElements,g="translate(".concat(t[0],"px,").concat(t[1],"px) scale(").concat(t[2],")"),O=a&&c;return o.a.createElement("svg",{width:d,height:p,className:"react-flow__edges"},o.a.createElement(Gi,{color:h}),o.a.createElement("g",{style:{transform:g}},r.map((function(r){return o.a.createElement(uc,{key:r.id,edge:r,props:e,nodes:n,selectedElements:l,elementsSelectable:f,transform:t,width:d,height:p,onlyRenderVisibleElements:v})})),O&&o.a.createElement(Vi,{nodes:n,connectionNodeId:a,connectionHandleId:i,connectionHandleType:c,connectionPositionX:u.x,connectionPositionY:u.y,transform:t,connectionLineStyle:y,connectionLineType:b,isConnectable:s,CustomConnectionLineComponent:m})))};lc.displayName="EdgeRenderer";var sc=Object(r.memo)(lc),fc={zoomIn:function(){},zoomOut:function(){},zoomTo:function(e){},transform:function(e){},fitView:function(){},setCenter:function(e,t){},fitBounds:function(e){},project:function(e){return e},initialized:!1},dc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.transition().duration(t)},pc=function(){var e=Ke(),t=Xe((function(e){return e.d3Zoom})),n=Xe((function(e){return e.d3Selection}));return Object(r.useMemo)((function(){return n&&t?{zoomIn:function(e){return t.scaleBy(dc(n,e),1.2)},zoomOut:function(e){return t.scaleBy(dc(n,e),1/1.2)},zoomTo:function(e,r){return t.scaleTo(dc(n,r),e)},transform:function(e,r){var o=Ko.translate(e.x,e.y).scale(e.zoom);t.transform(dc(n,r),o)},fitView:function(){var r,o,a,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1,includeHiddenNodes:!1,duration:0},c=e.getState(),u=c.nodes,l=c.width,s=c.height,f=c.minZoom,d=c.maxZoom;if(u.length){var p=ht(i.includeHiddenNodes?u:u.filter((function(e){return!e.isHidden}))),b=wt(p,l,s,null!==(r=i.minZoom)&&void 0!==r?r:f,null!==(o=i.maxZoom)&&void 0!==o?o:d,null!==(a=i.padding)&&void 0!==a?a:.1),h=Qe(b,3),y=h[0],m=h[1],v=h[2],g=Ko.translate(y,m).scale(v);t.transform(dc(n,i.duration),g)}},setCenter:function(r,o,a,i){var c=e.getState(),u=c.width,l=c.height,s=c.maxZoom,f=void 0!==a?a:s,d=u/2-r*f,p=l/2-o*f,b=Ko.translate(d,p).scale(f);t.transform(dc(n,i),b)},fitBounds:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1,a=arguments.length>2?arguments[2]:void 0,i=e.getState(),c=i.width,u=i.height,l=i.minZoom,s=i.maxZoom,f=wt(r,c,u,l,s,o),d=Qe(f,3),p=d[0],b=d[1],h=d[2],y=Ko.translate(p,b).scale(h);t.transform(dc(n,a),y)},project:function(t){var n=e.getState(),r=n.transform,o=n.snapToGrid,a=n.snapGrid;return ut(t,r,o,a)},initialized:!0}:fc}),[t,n])},bc=function(e){var t=e.nodeTypes,n=e.edgeTypes,a=e.onMove,i=e.onMoveStart,c=e.onMoveEnd,u=e.onLoad,l=e.onElementClick,s=e.onNodeDoubleClick,f=e.onEdgeDoubleClick,d=e.onNodeMouseEnter,p=e.onNodeMouseMove,b=e.onNodeMouseLeave,h=e.onNodeContextMenu,y=e.onNodeDragStart,m=e.onNodeDrag,v=e.onNodeDragStop,g=e.onSelectionDragStart,O=e.onSelectionDrag,w=e.onSelectionDragStop,j=e.onSelectionContextMenu,E=e.connectionMode,_=e.connectionLineType,S=e.connectionLineStyle,x=e.connectionLineComponent,k=e.selectionKeyCode,P=e.multiSelectionKeyCode,C=e.zoomActivationKeyCode,N=e.onElementsRemove,T=e.deleteKeyCode,D=e.onConnect,I=e.onConnectStart,A=e.onConnectStop,M=e.onConnectEnd,L=e.snapToGrid,R=e.snapGrid,F=e.onlyRenderVisibleElements,B=e.nodesDraggable,q=e.nodesConnectable,z=e.elementsSelectable,U=e.selectNodesOnDrag,Y=e.minZoom,V=e.maxZoom,H=e.defaultZoom,G=e.defaultPosition,X=e.translateExtent,K=e.preventScrolling,$=e.nodeExtent,W=e.arrowHeadColor,Z=e.markerEndId,Q=e.zoomOnScroll,J=e.zoomOnPinch,ee=e.panOnScroll,te=e.panOnScrollSpeed,ne=e.panOnScrollMode,re=e.zoomOnDoubleClick,oe=e.paneMoveable,ae=e.onPaneClick,ie=e.onPaneScroll,ce=e.onPaneContextMenu,ue=e.onEdgeUpdate,le=e.onEdgeContextMenu,se=e.onEdgeMouseEnter,fe=e.onEdgeMouseMove,de=e.onEdgeMouseLeave,pe=e.edgeUpdaterRadius,be=e.onEdgeUpdateStart,he=e.onEdgeUpdateEnd,ye=Object(r.useRef)(!1),me=Ge((function(e){return e.setOnConnect})),ve=Ge((function(e){return e.setOnConnectStart})),ge=Ge((function(e){return e.setOnConnectStop})),Oe=Ge((function(e){return e.setOnConnectEnd})),we=Ge((function(e){return e.setSnapGrid})),je=Ge((function(e){return e.setSnapToGrid})),Ee=Ge((function(e){return e.setNodesDraggable})),_e=Ge((function(e){return e.setNodesConnectable})),Se=Ge((function(e){return e.setElementsSelectable})),xe=Ge((function(e){return e.setMinZoom})),ke=Ge((function(e){return e.setMaxZoom})),Pe=Ge((function(e){return e.setTranslateExtent})),Ce=Ge((function(e){return e.setNodeExtent})),Ne=Ge((function(e){return e.setConnectionMode})),Te=Ke(),De=pc(),Ie=De.zoomIn,Ae=De.zoomOut,Me=De.zoomTo,Le=De.transform,Re=De.fitView,Fe=De.initialized;return Object(r.useEffect)((function(){!ye.current&&Fe&&(u&&u({fitView:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{padding:.1};return Re(e)},zoomIn:Ie,zoomOut:Ae,zoomTo:Me,setTransform:Le,project:lt(Te),getElements:gt(Te),toObject:Ot(Te)}),ye.current=!0)}),[u,Ie,Ae,Me,Le,Re,Fe]),Object(r.useEffect)((function(){D&&me(D)}),[D]),Object(r.useEffect)((function(){I&&ve(I)}),[I]),Object(r.useEffect)((function(){A&&ge(A)}),[A]),Object(r.useEffect)((function(){M&&Oe(M)}),[M]),Object(r.useEffect)((function(){void 0!==L&&je(L)}),[L]),Object(r.useEffect)((function(){void 0!==R&&we(R)}),[R]),Object(r.useEffect)((function(){void 0!==B&&Ee(B)}),[B]),Object(r.useEffect)((function(){void 0!==q&&_e(q)}),[q]),Object(r.useEffect)((function(){void 0!==z&&Se(z)}),[z]),Object(r.useEffect)((function(){void 0!==Y&&xe(Y)}),[Y]),Object(r.useEffect)((function(){void 0!==V&&ke(V)}),[V]),Object(r.useEffect)((function(){void 0!==X&&Pe(X)}),[X]),Object(r.useEffect)((function(){void 0!==$&&Ce($)}),[$]),Object(r.useEffect)((function(){void 0!==E&&Ne(E)}),[E]),o.a.createElement(ji,{onPaneClick:ae,onPaneContextMenu:ce,onPaneScroll:ie,onElementsRemove:N,deleteKeyCode:T,selectionKeyCode:k,multiSelectionKeyCode:P,zoomActivationKeyCode:C,elementsSelectable:z,onMove:a,onMoveStart:i,onMoveEnd:c,zoomOnScroll:Q,zoomOnPinch:J,zoomOnDoubleClick:re,panOnScroll:ee,panOnScrollSpeed:te,panOnScrollMode:ne,paneMoveable:oe,defaultPosition:G,defaultZoom:H,translateExtent:X,onSelectionDragStart:g,onSelectionDrag:O,onSelectionDragStop:w,onSelectionContextMenu:j,preventScrolling:K},o.a.createElement(_i,{nodeTypes:t,onElementClick:l,onNodeDoubleClick:s,onNodeMouseEnter:d,onNodeMouseMove:p,onNodeMouseLeave:b,onNodeContextMenu:h,onNodeDragStop:v,onNodeDrag:m,onNodeDragStart:y,selectNodesOnDrag:U,snapToGrid:L,snapGrid:R,onlyRenderVisibleElements:F}),o.a.createElement(sc,{edgeTypes:n,onElementClick:l,onEdgeDoubleClick:f,connectionLineType:_,connectionLineStyle:S,connectionLineComponent:x,connectionMode:E,arrowHeadColor:W,markerEndId:Z,onEdgeUpdate:ue,onlyRenderVisibleElements:F,onEdgeContextMenu:le,onEdgeMouseEnter:se,onEdgeMouseMove:fe,onEdgeMouseLeave:de,onEdgeUpdateStart:be,onEdgeUpdateEnd:he,edgeUpdaterRadius:pe}))};bc.displayName="GraphView";var hc=Object(r.memo)(bc),yc=function(e){var t=e.elements,n=Ge((function(e){return e.setElements}));return Object(r.useEffect)((function(){n(t)}),[t]),null},mc=Object(r.createContext)(null),vc=mc.Provider;mc.Consumer;var gc=["type","position","isValidConnection","isConnectable","id","onConnect","children","className"];function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wc=function(){return!0},jc=Object(r.forwardRef)((function(e,t){var n=e.type,a=void 0===n?"source":n,i=e.position,s=void 0===i?ra.Top:i,f=e.isValidConnection,d=void 0===f?wc:f,p=e.isConnectable,b=void 0===p||p,h=e.id,y=e.onConnect,m=e.children,v=e.className,g=u(e,gc),O=Object(r.useContext)(mc),w=Ge((function(e){return e.setConnectionPosition})),j=Ge((function(e){return e.setConnectionNodeId})),E=Xe((function(e){return e.onConnect})),_=Xe((function(e){return e.onConnectStart})),S=Xe((function(e){return e.onConnectStop})),x=Xe((function(e){return e.onConnectEnd})),k=Xe((function(e){return e.connectionMode})),P=h||null,C="target"===a,N=Object(r.useCallback)((function(e){null==E||E(e),null==y||y(e)}),[E,y]),T=Object(r.useCallback)((function(e){Ji(e,P,O,j,w,N,C,d,k,void 0,void 0,_,S,x)}),[P,O,j,w,N,C,d,k,_,S,x]),D=l(["react-flow__handle","react-flow__handle-".concat(s),"nodrag",v,{source:!C,target:C,connectable:b}]);return o.a.createElement("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({"data-handleid":P,"data-nodeid":O,"data-handlepos":s,className:D,onMouseDown:T,ref:t},g),m)}));jc.displayName="Handle";var Ec=Object(r.memo)(jc),_c=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,a=void 0===r?ra.Top:r,i=e.sourcePosition,c=void 0===i?ra.Bottom:i;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ec,{type:"target",position:a,isConnectable:n}),t.label,o.a.createElement(Ec,{type:"source",position:c,isConnectable:n}))};_c.displayName="DefaultNode";var Sc=Object(r.memo)(_c),xc=function(e){var t=e.data,n=e.isConnectable,r=e.sourcePosition,a=void 0===r?ra.Bottom:r;return o.a.createElement(o.a.Fragment,null,t.label,o.a.createElement(Ec,{type:"source",position:a,isConnectable:n}))};xc.displayName="InputNode";var kc=Object(r.memo)(xc),Pc=function(e){var t=e.data,n=e.isConnectable,r=e.targetPosition,a=void 0===r?ra.Top:r;return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ec,{type:"target",position:a,isConnectable:n}),t.label)};Pc.displayName="OutputNode";var Cc=Object(r.memo)(Pc);function Nc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Tc=function(e){var t=function(t){var n=t.id,a=t.type,i=t.data,u=t.scale,s=t.xPos,f=t.yPos,d=t.selected,p=t.onClick,b=t.onMouseEnter,h=t.onMouseMove,y=t.onMouseLeave,m=t.onContextMenu,v=t.onNodeDoubleClick,g=t.onNodeDragStart,O=t.onNodeDrag,w=t.onNodeDragStop,j=t.style,E=t.className,_=t.isDraggable,S=t.isSelectable,x=t.isConnectable,k=t.selectNodesOnDrag,P=t.sourcePosition,C=t.targetPosition,N=t.isHidden,T=t.isInitialized,D=t.snapToGrid,I=t.snapGrid,A=t.isDragging,M=t.resizeObserver,L=t.dragHandle,R=Ge((function(e){return e.updateNodeDimensions})),F=Ge((function(e){return e.addSelectedElements})),B=Ge((function(e){return e.updateNodePosDiff})),q=Ge((function(e){return e.unsetNodesSelection})),z=Object(r.useRef)(null),U=Object(r.useMemo)((function(){return{id:n,type:a,position:{x:s,y:f},data:i}}),[n,a,s,f,i]),Y=Object(r.useMemo)((function(){return D?I:[1,1]}),[D,I]),V=Object(r.useMemo)((function(){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({zIndex:d?10:3,transform:"translate(".concat(s,"px,").concat(f,"px)"),pointerEvents:S||_||p||b||h||y?"all":"none",opacity:T?1:0},j)}),[d,s,f,S,_,p,T,j,b,h,y]),H=Object(r.useMemo)((function(){if(b&&!A)return function(e){return b(e,U)}}),[b,A,U]),G=Object(r.useMemo)((function(){if(h&&!A)return function(e){return h(e,U)}}),[h,A,U]),X=Object(r.useMemo)((function(){if(y&&!A)return function(e){return y(e,U)}}),[y,A,U]),K=Object(r.useMemo)((function(){if(m)return function(e){return m(e,U)}}),[m,U]),$=Object(r.useCallback)((function(e){_||(S&&(q(),d||F(U)),null==p||p(e,U))}),[S,d,_,p,U]),W=Object(r.useCallback)((function(e){null==g||g(e,U),k&&S?(q(),d||F(U)):k||d||!S||(q(),F([]))}),[U,d,k,S,g]),Z=Object(r.useCallback)((function(e,t){O&&(U.position.x+=t.deltaX,U.position.y+=t.deltaY,O(e,U)),B({id:n,diff:{x:t.deltaX,y:t.deltaY},isDragging:!0})}),[n,U,O]),Q=Object(r.useCallback)((function(e){if(!A)return!S||k||d||F(U),void(null==p||p(e,U));B({id:U.id,isDragging:!1}),null==w||w(e,U)}),[U,S,k,p,w,A,d]),J=Object(r.useCallback)((function(e){null==v||v(e,U)}),[U,v]);if(Object(r.useLayoutEffect)((function(){z.current&&!N&&R([{id:n,nodeElement:z.current,forceUpdate:!0}])}),[n,N,P,C]),Object(r.useEffect)((function(){if(z.current){var e=z.current;return null==M||M.observe(e),function(){return null==M?void 0:M.unobserve(e)}}}),[]),N)return null;var ee=l(["react-flow__node","react-flow__node-".concat(a),E,{selected:d,selectable:S}]);return o.a.createElement(yi,{onStart:W,onDrag:Z,onStop:Q,scale:u,disabled:!_,cancel:".nodrag",nodeRef:z,grid:Y,enableUserSelectHack:!1,handle:L},o.a.createElement("div",{className:ee,ref:z,style:V,onMouseEnter:H,onMouseMove:G,onMouseLeave:X,onContextMenu:K,onClick:$,onDoubleClick:J,"data-id":n},o.a.createElement(vc,{value:n},o.a.createElement(e,{id:n,data:i,type:a,xPos:s,yPos:f,selected:d,isConnectable:x,sourcePosition:P,targetPosition:C,isDragging:A,dragHandle:L}))))};return t.displayName="NodeWrapper",Object(r.memo)(t)};function Dc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ic(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ac=function(e){var t=e.onSelectionChange,n=Xe((function(e){return e.selectedElements}));return Object(r.useEffect)((function(){t(n)}),[n]),null},Mc=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var r,o,a;if(Array.isArray(t)){if((r=t.length)!=n.length)return!1;for(o=r;0!=o--;)if(!e(t[o],n[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((r=(a=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(o=r;0!=o--;)if(!Object.prototype.hasOwnProperty.call(n,a[o]))return!1;for(o=r;0!=o--;){var i=a[o];if(!e(t[i],n[i]))return!1}return!0}return t!=t&&n!=n};function Lc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var Rc=function(e,t){var n=e.getBoundingClientRect();return{source:Fc(".source",e,n,t),target:Fc(".target",e,n,t)}},Fc=function(e,t,n,r){var o=t.querySelectorAll(e);return o&&o.length?Array.from(o).map((function(e){var t=e.getBoundingClientRect(),o=et(e);return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-n.left)/r,y:(t.top-n.top)/r},o)})):null};function Bc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function zc(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yc,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ELEMENTS":var n=t.payload,r={nextNodes:[],nextEdges:[]},o=n.reduce((function(t,n){if(ct(n)){var r=e.nodes.find((function(e){return e.id===n.id}));if(r){var o=qc(qc({},r),n);r.position.x===n.position.x&&r.position.y===n.position.y||(o.__rf.position=n.position),void 0!==n.type&&n.type!==r.type&&(o.__rf.width=null),t.nextNodes.push(o)}else t.nextNodes.push(st(n,e.nodeExtent))}else if(it(n)){var a=e.edges.find((function(e){return e.id===n.id}));a?t.nextEdges.push(qc(qc({},a),n)):t.nextEdges.push(ft(n))}return t}),r),a=o.nextNodes,i=o.nextEdges;return qc(qc({},e),{},{nodes:a,edges:i});case"UPDATE_NODE_DIMENSIONS":var c=e.nodes.map((function(n){var r=t.payload.find((function(e){return e.id===n.id}));if(r){var o=et(r.nodeElement);if(o.width&&o.height&&(n.__rf.width!==o.width||n.__rf.height!==o.height||r.forceUpdate)){var a=Rc(r.nodeElement,e.transform[2]);return qc(qc({},n),{},{__rf:qc(qc(qc({},n.__rf),o),{},{handleBounds:a})})}}return n}));return qc(qc({},e),{},{nodes:c});case"UPDATE_NODE_POS":var u=t.payload,l=u.id,s=u.pos,f=s;if(e.snapToGrid){var d=Qe(e.snapGrid,2),p=d[0],b=d[1];f={x:p*Math.round(s.x/p),y:b*Math.round(s.y/b)}}var h=e.nodes.map((function(e){return e.id===l?qc(qc({},e),{},{__rf:qc(qc({},e.__rf),{},{position:f})}):e}));return qc(qc({},e),{},{nodes:h});case"UPDATE_NODE_POS_DIFF":var y=t.payload,m=y.id,v=y.diff,g=y.isDragging,O=e.nodes.map((function(t){var n;if(m===t.id||null!==(n=e.selectedElements)&&void 0!==n&&n.find((function(e){return e.id===t.id}))){var r=qc(qc({},t),{},{__rf:qc(qc({},t.__rf),{},{isDragging:g})});return v&&(r.__rf.position={x:t.__rf.position.x+v.x,y:t.__rf.position.y+v.y}),r}return t}));return qc(qc({},e),{},{nodes:O});case"SET_USER_SELECTION":var w=t.payload;return qc(qc({},e),{},{selectionActive:!0,userSelectionRect:{width:0,height:0,startX:w.x,startY:w.y,x:w.x,y:w.y,draw:!0}});case"UPDATE_USER_SELECTION":var j,E,_=t.payload,S=null!==(j=e.userSelectionRect.startX)&&void 0!==j?j:0,x=null!==(E=e.userSelectionRect.startY)&&void 0!==E?E:0,k=qc(qc({},e.userSelectionRect),{},{x:_.x<S?_.x:S,y:_.y<x?_.y:x,width:Math.abs(_.x-S),height:Math.abs(_.y-x)}),P=yt(e.nodes,k,e.transform,!1,!0),C=mt(P,e.edges),N=[].concat(Ze(P),Ze(C)),T=!Mc(N,e.selectedElements),D=T?{selectedElements:N.length>0?N:null}:{};return qc(qc(qc({},e),D),{},{userSelectionRect:k});case"UNSET_USER_SELECTION":var I,A=null===(I=e.selectedElements)||void 0===I?void 0:I.filter((function(e){return ct(e)&&e.__rf})),M=qc(qc({},e),{},{selectionActive:!1,userSelectionRect:qc(qc({},e.userSelectionRect),{},{draw:!1})});if(A&&0!==A.length){var L=ht(A);M.selectedNodesBbox=L,M.nodesSelectionActive=!0}else M.selectedElements=null,M.nodesSelectionActive=!1;return M;case"SET_SELECTED_ELEMENTS":var R=t.payload,F=Array.isArray(R)?R:[R],B=!Mc(F,e.selectedElements),q=B?F:e.selectedElements;return qc(qc({},e),{},{selectedElements:q});case"ADD_SELECTED_ELEMENTS":var z=e.multiSelectionActive,U=e.selectedElements,Y=t.payload,V=Array.isArray(Y)?Y:[Y],H=V;z&&(H=U?[].concat(Ze(U),Ze(V)):V);var G=!Mc(H,e.selectedElements),X=G?H:e.selectedElements;return qc(qc({},e),{},{selectedElements:X});case"INIT_D3ZOOM":var K=t.payload,$=K.d3Zoom,W=K.d3Selection,Z=K.d3ZoomHandler,Q=K.transform;return qc(qc({},e),{},{d3Zoom:$,d3Selection:W,d3ZoomHandler:Z,transform:Q});case"SET_MINZOOM":var J,ee=t.payload;return null===(J=e.d3Zoom)||void 0===J||J.scaleExtent([ee,e.maxZoom]),qc(qc({},e),{},{minZoom:ee});case"SET_MAXZOOM":var te,ne=t.payload;return null===(te=e.d3Zoom)||void 0===te||te.scaleExtent([e.minZoom,ne]),qc(qc({},e),{},{maxZoom:ne});case"SET_TRANSLATEEXTENT":var re,oe=t.payload;return null===(re=e.d3Zoom)||void 0===re||re.translateExtent(oe),qc(qc({},e),{},{translateExtent:oe});case"SET_NODE_EXTENT":var ae=t.payload;return qc(qc({},e),{},{nodeExtent:ae,nodes:e.nodes.map((function(e){return qc(qc({},e),{},{__rf:qc(qc({},e.__rf),{},{position:nt(e.__rf.position,ae)})})}))});case"SET_ON_CONNECT":case"SET_ON_CONNECT_START":case"SET_ON_CONNECT_STOP":case"SET_ON_CONNECT_END":case"RESET_SELECTED_ELEMENTS":case"UNSET_NODES_SELECTION":case"UPDATE_TRANSFORM":case"UPDATE_SIZE":case"SET_CONNECTION_POSITION":case"SET_CONNECTION_NODEID":case"SET_SNAPTOGRID":case"SET_SNAPGRID":case"SET_INTERACTIVE":case"SET_NODES_DRAGGABLE":case"SET_NODES_CONNECTABLE":case"SET_ELEMENTS_SELECTABLE":case"SET_MULTI_SELECTION_ACTIVE":case"SET_CONNECTION_MODE":return qc(qc({},e),t.payload);default:return e}}function Uc(e){return h(zc,e)}var Yc={width:0,height:0,transform:[0,0,1],nodes:[],edges:[],selectedElements:null,selectedNodesBbox:{x:0,y:0,width:0,height:0},d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodesSelectionActive:!1,selectionActive:!1,userSelectionRect:{startX:0,startY:0,x:0,y:0,width:0,height:0,draw:!1},connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionMode:ia.Strict,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,elementsSelectable:!0,multiSelectionActive:!1,reactFlowVersion:"9.7.4"},Vc=Uc(Yc),Hc=function(e){var t=e.children,n=Object(r.useContext)(W);return Object(r.useMemo)((function(){var e,t;return null==n||null===(e=n.store)||void 0===e||null===(t=e.getState())||void 0===t?void 0:t.reactFlowVersion}),[n])?o.a.createElement(o.a.Fragment,null,t):o.a.createElement(ne,{store:Vc},t)};function Gc(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}Hc.displayName="ReactFlowWrapper";Gc(".react-flow{height:100%;overflow:hidden;position:relative;width:100%}.react-flow__pane,.react-flow__renderer,.react-flow__selectionpane{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__pane{z-index:1}.react-flow__renderer{z-index:4}.react-flow__selectionpane{z-index:5}.react-flow__edges,.react-flow__selection{left:0;position:absolute;top:0}.react-flow__edges{pointer-events:none;z-index:2}.react-flow__edge{pointer-events:visibleStroke}.react-flow__edge.inactive{pointer-events:none}@-webkit-keyframes dashdraw{0%{stroke-dashoffset:10}}@keyframes dashdraw{0%{stroke-dashoffset:10}}.react-flow__edge-path{fill:none}.react-flow__edge-textwrapper{pointer-events:all}.react-flow__edge-text{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__connection{pointer-events:none}.react-flow__connection .animated{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__connection-path{fill:none}.react-flow__nodes{height:100%;pointer-events:none;width:100%;z-index:3}.react-flow__node,.react-flow__nodes{position:absolute;transform-origin:0 0}.react-flow__node{pointer-events:all;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.react-flow__nodesselection{height:100%;left:0;pointer-events:none;position:absolute;top:0;transform-origin:left top;width:100%;z-index:3}.react-flow__nodesselection-rect{cursor:-webkit-grab;cursor:grab;pointer-events:all;position:absolute}.react-flow__handle{pointer-events:none}.react-flow__handle.connectable{pointer-events:all}.react-flow__handle-bottom{bottom:-4px;left:50%;top:auto;transform:translate(-50%)}.react-flow__handle-top{left:50%;top:-4px;transform:translate(-50%)}.react-flow__handle-left{left:-4px;top:50%;transform:translateY(-50%)}.react-flow__handle-right{right:-4px;top:50%;transform:translateY(-50%)}.react-flow__edgeupdater{cursor:move;pointer-events:all}.react-flow__background{height:100%;left:0;position:absolute;top:0;width:100%}.react-flow__controls{bottom:10px;left:10px;position:absolute;z-index:5}.react-flow__controls-button{border:none;height:24px;width:24px}.react-flow__controls-button svg{width:100%}.react-flow__minimap{bottom:10px;position:absolute;right:10px;z-index:5}");Gc(".react-flow__selection{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__edge.selected .react-flow__edge-path{stroke:#555}.react-flow__edge.animated path{stroke-dasharray:5;-webkit-animation:dashdraw .5s linear infinite;animation:dashdraw .5s linear infinite}.react-flow__edge.updating .react-flow__edge-path{stroke:#777}.react-flow__edge-path{stroke:#b1b1b7;stroke-width:1}.react-flow__edge-text{font-size:10px}.react-flow__edge-textbg{fill:#fff}.react-flow__connection-path{stroke:#b1b1b7;stroke-width:1}.react-flow__node{cursor:-webkit-grab;cursor:grab}.react-flow__node-default,.react-flow__node-input,.react-flow__node-output{border-radius:3px;border-style:solid;border-width:1px;color:#222;font-size:12px;padding:10px;text-align:center;width:150px}.react-flow__node-default.selectable:hover,.react-flow__node-input.selectable:hover,.react-flow__node-output.selectable:hover{box-shadow:0 1px 4px 1px rgba(0,0,0,.08)}.react-flow__node-input{background:#fff;border-color:#0041d0}.react-flow__node-input.selected,.react-flow__node-input.selected:hover{box-shadow:0 0 0 .5px #0041d0}.react-flow__node-input .react-flow__handle{background:#0041d0}.react-flow__node-default{background:#fff;border-color:#1a192b}.react-flow__node-default.selected,.react-flow__node-default.selected:hover{box-shadow:0 0 0 .5px #1a192b}.react-flow__node-default .react-flow__handle{background:#1a192b}.react-flow__node-output{background:#fff;border-color:#ff0072}.react-flow__node-output.selected,.react-flow__node-output.selected:hover{box-shadow:0 0 0 .5px #ff0072}.react-flow__node-output .react-flow__handle{background:#ff0072}.react-flow__nodesselection-rect{background:rgba(0,89,220,.08);border:1px dotted rgba(0,89,220,.8)}.react-flow__handle{background:#555;border:1px solid #fff;border-radius:100%;height:6px;position:absolute;width:6px}.react-flow__handle.connectable{cursor:crosshair}.react-flow__minimap{background-color:#fff}.react-flow__controls{box-shadow:0 0 2px 1px rgba(0,0,0,.08)}.react-flow__controls-button{align-items:center;background:#fefefe;border-bottom:1px solid #eee;box-sizing:content-box;cursor:pointer;display:flex;height:16px;justify-content:center;padding:5px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;width:16px}.react-flow__controls-button svg{max-height:12px;max-width:12px}.react-flow__controls-button:hover{background:#f4f4f4}");var Xc=["elements","className","nodeTypes","edgeTypes","onElementClick","onLoad","onMove","onMoveStart","onMoveEnd","onElementsRemove","onConnect","onConnectStart","onConnectStop","onConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","deleteKeyCode","selectionKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","elementsSelectable","minZoom","maxZoom","defaultZoom","defaultPosition","translateExtent","preventScrolling","nodeExtent","arrowHeadColor","markerEndId","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","paneMoveable","onPaneClick","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","nodeTypesId","edgeTypesId"];function Kc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kc(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Wc={input:kc,default:Sc,output:Cc},Zc={default:Ii,straight:Wi,step:$i,smoothstep:Yi},Qc=Object(r.forwardRef)((function(e,t){var n=e.elements,a=void 0===n?[]:n,i=e.className,c=e.nodeTypes,s=void 0===c?Wc:c,f=e.edgeTypes,d=void 0===f?Zc:f,p=e.onElementClick,b=e.onLoad,h=e.onMove,y=e.onMoveStart,m=e.onMoveEnd,v=e.onElementsRemove,g=e.onConnect,O=e.onConnectStart,w=e.onConnectStop,j=e.onConnectEnd,E=e.onNodeMouseEnter,_=e.onNodeMouseMove,S=e.onNodeMouseLeave,x=e.onNodeContextMenu,k=e.onNodeDoubleClick,P=e.onNodeDragStart,C=e.onNodeDrag,N=e.onNodeDragStop,T=e.onSelectionChange,D=e.onSelectionDragStart,I=e.onSelectionDrag,A=e.onSelectionDragStop,M=e.onSelectionContextMenu,L=e.connectionMode,R=void 0===L?ia.Strict:L,F=e.connectionLineType,B=void 0===F?ca.Bezier:F,q=e.connectionLineStyle,z=e.connectionLineComponent,U=e.deleteKeyCode,Y=void 0===U?"Backspace":U,V=e.selectionKeyCode,H=void 0===V?"Shift":V,G=e.multiSelectionKeyCode,X=void 0===G?"Meta":G,K=e.zoomActivationKeyCode,$=void 0===K?"Meta":K,W=e.snapToGrid,Z=void 0!==W&&W,Q=e.snapGrid,J=void 0===Q?[15,15]:Q,ee=e.onlyRenderVisibleElements,te=void 0!==ee&&ee,ne=e.selectNodesOnDrag,re=void 0===ne||ne,oe=e.nodesDraggable,ae=e.nodesConnectable,ie=e.elementsSelectable,ce=e.minZoom,ue=e.maxZoom,le=e.defaultZoom,se=void 0===le?1:le,fe=e.defaultPosition,de=void 0===fe?[0,0]:fe,pe=e.translateExtent,be=e.preventScrolling,he=void 0===be||be,ye=e.nodeExtent,me=e.arrowHeadColor,ve=void 0===me?"#b1b1b7":me,ge=e.markerEndId,Oe=e.zoomOnScroll,we=void 0===Oe||Oe,je=e.zoomOnPinch,Ee=void 0===je||je,_e=e.panOnScroll,Se=void 0!==_e&&_e,xe=e.panOnScrollSpeed,ke=void 0===xe?.5:xe,Pe=e.panOnScrollMode,Ce=void 0===Pe?ua.Free:Pe,Ne=e.zoomOnDoubleClick,Te=void 0===Ne||Ne,De=e.paneMoveable,Ie=void 0===De||De,Ae=e.onPaneClick,Me=e.onPaneScroll,Le=e.onPaneContextMenu,Re=e.children,Fe=e.onEdgeUpdate,Be=e.onEdgeContextMenu,qe=e.onEdgeDoubleClick,ze=e.onEdgeMouseEnter,Ue=e.onEdgeMouseMove,Ye=e.onEdgeMouseLeave,Ve=e.onEdgeUpdateStart,He=e.onEdgeUpdateEnd,Ge=e.edgeUpdaterRadius,Xe=void 0===Ge?10:Ge,Ke=e.nodeTypesId,$e=void 0===Ke?"1":Ke,We=e.edgeTypesId,Ze=void 0===We?"1":We,Qe=u(e,Xc),Je=Object(r.useMemo)((function(){return function(e){var t={input:Tc(e.input||kc),default:Tc(e.default||Sc),output:Tc(e.output||Cc)},n=Object.keys(e).filter((function(e){return!["input","default","output"].includes(e)})).reduce((function(t,n){return t[n]=Tc(e[n]||Sc),t}),{});return Ic(Ic({},t),n)}(s)}),[$e]),et=Object(r.useMemo)((function(){return function(e){var t={default:rc(e.default||Ii),straight:rc(e.bezier||Wi),step:rc(e.step||$i),smoothstep:rc(e.step||Yi)},n=Object.keys(e).filter((function(e){return!["default","bezier"].includes(e)})).reduce((function(t,n){return t[n]=rc(e[n]||Ii),t}),{});return ac(ac({},t),n)}(d)}),[Ze]),tt=l(["react-flow",i]);return o.a.createElement("div",$c($c({},Qe),{},{ref:t,className:tt}),o.a.createElement(Hc,null,o.a.createElement(hc,{onLoad:b,onMove:h,onMoveStart:y,onMoveEnd:m,onElementClick:p,onNodeMouseEnter:E,onNodeMouseMove:_,onNodeMouseLeave:S,onNodeContextMenu:x,onNodeDoubleClick:k,onNodeDragStart:P,onNodeDrag:C,onNodeDragStop:N,nodeTypes:Je,edgeTypes:et,connectionMode:R,connectionLineType:B,connectionLineStyle:q,connectionLineComponent:z,selectionKeyCode:H,onElementsRemove:v,deleteKeyCode:Y,multiSelectionKeyCode:X,zoomActivationKeyCode:$,onConnect:g,onConnectStart:O,onConnectStop:w,onConnectEnd:j,snapToGrid:Z,snapGrid:J,onlyRenderVisibleElements:te,nodesDraggable:oe,nodesConnectable:ae,elementsSelectable:ie,selectNodesOnDrag:re,minZoom:ce,maxZoom:ue,defaultZoom:se,defaultPosition:de,translateExtent:pe,preventScrolling:he,nodeExtent:ye,arrowHeadColor:ve,markerEndId:ge,zoomOnScroll:we,zoomOnPinch:Ee,zoomOnDoubleClick:Te,panOnScroll:Se,panOnScrollSpeed:ke,panOnScrollMode:Ce,paneMoveable:Ie,onPaneClick:Ae,onPaneScroll:Me,onPaneContextMenu:Le,onSelectionDragStart:D,onSelectionDrag:I,onSelectionDragStop:A,onSelectionContextMenu:M,onEdgeUpdate:Fe,onEdgeContextMenu:Be,onEdgeDoubleClick:qe,onEdgeMouseEnter:ze,onEdgeMouseMove:Ue,onEdgeMouseLeave:Ye,onEdgeUpdateStart:Ve,onEdgeUpdateEnd:He,edgeUpdaterRadius:Xe}),o.a.createElement(yc,{elements:a}),T&&o.a.createElement(Ac,{onSelectionChange:T}),Re))}));Qc.displayName="ReactFlow";var Jc=function(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=e.style,c=e.color,u=e.strokeColor,s=e.strokeWidth,f=e.className,d=e.borderRadius,p=e.shapeRendering,b=i||{},h=b.background,y=b.backgroundColor,m=c||h||y;return o.a.createElement("rect",{className:l(["react-flow__minimap-node",f]),x:t,y:n,rx:d,ry:d,width:r,height:a,fill:m,stroke:u,strokeWidth:s,shapeRendering:p})};Jc.displayName="MiniMapNode";var eu=Object(r.memo)(Jc),tu=function(e){var t,n=e.style,r=e.className,a=e.nodeStrokeColor,i=void 0===a?"#555":a,c=e.nodeColor,u=void 0===c?"#fff":c,s=e.nodeClassName,f=void 0===s?"":s,d=e.nodeBorderRadius,p=void 0===d?5:d,b=e.nodeStrokeWidth,h=void 0===b?2:b,y=e.maskColor,m=void 0===y?"rgb(240, 242, 243, 0.7)":y,v=Xe((function(e){return e.width})),g=Xe((function(e){return e.height})),O=Qe(Xe((function(e){return e.transform})),3),w=O[0],j=O[1],E=O[2],_=Xe((function(e){return e.nodes})),S=l(["react-flow__minimap",r]),x=(null==n?void 0:n.width)||200,k=(null==n?void 0:n.height)||150,P=u instanceof Function?u:function(){return u},C=i instanceof Function?i:function(){return i},N=f instanceof Function?f:function(){return f},T=_&&_.length,D=ht(_),I={x:-w/E,y:-j/E,width:v/E,height:g/E},A=T?(t=I,bt(dt(pt(D),pt(t)))):I,M=A.width/x,L=A.height/k,R=Math.max(M,L),F=R*x,B=R*k,q=5*R,z=A.x-(F-A.width)/2-q,U=A.y-(B-A.height)/2-q,Y=F+2*q,V=B+2*q,H="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return o.a.createElement("svg",{width:x,height:k,viewBox:"".concat(z," ").concat(U," ").concat(Y," ").concat(V),style:n,className:S},_.filter((function(e){return!e.isHidden})).map((function(e){return o.a.createElement(eu,{key:e.id,x:e.__rf.position.x,y:e.__rf.position.y,width:e.__rf.width,height:e.__rf.height,style:e.style,className:N(e),color:P(e),borderRadius:p,strokeColor:C(e),strokeWidth:h,shapeRendering:H})})),o.a.createElement("path",{className:"react-flow__minimap-mask",d:"M".concat(z-q,",").concat(U-q,"h").concat(Y+2*q,"v").concat(V+2*q,"h").concat(-Y-2*q,"z\n        M").concat(I.x,",").concat(I.y,"h").concat(I.width,"v").concat(I.height,"h").concat(-I.width,"z"),fill:m,fillRule:"evenodd"}))};tu.displayName="MiniMap";var nu;function ru(){return(ru=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ou,au=function(e){return r.createElement("svg",ru({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),nu||(nu=r.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})))};function iu(){return(iu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var cu,uu=function(e){return r.createElement("svg",iu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},e),ou||(ou=r.createElement("path",{d:"M0 0h32v4.2H0z"})))};function lu(){return(lu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var su,fu=function(e){return r.createElement("svg",lu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},e),cu||(cu=r.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0 0 27.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94a.919.919 0 0 1-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})))};function du(){return(du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var pu,bu=function(e){return r.createElement("svg",du({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),su||(su=r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})))};function hu(){return(hu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var yu=function(e){return r.createElement("svg",hu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},e),pu||(pu=r.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 0 0 0 13.714v15.238A3.056 3.056 0 0 0 3.048 32h18.285a3.056 3.056 0 0 0 3.048-3.048V13.714a3.056 3.056 0 0 0-3.048-3.047zM12.19 24.533a3.056 3.056 0 0 1-3.047-3.047 3.056 3.056 0 0 1 3.047-3.048 3.056 3.056 0 0 1 3.048 3.048 3.056 3.056 0 0 1-3.048 3.047z"})))},mu=["children","className"];function vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var gu=function(e){var t=e.children,n=e.className,r=u(e,mu);return o.a.createElement("button",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vu(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"button",className:l(["react-flow__controls-button",n])},r),t)},Ou=function(e){var t=e.style,n=e.showZoom,a=void 0===n||n,i=e.showFitView,c=void 0===i||i,u=e.showInteractive,s=void 0===u||u,f=e.fitViewParams,d=e.onZoomIn,p=e.onZoomOut,b=e.onFitView,h=e.onInteractiveChange,y=e.className,m=e.children,v=Qe(Object(r.useState)(!1),2),g=v[0],O=v[1],w=Ge((function(e){return e.setInteractive})),j=pc(),E=j.zoomIn,_=j.zoomOut,S=j.fitView,x=Xe((function(e){return e.nodesDraggable&&e.nodesConnectable&&e.elementsSelectable})),k=l(["react-flow__controls",y]),P=Object(r.useCallback)((function(){null==E||E(),null==d||d()}),[E,d]),C=Object(r.useCallback)((function(){null==_||_(),null==p||p()}),[_,p]),N=Object(r.useCallback)((function(){null==S||S(f),null==b||b()}),[S,f,b]),T=Object(r.useCallback)((function(){null==w||w(!x),null==h||h(!x)}),[x,w,h]);return Object(r.useEffect)((function(){O(!0)}),[]),g?o.a.createElement("div",{className:k,style:t},a&&o.a.createElement(o.a.Fragment,null,o.a.createElement(gu,{onClick:P,className:"react-flow__controls-zoomin"},o.a.createElement(au,null)),o.a.createElement(gu,{onClick:C,className:"react-flow__controls-zoomout"},o.a.createElement(uu,null))),c&&o.a.createElement(gu,{className:"react-flow__controls-fitview",onClick:N},o.a.createElement(fu,null)),s&&o.a.createElement(gu,{className:"react-flow__controls-interactive",onClick:T},x?o.a.createElement(yu,null):o.a.createElement(bu,null)),m):null};Ou.displayName="Controls";var wu,ju=Object(r.memo)(Ou);function Eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Eu(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Su=(c(wu={},aa.Dots,"#81818a"),c(wu,aa.Lines,"#eee"),wu),xu=function(e){var t=e.variant,n=void 0===t?aa.Dots:t,a=e.gap,i=void 0===a?15:a,c=e.size,u=void 0===c?.4:c,s=e.color,f=e.style,d=e.className,p=Qe(Xe((function(e){return e.transform})),3),b=p[0],h=p[1],y=p[2],m=Object(r.useMemo)((function(){return"pattern-".concat(Math.floor(1e5*Math.random()))}),[]),v=l(["react-flow__background",d]),g=i*y,O=b%g,w=h%g,j=n===aa.Lines,E=s||Su[n],_=j?function(e,t,n){return o.a.createElement("path",{stroke:n,strokeWidth:t,d:"M".concat(e/2," 0 V").concat(e," M0 ").concat(e/2," H").concat(e)})}(g,u,E):function(e,t){return o.a.createElement("circle",{cx:e,cy:e,r:e,fill:t})}(u*y,E);return o.a.createElement("svg",{className:v,style:_u(_u({},f),{},{width:"100%",height:"100%"})},o.a.createElement("pattern",{id:m,x:O,y:w,width:g,height:g,patternUnits:"userSpaceOnUse"},_),o.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"url(#".concat(m,")")}))};xu.displayName="Background";var ku=Object(r.memo)(xu),Pu=function(e){var t=e.children,n=Object(r.useMemo)((function(){return Uc(Yc)}),[]);return o.a.createElement(ne,{store:n},t)};Pu.displayName="ReactFlowProvider"},function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(56),i=n(2),c=n(9);n(5),n(305);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.value,n=void 0===t?"":t,c=e.onChange,u=e.keyid,l=e.openMergeTagModal,f=e.customSettings,p=void 0===f?{}:f,b=e.toolbar,h=e.quicktags,y=void 0!==h&&h,m=Object(r.useRef)(!1),v=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(m.current){var e=window.tinymce.get("editor-bwf"+u);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),v.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,o=["lists","link"];Object(i.isEmpty)(r)||(o=[].concat(d(Object(i.isArray)(r)?r:r.split(",")),d(o))),wp.editor.initialize("editor-bwf"+u,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:b||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:d(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+u,plugins:o},p),quicktags:!!y&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(i.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,c(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){a.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==a.BACKSPACE&&t.keyCode!==a.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===a.F10&&t.stopPropagation()})),l&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(o.__)("Merge Tags","funnel-builder"),tooltip:Object(o.__)("Merge Tags","funnel-builder"),onclick:function(){l(!0)}}),e.on("init",(function(){null==e||e.setContent(v.current),n!==v.current&&c(v.current)}))}function r(){"complete"===document.readyState&&e()}return m.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",r),function(){document.removeEventListener("readystatechange",r),wp.oldEditor.remove("editor-bwf"+u)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+u,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){c(e.target.value)},onBlur:function(e){c(e.target.value)}}))};function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,o=h(Object(r.useState)("visual"),2),a=o[0],i=(o[1],h(Object(r.useState)(),2)),u=i[0],l=i[1];return Object(r.useEffect)((function(){l(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===a&&Object(r.createElement)(b,e),n&&"text"==a&&Object(r.createElement)(c.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:u,onChange:function(t){null!=e&&e.onChange(t)}}))))}},,function(e,t,n){var r;try{r={clone:n(579),constant:n(430),each:n(489),filter:n(492),has:n(547),isArray:n(285),isEmpty:n(752),isFunction:n(424),isUndefined:n(501),keys:n(313),map:n(502),reduce:n(504),size:n(624),transform:n(630),union:n(631),values:n(509)}}catch(e){}r||(r=window._),e.exports=r},,,,function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(0),o=n(18),a=n.n(o),i=["component","children"];var c=Object(r.createContext)(2);function u(e){return Object(r.createElement)(c.Consumer,null,(function(t){var n="h"+Math.min(t,6);return Object(r.createElement)(n,e)}))}function l(e){var t=e.component,n=e.children,o=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,i),a=t||"div";return Object(r.createElement)(c.Consumer,null,(function(e){return Object(r.createElement)(c.Provider,{value:e+1},!1===t?n:Object(r.createElement)(a,o,n))}))}l.propTypes={component:a.a.oneOfType([a.a.func,a.a.string,a.a.bool]),children:a.a.node}},,function(e,t,n){},function(e,t,n){var r;try{r=n(577)}catch(e){}r||(r=window.graphlib),e.exports=r},,,function(e,t,n){},,function(e,t,n){},,,,function(e,t,n){var r=n(607),o=n(617),a=n(323),i=n(285),c=n(620);e.exports=function(e){return"function"==typeof e?e:null==e?a:"object"==typeof e?i(e)?o(e[0],e[1]):r(e):c(e)}},,,,function(e,t,n){var r=n(476),o=n(545),a=n(318);e.exports=function(e){return a(e)?r(e):o(e)}},,function(e,t,n){"use strict";var r=n(0),o=(n(9),n(5)),a=n.n(o),i=n(2),c=n(18),u=n.n(c),l=n(6),s=n(60),f=(n(288),n(279)),d=function(e){var t=e.disabled,n=e.value,o=e.onChange,c=e.dateFormat,u=e.label,f=e.describedBy,d=e.error,p=e.onFocus,b=e.onKeyDown,h=e.errorPosition,y=e.placeHolder,m=a()("bwf-calendar-input",{"is-empty":0===n.length,"is-error":d}),v=Object(i.uniqueId)("_woo-dates-input"),g=Object(r.useRef)(null);return Object(r.createElement)("div",{className:m},Object(r.createElement)("input",{type:"text",ref:g,className:"bwf-calendar-input-text",value:n,onChange:o,"aria-label":u,id:v,"aria-describedby":"".concat(v,"-message"),placeholder:Object(i.isEmpty)(y)?c.toLowerCase():y,onFocus:p,onKeyDown:b,disabled:t}),d&&Object(r.createElement)(s.a,{className:"bwf-calendar-input-error",focusOnMount:!1,position:h},d),Object(r.createElement)("span",{className:"bwf-calender-custom-icon",onClick:function(){p(),g.current&&g.current.focus()}},Object(r.createElement)(l.a,{icon:"calender"})),Object(r.createElement)("p",{className:"screen-reader-text",id:"".concat(v,"-message")},d||f))};d.propTypes={disabled:u.a.bool,value:u.a.string,onChange:u.a.func.isRequired,dateFormat:u.a.string.isRequired,label:u.a.string.isRequired,describedBy:u.a.string.isRequired,error:u.a.string,errorPosition:u.a.string,onFocus:u.a.func,onKeyDown:u.a.func};var p={disabled:!1,onFocus:function(){},errorPosition:"bottom center",onKeyDown:i.noop};t.a=Object(f.a)(d,p)},function(e,t,n){},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=c(n(3)),a=c(n(363)),i=c(n(366));function c(e){return e&&e.__esModule?e:{default:e}}var u=void 0;function l(e,t){var n,i,c,s,f,d,p,b,h=[],y={};for(d=0;d<e.length;d++)if("string"!==(f=e[d]).type){if(!t.hasOwnProperty(f.value)||void 0===t[f.value])throw new Error("Invalid interpolation, missing component node: `"+f.value+"`");if("object"!==r(t[f.value]))throw new Error("Invalid interpolation, component node must be a ReactElement or null: `"+f.value+"`","\n> "+u);if("componentClose"===f.type)throw new Error("Missing opening component token: `"+f.value+"`");if("componentOpen"===f.type){n=t[f.value],c=d;break}h.push(t[f.value])}else h.push(f.value);return n&&(s=function(e,t){var n,r,o=t[e],a=0;for(r=e+1;r<t.length;r++)if((n=t[r]).value===o.value){if("componentOpen"===n.type){a++;continue}if("componentClose"===n.type){if(0===a)return r;a--}}throw new Error("Missing closing component token `"+o.value+"`")}(c,e),p=l(e.slice(c+1,s),t),i=o.default.cloneElement(n,{},p),h.push(i),s<e.length-1&&(b=l(e.slice(s+1),t),h=h.concat(b))),1===h.length?h[0]:(h.forEach((function(e,t){e&&(y["interpolation-child-"+t]=e)})),(0,a.default)(y))}t.default=function(e){var t=e.mixedString,n=e.components,o=e.throwErrors;if(u=t,!n)return t;if("object"!==(void 0===n?"undefined":r(n))){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because components is not an object");return t}var a=(0,i.default)(t);try{return l(a,n)}catch(e){if(o)throw new Error("Interpolation Error: unable to process `"+t+"` because of error `"+e.message+"`");return t}}},,function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n(0),o=(n(333),n(334),n(1)),a=n(9),i=n(2),c=n(56),u=n(12),l=n.n(u),s=n(18),f=n.n(s),d=n(77),p=n(5),b=n.n(p),h=(n(288),n(315)),y=n(297),m=n(4),v=n(122);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function j(e,t,n){return t=E(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,t,[e])).onDateChange=n.onDateChange.bind(n),n.onInputChange=n.onInputChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(a=[{key:"handleKeyDown",value:function(e,t,n){var r=n.keyCode;c.TAB===r&&e&&t()}},{key:"handleFocus",value:function(e,t){e||t()}},{key:"onDateChange",value:function(e,t){var n=this.props,r=n.onUpdate,o=n.dateFormat,a=l()(t);r({date:a,text:t?a.format(o):"",error:null}),e()}},{key:"onInputChange",value:function(e){var t=e.target.value,n=this.props.dateFormat,r=Object(d.i)(n,t),o=r?null:d.b.invalid;this.props.onUpdate({date:r,text:t,error:t.length>0?o:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.date,a=t.disabled,c=t.text,s=t.dateFormat,f=t.error,d=t.isInvalidDate,p=t.placeHolder,y=t.position,m=void 0===y?"bottom center":y,g=t.hasValue,O=void 0!==g&&g,w=t.className,j=(Object(u.isMoment)(n)?n.isValid():l()(n).isValid())?n:"";return Object(r.createElement)("div",{className:b()("bwf-specific-date",{"bwf-has-value":O})},Object(r.createElement)(v.a,{position:m,focusOnMount:!1,contentClassName:"bwf-filters-date-content ".concat(w),renderToggle:function(t){var n=t.isOpen,u=t.onToggle;return Object(r.createElement)(h.a,{disabled:!!n&&a,value:c,onChange:e.onInputChange,dateFormat:s,label:Object(o.__)("Choose a date","funnel-builder"),error:f,describedBy:Object(o.sprintf)(Object(o.__)("Date input describing a selected date in format %s","funnel-builder"),s),onFocus:Object(i.partial)(e.handleFocus,n,u),"aria-expanded":n,focusOnMount:!1,onKeyDown:Object(i.partial)(e.handleKeyDown,n,u),errorPosition:"top center",placeHolder:p})},renderContent:function(t){var n=t.onToggle;return Object(r.createElement)(x,{onToggle:n,date:j,isInvalidDate:d,onDateChange:e.onDateChange})}}))}}])&&O(n.prototype,a),s&&O(n,s),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,s}(r.Component),x=function(e){var t=e.onToggle,n=e.date,o=e.onDateChange,c=e.isInvalidDate,u=Object(r.useRef)();return Object(m.pb)(u,(function(){return t()})),Object(r.createElement)("div",{ref:u},Object(r.createElement)(y.b,{component:!1},Object(r.createElement)("div",{className:"bwf-calendar-react-dates is-core-datepicker"},Object(r.createElement)(a.DatePicker,{currentDate:n,onChange:Object(i.partial)(o,t),isInvalidDate:c}))))};S.propTypes={date:f.a.oneOfType([f.a.string,f.a.object]),disabled:f.a.bool,text:f.a.string,error:f.a.string,onUpdate:f.a.func.isRequired,dateFormat:f.a.string.isRequired,isInvalidDate:f.a.func},t.b=S},,function(e,t,n){"use strict";function r(e){return function(){return e}}var o=function(){};o.thatReturns=r,o.thatReturnsFalse=r(!1),o.thatReturnsTrue=r(!0),o.thatReturnsNull=r(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(e){return e},e.exports=o},function(e,t,n){var r=n(476),o=n(590),a=n(318);e.exports=function(e){return a(e)?r(e,!0):o(e)}},function(e,t){e.exports=function(e){return e}},,,,function(e,t,n){"use strict";var r=n(9),o=n(0),a=n(5),i=n.n(a),c=n(295),u=n(284),l=n(277),s=n(2),f=n(337),d=["ajax_cb","options"];function p(){return(p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var y=n(291),m=["value","onChange","id","label","className"];function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var g=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,a=e.id,c=e.label,u=e.className,l=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,m);function s(e){r(e,a)}return Object(o.createElement)("div",{className:i()("components-richeditor",u)},c&&Object(o.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:a},c),Object(o.createElement)(y.a,v({content:n,value:n,setContent:s,onChange:s,keyid:a},l)))},O=n(6),w=function(e){var t=e.label,n=e.copy_text;return Object(o.createElement)("div",{className:i()("components-copier")},t&&Object(o.createElement)("label",{className:"components-label"},t),n&&Object(o.createElement)("div",{className:"bwf-display-flex"},Object(o.createElement)("span",{className:"bwf-copier-text"},n," "),Object(o.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(o.createElement)(O.a,{icon:"duplicate",size:20}),"Copy")))},j=n(281),E=n(286),_=n(1),S=(n(330),n(4)),x=n(279);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return T(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function D(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var n=e.split(" ");return D(D(D(D({},t.attrTop,Object(s.isEmpty)(n[0])?"0":n[0]),t.attrRight,Object(s.isEmpty)(n[1])?"0":n[1]),t.attrBottom,Object(s.isEmpty)(n[2])?"0":n[2]),t.attrLeft,Object(s.isEmpty)(n[3])?"0":n[3])}return D(D(D(D({},t.attrTop,"0"),t.attrRight,"0"),t.attrBottom,"0"),t.attrLeft,"0")},A={label:Object(_.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(_.__)("Top","funnel-builder"),labelRight:Object(_.__)("Right","funnel-builder"),labelBottom:Object(_.__)("Bottom","funnel-builder"),labelLeft:Object(_.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"},M=Object(x.a)((function(e){var t=e.value,n=void 0===t?{}:t,a=e.label,c=e.type,u=e.onChange,l=void 0===u?s.noop:u,f=(e.defaultSync,I(n,e)),d="",p=N(Object(o.useState)(!Object(S.k)(Object.values(f))),2),b=p[0],h=p[1],y=N(Object(o.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,D(D(D(D({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),2),m=y[0],v=y[1];d=m&&m[e.attrUnit]?m[e.attrUnit]:"px",Object(o.useEffect)((function(){v(C(C({},m),I(n,e)))}),[n]),Object(o.useEffect)((function(){v(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,D(D(D(D({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),d=m&&m[e.attrUnit]?m[e.attrUnit]:"px"}),[]);var g=function(t,r){var o=t.target.value;if(b)!function(t){"padding"===c&&(t=t.toString().replace(/-/g,""));var r=C({},m);if(r[e.attrTop]=t,r[e.attrRight]=t,r[e.attrBottom]=t,r[e.attrLeft]=t,Object(s.isString)(n)){var o="".concat(r[e.attrTop]," ").concat(r[e.attrRight]," ").concat(r[e.attrBottom]," ").concat(r[e.attrLeft]);l(o)}else l(r)}(o);else{"padding"===c&&(o=o.toString().replace(/-/g,""));var a=C({},m);if(a[r]=o,Object(s.isString)(n)){var i="".concat(a[e.attrTop]," ").concat(a[e.attrRight]," ").concat(a[e.attrBottom]," ").concat(a[e.attrLeft]);l(i)}else l(a)}};return Object(o.createElement)("div",{className:"bwf-dimensions-control-component"},a&&Object(o.createElement)("label",{className:"components-base-control__label"},a),Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrTop)},"aria-label":Object(_.sprintf)(Object(_.__)("%s Top","funnel-builder"),a),value:m&&m[e.attrTop],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrRight)},"aria-label":Object(_.sprintf)(Object(_.__)("%s Top","funnel-builder"),a),value:m&&m[e.attrRight],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrBottom)},"aria-label":Object(_.sprintf)(Object(_.__)("%s Top","funnel-builder"),a),value:m&&m[e.attrBottom],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return g(t,e.attrLeft)},"aria-label":Object(_.sprintf)(Object(_.__)("%s Top","funnel-builder"),a),value:m&&m[e.attrLeft],min:"padding"===e.type?0:"%"===d?-100:e.min,max:"%"===d?100:e.max,"data-attribute":c}),Object(o.createElement)(r.Button,{className:i()("components-bwf-dimensions-control_reset",{"is-lock":b}),label:Object(_.__)("Reset","funnel-builder"),onClick:function(){return h((function(e){return!e}))},isSmall:!0},Object(o.createElement)(O.a,{icon:b?"lock":"unlock",size:"16"}))),Object(o.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(o.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))}),A),L=n(52);n(331);function R(e){return function(e){if(Array.isArray(e))return F(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=[{id:"h-offset",selectindex:0,label:Object(_.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(_.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(_.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(_.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(_.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(_.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],q=function(e){var t=e.typography,n=e.setTypography,r=e.settingOptions,a=e.label,i=Object(L.useInstanceId)(q,"bwf-field-item");return Object(o.createElement)(o.Fragment,null,Object(o.createElement)("div",{className:"bwf-box-shadow-control-component ",id:i},a&&Object(o.createElement)("label",{className:"components-base-control__label"},a),Object(o.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},r.map((function(e){return e.type?"color"===e.type?"":void 0:Object(o.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(o.createElement)("input",{type:"number",value:t[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(r){var o=r.target.value;o=e.hasOwnProperty("allownegative")&&e.allownegative?r.target.value:o<0?0:o;var a=R(t);a[e.selectindex]=o,n(a)}}),Object(o.createElement)("label",{htmlFor:e.id},e.label))})))),Object(o.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"},"",Object(o.createElement)("label",{className:"components-base-control__label"},Object(_.__)("Shadow Color","funnel-builder")),Object(o.createElement)(E.a,{value:t[4],onChange:function(e){var r=R(t);r[4]=e,n(r)}})))},z=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,a=n.h_offset,i=void 0===a?"":a,c=n.v_offset,u=void 0===c?"":c,l=n.blur,s=void 0===l?"":l,f=n.spread,d=void 0===f?"":f,p=n.color,b=void 0===p?"":p,h=n.inset,y=[i,u,s,d,b,void 0===h?"":h];return Object(o.createElement)(o.Fragment,null,Object(o.createElement)(q,{typography:y,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:B,label:r}))};n(332);function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.value,n=e.onChange,a=e.label,i=e.defaultCustomValue,c=Y(Object(o.useState)(""),2),u=c[0],f=c[1],d=Y(Object(o.useState)(""),2),p=d[0],b=d[1];return Object(o.useEffect)((function(){Object(s.isEmpty)(p)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(b("auto"),f("100%")):(b("custom"),f(t)))}),[t]),Object(o.createElement)(o.Fragment,null,a&&Object(o.createElement)("label",{className:"components-base-control__label"},a),Object(o.createElement)("div",{className:"bwf-width-control"},Object(o.createElement)(r.TextControl,U({value:u,onChange:function(e){n(e),f(e)},disabled:"auto"===p},"custom"===p&&{type:"number",min:"0"})),Object(o.createElement)(l.a,{options:[{key:"auto",label:Object(_.__)("Auto","funnel-builder")},{key:"custom",label:Object(_.__)("Custom","funnel-builder")}],selected:p,onChange:function(e){b(e),"auto"===e?(n(""),f("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?i:t),f(i))}})))},G=n(74),X=["label","tooltip"];function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=K(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==K(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Q(){return(Q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var J={checkbox:u.a,radio:j.a,select:l.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:c.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,d),i=b(Object(o.useState)(r),2),c=i[0],u=i[1],l=b(Object(o.useState)(!1),2),h=l[0],y=l[1];Object(o.useEffect)((function(){Object(s.isEmpty)(c)&&m()}),[c]);var m=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),u(t),y(!0)}})}))};return Object(o.createElement)(o.Fragment,null,h?Object(o.createElement)(f.a,p({options:c},a)):Object(o.createElement)("div",{className:"setting-form-field"},Object(o.createElement)("div",{className:"is-placeholder long"})))},richeditor:g,richtext:g,copier:w,color:E.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,a=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,X);return Object(o.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(o.createElement)("div",{className:"bwf-flex bwf--g4"},Object(o.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(o.createElement)(G.a,{toolTipText:n,size:280,position:"bottom right"},Object(o.createElement)(O.a,{icon:"info",size:16}))),Object(o.createElement)(r.ToggleControl,Q({},a,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":M,"box-shadow":z,"bwf-label":function(e){var t=e.label,n=e.class;return Object(o.createElement)("span",{className:i()("bwf_label",n)},t)},width:H};t.a=function(e){var t=e.input,n=e.formProps,a=e.values,c=e.customMapField,u=void 0===c?{}:c,l=W(W({},J),u),f=l.text;if(t.type.toLowerCase()in l&&(f=l[t.type.toLowerCase()]),t.ajax_cb&&(f=l.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(a)){var d=a[t.id];if(Object(s.isEmpty)(d))a[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof d[0]){var p=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&d.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},p.push(t)}else if("string"==typeof e.value.id&&d.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},p.push(n)}})),a[t.id]=p}}var b,h;return Object(o.createElement)("div",{className:i()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(o.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(o.createElement)(f,W(W({label:t.label},(b=t,h=Object.assign({},b.props),b.type.toLowerCase()in l||(h.type=b.type.toLowerCase()),h.placeholder=b.placeholder,h.options=b.options,b.checkboxlabel&&(h.checkboxlabel=b.checkboxlabel),b.multiple&&(h.multiple=b.multiple),b.ajax_cb&&(h.ajax_cb=b.ajax_cb),"copier"===b.type&&(h=b),"width"===b.type&&(h=b),"color"===b.type&&(h=b,b.isHover&&b.hoverKey&&(h.hoverVal=a[b.hoverKey])),"richeditor"!==b.type&&"richtext"!==b.type&&"textarea"!==b.type||(h=b),"number"===b.type&&(h.min=b.min,h.max=b.max),"select"===b.type&&(h.excludeSelectedOptions=!1,h.options&&(h.options=h.options.map((function(e){return"object"!==K(e.value)&&(e.key="object"!==K(e.value)?e.value:e.key,e.value={id:e.value}),e}))),b.multiple&&(h.excludeSelectedOptions=!0,h.inlineTags=!0)),"richeditor"===b.type&&(h.id=b.id),"bwf-toggle"===b.type&&(h.tooltip=b.tooltip),"input"!==b.type&&"text"!==b.type&&"textarea"!==b.type||(h.placeholder=Object(_.__)("Type here","funnel-builder")),"text"===b.type&&b.disabled&&(h.disabled=b.disabled),"toggle"===b.type&&(h.className="bwf-tooglecontrol-advance",h.tooltip=b.tooltip,h.label=b.label),h.keyid=b.key,h)),n)),t.hint&&Object(o.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(5),i=n.n(a),c=n(2),u=n(18),l=n.n(u),s=n(9),f=n(52),d=n(56);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){var e;return b(this,t),(e=m(this,t,arguments)).handleKeyDown=e.handleKeyDown.bind(e),e.select=e.select.bind(e),e.optionRefs={},e.listbox=Object(r.createRef)(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.options,r=t.selectedIndex;Object(c.isEqual)(n,e.options)||(this.optionRefs={}),r!==e.selectedIndex&&this.scrollToOption(r)}},{key:"getOptionRef",value:function(e){return this.optionRefs.hasOwnProperty(e)||(this.optionRefs[e]=Object(r.createRef)()),this.optionRefs[e]}},{key:"select",value:function(e){var t=this.props.onSelect;e.isDisabled||t(e)}},{key:"scrollToOption",value:function(e){var t=this.listbox.current;if(!(t.scrollHeight<=t.clientHeight)&&this.optionRefs[e]){var n=this.optionRefs[e].current,r=t.clientHeight+t.scrollTop,o=n.offsetTop+n.offsetHeight;o>r?t.scrollTop=o-t.clientHeight:n.offsetTop<t.scrollTop&&(t.scrollTop=n.offsetTop)}}},{key:"handleKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.options,a=t.onSearch,i=t.selectedIndex,c=t.setExpanded;if(0!==o.length)switch(e.keyCode){case d.UP:n(),e.preventDefault(),e.stopPropagation();break;case d.DOWN:r(),e.preventDefault(),e.stopPropagation();break;case d.ENTER:this.select(o[i]),e.preventDefault(),e.stopPropagation();break;case d.LEFT:case d.RIGHT:c(!1);break;case d.ESCAPE:return c(!1),void a(null);case d.TAB:this.select(o[i]),c(!1),a(null)}}},{key:"toggleKeyEvents",value:function(e){this.props.node[e?"addEventListener":"removeEventListener"]("keydown",this.handleKeyDown,!0)}},{key:"componentDidMount",value:function(){this.toggleKeyEvents(!0)}},{key:"componentWillUnmount",value:function(){this.toggleKeyEvents(!1)}},{key:"render",value:function(){var e=this,t=this.props,n=t.instanceId,o=t.listboxId,a=t.options,c=t.selectedIndex,u=t.staticList,l=i()("bwf-select-control-listbox",{"is-static":u});return Object(r.createElement)("div",{ref:this.listbox,id:o,role:"listbox",className:l,tabIndex:"-1"},a.map((function(t,o){return Object(r.createElement)(s.Button,{ref:e.getOptionRef(o),key:t.key,id:"bwf-select-control-option-".concat(n,"-").concat(t.key),role:"option","aria-selected":o===c,disabled:t.isDisabled,className:i()("bwf-select-control-option",{"is-selected":o===c}),onClick:function(){return e.select(t)},tabIndex:"-1"},t.label)})))}}])&&h(n.prototype,o),a&&h(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);O.propTypes={instanceId:l.a.number,listboxId:l.a.string,node:l.a.instanceOf(Element).isRequired,onSelect:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,selectedIndex:l.a.number,staticList:l.a.bool};var w=O,j=n(441);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,k(r.key),r)}}function k(e){var t=function(e,t){if("object"!=E(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=E(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==E(t)?t:t+""}function P(e,t,n){return t=C(t),function(e,t){if(t&&("object"==E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],C(e).constructor):t.apply(e,n))}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t){return(N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=P(this,t,[e])).removeAll=n.removeAll.bind(n),n.removeResult=n.removeResult.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&N(e,t)}(t,e),n=t,(a=[{key:"removeAll",value:function(){(0,this.props.onChange)([])}},{key:"removeResult",value:function(e){var t=this;return function(){var n=t.props,r=n.selected,o=n.onChange,a=Object(c.findIndex)(r,{key:e});o([].concat(_(r.slice(0,a)),_(r.slice(a+1))))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.selected,a=t.showClearButton;return n.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-select-control-tags"},n.map((function(t,a){if(!t.label)return null;var i=Object(o.sprintf)(Object(o.__)("%1$s (%2$s of %3$s)","funnel-builder"),t.label,a+1,n.length);return Object(r.createElement)(j.a,{key:t.key,id:t.key,label:t.label,remove:e.removeResult,screenReaderLabel:i})}))),a&&Object(r.createElement)(s.Button,{className:"bwf-select-control-clear",isLink:!0,onClick:this.removeAll},Object(r.createElement)(s.Icon,{icon:"dismiss"}),Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Clear all","funnel-builder")))):null}}])&&x(n.prototype,a),i&&x(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,i}(r.Component);T.propTypes={onChange:l.a.func,onSelect:l.a.func,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showClearButton:l.a.bool};var D=T,I=n(6);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e){return function(e){if(Array.isArray(e))return L(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return L(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,F(r.key),r)}}function F(e){var t=function(e,t){if("object"!=A(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==A(t)?t:t+""}function B(e,t,n){return t=q(t),function(e,t){if(t&&("object"==A(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],q(e).constructor):t.apply(e,n))}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t){return(z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var U=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=B(this,t,[e])).state={isActive:!1},n.input=Object(r.createRef)(),n.updateSearch=n.updateSearch.bind(n),n.onFocus=n.onFocus.bind(n),n.onBlur=n.onBlur.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(t,e),n=t,(a=[{key:"updateSearch",value:function(e){var t=this;return function(n){t.isBWFMaintainSingleTerm()||e(n.target.value)}}},{key:"onFocus",value:function(e){var t=this,n=this.props,r=n.isSearchable,o=n.setExpanded,a=n.showAllOnFocus,i=n.updateFilteredOptions;return function(n){t.setState({isActive:!0}),r&&a?(n.target.select(),i("")):r?e(n.target.value):o(!0)}}},{key:"onBlur",value:function(){var e=this.props.onBlur;"function"==typeof e&&e(),this.setState({isActive:!1})}},{key:"onKeyDown",value:function(e){var t=this.props,n=t.decrementSelectedIndex,r=t.incrementSelectedIndex,o=t.selected,a=t.onChange,i=t.query,c=t.setExpanded;d.BACKSPACE===e.keyCode&&!i&&o.length&&a(M(o.slice(0,-1))),d.DOWN===e.keyCode&&(r(),c(!0),e.preventDefault(),e.stopPropagation()),d.UP===e.keyCode&&(n(),c(!0),e.preventDefault(),e.stopPropagation())}},{key:"renderButton",value:function(){var e=this.props,t=e.multiple,n=e.selected;return t||!n.length?null:Object(r.createElement)("div",{className:"bwf-select-control-control-value"},n[0].label)}},{key:"renderInput",value:function(){var e=this.props,t=e.activeId,n=e.hasTags,o=e.inlineTags,a=e.instanceId,i=e.isExpanded,c=e.isSearchable,u=e.listboxId,l=e.onSearch,s=e.placeholder,f=e.searchInputType,d=this.state.isActive,p=this.isBWFMaintainSingleTerm();return Object(r.createElement)("input",{autoComplete:"off",className:"bwf-select-control-control-input",id:"bwf-select-control-".concat(a,"-control-input"),ref:this.input,type:c?f:"button",value:this.getInputValue(),placeholder:d&&!p?s:"",onChange:this.updateSearch(l),onFocus:this.onFocus(l),onBlur:this.onBlur,onKeyDown:this.onKeyDown,role:"combobox","aria-autocomplete":"list","aria-expanded":i,"aria-haspopup":"true","aria-owns":u,"aria-controls":u,"aria-activedescendant":t,"aria-describedby":n&&o?"search-inline-input-".concat(a):null})}},{key:"isBWFMaintainSingleTerm",value:function(){var e=this.props,t=e.selected;return!!e.bwfMaintainSingleTerm&&t.length>0}},{key:"getInputValue",value:function(){var e=this.props,t=e.isFocused,n=e.isSearchable,r=e.multiple,o=e.query,a=e.selected,i=a.length?a[0].label:"";return r||t?this.isBWFMaintainSingleTerm()?"":n&&t&&o?o:"":i}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.hasTags,c=t.help,u=t.inlineTags,l=t.instanceId,s=t.isSearchable,f=t.label,d=t.query,p=this.state.isActive;return Object(r.createElement)("div",{className:i()("components-base-control","bwf-select-control-control",n,{empty:!d||0===d.length,"is-active":p,"has-tags":u&&a,"with-value":this.getInputValue().length,"has-error":!!c}),onClick:function(){e.input.current.focus()}},s&&Object(r.createElement)(I.a,{icon:"search",size:18}),u&&Object(r.createElement)(D,this.props),Object(r.createElement)("div",{className:"components-base-control__field"},!!f&&Object(r.createElement)("label",{htmlFor:"bwf-select-control-".concat(l,"-control-input"),className:"components-base-control__label"},f),this.renderInput(),u&&Object(r.createElement)("span",{id:"search-inline-input-".concat(l),className:"screen-reader-text"},Object(o.__)("Move backward for selected items","funnel-builder")),!!c&&Object(r.createElement)("p",{id:"bwf-select-control-".concat(l,"__help"),className:"components-base-control__help"},c)))}}])&&R(n.prototype,a),c&&R(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,c}(r.Component);U.propTypes={hasTags:l.a.bool,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,instanceId:l.a.number,label:l.a.string,listboxId:l.a.string,onBlur:l.a.func,onChange:l.a.func,onSearch:l.a.func,placeholder:l.a.string,query:l.a.string,selected:l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string})),showAllOnFocus:l.a.bool,bwfMaintainSingleTerm:l.a.bool};var Y=U,V=(n(572),n(125));function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(){return(G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function X(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ne(r.key),r)}}function Q(e,t,n){return t=J(t),function(e,t){if(t&&("object"==H(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],J(e).constructor):t.apply(e,n))}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t,n){return(t=ne(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}var re=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),te(n=Q(this,t,[e]),"mounted",!0),n.state=W(W({},n.constructor.getInitialState()),{},{filteredOptions:[],selectedIndex:0}),n.bindNode=n.bindNode.bind(n),n.decrementSelectedIndex=n.decrementSelectedIndex.bind(n),n.incrementSelectedIndex=n.incrementSelectedIndex.bind(n),n.onAutofillChange=n.onAutofillChange.bind(n),n.updateFilteredOptions=Object(c.debounce)(n.updateFilteredOptions.bind(n),e.searchDebounceTime),n.search=n.search.bind(n),n.selectOption=n.selectOption.bind(n),n.setExpanded=n.setExpanded.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(t,e),n=t,u=[{key:"getInitialState",value:function(){return{isExpanded:!1,isFocused:!1,query:""}}}],(a=[{key:"bindNode",value:function(e){this.node=e}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelected(),t=this.props.multiple,n=this.constructor.getInitialState();!t&&e.length&&e[0].label&&(n.query=e[0].label),this.setState(n)}},{key:"handleFocusOutside",value:function(){this.reset()}},{key:"hasTags",value:function(){var e=this.props,t=e.multiple,n=e.selected;return!!t&&n.some((function(e){return Boolean(e.label)}))}},{key:"getSelected",value:function(){var e=this.props,t=e.multiple,n=e.options,r=e.selected;if(t||Array.isArray(r))return r;var o=n.find((function(e){return e.key===r}));return o?[o]:[]}},{key:"selectOption",value:function(e){var t=this.props,n=t.multiple,r=t.onChange,o=t.selected,a=this.state.query,i=n?[].concat(X(o),[e]):[e];this.reset(i),Array.isArray(o)?-1===Object(c.findIndex)(o,{key:e.key})&&r(i,a):o!==e.key&&r(e.key,a)}},{key:"decrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(0===e?t.length:e)-1:t.length-1;this.setState({selectedIndex:n})}},{key:"incrementSelectedIndex",value:function(){var e=this.state.selectedIndex,t=this.getOptions(),n=null!==e?(e+1)%t.length:0;this.setState({selectedIndex:n})}},{key:"announce",value:function(e){var t=this.props.debouncedSpeak;t&&(e.length?t(Object(o.sprintf)(Object(o._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length,"funnel-builder"),e.length),"assertive"):t(Object(o.__)("No results.","funnel-builder"),"assertive"))}},{key:"getOptions",value:function(){var e=this.props,t=e.isSearchable,n=e.options,r=this.state.filteredOptions;return t?r:n}},{key:"getFilteredOptions",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=this.props,r=n.excludeSelectedOptions,o=void 0===r||r,a=n.maxResults,i=void 0===a?10:a,c=n.onFilter,u=void 0===c?function(){}:c,l=this.getSelected().map((function(e){return e.key})),s=[],f=0;f<e.length;f++){var d=e[f];if(!o||!l.includes(d.key)){var p=d.keywords,b=void 0===p?[]:p;if("string"==typeof d.label&&(b=[].concat(X(b),[d.label])),s.push(d),i&&s.length===i)break}}return u(s,t)}},{key:"setExpanded",value:function(e){this.setState({isExpanded:e})}},{key:"search",value:function(e){this.setState({query:e,isFocused:!0}),this.updateFilteredOptions(e)}},{key:"updateFilteredOptions",value:function(e){var t=this,n=this.props,r=n.hideBeforeSearch,o=n.options,a=n.onSearch,i=this.activePromise=Promise.resolve(a(o,e)).then((function(n){if(i===t.activePromise&&t.mounted){var o=null===e||e.length||r?t.getFilteredOptions(n,e):n;t.setState({selectedIndex:0,filteredOptions:o,isExpanded:Boolean(o.length)},(function(){return t.announce(o)}))}}))}},{key:"onAutofillChange",value:function(e){var t=this.props.options,n=this.getFilteredOptions(t,e.target.value);1===n.length&&this.selectOption(n[0])}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.props,t=e.autofill,n=e.children,o=e.className,a=e.controlClassName,c=e.inlineTags,u=e.instanceId,l=e.isSearchable,s=e.options,f=this.state,d=f.isExpanded,p=f.isFocused,b=f.selectedIndex,h=this.hasTags(),y=(s[b]||{}).key,m=void 0===y?"":y,v=d?"bwf-select-control-listbox-".concat(u):null,g=d?"bwf-select-control-option-".concat(u,"-").concat(m):null;return Object(r.createElement)("div",{className:i()("bwf-select-control bwf-select-control-1",o,{"has-inline-tags":h&&c,"is-focused":p,"is-searchable":l}),ref:this.bindNode},t&&Object(r.createElement)("input",{onChange:this.onAutofillChange,name:t,type:"text",className:"bwf-select-control-autofill-input",tabIndex:"-1"}),n,Object(r.createElement)(Y,G({},this.props,this.state,{activeId:g,className:a,hasTags:h,isExpanded:d,listboxId:v,onSearch:this.search,selected:this.getSelected(),setExpanded:this.setExpanded,updateFilteredOptions:this.updateFilteredOptions,decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm})),!c&&h&&Object(r.createElement)(D,G({},this.props,{selected:this.getSelected()})),d&&Object(r.createElement)(w,G({},this.props,this.state,{activeId:g,listboxId:v,node:this.node,onSelect:this.selectOption,onSearch:this.search,options:this.getOptions(),decrementSelectedIndex:this.decrementSelectedIndex,incrementSelectedIndex:this.incrementSelectedIndex,setExpanded:this.setExpanded})))}}])&&Z(n.prototype,a),u&&Z(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,u}(r.Component);re.propTypes={autofill:l.a.string,children:l.a.node,className:l.a.string,controlClassName:l.a.string,excludeSelectedOptions:l.a.bool,onFilter:l.a.func,getSearchExpression:l.a.func,help:l.a.oneOfType([l.a.string,l.a.node]),inlineTags:l.a.bool,isSearchable:l.a.bool,label:l.a.string,onChange:l.a.func,onSearch:l.a.func,options:l.a.arrayOf(l.a.shape({isDisabled:l.a.bool,key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,keywords:l.a.arrayOf(l.a.oneOfType([l.a.string,l.a.number])),label:l.a.oneOfType([l.a.string,l.a.object]),value:l.a.any})).isRequired,placeholder:l.a.string,searchDebounceTime:l.a.number,selected:l.a.oneOfType([l.a.string,l.a.arrayOf(l.a.shape({key:l.a.oneOfType([l.a.number,l.a.string]).isRequired,label:l.a.string}))]),maxResults:l.a.number,multiple:l.a.bool,showClearButton:l.a.bool,searchInputType:l.a.oneOf(["text","search","number","email","tel","url"]),hideBeforeSearch:l.a.bool,showAllOnFocus:l.a.bool,staticList:l.a.bool,bwfMaintainSingleTerm:l.a.bool};var oe={autofill:null,excludeSelectedOptions:!0,getSearchExpression:c.identity,inlineTags:!1,isSearchable:!1,onChange:c.noop,onFilter:c.identity,onSearch:function(e){return Promise.resolve(e)},maxResults:0,multiple:!1,searchDebounceTime:0,searchInputType:"search",selected:[],showAllOnFocus:!1,showClearButton:!1,hideBeforeSearch:!1,staticList:!1,bwfMaintainSingleTerm:!1},ae=Object(V.a)(re,oe);t.a=Object(f.compose)([s.withSpokenMessages,f.withInstanceId,s.withFocusOutside])(ae)},function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(5),i=n.n(a),c=n(2),u=n(18),l=n.n(u),s=n(374),f=n(111),d=n(78),p=function(e){var t=e.children;return Object(r.createElement)("div",{className:"bwf-ellipsis-menu__title"},t)};p.propTypes={children:l.a.node};var b=p,h=n(378),y=n(344),m=n(412),v=function(e){var t=e.data;return Object(r.createElement)("ul",{className:"bwf-table-summary bwf-display-flex"},t.map((function(e,t){var n=e.label,o=e.value;return Object(r.createElement)("li",{className:"bwf-table-summary-item",key:t},Object(r.createElement)("span",{className:"bwf-table-summary-value"},o),Object(r.createElement)("span",{className:"bwf-table-summary-label"},n))})))};v.propTypes={data:l.a.array};var g=v,O=(n(419),n(279));function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function S(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}function x(e,t,n){return t=k(t),function(e,t){if(t&&("object"==w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],k(e).constructor):t.apply(e,n))}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=x(this,t,[e])).getShowCols(e.headers);return n.state={showCols:r},n.onColumnToggle=n.onColumnToggle.bind(n),n.onPageChange=n.onPageChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(t,e),n=t,(a=[{key:"componentDidUpdate",value:function(e){var t=e.headers,n=e.query,r=this.props,o=r.headers,a=r.onColumnsChange,i=r.query,u=this.state.showCols;if(Object(c.isEqual)(o,t)||this.setState({showCols:this.getShowCols(o)}),i.orderby!==n.orderby&&!u.includes(i.orderby)){var l=u.concat(i.orderby);this.setState({showCols:l}),a(l)}}},{key:"getShowCols",value:function(e){return e.map((function(e){var t=e.key,n=e.visible;return!(void 0!==n&&!n)&&t})).filter(Boolean)}},{key:"getVisibleHeaders",value:function(){var e=this.props.headers,t=this.state.showCols;return e.filter((function(e){var n=e.key;return t.includes(n)}))}},{key:"getVisibleRows",value:function(){var e=this.props,t=e.headers,n=e.rows,r=this.state.showCols;return n.map((function(e){return t.map((function(t,n){var o=t.key;return r.includes(o)&&e[n]})).filter(Boolean)}))}},{key:"onColumnToggle",value:function(e){var t=this,n=this.props,r=n.headers,o=n.query,a=n.onQueryChange,i=n.onColumnsChange;return function(){t.setState((function(t){if(t.showCols.includes(e)){if(o.orderby===e){var n=Object(c.find)(r,{defaultSort:!0})||Object(c.first)(r)||{};a("sort")(n.key,"desc")}var u=Object(c.without)(t.showCols,e);return i(u,e),{showCols:u}}var l=[].concat(j(t.showCols),[e]);return i(l,e),{showCols:l}}))}}},{key:"onPageChange",value:function(){var e=this.props,t=e.onPageChange,n=e.onQueryChange;t&&t.apply(void 0,arguments),n&&n("paged").apply(void 0,arguments)}},{key:"render",value:function(){var e=this,t=this.props,n=t.actions,a=t.className,c=t.isLoading,u=t.onQueryChange,l=t.onSort,p=t.query,v=t.rowHeader,O=t.rowsPerPage,w=t.showMenu,j=t.summary,E=t.title,_=t.totalRows,S=t.rowClasses,x=t.emptyMessage,k=t.filterColumnIcon,P=void 0===k?"":k,C=t.extraSectionBeforefilterCol,N=t.hideHeader,T=t.footer,D=t.showPagination,I=void 0===D||D,A=this.state.showCols,M=this.props.headers,L=this.getVisibleHeaders(),R=this.getVisibleRows(),F=i()("bwf-table","bwf-analytics-card",a,{"bwf-table-placeholder":c});return Object(r.createElement)(s.a,{className:F,title:E,action:n,hideHeader:N&&"yes"==N?"yes":"no",footer:T,menu:!(!C&&!w)&&Object(r.createElement)("div",null,C,w&&Object(r.createElement)(f.a,{label:Object(o.__)("Choose which values to display","funnel-builder"),buttonIcon:P,renderContent:function(){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(b,null,Object(o.__)("Columns:","funnel-builder")),M.map((function(t){var n=t.key,o=t.label;return t.required?null:Object(r.createElement)(d.a,{checked:A.includes(n),isCheckbox:!0,isClickable:!0,key:n,onInvoke:e.onColumnToggle(n)},o)})))}})),belowHeader:!!this.props.beforeTable&&this.props.beforeTable},c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(m.a,{numberOfRows:O,headers:L,rowHeader:v,caption:E,query:p})):Object(r.createElement)(y.a,{rows:R,headers:L,rowHeader:v,caption:E,query:p,emptyMessage:x,onSort:l||u("sort"),rowClasses:S}),I&&!c&&Object(r.createElement)(h.a,{key:parseInt(p.paged,10)||1,page:parseInt(p.paged,10)||1,perPage:O,total:_,onPageChange:this.onPageChange,onPerPageChange:u("per_page")}),j&&Object(r.createElement)(g,{data:j}))}}])&&_(n.prototype,a),u&&_(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,u}(r.Component);C.propTypes={headers:l.a.arrayOf(l.a.shape({hiddenByDefault:l.a.bool,defaultSort:l.a.bool,isSortable:l.a.bool,key:l.a.string,label:l.a.oneOfType([l.a.string,l.a.node]),required:l.a.bool})),ids:l.a.arrayOf(l.a.number),isLoading:l.a.bool,onQueryChange:l.a.func,onColumnsChange:l.a.func,onSort:l.a.func,query:l.a.object,rowHeader:l.a.oneOfType([l.a.number,l.a.bool]),rows:l.a.arrayOf(l.a.arrayOf(l.a.shape({display:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number,l.a.bool])}))).isRequired,rowsPerPage:l.a.number.isRequired,showMenu:l.a.bool,summary:l.a.arrayOf(l.a.shape({label:l.a.node,value:l.a.oneOfType([l.a.string,l.a.number])})),totalRows:l.a.oneOfType([l.a.number,l.a.string]).isRequired,rowClasses:l.a.arrayOf(l.a.string),showPagination:l.a.bool};var N={isLoading:!1,onQueryChange:function(){return function(){}},onColumnsChange:function(){},onSort:void 0,query:{},rowHeader:0,rows:[],showMenu:!0,rowClasses:[],showPagination:!0};t.a=Object(O.a)(C,N)},,,,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(5),i=n.n(a),c=n(18),u=n.n(c),l=n(1),s=n(9),f=n(52),d=n(788),p=n(789),b=n(790),h=n(6),y=n(25),m=n(279);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(){return(g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function w(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}function j(e,t,n){return t=E(t),function(e,t){if(t&&("object"==v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],E(e).constructor):t.apply(e,n))}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return(_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var S=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=j(this,t,[e])).state={tabIndex:null,isScrollableRight:!1,isScrollableLeft:!1},n.container=Object(r.createRef)(),n.sortBy=n.sortBy.bind(n),n.updateTableShadow=n.updateTableShadow.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){var e=this.container.current,t=e.scrollWidth>e.clientWidth;this.setState({tabIndex:t?"0":null}),this.updateTableShadow(),window.addEventListener("resize",this.updateTableShadow)}},{key:"componentDidUpdate",value:function(){this.updateTableShadow()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateTableShadow)}},{key:"sortBy",value:function(e){var t=this,n=this.props,r=n.headers,a=n.query;return function(){var n=a.orderby||Object(o.get)(Object(o.find)(r,{defaultSort:!0}),"key",!1),i=a.order||Object(o.get)(Object(o.find)(r,{key:n}),"defaultOrder","desc"),c="desc";e===n&&(c="desc"===i?"asc":"desc"),t.props.onSort(e,c)}}},{key:"updateTableShadow",value:function(){var e=this.container.current,t=this.state,n=t.isScrollableRight,r=t.isScrollableLeft,o=e.scrollWidth-e.scrollLeft<=e.offsetWidth;o&&n?this.setState({isScrollableRight:!1}):o||this.state.isScrollableRight||this.setState({isScrollableRight:!0});var a=e.scrollLeft<=0;a&&r?this.setState({isScrollableLeft:!1}):a||r||this.setState({isScrollableLeft:!0})}},{key:"render",value:function(){var e=this,t=this.props,n=t.ariaHidden,a=t.caption,c=t.classNames,u=t.headers,f=t.instanceId,m=t.query,v=t.rowHeader,O=t.rows,w=t.rowClasses,j=t.emptyMessage,E=this.state,_=E.isScrollableRight,S=E.isScrollableLeft,x=E.tabIndex,k=i()("bwf-table-table",c,{"is-scrollable-right":_,"is-scrollable-left":S,"is-empty-data":!N}),P=m.orderby||Object(o.get)(Object(o.find)(u,{defaultSort:!0}),"key",!1),C=m.order||Object(o.get)(Object(o.find)(u,{key:P}),"defaultOrder","desc"),N=!!O.length;return Object(r.createElement)("div",{className:k,ref:this.container,tabIndex:x,"aria-hidden":n,"aria-labelledby":"caption-".concat(f),role:"group",onScroll:this.updateTableShadow},Object(r.createElement)("table",{width:"100%"},Object(r.createElement)("caption",{id:"caption-".concat(f),className:"bwf-table-caption screen-reader-text"},a,"0"===x&&Object(r.createElement)("small",null,Object(l.__)("(scroll to see more)","funnel-builder"))),Object(r.createElement)("tbody",null,Object(r.createElement)("tr",null,u.map((function(t,n){var a=t.cellClassName,c=t.isSortable,u=t.isNumeric,h=t.key,m=t.label,v=t.screenReaderLabel,O=t.isPro,w="header-".concat(f,"-").concat(n),j={className:i()("bwf-table-header",a,{"is-sortable":c,"is-sorted":P===h,"is-numeric":u})};c&&(j["aria-sort"]="none",P===h&&(j["aria-sort"]="asc"===C?"ascending":"descending"));var E=P===h&&"asc"!==C?Object(l.sprintf)(Object(l.__)("Sort by %s in ascending order","funnel-builder"),v):Object(l.sprintf)(Object(l.__)("Sort by %s in descending order","funnel-builder"),v),_=Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{"aria-hidden":Boolean(v)},m),O&&Object(r.createElement)(y.b,null),v&&Object(r.createElement)("span",{className:"screen-reader-text"},v));return Object(r.createElement)("th",g({role:"columnheader",scope:"col",key:n},j),c?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Button,{"aria-describedby":w,onClick:N?e.sortBy(h):o.noop},_,P===h&&"asc"===C?Object(r.createElement)(d.a,{icon:p.a}):Object(r.createElement)(d.a,{icon:b.a})),Object(r.createElement)("span",{className:"screen-reader-text",id:w},E)):_)}))),N?O.map((function(e,t){return Object(r.createElement)("tr",{key:t,className:w[t]},e.map((function(e,t){var o=u[t],a=o.cellClassName,c=(o.isLeftAligned,o.isNumeric),l=o.isPro,s=v===t,f=s?"th":"td",d=i()("bwf-table-item",a,{"is-conversion":"conversion"===u[t].key,"is-numeric":c,"is-sorted":P===u[t].key});return Object(r.createElement)(f,{scope:s?"row":null,key:t,className:d},l&&!n?"-":function(e){return e.display||null}(e))})))})):Object(r.createElement)("tr",{className:"bwf-table-empty"},Object(r.createElement)("td",{className:"bwf-table-empty-item",colSpan:u.length},Object(r.createElement)(h.a,{icon:"no-data",height:"82",width:"112"}),Object(r.createElement)("div",{className:"bwf-no-data"},Object(l.__)("No Data Available","funnel-builder")),j?Object(r.createElement)("div",{className:"bwf-info"},j):null)))))}}])&&O(n.prototype,a),c&&O(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,c}(r.Component);S.propTypes={ariaHidden:u.a.bool,className:u.a.string,headers:u.a.arrayOf(u.a.shape({defaultSort:u.a.bool,defaultOrder:u.a.string,isLeftAligned:u.a.bool,isNumeric:u.a.bool,isSortable:u.a.bool,key:u.a.string,label:u.a.node,required:u.a.bool,screenReaderLabel:u.a.string})),onSort:u.a.func,query:u.a.object,rows:u.a.arrayOf(u.a.arrayOf(u.a.shape({display:u.a.node,value:u.a.oneOfType([u.a.string,u.a.number,u.a.bool])}))).isRequired,rowHeader:u.a.oneOfType([u.a.number,u.a.bool]),rowClasses:u.a.arrayOf(u.a.string)};var x={ariaHidden:!1,headers:[],onSort:o.noop,query:{},rowHeader:0,rowClasses:[]};t.a=Object(f.withInstanceId)(Object(m.a)(S,x))},,,function(e,t,n){var r=n(381),o=n(382);e.exports=function(e,t,n,a){var i=!n;n||(n={});for(var c=-1,u=t.length;++c<u;){var l=t[c],s=a?a(n[l],e[l],l,n,e):void 0;void 0===s&&(s=e[l]),i?o(n,l,s):r(n,l,s)}return n}},,,,,,,,,,function(e,t,n){"use strict";var r=n(1);t.a={calendarLabel:Object(r.__)("Calendar","funnel-builder"),closeDatePicker:Object(r.__)("Close","funnel-builder"),focusStartDate:Object(r.__)("Interact with the calendar and select start and end dates.","funnel-builder"),clearDate:Object(r.__)("Clear Date","funnel-builder"),clearDates:Object(r.__)("Clear Dates","funnel-builder"),jumpToPrevMonth:Object(r.__)("Move backward to switch to the previous month.","funnel-builder"),jumpToNextMonth:Object(r.__)("Move forward to switch to the next month.","funnel-builder"),enterKey:Object(r.__)("Enter key","funnel-builder"),leftArrowRightArrow:Object(r.__)("Right and left arrow keys","funnel-builder"),upArrowDownArrow:Object(r.__)("up and down arrow keys","funnel-builder"),pageUpPageDown:Object(r.__)("page up and page down keys","funnel-builder"),homeEnd:Object(r.__)("Home and end keys","funnel-builder"),escape:Object(r.__)("Escape key","funnel-builder"),questionMark:Object(r.__)("Question mark","funnel-builder"),selectFocusedDate:Object(r.__)("Select the date in focus.","funnel-builder"),moveFocusByOneDay:Object(r.__)("Move backward (left) and forward (right) by one day.","funnel-builder"),moveFocusByOneWeek:Object(r.__)("Move backward (up) and forward (down) by one week.","funnel-builder"),moveFocusByOneMonth:Object(r.__)("Switch months.","funnel-builder"),moveFocustoStartAndEndOfWeek:Object(r.__)("Go to the first or last day of a week.","funnel-builder"),returnFocusToInput:Object(r.__)("Return to the date input field.","funnel-builder"),keyboardNavigationInstructions:Object(r.__)("Press the down arrow key to interact with the calendar and select a date.","funnel-builder"),chooseAvailableStartDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as a start date.","funnel-builder"),t)},chooseAvailableEndDate:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Select %s as an end date.","funnel-builder"),t)},chooseAvailableDate:function(e){return e.date},dateIsUnavailable:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("%s is not selectable.","funnel-builder"),t)},dateIsSelected:function(e){var t=e.date;return Object(r.sprintf)(Object(r.__)("Selected. %s","funnel-builder"),t)}}},,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(1),i=n(9),c=n(413),u=n(22),l=n(281),s=n(304),f=n(19);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.step,n=e.requestCreateStep,p=e.onRequestClose,b=e.onCreationScreen,h=e.creationSuccess,y=e.clearAndCloseEverything,m=e.isBusy,v=e.errors,g=Object(f.a)(),O=g.isProFeatureLocked,w=g.isBasic,j=Object(f.a)("ck").isProFeatureLocked,E=w&&"wc_checkout"===(null==t?void 0:t.type)?j:O,_=d(Object(r.useState)(""),2),S=_[0],x=_[1],k=d(Object(r.useState)(""),2),P=k[0],C=k[1],N=d(Object(r.useState)(null),2),T=N[0],D=N[1],I=d(Object(r.useState)(null!=v?v:{}),2),A=I[0],M=I[1],L=d(Object(r.useState)("new"),2),R=L[0],F=L[1],B=d(Object(r.useState)(!1),2),q=B[0],z=B[1];Object(r.useEffect)((function(){M(v)}),[v]),Object(r.useEffect)((function(){var e;C(null==T||null===(e=T.step)||void 0===e?void 0:e.name),"new"===R&&Object(o.isEmpty)(S.trim())||"existing"===R&&Object(o.isEmpty)(P)?z(!0):z(!1)}),[R,T,S,P]);var U=function(){if(!q){var t=e.errors;T&&T.copyFrom&&!T.step&&(t.copyFrom=Object(a.__)("Copy From: This field is required","funnel-builder")),0===Object(o.size)(t)?n({copyFrom:T&&T.hasOwnProperty("step")?T.step:null,title:"existing"===R?"".concat(P," Copy"):S}):M(t)}};return Object(r.createElement)(r.Fragment,null,A&&Object(o.size)(A)>0&&Object(r.createElement)(s.a,{status:"error",isDismissible:!0,onRemove:function(){return M({})}},Object(r.createElement)("ul",{className:"bwf-m-0"},Object.keys(A).map((function(e){return Object(r.createElement)("li",{className:"bwf-m-0",key:e},A[e])})))),m||!b||h?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("form",{method:"post",action:"",className:"bwf-funnel-add-step",onSubmit:function(e){U(),e.preventDefault()}},Object(r.createElement)(l.a,{options:[{value:"new",label:Object(a.__)("Create New","funnel-builder")},{value:"existing",label:Object(a.__)("Clone Existing","funnel-builder"),isPro:E}],selected:R,onChange:function(e){F(e)},className:"bwf-add-bump_radio-items"}),"new"===R?Object(r.createElement)(i.TextControl,{label:Object(a.__)("Name","funnel-builder"),placeholder:Object(a.__)("Enter Name","funnel-builder"),value:S,onChange:function(e){return x(e)}}):null,"existing"===R?Object(r.createElement)(c.a,{step:t,onStepSelected:function(e){return D(e)},showCheckbox:!1}):null,Object(r.createElement)("div",{className:"".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(u.a,{className:"bwf-modal-cancel-btn",onClick:p},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(u.a,{isPrimary:!0,onClick:U,disabled:q,isBusy:m,className:q?"bwf-no-ripple":""},Object(a.__)("Add","funnel-builder"))))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},Object(r.createElement)("div",{style:{marginTop:"-16px"}},Object(a.__)("Something went wrong, Pleas contact to support team","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(u.a,{isPrimary:!0,onClick:function(){p(),y()}},Object(a.__)("OK","funnel-builder")))))}},function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(1),i=n(4),c=n(5),u=n.n(c),l=n(6),s=n(11),f=n.n(s),d=n(401),p=n(80);function b(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isOpen,n=e.onRequestClose,c=h(Object(r.useState)({default_css:"",skin_all:{}}),2),s=c[0],y=c[1],m=h(Object(r.useState)(!0),2),v=m[0],g=m[1];return Object(r.useEffect)((function(){f()({path:Object(i.u)("/funnel-bump/skins/preview/")}).then((function(e){e.success&&y({skin_all:e.skin_all,default_css:e.default_css}),g(!1)})).catch((function(e){g(!1),console.log(e)}))}),[]),t&&Object(r.createElement)("div",{className:"bwf-order-bum-pro-modal"},Object(r.createElement)(o.Modal,{className:"bwf-admin-modal bwf-ob-pro-modal bwf-admin-modal-no-header",isDismissible:!1,onRequestClose:function(){return n()}},Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf-modal-custom-header"},Object(r.createElement)("div",{className:"bwf-flex bwf--g8 bwf-modal-title"},Object(a.__)("Order Bump Templates","funnel-builder")),Object(r.createElement)("div",{className:"bwf-flex bwf--g16"},Object(r.createElement)(p.a,{isPrimary:!0,proLink:Object(i.P)(["Order","Bump","Template","Modal"])}),Object(r.createElement)("button",{className:"bwf-no-style-button",onClick:n},Object(r.createElement)(l.a,{icon:"cross",size:"24"})))),Object(r.createElement)("div",{className:u()("bwf-ob-pro-modal-content",{"is-placeholder":v}),style:{paddingTop:"1px"}},v?Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap"},b(new Array(8)).map((function(e,t){return Object(r.createElement)(d.a,{index:t,key:"ob-place-".concat(t)})}))):Object(r.createElement)("div",{className:"bwf-ob-lite-skins-wrap",id:"wfob_wrap"},Object(r.createElement)("style",null,s.default_css),Object.keys(s.skin_all).map((function(e){var t=s.skin_all[e];return Object(r.createElement)("div",{className:"bwf_bump_skin_preview",key:e},Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.dynamic_inline_css}}),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:null==t?void 0:t.html}}))}))," "))))}},function(e,t,n){"use strict";var r=n(3),o="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,a=n(321),i=n(364),c=n(365),u="function"==typeof Symbol&&Symbol.iterator;function l(e,t){return e&&"object"==typeof e&&null!=e.key?(n=e.key,r={"=":"=0",":":"=2"},"$"+(""+n).replace(/[=:]/g,(function(e){return r[e]}))):t.toString(36);var n,r}function s(e,t,n,r){var a,c=typeof e;if("undefined"!==c&&"boolean"!==c||(e=null),null===e||"string"===c||"number"===c||"object"===c&&e.$$typeof===o)return n(r,e,""===t?"."+l(e,0):t),1;var f=0,d=""===t?".":t+":";if(Array.isArray(e))for(var p=0;p<e.length;p++)f+=s(a=e[p],d+l(a,p),n,r);else{var b=function(e){var t=e&&(u&&e[u]||e["@@iterator"]);if("function"==typeof t)return t}(e);if(b){0;for(var h,y=b.call(e),m=0;!(h=y.next()).done;)f+=s(a=h.value,d+l(a,m++),n,r)}else if("object"===c){0;var v=""+e;i(!1,"Objects are not valid as a React child (found: %s).%s","[object Object]"===v?"object with keys {"+Object.keys(e).join(", ")+"}":v,"")}}return f}var f=/\/+/g;function d(e){return(""+e).replace(f,"$&/")}var p,b,h=y,y=function(e){if(this.instancePool.length){var t=this.instancePool.pop();return this.call(t,e),t}return new this(e)},m=function(e){i(e instanceof this,"Trying to release an instance into a pool of a different type."),e.destructor(),this.instancePool.length<this.poolSize&&this.instancePool.push(e)};function v(e,t,n,r){this.result=e,this.keyPrefix=t,this.func=n,this.context=r,this.count=0}function g(e,t,n){var o,i,c=e.result,u=e.keyPrefix,l=e.func,s=e.context,f=l.call(s,t,e.count++);Array.isArray(f)?O(f,c,n,a.thatReturnsArgument):null!=f&&(r.isValidElement(f)&&(o=f,i=u+(!f.key||t&&t.key===f.key?"":d(f.key)+"/")+n,f=r.cloneElement(o,{key:i},void 0!==o.props?o.props.children:void 0)),c.push(f))}function O(e,t,n,r,o){var a="";null!=n&&(a=d(n)+"/");var i=v.getPooled(t,a,r,o);!function(e,t,n){null==e||s(e,"",t,n)}(e,g,i),v.release(i)}v.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},p=function(e,t,n,r){if(this.instancePool.length){var o=this.instancePool.pop();return this.call(o,e,t,n,r),o}return new this(e,t,n,r)},(b=v).instancePool=[],b.getPooled=p||h,b.poolSize||(b.poolSize=10),b.release=m;e.exports=function(e){if("object"!=typeof e||!e||Array.isArray(e))return c(!1,"React.addons.createFragment only accepts a single object. Got: %s",e),e;if(r.isValidElement(e))return c(!1,"React.addons.createFragment does not accept a ReactElement without a wrapper object."),e;i(1!==e.nodeType,"React.addons.createFragment(...): Encountered an invalid child; DOM elements are not valid children of React components.");var t=[];for(var n in e)O(e[n],t,n,a.thatReturnsArgument);return t}},function(e,t,n){"use strict";e.exports=function(e,t,n,r,o,a,i,c){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[n,r,o,a,i,c],s=0;(u=new Error(t.replace(/%s/g,(function(){return l[s++]})))).name="Invariant Violation"}throw u.framesToPop=1,u}}},function(e,t,n){"use strict";var r=n(321);e.exports=r},function(e,t,n){"use strict";function r(e){return e.match(/^\{\{\//)?{type:"componentClose",value:e.replace(/\W/g,"")}:e.match(/\/\}\}$/)?{type:"componentSelfClosing",value:e.replace(/\W/g,"")}:e.match(/^\{\{/)?{type:"componentOpen",value:e.replace(/\W/g,"")}:{type:"string",value:e}}e.exports=function(e){return e.split(/(\{\{\/?\s*\w+\s*\/?\}\})/g).map(r)}},function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(37),i=n(18),c=n.n(i),u=n(5),l=n.n(u),s=(n(402),n(6)),f=["labels","isOpen","showIcon","hasValue"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var p=function(e){var t=e.labels,n=e.isOpen,i=e.showIcon,c=e.hasValue,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,f),p=l()("bwf-dropdown-button",{"is-open":n,"is-multi-line":t.length>1,"has-value":c});return Object(r.createElement)(o.Button,d({className:p,"aria-expanded":n},u),Object(r.createElement)("div",{className:"bwf-dropdown-button-labels"},t.map((function(e,t){return Object(r.createElement)("span",{key:t},Object(a.decodeEntities)(e))})),i&&Object(r.createElement)(s.a,{icon:"calender"})))};p.propTypes={labels:c.a.array.isRequired,isOpen:c.a.bool},t.a=p},,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(5),a=n.n(o),i=n(18),c=n.n(i),u=(n(111),n(297));n(418);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!=l(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=l(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==l(t)?t:t+""}function p(e,t,n){return t=b(t),function(e,t){if(t&&("object"==l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],b(e).constructor):t.apply(e,n))}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var y=function(e){function t(){return s(this,t),p(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.action,n=e.children,o=e.description,i=e.isInactive,c=e.menu,l=e.title,s=e.hideHeader,f=e.footer,d=a()("bwf-card",this.props.className,{"has-menu":!!c,"has-action":!!t,"is-inactive":!!i});return Object(r.createElement)("div",{className:d},s&&"no"==s&&(!!l||t||c)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-card-header"},!!l&&Object(r.createElement)("div",{className:"bwf-card-title-wrapper"},Object(r.createElement)("div",{className:"bwf-card-title bwf-card-header-item"},l),o&&Object(r.createElement)("div",{className:"bwf-card-description bwf-card-header-item"},o)),t&&Object(r.createElement)("div",{className:"bwf-card-action bwf-card-header-item"},t),c&&Object(r.createElement)("div",{className:"bwf-card-menu bwf-card-header-item"},c))),Object(r.createElement)(u.b,{className:"bwf-card-body"},n),f&&Object(r.createElement)("div",{className:"bwf-card-footer"},f))}}])&&f(n.prototype,o),i&&f(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(r.Component);y.propTypes={action:c.a.node,className:c.a.string,description:c.a.oneOfType([c.a.string,c.a.node]),isInactive:c.a.bool,title:c.a.oneOfType([c.a.string,c.a.node])};t.a=y},,,,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(9),i=n(5),c=n.n(i),u=n(18),l=n.n(u),s=n(2),f=(n(396),n(6)),d=n(277),p=n(279);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var O=[10,25,50,75,100],w=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=m(this,t,[e])).state={inputValue:n.props.page},n.previousPage=n.previousPage.bind(n),n.nextPage=n.nextPage.bind(n),n.onInputChange=n.onInputChange.bind(n),n.onInputBlur=n.onInputBlur.bind(n),n.perPageChange=n.perPageChange.bind(n),n.selectInputValue=n.selectInputValue.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(i=[{key:"previousPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n-1<1||r(n-1,"previous")}},{key:"nextPage",value:function(e){e.stopPropagation();var t=this.props,n=t.page,r=t.onPageChange;n+1>this.pageCount||r(n+1,"next")}},{key:"perPageChange",value:function(e){var t=this.props,n=t.onPerPageChange,r=t.onPageChange,o=t.total,a=t.page;n(parseInt(e,10));var i=Math.ceil(o/parseInt(e,10));a>i&&r(i)}},{key:"onInputChange",value:function(e){this.setState({inputValue:e.target.value})}},{key:"onInputBlur",value:function(e){var t=this.props,n=t.onPageChange,r=t.page,o=parseInt(e.target.value,10);o!==r&&Number.isFinite(o)&&o>0&&this.pageCount&&this.pageCount>=o&&n(o,"goto")}},{key:"selectInputValue",value:function(e){e.target.select()}},{key:"renderPageArrows",value:function(){var e=this.props,t=e.page,n=e.showPageArrowsLabel;if(this.pageCount<=1)return null;var i=c()("bwf-pagination-link",{"is-active":t>1}),u=c()("bwf-pagination-link",{"is-active":t<this.pageCount});return Object(r.createElement)("div",{className:"bwf-pagination-page-arrows"},n&&Object(r.createElement)("span",{className:"bwf-pagination-page-arrows-label",role:"status","aria-live":"polite"},Object(o.sprintf)(Object(o.__)("Page %d of %d","funnel-builder"),t,this.pageCount)),Object(r.createElement)("div",{className:"bwf-pagination-page-arrows-buttons"},Object(r.createElement)(a.Button,{className:i,disabled:!(t>1),onClick:this.previousPage,label:Object(o.__)("Previous Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-left",width:16})),Object(r.createElement)(a.Button,{className:u,disabled:!(t<this.pageCount),onClick:this.nextPage,label:Object(o.__)("Next Page","funnel-builder")},Object(r.createElement)(f.a,{icon:"arrow-right",width:16,color:"#0073AA"}))))}},{key:"renderPerPagePicker",value:function(){var e,t=O.map((function(e){return{key:e.toString(),label:e.toString()}}));return Object(r.createElement)("div",{className:"bwf-pagination-per-page-picker"},Object(r.createElement)(d.b,{selected:null===(e=this.props.perPage)||void 0===e?void 0:e.toString(),onChange:this.perPageChange,options:t,labelPosition:"side"}),Object(r.createElement)("label",{className:"bwf-pagination-per-page-picker__label"},Object(o.__)("Per Page","funnel-builder")))}},{key:"render",value:function(){var e=this.props,t=e.total,n=e.perPage,o=e.className,a=e.showPerPagePicker;this.pageCount=Math.ceil(t/n);var i=c()("bwf-pagination",o);return this.pageCount<=1?t>O[0]&&Object(r.createElement)("div",{className:i},this.renderPerPagePicker())||null:Object(r.createElement)("div",{className:i},this.renderPageArrows(),a&&this.renderPerPagePicker())}}])&&h(n.prototype,i),u&&h(n,u),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,i,u}(r.Component);w.propTypes={page:l.a.number.isRequired,onPageChange:l.a.func,perPage:l.a.number.isRequired,onPerPageChange:l.a.func,total:l.a.oneOfType([l.a.number,l.a.string]).isRequired,className:l.a.string,showPagePicker:l.a.bool,showPerPagePicker:l.a.bool,showPageArrowsLabel:l.a.bool};var j={onPageChange:s.noop,onPerPageChange:s.noop,showPagePicker:!1,showPerPagePicker:!0,showPageArrowsLabel:!0};t.a=Object(p.a)(w,j)},,function(e,t,n){var r=n(444),o=n(580),a=n(581),i=n(582),c=n(583),u=n(584);function l(e){var t=this.__data__=new r(e);this.size=t.size}l.prototype.clear=o,l.prototype.delete=a,l.prototype.get=i,l.prototype.has=c,l.prototype.set=u,e.exports=l},function(e,t,n){var r=n(382),o=n(352),a=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var i=e[t];a.call(e,t)&&o(i,n)&&(void 0!==n||t in e)||r(e,t,n)}},function(e,t,n){var r=n(475);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},function(e,t,n){var r=n(748)(Object.getPrototypeOf,Object);e.exports=r},function(e,t,n){var r=n(431),o=n(605)(r);e.exports=o},function(e,t,n){var r=n(447),o=n(404);e.exports=function(e,t){for(var n=0,a=(t=r(t,e)).length;null!=e&&n<a;)e=e[o(t[n++])];return n&&n==a?e:void 0}},function(e,t,n){var r=n(323),o=n(505),a=n(506);e.exports=function(e,t){return a(o(e,t,r),e+"")}},function(e,t,n){var r=n(352),o=n(318),a=n(445),i=n(298);e.exports=function(e,t,n){if(!i(n))return!1;var c=typeof t;return!!("number"==c?o(n)&&a(t,n.length):"string"==c&&t in n)&&r(n[t],e)}},function(e,t,n){"use strict";var r=n(278);e.exports={longestPath:function(e){var t={};r.forEach(e.sources(),(function n(o){var a=e.node(o);if(r.has(t,o))return a.rank;t[o]=!0;var i=r.min(r.map(e.outEdges(o),(function(t){return n(t.w)-e.edge(t).minlen})));return i!==Number.POSITIVE_INFINITY&&null!=i||(i=0),a.rank=i}))},slack:function(e,t){return e.node(t.w).rank-e.node(t.v).rank-e.edge(t).minlen}}},,,,,,,,function(e,t,n){},,,,,function(e,t,n){"use strict";n.d(t,"c",(function(){return f})),n.d(t,"b",(function(){return b})),n.d(t,"a",(function(){return h}));var r=n(0),o=n(327),a=n(4),i=n(2),c=n(443),u=n(5),l=n.n(u),s={image:c.a},f=function(e,t,n,a){return e.map((function(e,c){return"richeditor"===e.type&&(e.openMergeTagModal=a,e.id="richeditor-".concat(c),e.toolbar="bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",e.quicktags=!0),Object(r.createElement)(r.Fragment,{key:c},(Object(i.isEmpty)(e.toggler)||d(t,e.toggler,e))&&Object(r.createElement)(o.a,{input:e,formProps:n(e.key),values:t,customMapField:s}))}))},d=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var o=0;o<r.length;o++)if(t.value.indexOf(r[o])>-1){n=!0;break}}else Object(a.v)(r)==Object(a.v)(t.value)&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n},p=function(e,t){if(e.selectors&&e.stylekey&&!Object(i.isEmpty)(e.value)){var n,r=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,o="".concat(e.stylekey,":").concat(e.value).concat(null!==(n=null==e?void 0:e.styleUnit)&&void 0!==n?n:"",";");-1!==t.search("".concat(r,"{"))?t=t.replace("".concat(r,"{"),"".concat(r,"{").concat(o)):t+="".concat(r,"{").concat(o,"}")}return t},b=function(e){return new Promise((function(t,n){var r="";e.forEach((function(e){switch(e.type){case"text":if(e.selectors){var t=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(t).html(e.value)}break;case"richtext":case"richeditor":case"textarea":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;jQuery(n).html(e.value)}break;case"label":break;case"toggle":case"checkbox":if(e.selectors){var o=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;1==e.value||"true"==e.value?e.contentClass?jQuery(o).addClass(e.contentClass):jQuery(o).show():e.contentClass?jQuery(o).removeClass(e.contentClass):jQuery(o).hide()}break;case"select":if(e.selectors){var a=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;e.value&&Object(i.isArray)(e.allClasses)?(jQuery(a).removeClass(e.allClasses),jQuery(a).addClass(e.value)):r=p(e,r)}break;case"color":if(e.selectors){var c=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,u="".concat(e.stylekey,":").concat(e.value,";");r+="".concat(c,"{").concat(u,"}")}if(e.isHover&&e.hoverSelectors){var l=Array.isArray(e.hoverSelectors)?e.hoverSelectors.toString():e.hoverSelectors,s="".concat(e.stylekey,":").concat(e.hoverVal,";");r+="".concat(l,"{").concat(s,"}")}break;case"dimension-control":if(e.selectors){var f=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,d="".concat(e.stylekey,":").concat(e.value.toString().replace(/ /g,"px ")).concat(null==e?void 0:e.styleUnit,";");r+="".concat(f,"{").concat(d,"}"),r+="".concat(f,"{").concat(d,"}")}break;case"box-shadow":if(e.selectors){var b=e.value,h=b.h_offset,y=b.v_offset,m=b.blur,v=b.spread,g=b.color,O=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if(!(Object(i.isEmpty)(h)||Object(i.isEmpty)(y)||Object(i.isEmpty)(m)||Object(i.isEmpty)(v)||Object(i.isEmpty)(g))){var w="".concat(e.stylekey,":").concat(h,"px ").concat(y,"px ").concat(m,"px ").concat(v,"px ").concat(g,";");r+="".concat(O,"{").concat(w,"}")}}break;case"image":if(e.selectors){var j,E,_,S,x,k,P=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type||"custom"===e.value.type&&Object(i.isEmpty)(null==e||null===(j=e.value)||void 0===j?void 0:j.custom_url))if(jQuery(P+" img").length)jQuery(P+" img").attr("src",null==e||null===(x=e.value)||void 0===x?void 0:x.image_url);else jQuery(P).find("svg").remove(),jQuery(P).append('<img src="'+(null==e||null===(k=e.value)||void 0===k?void 0:k.image_url)+'" alt="order bump" />');else if(Object(i.isEmpty)(null==e||null===(E=e.value)||void 0===E?void 0:E.custom_url))jQuery(P+" img").attr("src","").attr("srcset","");else{var C,N;if(jQuery(P+" img").length)jQuery(P+" img").attr("src",null==e||null===(C=e.value)||void 0===C?void 0:C.custom_url).attr("srcset","");else jQuery(P).find("svg").remove(),jQuery(P).append('<img src="'+(null==e||null===(N=e.value)||void 0===N?void 0:N.custom_url)+'" alt="order bump" />').attr("srcset","")}if(e.alignmentSelectors){var T,D,I=Array.isArray(e.alignmentSelectors)?e.alignmentSelectors.toString():e.alignmentSelectors,A=null!==(T=null==e||null===(D=e.value)||void 0===D?void 0:D.position)&&void 0!==T?T:"left";if(null!=e&&e.alignmentClassList){var M=Object.values(null==e?void 0:e.alignmentClassList),L=null==e?void 0:e.alignmentClassList[A];jQuery(I).removeClass(M).addClass(L)}}var R=null!==(_=null==e||null===(S=e.value)||void 0===S?void 0:S.width)&&void 0!==_?_:"100";R&&(r+="".concat(P,"{max-width: ").concat(R,"px;}"))}break;default:r=p(e,r)}})),t(r)}))},h=function(e){var t=e.index,n=void 0===t?0:t;return Object(r.createElement)("div",{className:l()("bwf-p-20 bwf-border-1 bwf-rounded-6",{"bwf-mt-16":0!==n||1!==n}),style:{background:"#ffffff"}},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-100 "}),Object(r.createElement)("div",{className:"bwf-flex bwf--column bwf--align-start",style:{width:"100%"}},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-210 bwf-h-15 bwf-mb-10"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-12 bwf-mb-5"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-150 bwf-h-12 bwf-mb-5"})),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-mt-20"})))}},function(e,t,n){},,,,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(18),i=n.n(a),c=n(344);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var l=["numberOfRows"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return(t=y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,y(r.key),r)}}function y(e){var t=function(e,t){if("object"!=u(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==u(t)?t:t+""}function m(e,t,n){return t=v(t),function(e,t){if(t&&("object"==u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],v(e).constructor):t.apply(e,n))}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var O=function(e){function t(){return b(this,t),m(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(t,e),n=t,(a=[{key:"render",value:function(){var e=this,t=this.props,n=t.numberOfRows,a=void 0===n?5:n,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,l),u=Object(o.range)(a).map((function(){return e.props.headers.map((function(){return{display:Object(r.createElement)("span",{className:"is-placeholder"})}}))})),f=this.props.headers.map((function(e){return d(d({},e),{},{label:Object(r.createElement)("span",{className:"is-placeholder"})})}));return Object(r.createElement)(c.a,s({ariaHidden:!0,classNames:"is-loading",rows:u},i,{headers:f}))}}])&&h(n.prototype,a),i&&h(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,i}(r.Component);O.propTypes={query:i.a.object,headers:i.a.arrayOf(i.a.shape({hiddenByDefault:i.a.bool,defaultSort:i.a.bool,isSortable:i.a.bool,key:i.a.string,label:i.a.node,required:i.a.bool})),numberOfRows:i.a.number},t.a=O},,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){"use strict";var r=n(0),o=n(2),a=n(18),i=n.n(a),c=n(5),u=n.n(c),l=(n(541),n(337)),s=n(1),f=n(279);function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function b(){b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(r||[]);return o(i,"_invoke",{value:k(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",h="completed",m={};function v(){}function g(){}function O(){}var w={};l(w,i,(function(){return this}));var j=Object.getPrototypeOf,E=j&&j(j(D([])));E&&E!==n&&r.call(E,i)&&(w=E);var _=O.prototype=v.prototype=Object.create(w);function S(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==y(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function k(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=P(c,r);if(u){if(u===m)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=h,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?h:"suspendedYield",l.arg===m)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=h,r.method="throw",r.arg=l.arg)}}}function P(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,P(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),m;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,m;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,m):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(y(t)+" is not iterable")}return g.prototype=O,o(_,"constructor",{value:O,configurable:!0}),o(O,"constructor",{value:g,configurable:!0}),g.displayName=l(O,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,l(e,u,"GeneratorFunction")),e.prototype=Object.create(_),e},t.awrap=function(e){return{__await:e}},S(x.prototype),l(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},S(_),l(_,u,"Generator"),l(_,i,(function(){return this})),l(_,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),m}},t}function h(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w(r.key),r)}}function v(e,t,n){return t=g(t),function(e,t){if(t&&("object"==y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],g(e).constructor):t.apply(e,n))}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t){return(O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(e,t){if("object"!=y(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==y(t)?t:t+""}var j=function(e){function t(e){var n,r,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=v(this,t,[e]),r=n,a=!0,(o=w(o="mounted"))in r?Object.defineProperty(r,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[o]=a,n.state={options:[]},n.appendFreeTextSearch=n.appendFreeTextSearch.bind(n),n.fetchOptions=n.fetchOptions.bind(n),n.updateSelected=n.updateSelected.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(t,e),n=t,(o=[{key:"getAutocompleter",value:function(){return this.props.autocompleter&&"object"===y(this.props.autocompleter)?this.props.autocompleter:{}}},{key:"getFormattedOptions",value:function(e,t){var n=this.getAutocompleter(),r=[];return e.forEach((function(e){var o={key:n.getOptionIdentifier(e),label:n.getOptionLabel(e,t),keywords:n.getOptionKeywords(e).filter(Boolean),value:e};r.push(o)})),r}},{key:"fetchOptions",value:function(e,t){var n=this;return t?this.getAutocompleter().options(t,this.props.searchHelper).then(function(){var e,r=(e=b().mark((function e(r){var o;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.mounted){e.next=4;break}return o=n.getFormattedOptions(r,t),n.setState({options:o}),e.abrupt("return",o);case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){h(a,r,o,i,c,"next",e)}function c(e){h(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}()):[]}},{key:"updateSelected",value:function(e){var t=this.props.onChange,n=this.getAutocompleter();t(e.map((function(e){return e.value?n.getOptionCompletion(e.value):e})))}},{key:"appendFreeTextSearch",value:function(e,t){var n=this.props,r=n.allowFreeTextSearch,o=n.emptySearchText,a=void 0===o?Object(s.__)("Not Found","funnel-builder"):o;if(!t||!t.length)return[];if(!r)return e.length>0?e:[{label:a,key:"",notFound:!0}];if(!r)return e;var i=this.getAutocompleter();return[].concat(d(i.getFreeTextOptions(t,e)),d(e))}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"render",value:function(){var e=this.getAutocompleter(),t=this.props,n=t.className,o=t.inlineTags,a=t.placeholder,i=t.selected,c=t.showClearButton,s=t.staticResults,f=t.disabled,d=(t.multiple,this.state.options),p=e.inputType?e.inputType:"text";return Object(r.createElement)("div",null,Object(r.createElement)(l.a,{className:u()("bwf-search",n,{"is-static-results":s}),disabled:f,hideBeforeSearch:!0,inlineTags:o,isSearchable:!0,label:a,getSearchExpression:e.getSearchExpression,multiple:!0,placeholder:a,onChange:this.updateSelected,onFilter:this.appendFreeTextSearch,onSearch:this.fetchOptions,options:d,remove:this.props.onRemoveTag,searchDebounceTime:500,searchInputType:p,selected:i,showClearButton:c,bwfMaintainSingleTerm:this.props.bwfMaintainSingleTerm}))}}])&&m(n.prototype,o),a&&m(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);j.propTypes={allowFreeTextSearch:i.a.bool,className:i.a.string,onChange:i.a.func,autocompleter:i.a.object,placeholder:i.a.string,selected:i.a.arrayOf(i.a.shape({key:i.a.oneOfType([i.a.number,i.a.string]).isRequired,label:i.a.string})),inlineTags:i.a.bool,showClearButton:i.a.bool,staticResults:i.a.bool,disabled:i.a.bool,bwfMaintainSingleTerm:i.a.bool,searchHelper:i.a.object};var E={allowFreeTextSearch:!1,onChange:o.noop,selected:[],inlineTags:!1,showClearButton:!1,staticResults:!1,disabled:!1,bwfMaintainSingleTerm:!1,searchHelper:{}};t.a=Object(f.a)(j,E)},function(e,t,n){"use strict";var r=n(0),o=n(9),a=n(1),i=n(2),c=(n(542),n(22));function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.pageUrl,n=e.onclose,l=e.title,s=e.updateDetail,f=e.isLoading,d=e.pageUrlSlug,p=u(Object(r.useState)(l),2),b=p[0],h=p[1],y=u(Object(r.useState)(d),2),m=y[0],v=y[1],g=u(Object(r.useState)(""),2),O=g[0],w=g[1],j=Object(i.isEmpty)(null==b?void 0:b.trim())||Object(i.isEmpty)(null==m?void 0:m.trim()),E=Object(r.useRef)();return Object(r.useEffect)((function(){var e=null==t?void 0:t.split("/");E.current=e.slice(0,Object(i.isEmpty)(e[e.length-1])?-2:-1).join("/"),w(t)}),[t]),Object(r.createElement)(o.Modal,{title:Object(a.__)("Edit Details","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-small bwf-edit-detail-modal",onRequestClose:function(){return n()},isDismissible:!0,shouldCloseOnClickOutside:!0},Object(r.createElement)("label",{id:"required"},Object(a.__)("Name","funnel-builder")),Object(r.createElement)(o.TextControl,{value:b,onChange:function(e){h(e)},className:Object(i.size)(null==b?void 0:b.trim())?"":"bwf-error-border",onKeyDown:function(e){if("Enter"===e.key){if(j)return;s(b,m)}}}),Object(i.size)(null==b?void 0:b.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Name is required","funnel-builder")),Object(r.createElement)("label",{id:"required",className:"bwf-mt-16"},Object(a.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(o.TextControl,{value:m,onChange:function(e){v(e.replace(/\s+/g,"-").toLocaleLowerCase()),w(E.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},className:Object(i.size)(null==m?void 0:m.trim())?"":"bwf-error-border"}),Object(i.size)(null==m?void 0:m.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(a.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url"},Object(r.createElement)("label",{className:"bwf-url-title bwf-mt-16"},Object(a.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},O))),Object(r.createElement)("div",{className:"bwf-edit-detail-modal__actions"},Object(r.createElement)(c.a,{className:"bwf-modal-cancel-btn",onClick:n},Object(a.__)("Cancel","funnel-builder")),Object(r.createElement)(c.a,{isPrimary:!0,onClick:function(){return s(b,m)},disabled:j,isBusy:f,className:j?"bwf-no-ripple":""},Object(a.__)("Update","funnel-builder"))))}},function(e,t,n){"use strict";var r=n(293);e.exports=o;function o(e){this._isDirected=!r.has(e,"directed")||e.directed,this._isMultigraph=!!r.has(e,"multigraph")&&e.multigraph,this._isCompound=!!r.has(e,"compound")&&e.compound,this._label=void 0,this._defaultNodeLabelFn=r.constant(void 0),this._defaultEdgeLabelFn=r.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function a(e,t){e[t]?e[t]++:e[t]=1}function i(e,t){--e[t]||delete e[t]}function c(e,t,n,o){var a=""+t,i=""+n;if(!e&&a>i){var c=a;a=i,i=c}return a+""+i+""+(r.isUndefined(o)?"\0":o)}function u(e,t,n,r){var o=""+t,a=""+n;if(!e&&o>a){var i=o;o=a,a=i}var c={v:o,w:a};return r&&(c.name=r),c}function l(e,t){return c(e,t.v,t.w,t.name)}o.prototype._nodeCount=0,o.prototype._edgeCount=0,o.prototype.isDirected=function(){return this._isDirected},o.prototype.isMultigraph=function(){return this._isMultigraph},o.prototype.isCompound=function(){return this._isCompound},o.prototype.setGraph=function(e){return this._label=e,this},o.prototype.graph=function(){return this._label},o.prototype.setDefaultNodeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultNodeLabelFn=e,this},o.prototype.nodeCount=function(){return this._nodeCount},o.prototype.nodes=function(){return r.keys(this._nodes)},o.prototype.sources=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._in[t])}))},o.prototype.sinks=function(){var e=this;return r.filter(this.nodes(),(function(t){return r.isEmpty(e._out[t])}))},o.prototype.setNodes=function(e,t){var n=arguments,o=this;return r.each(e,(function(e){n.length>1?o.setNode(e,t):o.setNode(e)})),this},o.prototype.setNode=function(e,t){return r.has(this._nodes,e)?(arguments.length>1&&(this._nodes[e]=t),this):(this._nodes[e]=arguments.length>1?t:this._defaultNodeLabelFn(e),this._isCompound&&(this._parent[e]="\0",this._children[e]={},this._children["\0"][e]=!0),this._in[e]={},this._preds[e]={},this._out[e]={},this._sucs[e]={},++this._nodeCount,this)},o.prototype.node=function(e){return this._nodes[e]},o.prototype.hasNode=function(e){return r.has(this._nodes,e)},o.prototype.removeNode=function(e){var t=this;if(r.has(this._nodes,e)){var n=function(e){t.removeEdge(t._edgeObjs[e])};delete this._nodes[e],this._isCompound&&(this._removeFromParentsChildList(e),delete this._parent[e],r.each(this.children(e),(function(e){t.setParent(e)})),delete this._children[e]),r.each(r.keys(this._in[e]),n),delete this._in[e],delete this._preds[e],r.each(r.keys(this._out[e]),n),delete this._out[e],delete this._sucs[e],--this._nodeCount}return this},o.prototype.setParent=function(e,t){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(r.isUndefined(t))t="\0";else{for(var n=t+="";!r.isUndefined(n);n=this.parent(n))if(n===e)throw new Error("Setting "+t+" as parent of "+e+" would create a cycle");this.setNode(t)}return this.setNode(e),this._removeFromParentsChildList(e),this._parent[e]=t,this._children[t][e]=!0,this},o.prototype._removeFromParentsChildList=function(e){delete this._children[this._parent[e]][e]},o.prototype.parent=function(e){if(this._isCompound){var t=this._parent[e];if("\0"!==t)return t}},o.prototype.children=function(e){if(r.isUndefined(e)&&(e="\0"),this._isCompound){var t=this._children[e];if(t)return r.keys(t)}else{if("\0"===e)return this.nodes();if(this.hasNode(e))return[]}},o.prototype.predecessors=function(e){var t=this._preds[e];if(t)return r.keys(t)},o.prototype.successors=function(e){var t=this._sucs[e];if(t)return r.keys(t)},o.prototype.neighbors=function(e){var t=this.predecessors(e);if(t)return r.union(t,this.successors(e))},o.prototype.isLeaf=function(e){return 0===(this.isDirected()?this.successors(e):this.neighbors(e)).length},o.prototype.filterNodes=function(e){var t=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});t.setGraph(this.graph());var n=this;r.each(this._nodes,(function(n,r){e(r)&&t.setNode(r,n)})),r.each(this._edgeObjs,(function(e){t.hasNode(e.v)&&t.hasNode(e.w)&&t.setEdge(e,n.edge(e))}));var o={};return this._isCompound&&r.each(t.nodes(),(function(e){t.setParent(e,function e(r){var a=n.parent(r);return void 0===a||t.hasNode(a)?(o[r]=a,a):a in o?o[a]:e(a)}(e))})),t},o.prototype.setDefaultEdgeLabel=function(e){return r.isFunction(e)||(e=r.constant(e)),this._defaultEdgeLabelFn=e,this},o.prototype.edgeCount=function(){return this._edgeCount},o.prototype.edges=function(){return r.values(this._edgeObjs)},o.prototype.setPath=function(e,t){var n=this,o=arguments;return r.reduce(e,(function(e,r){return o.length>1?n.setEdge(e,r,t):n.setEdge(e,r),r})),this},o.prototype.setEdge=function(){var e,t,n,o,i=!1,l=arguments[0];"object"==typeof l&&null!==l&&"v"in l?(e=l.v,t=l.w,n=l.name,2===arguments.length&&(o=arguments[1],i=!0)):(e=l,t=arguments[1],n=arguments[3],arguments.length>2&&(o=arguments[2],i=!0)),e=""+e,t=""+t,r.isUndefined(n)||(n=""+n);var s=c(this._isDirected,e,t,n);if(r.has(this._edgeLabels,s))return i&&(this._edgeLabels[s]=o),this;if(!r.isUndefined(n)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(e),this.setNode(t),this._edgeLabels[s]=i?o:this._defaultEdgeLabelFn(e,t,n);var f=u(this._isDirected,e,t,n);return e=f.v,t=f.w,Object.freeze(f),this._edgeObjs[s]=f,a(this._preds[t],e),a(this._sucs[e],t),this._in[t][s]=f,this._out[e][s]=f,this._edgeCount++,this},o.prototype.edge=function(e,t,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return this._edgeLabels[r]},o.prototype.hasEdge=function(e,t,n){var o=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n);return r.has(this._edgeLabels,o)},o.prototype.removeEdge=function(e,t,n){var r=1===arguments.length?l(this._isDirected,arguments[0]):c(this._isDirected,e,t,n),o=this._edgeObjs[r];return o&&(e=o.v,t=o.w,delete this._edgeLabels[r],delete this._edgeObjs[r],i(this._preds[t],e),i(this._sucs[e],t),delete this._in[t][r],delete this._out[e][r],this._edgeCount--),this},o.prototype.inEdges=function(e,t){var n=this._in[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.v===t})):o}},o.prototype.outEdges=function(e,t){var n=this._out[e];if(n){var o=r.values(n);return t?r.filter(o,(function(e){return e.w===t})):o}},o.prototype.nodeEdges=function(e,t){var n=this.inEdges(e,t);if(n)return n.concat(this.outEdges(e,t))}},,function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}},,function(e,t,n){var r=n(480),o=n(481),a=Object.prototype.propertyIsEnumerable,i=Object.getOwnPropertySymbols,c=i?function(e){return null==e?[]:(e=Object(e),r(i(e),(function(t){return a.call(e,t)})))}:o;e.exports=c},function(e,t){e.exports=function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}},function(e,t,n){var r=n(485);e.exports=function(e){var t=new e.constructor(e.byteLength);return new r(t).set(new r(e)),t}},function(e,t){e.exports=function(e){return function(){return e}}},function(e,t,n){var r=n(432),o=n(313);e.exports=function(e,t){return e&&r(e,t,o)}},function(e,t,n){var r=n(604)();e.exports=r},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},function(e,t,n){var r=n(428),o=n(632);e.exports=function e(t,n,a,i,c){var u=-1,l=t.length;for(a||(a=o),c||(c=[]);++u<l;){var s=t[u];n>0&&a(s)?n>1?e(s,n-1,a,i,c):r(c,s):i||(c[c.length]=s)}return c}},function(e,t,n){var r=n(395);e.exports=function(e,t,n){for(var o=-1,a=e.length;++o<a;){var i=e[o],c=t(i);if(null!=c&&(void 0===u?c==c&&!r(c):n(c,u)))var u=c,l=i}return l}},,,,,,,,function(e,t,n){"use strict";var r=n(0),o=n(5),a=n.n(o),i=n(2),c=n(9),u=n(52),l=n(1),s=n(277),f=(n(460),n(6));function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=[{label:Object(l.__)("Product","funnel-builder"),value:"product"},{label:Object(l.__)("Custom","funnel-builder"),value:"custom"}],g=function(e){var t,n=e.onChange,o=e.value,d=e.label,p=e.className,h=Object(u.useInstanceId)(g),m="inspector-bump-image-".concat(h),O=a()("components-bump-image",p),w=y(Object(r.useState)(o.type),2),j=w[0],E=w[1],_=y(Object(r.useState)(o.custom_url),2),S=_[0],x=_[1],k=function(e){n(e)},P=function(e,n){e.preventDefault(),t||(t=wp.media({title:"Media",library:{uploadedTo:console.log(wp.media.view.settings.post.id),type:"image"},button:{text:"Use this media"},multiple:!1})).on("select",(function(){var e=t.state().get("selection").first().toJSON();k(b(b({},o),{},{custom_url:e.url,type:"custom"})),x(e.url)})),t.open()};return Object(r.createElement)(c.BaseControl,{label:d,className:O,id:m},Object(r.createElement)("div",{className:"component-bump-image-wrap"},!Object(i.isEmpty)(v)&&Object(r.createElement)(c.ButtonGroup,{className:"bwf-button-group bwf-group-tab"},v.map((function(e,t){return Object(r.createElement)(c.Button,{key:t,variant:e.value===j?"primary":"",onClick:function(){E(e.value),"product"===e.value?(delete o.custom_url,k(b(b({},o),{},{type:e.value}))):Object(i.isEmpty)(S)||k(b(b({},o),{},{type:e.value,custom_url:S}))}},e.label)}))),Object(r.createElement)("div",{className:"bwf-bump-image-field"},Object(r.createElement)("div",{className:"bwf-bump-img-field-container"},"product"===j?Object(r.createElement)("img",{src:null==o?void 0:o.image_url,alt:"Product Image"}):Object(r.createElement)("div",{className:"bwf-bump-custom-img"},S?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("img",{src:S,alt:"Product Image"}),Object(r.createElement)("div",{className:"bwf-media-actions"},Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-delete",onClick:function(){x(""),k(b(b({},o),{},{type:"product",custom_url:""}))}},Object(r.createElement)(f.a,{icon:"delete",size:"16"})),Object(r.createElement)("span",{className:"bwf-media-trigger bwf-trigger-edit",onClick:P},Object(r.createElement)(f.a,{icon:"edit",size:"16"})))):Object(r.createElement)("div",{className:"bwf-media-uploader-wrap",onClick:P},Object(r.createElement)(f.a,{icon:"add-image",size:48}),Object(r.createElement)("div",null,Object(l.__)("Add Image","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf-bump-image-attr"},Object(r.createElement)(c.TextControl,{type:"number",label:Object(l.__)("Width (px)","funnel-builder"),max:400,value:null==o?void 0:o.width,onChange:function(e){k(b(b({},o),{},{width:e}))}}),Object(r.createElement)(s.b,{label:Object(l.__)("Image Position","funnel-builder"),options:[{label:Object(l.__)("Left","funnel-builder"),key:"left",value:"left"},{label:Object(l.__)("Right","funnel-builder"),key:"right",value:"right"},{label:Object(l.__)("Top","funnel-builder"),key:"top",value:"top"}],selected:null==o?void 0:o.position,onChange:function(e){k(b(b({},o),{},{position:e}))}})))))};t.a=g},,,,,,,,,,,,,,,,,function(e,t,n){},,,,,,,,,,,,,,function(e,t,n){var r=n(380),o=n(425),a=n(381),i=n(586),c=n(589),u=n(478),l=n(479),s=n(592),f=n(593),d=n(483),p=n(594),b=n(354),h=n(595),y=n(596),m=n(487),v=n(285),g=n(353),O=n(600),w=n(298),j=n(602),E=n(313),_=n(322),S={};S["[object Arguments]"]=S["[object Array]"]=S["[object ArrayBuffer]"]=S["[object DataView]"]=S["[object Boolean]"]=S["[object Date]"]=S["[object Float32Array]"]=S["[object Float64Array]"]=S["[object Int8Array]"]=S["[object Int16Array]"]=S["[object Int32Array]"]=S["[object Map]"]=S["[object Number]"]=S["[object Object]"]=S["[object RegExp]"]=S["[object Set]"]=S["[object String]"]=S["[object Symbol]"]=S["[object Uint8Array]"]=S["[object Uint8ClampedArray]"]=S["[object Uint16Array]"]=S["[object Uint32Array]"]=!0,S["[object Error]"]=S["[object Function]"]=S["[object WeakMap]"]=!1,e.exports=function e(t,n,x,k,P,C){var N,T=1&n,D=2&n,I=4&n;if(x&&(N=P?x(t,k,P,C):x(t)),void 0!==N)return N;if(!w(t))return t;var A=v(t);if(A){if(N=h(t),!T)return l(t,N)}else{var M=b(t),L="[object Function]"==M||"[object GeneratorFunction]"==M;if(g(t))return u(t,T);if("[object Object]"==M||"[object Arguments]"==M||L&&!P){if(N=D||L?{}:m(t),!T)return D?f(t,c(N,t)):s(t,i(N,t))}else{if(!S[M])return P?t:{};N=y(t,M,T)}}C||(C=new r);var R=C.get(t);if(R)return R;C.set(t,N),j(t)?t.forEach((function(r){N.add(e(r,n,x,r,t,C))})):O(t)&&t.forEach((function(r,o){N.set(o,e(r,n,x,o,t,C))}));var F=A?void 0:(I?D?p:d:D?_:E)(t);return o(F||t,(function(r,o){F&&(r=t[o=r]),a(N,o,e(r,n,x,o,t,C))})),N}},function(e,t,n){var r=n(461),o=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();e.exports=o},function(e,t,n){var r=n(587),o=n(426),a=n(285),i=n(353),c=n(445),u=n(403),l=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=a(e),s=!n&&o(e),f=!n&&!s&&i(e),d=!n&&!s&&!f&&u(e),p=n||s||f||d,b=p?r(e.length,String):[],h=b.length;for(var y in e)!t&&!l.call(e,y)||p&&("length"==y||f&&("offset"==y||"parent"==y)||d&&("buffer"==y||"byteLength"==y||"byteOffset"==y)||c(y,h))||b.push(y);return b}},,function(e,t,n){(function(e){var r=n(335),o=t&&!t.nodeType&&t,a=o&&"object"==typeof e&&e&&!e.nodeType&&e,i=a&&a.exports===o?r.Buffer:void 0,c=i?i.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var n=e.length,r=c?c(n):new e.constructor(n);return e.copy(r),r}}).call(this,n(588)(e))},function(e,t){e.exports=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,o=0,a=[];++n<r;){var i=e[n];t(i,n,e)&&(a[o++]=i)}return a}},function(e,t){e.exports=function(){return[]}},function(e,t,n){var r=n(428),o=n(383),a=n(427),i=n(481),c=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)r(t,a(e)),e=o(e);return t}:i;e.exports=c},function(e,t,n){var r=n(484),o=n(427),a=n(313);e.exports=function(e){return r(e,a,o)}},function(e,t,n){var r=n(428),o=n(285);e.exports=function(e,t,n){var a=t(e);return o(e)?a:r(a,n(e))}},function(e,t,n){var r=n(335).Uint8Array;e.exports=r},function(e,t,n){var r=n(429);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}},function(e,t,n){var r=n(488),o=n(383),a=n(477);e.exports=function(e){return"function"!=typeof e.constructor||a(e)?{}:r(o(e))}},function(e,t,n){var r=n(298),o=Object.create,a=function(){function e(){}return function(t){if(!r(t))return{};if(o)return o(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();e.exports=a},function(e,t,n){e.exports=n(490)},function(e,t,n){var r=n(425),o=n(384),a=n(491),i=n(285);e.exports=function(e,t){return(i(e)?r:o)(e,a(t))}},function(e,t,n){var r=n(323);e.exports=function(e){return"function"==typeof e?e:r}},function(e,t,n){var r=n(480),o=n(606),a=n(309),i=n(285);e.exports=function(e,t){return(i(e)?r:o)(e,a(t,3))}},function(e,t,n){var r=n(609),o=n(311);e.exports=function e(t,n,a,i,c){return t===n||(null==t||null==n||!o(t)&&!o(n)?t!=t&&n!=n:r(t,n,a,i,e,c))}},function(e,t,n){var r=n(495),o=n(612),a=n(496);e.exports=function(e,t,n,i,c,u){var l=1&n,s=e.length,f=t.length;if(s!=f&&!(l&&f>s))return!1;var d=u.get(e),p=u.get(t);if(d&&p)return d==t&&p==e;var b=-1,h=!0,y=2&n?new r:void 0;for(u.set(e,t),u.set(t,e);++b<s;){var m=e[b],v=t[b];if(i)var g=l?i(v,m,b,t,e,u):i(m,v,b,e,t,u);if(void 0!==g){if(g)continue;h=!1;break}if(y){if(!o(t,(function(e,t){if(!a(y,t)&&(m===e||c(m,e,n,i,u)))return y.push(t)}))){h=!1;break}}else if(m!==v&&!c(m,v,n,i,u)){h=!1;break}}return u.delete(e),u.delete(t),h}},function(e,t,n){var r=n(543),o=n(610),a=n(611);function i(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}i.prototype.add=i.prototype.push=o,i.prototype.has=a,e.exports=i},function(e,t){e.exports=function(e,t){return e.has(t)}},function(e,t,n){var r=n(298);e.exports=function(e){return e==e&&!r(e)}},function(e,t){e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},function(e,t,n){var r=n(619),o=n(751);e.exports=function(e,t){return null!=e&&o(e,t,r)}},function(e,t){e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},function(e,t){e.exports=function(e){return void 0===e}},function(e,t,n){var r=n(448),o=n(309),a=n(503),i=n(285);e.exports=function(e,t){return(i(e)?r:a)(e,o(t,3))}},function(e,t,n){var r=n(384),o=n(318);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,(function(e,r,o){a[++n]=t(e,r,o)})),a}},function(e,t,n){var r=n(622),o=n(384),a=n(309),i=n(623),c=n(285);e.exports=function(e,t,n){var u=c(e)?r:i,l=arguments.length<3;return u(e,a(t,4),n,l,o)}},function(e,t,n){var r=n(633),o=Math.max;e.exports=function(e,t,n){return t=o(void 0===t?e.length-1:t,0),function(){for(var a=arguments,i=-1,c=o(a.length-t,0),u=Array(c);++i<c;)u[i]=a[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=a[i];return l[t]=n(u),r(e,this,l)}}},function(e,t,n){var r=n(634),o=n(635)(r);e.exports=o},function(e,t){e.exports=function(e,t,n,r){for(var o=e.length,a=n+(r?1:-1);r?a--:++a<o;)if(t(e[a],a,e))return a;return-1}},function(e,t,n){var r=n(318),o=n(311);e.exports=function(e){return o(e)&&r(e)}},function(e,t,n){var r=n(644),o=n(313);e.exports=function(e){return null==e?[]:r(e,o(e))}},function(e,t,n){var r=n(293),o=n(511);e.exports=function(e,t,n,r){return function(e,t,n,r){var a,i,c={},u=new o,l=function(e){var t=e.v!==a?e.v:e.w,r=c[t],o=n(e),l=i.distance+o;if(o<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+e+" Weight: "+o);l<r.distance&&(r.distance=l,r.predecessor=a,u.decrease(t,l))};e.nodes().forEach((function(e){var n=e===t?0:Number.POSITIVE_INFINITY;c[e]={distance:n},u.add(e,n)}));for(;u.size()>0&&(a=u.removeMin(),(i=c[a]).distance!==Number.POSITIVE_INFINITY);)r(a).forEach(l);return c}(e,String(t),n||a,r||function(t){return e.outEdges(t)})};var a=r.constant(1)},function(e,t,n){var r=n(293);function o(){this._arr=[],this._keyIndices={}}e.exports=o,o.prototype.size=function(){return this._arr.length},o.prototype.keys=function(){return this._arr.map((function(e){return e.key}))},o.prototype.has=function(e){return r.has(this._keyIndices,e)},o.prototype.priority=function(e){var t=this._keyIndices[e];if(void 0!==t)return this._arr[t].priority},o.prototype.min=function(){if(0===this.size())throw new Error("Queue underflow");return this._arr[0].key},o.prototype.add=function(e,t){var n=this._keyIndices;if(e=String(e),!r.has(n,e)){var o=this._arr,a=o.length;return n[e]=a,o.push({key:e,priority:t}),this._decrease(a),!0}return!1},o.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var e=this._arr.pop();return delete this._keyIndices[e.key],this._heapify(0),e.key},o.prototype.decrease=function(e,t){var n=this._keyIndices[e];if(t>this._arr[n].priority)throw new Error("New priority is greater than current priority. Key: "+e+" Old: "+this._arr[n].priority+" New: "+t);this._arr[n].priority=t,this._decrease(n)},o.prototype._heapify=function(e){var t=this._arr,n=2*e,r=n+1,o=e;n<t.length&&(o=t[n].priority<t[o].priority?n:o,r<t.length&&(o=t[r].priority<t[o].priority?r:o),o!==e&&(this._swap(e,o),this._heapify(o)))},o.prototype._decrease=function(e){for(var t,n=this._arr,r=n[e].priority;0!==e&&!(n[t=e>>1].priority<r);)this._swap(e,t),e=t},o.prototype._swap=function(e,t){var n=this._arr,r=this._keyIndices,o=n[e],a=n[t];n[e]=a,n[t]=o,r[a.key]=e,r[o.key]=t}},function(e,t,n){var r=n(293);e.exports=function(e){var t=0,n=[],o={},a=[];return e.nodes().forEach((function(i){r.has(o,i)||function i(c){var u=o[c]={onStack:!0,lowlink:t,index:t++};if(n.push(c),e.successors(c).forEach((function(e){r.has(o,e)?o[e].onStack&&(u.lowlink=Math.min(u.lowlink,o[e].index)):(i(e),u.lowlink=Math.min(u.lowlink,o[e].lowlink))})),u.lowlink===u.index){var l,s=[];do{l=n.pop(),o[l].onStack=!1,s.push(l)}while(c!==l);a.push(s)}}(i)})),a}},function(e,t,n){var r=n(293);function o(e){var t={},n={},o=[];if(r.each(e.sinks(),(function i(c){if(r.has(n,c))throw new a;r.has(t,c)||(n[c]=!0,t[c]=!0,r.each(e.predecessors(c),i),delete n[c],o.push(c))})),r.size(t)!==e.nodeCount())throw new a;return o}function a(){}e.exports=o,o.CycleException=a,a.prototype=new Error},function(e,t,n){var r=n(293);e.exports=function(e,t,n){r.isArray(t)||(t=[t]);var o=(e.isDirected()?e.successors:e.neighbors).bind(e),a=[],i={};return r.each(t,(function(t){if(!e.hasNode(t))throw new Error("Graph does not have node: "+t);!function e(t,n,o,a,i,c){r.has(a,n)||(a[n]=!0,o||c.push(n),r.each(i(n),(function(n){e(t,n,o,a,i,c)})),o&&c.push(n))}(e,t,"post"===n,i,o,a)})),a}},function(e,t,n){var r=n(567);e.exports=function(e){return e?(e=r(e))===1/0||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}},function(e,t,n){var r=n(434);e.exports=function(e){return(null==e?0:e.length)?r(e,1):[]}},function(e,t,n){var r=n(382),o=n(352);e.exports=function(e,t,n){(void 0!==n&&!o(e[t],n)||void 0===n&&!(t in e))&&r(e,t,n)}},function(e,t){e.exports=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}},function(e,t){e.exports=function(e,t){return e<t}},function(e,t,n){"use strict";var r=n(278),o=n(300).Graph,a=n(388).slack;function i(e,t){return r.forEach(e.nodes(),(function n(o){r.forEach(t.nodeEdges(o),(function(r){var i=r.v,c=o===i?r.w:i;e.hasNode(c)||a(t,r)||(e.setNode(c,{}),e.setEdge(o,c,{}),n(c))}))})),e.nodeCount()}function c(e,t){return r.minBy(t.edges(),(function(n){if(e.hasNode(n.v)!==e.hasNode(n.w))return a(t,n)}))}function u(e,t,n){r.forEach(e.nodes(),(function(e){t.node(e).rank+=n}))}e.exports=function(e){var t,n,r=new o({directed:!1}),l=e.nodes()[0],s=e.nodeCount();r.setNode(l,{});for(;i(r,e)<s;)t=c(r,e),n=r.hasNode(t.v)?a(e,t):-a(e,t),u(r,e,n);return r}},,function(e,t,n){"use strict";var r=n(0),o=n(1),a=n(5),i=n.n(a),c=n(1196),u=n(2),l=n(559),s=n.n(l),f=n(9),d=n(1209),p=n(744),b=n(175),h=n(13),y=n(18),m=n.n(y),v=n(51);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,j(r.key),r)}}function j(e){var t=function(e,t){if("object"!=g(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==g(t)?t:t+""}function E(e,t,n){return t=_(t),function(e,t){if(t&&("object"==g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],_(e).constructor):t.apply(e,n))}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var x=function(e){function t(){return O(this,t),E(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props.height,t=void 0===e?0:e;return Object(r.createElement)("div",{"aria-hidden":"true",className:"bwf-chart-placeholder",style:{height:t}},Object(r.createElement)(v.a,{size:"xl"}))}}])&&w(n.prototype,o),a&&w(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);x.propTypes={height:m.a.number};var k=x,P=n(297),C=(n(533),n(1210)),N=n(1191);n(534);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function I(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}function A(e,t,n){return t=M(t),function(e,t){if(t&&("object"==T(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],M(e).constructor):t.apply(e,n))}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var R=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=A(this,t,[e])).chartRef=Object(r.createRef)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&L(e,t)}(t,e),n=t,(o=[{key:"componentDidMount",value:function(){this.drawUpdatedChart()}},{key:"shouldComponentUpdate",value:function(e){return this.props.className!==e.className||!Object(u.isEqual)(this.props.data,e.data)||!Object(u.isEqual)(this.props.orderedKeys,e.orderedKeys)||this.props.drawChart!==e.drawChart||this.props.height!==e.height||this.props.chartType!==e.chartType||this.props.width!==e.width||this.props.chartMeta!==e.chartMeta}},{key:"componentDidUpdate",value:function(){this.drawUpdatedChart()}},{key:"componentWillUnmount",value:function(){this.deleteChart()}},{key:"delayedScroll",value:function(){var e=this.props.tooltip;return Object(u.throttle)((function(){e&&e.hide()}),300)}},{key:"deleteChart",value:function(){Object(N.a)(this.chartRef.current).selectAll("svg").remove()}},{key:"drawUpdatedChart",value:function(){(0,this.props.drawChart)(this.getContainer())}},{key:"getContainer",value:function(){var e=this.props,t=e.className,n=e.height,r=e.width;this.deleteChart();var o=Object(N.a)(this.chartRef.current).append("svg").attr("viewBox","0 0 ".concat(r," ").concat(n)).attr("height",n).attr("width",r).attr("preserveAspectRatio","xMidYMid meet");return t&&o.attr("class","".concat(t,"__viewbox")),o.append("g")}},{key:"render",value:function(){var e=this.props.className;return Object(r.createElement)("div",{className:i()("d3-base",e),ref:this.chartRef,onScroll:this.delayedScroll()})}}])&&D(n.prototype,o),a&&D(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}R.propTypes={className:m.a.string,data:m.a.array,orderedKeys:m.a.array,tooltip:m.a.object,chartType:m.a.string};var U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.b;return"function"==typeof e?e:t(e)},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set(e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]));return B(t).filter((function(e){return"date"!==e}))},V=n(1211),H=n(1195),G=n(1202),X=n(12),K=n.n(X);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Z=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(V.a)().domain(e.filter((function(e){return e.visible})).map((function(e){return e.key}))).rangeRound([0,t.bandwidth()]).padding(n?0:.07)},Q=function(e,t){return Object(H.a)().domain([K()(e[0],"YYYY-MM-DD HH:mm").toDate(),K()(e[e.length-1],"YYYY-MM-DD HH:mm").toDate()]).rangeRound([0,t])},J=function(e){var t=function(e){var t=Number.NEGATIVE_INFINITY,n=Number.POSITIVE_INFINITY;return e.forEach((function(e){for(var r=0,o=Object.entries(e);r<o.length;r++){var a=$(o[r],2),i=a[0],c=a[1];"date"!==i&&Number.isFinite(c.value)&&c.value>t&&(t=c.value),"date"!==i&&Number.isFinite(c.value)&&c.value<n&&(n=c.value)}})),{upper:t,lower:n}}(e),n=t.lower,r=t.upper,o=function(e,t){if(!Number.isFinite(e)||!Number.isFinite(t))return 1;if(0===t&&0===e)return 1/3;if(0===e&&t>0&&t<=1)return Math.pow(10,Math.floor(Math.log10(t)))/2;var n=Math.max(-e,t),r=3*Math.pow(10,(Math.log(n)*Math.LOG10E+1|0)-2),o=Math.ceil(n/r)*r/3;return t<1&&e>-1?Math.round(4*o)/4:Math.ceil(o)}(n,r),a={lower:0,upper:0,step:o};return(Number.isFinite(n)||n<0)&&(a.lower=Math.floor(n/o)*o,a.lower===n&&0!==n&&(a.lower-=o)),(Number.isFinite(r)||r>0)&&(a.upper=o<=1?4:4*o,a.upper===r&&0!==r&&(a.upper+=o)),a},ee=n(1207),te=function(e){for(var t=[],n=1;n<=Math.floor(Math.sqrt(e));n++)e%n==0&&(t.push(n),e/n!==n&&t.push(e/n));return t.sort((function(e,t){return e-t})),t},ne=function(e,t,n,r){var o,a=function(e,t){if(e<783)return 7;if(e>=783&&e<=1130)return 12;if(e>1130&&e<=1365){if("time-comparison"===t)return 16;if("item-comparison"===t)return 12}else if(e>1365){if("time-comparison"===t)return 31;if("item-comparison"===t)return 16}return 16}(t,n);return(e.length>=63&&"day"===r||e.length>=9&&"week"===r)&&(e=(o=e).filter((function(e,t){return 0===t||K()(e).toDate().getMonth()!==K()(o[t-1]).toDate().getMonth()}))),e.length<=a||"hour"===r&&function(e){var t=K()(e[0]).toDate(),n=K()(e[e.length-1]).toDate();return t.getDate()===n.getDate()&&t.getMonth()===n.getMonth()&&t.getFullYear()===n.getFullYear()}(e)&&t>783?e:function(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e[r]);return n[0]!==e[0]&&n.unshift(e[0]),n}(e,function(e,t){for(var n=[],r=1;n.length<=3;)n=te(e.length-r),r+=1;return n.find((function(n){return e.length/n<t}))}(e,a))},re=function(e,t,n,r){var o=K()(e).toDate(),a=0!==t?n[t-1]:n[t];return a=a instanceof Date?a:K()(a).toDate(),0===t?r(o):function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new RegExp([" |,"],"g"),r=e.split(n),o=t.split(n),a=new Array,i=e.length>t.length?r:o,c=0;c<i.length;c++)r[c]!==o[c]&&a.push(o[c]);return a}(r(a),r(o)).join(" ")},oe=n(4);function ae(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ie(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ie(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e,t,n){for(var r=[],o=0;o<e;o++){var a=(o+1)/e*t,i=n?Math.round(a):a;r[r.length-1]!==i&&r.push(i)}return r},ue=function(e,t,n){return[0].concat(ae(function(e,t){if(e>=0)return[];var n=Math.ceil(-e/t);return ce(n,e,e<-1)}(e,n)),ae(function(e,t){if(e<=0)return[];var n=Math.ceil(e/t);return ce(n,e,e>1)}(t,n)))},le=function(e,t,n,r,o,a){Object(oe.w)();var i=ue(t.yScale.domain()[0],t.yScale.domain()[1],t.step),c=t.xScale.range()[1],u=o?c+r.left+r.right+35:-r.left/2-15,l=t.yMin>=0||t.yMax>0?" with-positive-ticks":"";e.append("g").attr("class","grid"+l).attr("transform","translate(0, 0)").call(Object(ee.b)(t.yScale).tickValues(i).tickSize(-c-r.left-r.right).tickFormat("")),e.append("g").attr("class","axis y-axis").attr("aria-hidden","true").attr("transform","translate("+u+", 0)").attr("text-anchor","start").call(Object(ee.b)(t.yScale).tickValues(0===t.yMax&&0===t.yMin?[i[0]]:i).tickFormat((function(e){return e>-1&&e<1&&n.yBelow1Format?n.yBelow1Format(e):a&&!a.isCurrency?n.yFormat(e):(t=n.yFormat(e),"left"===(null==(o=null!==(r=wffn_contacts_data.currency)&&void 0!==r?r:{symbol:""})?void 0:o.symbolPosition)?(null==o?void 0:o.symbol)+t:t+(null==o?void 0:o.symbol));var t,r,o})))},se=function(e,t,n,r,o,a,i){!function(e,t,n,r){var o=n.yScale.range()[0],a=ne(t.uniqueDates,n.xScale.range()[1],t.mode,t.interval);"line"!==t.chartType&&"curve-line"!==t.chartType||(a=a.map((function(e){return K()(e).toDate()}))),e.append("g").attr("class","axis").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+10,")")).call(Object(ee.a)(n.xScale).tickValues(a).tickFormat((function(e,n){return"hour"===t.interval?r.xFormat(e instanceof Date?e:K()(e).toDate()):re(e,n,a,r.xFormat)}))),"day"===t.interval&&e.append("g").attr("class","axis axis-month").attr("aria-hidden","true").attr("transform","translate(0, ".concat(o+("day"===t.interval?30:0),")")).call(Object(ee.a)(n.xScale).tickValues(a).tickFormat((function(e,t){return re(e,t,a,r.x2Format)}))),e.append("g").attr("class","pipes").attr("transform","translate(0, ".concat(o,")")).call(Object(ee.a)(n.xScale).tickValues(a).tickSize(5).tickFormat(""))}(e,t,n,r),le(e,n,r,o,a,i),e.selectAll(".domain").remove(),e.selectAll(".axis .tick line").remove()},fe=n(1102),de=n(1205);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=pe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var me=function(e,t,n,r,o,a){var i,c,l=r.yScale.range()[0],s=r.xScale.range()[1],f=(i=r.xScale,c=r.yScale,Object(de.a)().x((function(e){return i(K()(e.date).toDate())})).y((function(e){return c(e.value)}))),d=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(d.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),b=function(e,t,n,r,o){var a=n.slice().reverse();return t.map((function(n,i){var c=Object(u.first)(e.filter((function(e){return e.date===n}))),l=o(K()(n).toDate()),s=o(i>=1?K()(t[i-1]).toDate():K()(t[0]).toDate()),f=i<t.length-1?o(K()(t[i+1]).toDate()):o(K()(t[t.length-1]).toDate()),d=0===i?f-l:l-s,p=0===i?0:l-d/2;return d=0===i||i===t.length-1?d/2:d,{date:n,start:t.length>1?p:0,width:t.length>1?d:r,values:a.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,s,r.xScale),h=s<=1365||n.uniqueDates.length>50?2:3;h=s<=783?1.25:h;var y=s<=1365?4:6;n.uniqueDates.length>1&&p.append("path").attr("fill","none").attr("stroke-width",h).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return n.getColor(e.key)})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)}));s/n.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(n){return he(he({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",y).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",h+1).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),r[n].parentNode,fe.b.target)})).on("blur",(function(){return a.hide()}));var m=e.append("g").attr("class","focusspaces").selectAll(".focus").data(b).enter().append("g").attr("class","focus"),v=m.append("g").attr("class","focus-grid").attr("opacity","0");v.append("line").attr("x1",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y1",0).attr("x2",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y2",l),v.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",y+2).attr("fill",(function(e){return n.getColor(e.key)})).attr("stroke","#fff").attr("stroke-width",h+2).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),m.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",l).attr("opacity",0).on("mouseover",(function(e,r,o){var i=(0===r||r===b.length-1)&&n.uniqueDates.length>1?0:.5;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,o[r].parentNode,i)})).on("mouseout",(function(){return a.hide()}))},ve=[[],[.5],[.333,.667],[.2,.5,.8],[.12,.375,.625,.88],[0,.25,.5,.75,1]],ge=function(e,t){return function(n){var r=e.length>5?5:e.length,o=Object(u.findIndex)(e,(function(e){return e.key===n})),a=o<=4?ve[r][o]:0;return t(a)}};function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function je(e){var t=function(e,t){if("object"!=Oe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Oe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Oe(t)?t:t+""}var Ee=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ref=null,this.chart=null,this.position="",this.title="",this.labelFormat="",this.valueFormat="",this.visibleKeys="",this.getColor=null,this.interval="",this.margin=24,this.chartMeta={},this.type="old",this.isProFeatureLocked=!1},(t=[{key:"calculateXPosition",value:function(e,t,n){var r=this.ref.getBoundingClientRect(),o=this.ref.parentNode.querySelector(".d3-base").getBoundingClientRect(),a=Math.max(o.left,t.left);if("below"===this.position)return Math.max(this.margin,Math.min(e.left+.5*e.width-r.width/2-a,o.width-r.width-this.margin));var i=e.left+e.width*n+this.margin-a;return i+r.width+this.margin>o.width?Math.max(this.margin,e.left+e.width*(1-n)-r.width-this.margin-a):i}},{key:"calculateYPosition",value:function(e,t){if("below"===this.position)return t.height;var n=this.ref.getBoundingClientRect(),r=e.top+this.margin-t.top;return r+n.height+this.margin>t.height?Math.max(0,e.top-n.height-this.margin-t.top):r}},{key:"calculatePosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o=e.getBoundingClientRect(),a=this.chart.getBoundingClientRect(),i=this.ref.getBoundingClientRect();return"below"===this.position&&(t=0),{x:n<50||n>a.width-220?this.calculateXPosition(o,a,t):n-i.width/4,y:r-("new"===this.type?.65*i.height:i.height)}}},{key:"hide",value:function(){Object(N.a)(this.chart).selectAll(".barfocus, .focus-grid").attr("opacity","0"),Object(N.a)(this.ref).style("visibility","hidden")}},{key:"getTooltipRowLabel",value:function(e,t){return e[t.key].labelDate?this.labelFormat(K()(e[t.key].labelDate).toDate()):t.label||t.key}},{key:"show",value:function(e,t,n){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0;if(this.visibleKeys.length){Object(N.a)(n).select(".focus-grid, .barfocus").attr("opacity","1");var c=this.calculatePosition(t,o,a,i),u=(this.visibleKeys.map((function(t){return'\n\t\t\t\t\t<li class="key-row">\n\t\t\t\t\t\t<div class="key-container">\n\t\t\t\t\t\t\t<span\n\t\t\t\t\t\t\t\tclass="key-color"\n\t\t\t\t\t\t\t\tstyle="background-color: '.concat(r.getColor(t.key),'">\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<span class="key-key">').concat(r.getTooltipRowLabel(e,t),'</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<span class="key-value">').concat(r.valueFormat(e[t.key].value),"</span>\n\t\t\t\t\t</li>\n\t\t\t\t")})),this.title?this.title:this.labelFormat(K()(e.date).toDate()),Object(oe.w)()),l=function(e){return"year"===r.interval?K()(e).year():K()(e).format("month"===r.interval?"MMM YYYY":Object(oe.U)())},s=function(t){var n,o,a,i,c,s,f,d,p,b,h,y=r.visibleKeys[0].key;switch(t){case"old":return 1===r.visibleKeys.length?'\n\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t'.concat(r.chartMeta&&!r.chartMeta.isCurrency?e[y].value:u.formatAmount(e[y].value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t<div>').concat(r.chartMeta.title,"</div>\n\t\t\t\t\t\t\t<div>").concat(l(null===(n=e[y])||void 0===n?void 0:n.labelDate),"</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t"):'\n\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t<div class="label">'.concat(l(null===(o=e.primary)||void 0===o?void 0:o.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(r.chartMeta&&!r.chartMeta.isCurrency?e.primary.value:u.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t<div class="label">').concat(l(null===(a=e.secondary)||void 0===a?void 0:a.labelDate),'</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t').concat(r.chartMeta&&!r.chartMeta.isCurrency?e.secondary.value:u.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t<div>').concat(r.chartMeta.title,"</div>\n\t\t\t\t\t\t<div>").concat(l(null===(i=e.primary)||void 0===i?void 0:i.labelDate),"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t");case"new":return 1===r.visibleKeys.length?'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-value">\n\t\t\t\t\t\t\t\t\t\t'.concat(u.formatAmount(e[y].value),'\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-sec-values">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Checkout</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(u.formatAmount(null===(c=e[y].data)||void 0===c?void 0:c.checkout),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Order Bump</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(r.isProFeatureLocked?"-":u.formatAmount(null===(s=e[y].data)||void 0===s?void 0:s.orderBump),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">Upsell</div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="value">').concat(r.isProFeatureLocked?"-":u.formatAmount(null===(f=e[y].data)||void 0===f?void 0:f.upsell),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div>').concat(null===(d=e[y].data)||void 0===d?void 0:d.orders," Orders</div>\n\t\t\t\t\t\t\t\t\t<div>").concat(l(e.date),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t"):'\n\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-wrap">\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-body">\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val bwf-mb-16">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #0073AA;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label" >'.concat(l(null===(p=e.primary)||void 0===p?void 0:p.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(u.formatAmount(e.primary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-multi-val">\n\t\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="color" style="background: #F5C452;"></div>\n\t\t\t\t\t\t\t\t\t\t\t<div class="label">').concat(l(null===(b=e.secondary)||void 0===b?void 0:b.labelDate),'</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<div class="value">\n\t\t\t\t\t\t\t\t\t\t\t').concat(u.formatAmount(e.secondary.value),'\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class="bwf-chart-tooltip-footer">\n\t\t\t\t\t\t\t\t\t<div></div>\n\t\t\t\t\t\t\t\t\t<div>').concat(l(null===(h=e.primary)||void 0===h?void 0:h.labelDate),"</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t")}};Object(N.a)(this.ref).style("left",c.x+"px").style("top",c.y+"px").style("visibility","visible").html(s(this.type))}}}])&&we(e.prototype,t),n&&we(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,n}(),_e=n(1187),Se=n(21);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ke(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=xe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xe(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=function(e,t,n,r,o,a){var i,c,l=r.yScale.range()[0],s=r.xScale.range()[1],f=(i=r.xScale,c=r.yScale,Object(de.a)().curve(_e.a).x((function(e){return i(K()(e.date).toDate())})).y((function(e){return c(e.value)}))),d=function(e,t){return t.map((function(t){return{key:t.key,focus:t.focus,visible:t.visible,label:t.label,values:e.map((function(e){return{date:e.date,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,visible:t.visible}}))}}))}(t,n.visibleKeys),p=e.append("g").attr("class","lines").selectAll(".line-g").data(d.filter((function(e){return e.visible})).reverse()).enter().append("g").attr("class","line-g").attr("role","region").attr("aria-label",(function(e){return e.label||e.key})),b=function(e,t,n,r,o){var a=n.slice().reverse();return t.map((function(n,i){var c=Object(u.first)(e.filter((function(e){return e.date===n}))),l=o(K()(n).toDate()),s=o(i>=1?K()(t[i-1]).toDate():K()(t[0]).toDate()),f=i<t.length-1?o(K()(t[i+1]).toDate()):o(K()(t[t.length-1]).toDate()),d=0===i?f-l:l-s,p=0===i?0:l-d/2;return d=0===i||i===t.length-1?d/2:d,{date:n,start:t.length>1?p:0,width:t.length>1?d:r,values:a.map((function(e){var t=e.key,r=c[t];return r?{key:t,value:r.value,date:n}:null})).filter(Boolean)}}))}(t,n.uniqueDates,n.visibleKeys,s,r.xScale),h=p.append("defs"),y=h.append("linearGradient").attr("id","grad").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%"),m=[["rgba(0,115,170, 0.2)","1"],["rgba(0,115,170, 0.1)","0"]];y.selectAll("stop").data(m).enter().append("stop").style("stop-color",(function(e){return e[0]})).style("stop-opacity",(function(e){return e[1]})).attr("offset",(function(e,t){return t/(m.length-1)*100+"%"}));h.append("linearGradient").attr("id","grad2").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%").selectAll("stop").data([["rgba(245,196,82, 0.2)","1"],["rgba(245,245,82, 0.1)","0"]]).enter().append("stop").style("stop-color",(function(e){return e[0]})).style("stop-opacity",(function(e){return e[1]})).attr("offset",(function(e,t){return t/(m.length-1)*100+"%"}));var v=2;v=s<=783?2:v;var g=s<=1365?4:6,O=h.append("filter").attr("id","glow");O.append("feGaussianBlur").attr("stdDeviation","1.5").attr("result","coloredBlur");var w=O.append("feMerge");w.append("feMergeNode").attr("in","coloredBlur"),w.append("feMergeNode").attr("in","SourceGraphic"),n.uniqueDates.length>1&&p.append("path").attr("fill","none").attr("stroke-width",v).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke",(function(e){return"primary"===e.key?Se.BLUE_BASE:Se.NOTICE_YELLOW})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).attr("d",(function(e){return f(e.values)})).attr("fill",(function(e){return"primary"===e.key?"url(#grad)":"url(#grad2)"}));s/n.uniqueDates.length>36&&p.selectAll("circle").data((function(e,t){return e.values.map((function(n){return Pe(Pe({},n),{},{i:t,visible:e.visible,key:e.key})}))})).enter().append("circle").attr("r",g).attr("fill",(function(e){return"#0073aa"})).attr("stroke","#fff").attr("stroke-width","4px").style("opacity",(function(e){e.focus;return 0})).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})).attr("tabindex","0").attr("aria-label",(function(e){var t=o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate());return"".concat(t," ").concat(a.valueFormat(e.value))})).on("focus",(function(e,t,n){})).on("blur",(function(){return a.hide()}));var j=e.append("g").attr("class","focusspaces").selectAll(".focus").data(b).enter().append("g").attr("class","focus"),E=j.append("g").attr("class","focus-grid").attr("opacity","0");E.selectAll(null).data((function(e){return e.values})).enter().append("line").attr("x1",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y1",(function(e){return r.yScale(e.value)})).attr("x2",(function(e){return r.xScale(K()(e.date).toDate())})).attr("y2",l),E.selectAll("circle").data((function(e){return e.values})).enter().append("circle").attr("r",g+2).attr("fill",(function(e){return"primary"===e.key?Se.BLUE_BASE:Se.NOTICE_YELLOW})).attr("stroke","#fff").style("filter","url(#glow)").attr("stroke-width",v).attr("cx",(function(e){return r.xScale(K()(e.date).toDate())})).attr("cy",(function(e){return r.yScale(e.value)})),j.append("rect").attr("class","focus-g").attr("x",(function(e){return e.start})).attr("y",0).attr("width",(function(e){return e.width})).attr("height",l).attr("opacity",0).on("mouseover",(function(e,o,i){var c,u,l,s,f=(0===o||o===b.length-1)&&n.uniqueDates.length>1?0:.5,d=null!==(c=null===(u=e.values[0])||void 0===u?void 0:u.value)&&void 0!==c?c:0,p=null!==(l=null===(s=e.values[1])||void 0===s?void 0:s.value)&&void 0!==l?l:0;a.show(t.find((function(t){return t.date===e.date})),fe.b.target,i[o].parentNode,f,r.xScale(K()(e.date).toDate()),r.yScale(Math.max(d,p)))})).on("mouseout",(function(){return a.hide()}))},Te=n(1206),De=n(1188),Ie=n(1110),Ae=n(279);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Re(r.key),r)}}function Re(e){var t=function(e,t){if("object"!=Me(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Me(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Me(t)?t:t+""}function Fe(e,t,n){return t=Be(t),function(e,t){if(t&&("object"==Me(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Be(e).constructor):t.apply(e,n))}function Be(e){return(Be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qe(e,t){return(qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var ze=function(){return"rtl"===document.documentElement.dir},Ue=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Fe(this,t,[e])).drawChart=n.drawChart.bind(n),n.getParams=n.getParams.bind(n),n.tooltipRef=Object(r.createRef)(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(t,e),n=t,(o=[{key:"getFormatParams",value:function(){var e=this.props,t=e.screenReaderFormat,n=e.xFormat,r=e.x2Format,o=e.yFormat,a=e.yBelow1Format;return{screenReaderFormat:U(t,C.a),xFormat:U(n,C.a),x2Format:U(r,C.a),yBelow1Format:U(a),yFormat:U(o)}}},{key:"getScaleParams",value:function(e){var t=this.props,n=t.data,r=t.height,o=t.orderedKeys,a=t.chartType,i=this.getMargin(),c=r-i.top-i.bottom,u=this.getWidth()-i.left-i.right,l=J(n),s=l.upper,f=l.lower,d=l.step,p=function(e,t,n){return Object(G.a)().domain([Math.min(t,0),0===n&&0===t?1:Math.max(n,0)]).rangeRound([e,0])}(c,f,s);if("line"===a||"curve-line"===a)return{step:d,xScale:Q(e,u),yMax:s,yMin:f,yScale:p};var b=this.shouldBeCompact(),h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return Object(V.a)().domain(e).range([0,t]).paddingInner(n?0:.1)}(e,u,b);return{step:d,xGroupScale:Z(o,h,b),xScale:h,yMax:s,yMin:f,yScale:p}}},{key:"getParams",value:function(e){var t=this.props,n=t.chartType,r=t.colorScheme,o=t.data,a=t.interval,i=t.mode,c=t.orderedKeys||function(e){return Y(e).map((function(t){return{key:t,focus:!0,total:e.reduce((function(e,n){return e+n[t].value}),0),visible:!0}})).sort((function(e,t){return t.total-e.total}))}(o),u=c.filter((function(e){return e.visible})),l=c.length>5?u:c;return{getColor:ge(l,r),interval:a,mode:i,chartType:n,uniqueDates:e,visibleKeys:u}}},{key:"createTooltip",value:function(e,t,n){var r=this.props,o=r.tooltipLabelFormat,a=r.tooltipPosition,i=r.tooltipTitle,c=r.tooltipValueFormat,u=r.interval,l=r.chartMeta,s=new Ee;s.ref=this.tooltipRef.current,s.type=l?"old":"new",s.chart=e,s.position=a,s.title=i,s.labelFormat=U(o,C.a),s.valueFormat=U(c),s.visibleKeys=n,s.getColor=t,s.interval=u,s.chartMeta=l,s.isProFeatureLocked=this.props.isProFeatureLocked,this.tooltip=s}},{key:"drawChart",value:function(e){var t,n=this.props,r=n.data,o=n.dateParser,a=n.chartType,i=n.emptyText,c=n.chartMeta,l=n.chartId,s=this.getMargin(),f=e.attr("id","chart").append("g").attr("transform","translate(".concat(s.left,", ").concat(s.top,")"));if("donut"===a)return null===(t=Object(N.a)("#".concat(l," .d3-donut-tip")).node())||void 0===t||t.remove(),void function(e,t,n){var r=n.width,o=void 0===r?640:r,a=n.height,i=void 0===a?400:a,c=(n.margin,n.emptyText),l=void 0===c?"":c,s=(n.chartId,n.donutTip),f=Math.min(o,i)/2+35,d=t.reduce((function(e,t){return e+(t.value||0)}),0),p=d?t:[{key:"dummy",value:100,color:["#DEDFEA","#DEDFEA"]}],b=Object(Ie.a)().domain(p.map((function(e){return e.key}))).range(p.map((function(e){return e.color&&Object(u.isArray)(e.color)?e.color[0]:Se.TEXT_COLOR_3}))),h=Object(Te.a)().sort(null).value((function(e){return e.value}))(p),y=Object(De.a)().innerRadius(.52*f).outerRadius(.8*f),m=Object(De.a)().innerRadius(.52*(f+2)).outerRadius(.8*(f+8));Object(De.a)().innerRadius(.9*f).outerRadius(.9*f),e.attr("transform","translate("+o/2+","+i/2+")");var v=e.append("defs").append("filter").attr("id","drop-shadow").attr("height","130%");v.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation",2).attr("result","blur"),v.append("feFlood").attr("flood-color","#323247").attr("flood-opacity","0.5").attr("result","offsetColor"),v.append("feOffset").attr("in","blur").attr("dx",1).attr("dy",1).attr("result","offsetBlur"),v.append("feComposite").attr("in","offsetColor").attr("in2","offsetBlur").attr("result","offsetBlur").attr("operator","in");var g=v.append("feMerge");g.append("feMergeNode").attr("in","offsetBlur"),g.append("feMergeNode").attr("in","SourceGraphic");var O=function(e){if(d){Object(N.a)("#slice-"+e.data.key).attr("d",m).attr("filter","url(#drop-shadow");var t=e.data.tooltip;Object(N.a)(".d3-donut-tip").style("opacity",1),s.html(t).style("opacity",1).style("left",fe.b.layerX-50+"px").style("top",fe.b.layerY+35+"px")}},w=function(e){Object(N.a)("#slice-"+e.data.key).attr("d",y).attr("filter",""),Object(N.a)(".d3-donut-tip").style("opacity",0)};e.selectAll("allSlices").data(h).enter().append("path").attr("id",(function(e){return"slice-"+e.data.key})).attr("d",y).attr("fill",(function(e){return b(e.data.key)})).style("stroke-width","0").on("mousemove",O).on("mouseleave",w),e.selectAll("allValues").data(h).enter().append("text").text((function(e){return e.data.value>4?e.data.value<10&&e.data.value%1?Math.floor(e.data.value)+"%":e.data.value+"%":""})).attr("id",(function(e){return"value-"+e.data.key})).attr("class","slice-value").attr("transform",(function(e){return"translate("+y.centroid(e)+")"})).style("text-anchor","middle").style("fill",(function(e){return e.data.color&&Object(u.isArray)(e.data.color)?e.data.color[1]:"#ffffff"})).on("mousemove",O).on("mouseleave",w),d||e.append("text").attr("class","name-text").text(l).attr("text-anchor","middle").attr("x","0").attr("y","0").attr("width","100").style("fill",Se.TEXT_COLOR_3).call((function(e){e.each((function(){for(var e=Object(N.a)(this),t=e.text().split(/\s+/).reverse(),n=parseFloat(e.attr("width")),r=parseFloat(e.attr("y")),o=e.attr("x"),a=e.attr("text-anchor"),i=e.text(null).append("tspan").attr("x",o).attr("y",r).attr("text-anchor",a),c=0,u=[],l=t.pop();l;)u.push(l),i.text(u.join(" ")),i.node().getComputedTextLength()>n&&(c+=1,u.pop(),i.text(u.join(" ")),u=[l],i=e.append("tspan").attr("x",o).attr("y",r+20*c).attr("anchor",a).text(l)),l=t.pop()}))}))}(f,r,{height:280,width:280,emptyText:i,chartId:l,donutTip:Object(N.a)("#"+l).append("div").style("opacity",0).attr("class","d3-donut-tip")});var d=function(e,t){var n=Object(C.b)(t);return B(new Set(e.map((function(e){return e.date})))).sort((function(e,t){return n(e)-n(t)}))}(r,o),p=this.getFormatParams(),b=this.getParams(d),h=this.getScaleParams(d);this.createTooltip(f.node(),b.getColor,b.visibleKeys),se(f,b,h,p,s,ze(),c),"curve-line"!==a?("line"===a&&me(f,r,b,h,p,this.tooltip),"bar"===a&&function(e,t,n,r,o,a){var i=r.yScale.range()[0],c=e.append("g").attr("class","bars").selectAll("g").data(t).enter().append("g").attr("transform",(function(e){return"translate(".concat(r.xScale(e.date),", 0)")})).attr("class","bargroup").attr("role","region").attr("aria-label",(function(e){return"item-comparison"===n.mode?o.screenReaderFormat(e.date instanceof Date?e.date:K()(e.date).toDate()):null}));c.append("rect").attr("class","barfocus").attr("x",0).attr("y",0).attr("width",r.xGroupScale.range()[1]).attr("height",i).attr("opacity","0").on("mouseover",(function(e,n,r){a.show(t.find((function(t){return t.date===e.date})),fe.b.target,r[n].parentNode)})).on("mouseout",(function(){return a.hide()}));var u=r.yScale(0);c.selectAll(".bar").data((function(e){return n.visibleKeys.map((function(t){return{key:t.key,focus:t.focus,value:e.hasOwnProperty(t.key)&&e[t.key].hasOwnProperty("value")?e[t.key].value:0,label:t.label,visible:t.visible,date:e.date}}))})).enter().append("rect").attr("class","bar").attr("x",(function(e){return r.xGroupScale(e.key)})).attr("y",(function(e){return Math.min(u,r.yScale(e.value))})).attr("width",r.xGroupScale.bandwidth()).attr("height",(function(e){return Math.abs(u-r.yScale(e.value))})).attr("fill",(function(e){return n.getColor(e.key)})).attr("pointer-events","none").attr("tabindex","0").attr("aria-label",(function(e){var r=e.label||e.key;if("time-comparison"===n.mode){var i=t.find((function(t){return t.date===e.date}));r=o.screenReaderFormat(K()(i[e.key].labelDate).toDate())}return"".concat(r," ").concat(a.valueFormat(e.value))})).style("opacity",(function(e){var t=e.focus?1:.1;return e.visible?t:0})).on("focus",(function(e,n,r){var o=e.value>0?fe.b.target:fe.b.target.parentNode;a.show(t.find((function(t){return t.date===e.date})),o,r[n].parentNode)})).on("blur",(function(){return a.hide()}))}(f,r,b,h,p,this.tooltip)):Ne(f,r,b,h,p,this.tooltip)}},{key:"shouldBeCompact",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return!1;var o=this.getMargin(),a=r-o.left-o.right,i=t&&t.length?Object.keys(t[0]).length-1:0;return a<t.length*(i+1)}},{key:"getMargin",value:function(){var e=this.props.margin;return ze()?{bottom:e.bottom,left:-30,right:e.left,top:e.top}:e}},{key:"getWidth",value:function(){var e=this.props,t=e.data,n=e.chartType,r=e.width;if("bar"!==n)return r;var o=this.getMargin(),a=t&&t.length?Object.keys(t[0]).length-1:0,i=this.shouldBeCompact()?t.length*a:t.length*(a+1);return Math.max(r,i+o.left+o.right)}},{key:"getEmptyMessage",value:function(){var e=this.props,t=e.baseValue,n=e.data,o=e.emptyMessage;if(o&&function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=0;n<e.length;n++)for(var r=0,o=Object.entries(e[n]);r<o.length;r++){var a=F(o[r],2),i=a[0],c=a[1];if("date"!==i&&!Object(u.isNil)(c.value)&&c.value!==t)return!1}return!0}(n,t))return Object(r.createElement)("div",{className:"d3-chart__empty-message"},o)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.data,o=e.height,a=e.orderedKeys,c=e.chartType,u=e.chartMeta,l=this.getWidth();return Object(r.createElement)("div",{className:i()("d3-chart__container",t)},this.getEmptyMessage(),Object(r.createElement)("div",{className:"d3-chart__tooltip",ref:this.tooltipRef}),Object(r.createElement)(R,{className:i()(t),data:n,drawChart:this.drawChart,chartMeta:u,height:o,orderedKeys:a,tooltip:this.tooltip,chartType:c,width:l}))}}])&&Le(n.prototype,o),a&&Le(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Ue.propTypes={baseValue:m.a.number,className:m.a.string,colorScheme:m.a.func,data:m.a.array.isRequired,dateParser:m.a.string.isRequired,emptyMessage:m.a.string,height:m.a.number,interval:m.a.oneOf(["hour","day","week","month","quarter","year",""]),margin:m.a.shape({bottom:m.a.number,left:m.a.number,right:m.a.number,top:m.a.number}),mode:m.a.oneOf(["item-comparison","time-comparison"]),screenReaderFormat:m.a.oneOfType([m.a.string,m.a.func]),orderedKeys:m.a.array,tooltipLabelFormat:m.a.oneOfType([m.a.string,m.a.func]),tooltipValueFormat:m.a.oneOfType([m.a.string,m.a.func]),tooltipPosition:m.a.oneOf(["below","over"]),tooltipTitle:m.a.string,chartType:m.a.oneOf(["bar","line","curve-line","donut"]),width:m.a.number,xFormat:m.a.oneOfType([m.a.string,m.a.func]),x2Format:m.a.oneOfType([m.a.string,m.a.func]),yBelow1Format:m.a.oneOfType([m.a.string,m.a.func]),yFormat:m.a.oneOfType([m.a.string,m.a.func])};var Ye=Object(Ae.a)(Ue,{baseValue:0,data:[],dateParser:"%Y-%m-%dT%H:%M:%S",height:200,margin:{bottom:30,left:40,right:0,top:20},mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",tooltipPosition:"over",tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",chartType:"line",width:600,xFormat:"%Y-%m-%d",x2Format:"",yBelow1Format:".3~f",yFormat:".3~s"}),Ve=n(52),He=n(284);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ke(r.key),r)}}function Ke(e){var t=function(e,t){if("object"!=Ge(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ge(t)?t:t+""}function $e(e,t,n){return t=We(t),function(e,t){if(t&&("object"==Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],We(e).constructor):t.apply(e,n))}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return(Ze=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=$e(this,t)).listRef=Object(r.createRef)(),e.state={isScrollable:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ze(e,t)}(t,e),n=t,(a=[{key:"componentDidMount",value:function(){this.updateListScroll(),window.addEventListener("resize",this.updateListScroll)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateListScroll)}},{key:"updateListScroll",value:function(){if(this&&this.listRef){var e=this.listRef.current,t=e.scrollHeight-e.scrollTop<=e.offsetHeight;this.setState({isScrollable:!t})}}},{key:"render",value:function(){var e=this.props,t=(e.colorScheme,e.data),n=e.handleLegendHover,a=e.handleLegendToggle,c=e.interactive,u=e.legendDirection,l=(e.legendValueFormat,e.instanceId),s=e.totalLabel,f=this.state.isScrollable,d=t.filter((function(e){return e.visible})),p=d.length,b="column"===u&&t.length>5&&s;return t.length,Object(r.createElement)("div",{className:i()("bwf-legend","bwf-legend-direction-".concat(u),{"has-total":b,"is-scrollable":f},this.props.className)},Object(r.createElement)("ul",{className:"bwf-legend-list",ref:this.listRef,onScroll:b?this.updateListScroll:null},t.map((function(e,t){return Object(r.createElement)("li",{className:i()("bwf-legend-item",{"bwf-legend-item-checked":e.visible}),key:e.key,id:"bwf-legend-".concat(l,"__item__").concat(e.key),onMouseEnter:n,onMouseLeave:n,onBlur:n,onFocus:n},Object(r.createElement)("button",{onClick:a,id:"bwf-legend-".concat(l,"__item-button__").concat(e.key),disabled:e.visible&&p<=1||!e.visible&&p>=5||!c,title:p>=5?Object(o.sprintf)(Object(o.__)("You may select up to %d items.","funnel-builder"),5):""},Object(r.createElement)("div",{className:"bwf-legend-item-container"},Object(r.createElement)(He.a,{checked:e.visible,onChange:function(){},color:1===t?Se.NOTICE_YELLOW:Se.BLUE_BASE}),Object(r.createElement)("span",{className:"bwf-legend-item-title"},e.label))))}))),b&&Object(r.createElement)("div",{className:"bwf-legend-total"},s))}}])&&Xe(n.prototype,a),c&&Xe(n,c),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,c}(r.Component);Qe.propTypes={className:m.a.string,colorScheme:m.a.func,data:m.a.array.isRequired,handleLegendToggle:m.a.func,handleLegendHover:m.a.func,interactive:m.a.bool,legendDirection:m.a.oneOf(["row","column"]),legendValueFormat:m.a.oneOfType([m.a.string,m.a.func]),totalLabel:m.a.string,instanceId:m.a.number};var Je=Object(Ve.withInstanceId)(Object(Ae.a)(Qe,{interactive:!0,legendDirection:"row",legendValueFormat:","}));n(535);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(){return(tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function nt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return rt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?rt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ut(r.key),r)}}function at(e,t,n){return t=it(t),function(e,t){if(t&&("object"==et(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],it(e).constructor):t.apply(e,n))}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}function lt(e,t){switch(t){case"left_space":return[e+" ",""];case"right":return["",e];case"right_space":return[""," "+e];case"left":default:return[e,""]}}var st=function(e){function t(e){var n,o,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=at(this,t,[e]),o=n,i=function(){return Object(r.createElement)("div",{className:"bwf-chart__donut-legends"},n.props.data.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-chart__donut-legend",key:"bwf-chart__donut-legend-".concat(t)},Object(r.createElement)("div",{className:"bwf-chart__donut-legend-color",style:{backgroundColor:e.color[0]}}),e.title)})))},(a=ut(a="getDonutLegends"))in o?Object.defineProperty(o,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):o[a]=i,n.chartBodyRef=Object(r.createRef)();var c=n.getDataKeys();return n.state={focusedKeys:[],visibleKeys:c.slice(0,5),width:0},n.prevDataKeys=c.sort(),n.handleTypeToggle=n.handleTypeToggle.bind(n),n.handleLegendToggle=n.handleLegendToggle.bind(n),n.handleLegendHover=n.handleLegendHover.bind(n),n.updateDimensions=n.updateDimensions.bind(n),n.getVisibleData=Object(p.a)(n.getVisibleData),n.getOrderedKeys=Object(p.a)(n.getOrderedKeys),n.setInterval=n.setInterval.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ct(e,t)}(t,e),n=t,(a=[{key:"getDataKeys",value:function(){var e=this.props,t=e.data,n=e.filterParam,r=e.mode,o=e.query;if("item-comparison"===r){var a=n?Object(h.e)(o[n]):[];return this.getOrderedKeys([],[],a).map((function(e){return e.key}))}return Y(t)}},{key:"componentDidUpdate",value:function(){var e=this.props.data;if(e&&e.length){var t=Y(e).sort();if(!Object(u.isEqual)(t,this.prevDataKeys)){var n=this.getDataKeys();this.prevDataKeys=t,this.setState({visibleKeys:n.slice(0,5)})}}}},{key:"componentDidMount",value:function(){this.updateDimensions(),this.setD3DefaultFormat(),window.addEventListener("resize",this.updateDimensions)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.updateDimensions)}},{key:"setD3DefaultFormat",value:function(){var e=this.props.currency,t=e.symbol,n=e.symbolPosition,r=e.decimalSeparator,o=e.thousandSeparator;Object(c.a)({decimal:r,thousands:o,grouping:[3],currency:lt(t,n)})}},{key:"getOrderedKeys",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.props,o=r.data,a=r.legendTotals,i=r.mode;if(!o||0===o.length)return[];var c=o.reduce((function(e,t){return Object.entries(t).forEach((function(t){var n=nt(t,2),r=n[0],o=n[1];"date"===r||e[r]||(e[r]=o.label)})),e}),{}),u=Object.entries(c).map((function(n){var r=nt(n,2),i=r[0],c=r[1];return{focus:0===e.length||e.includes(i),key:i,label:c,total:a&&void 0!==a[i]?a[i]:"conversion_rate"!==i?o.reduce((function(e,t){return e+t[i].value}),0):0!==o.reduce((function(e,t){return e+t.conversion.value}),0)?o.reduce((function(e,t){return e+t.conversion.value}),0)/o.reduce((function(e,t){return e+t.view.value}),0)*100:0,visible:t.includes(i)}}));return"item-comparison"===i?u.sort((function(e,t){return t.total-e.total})).filter((function(e){return e.total>0||n.includes(parseInt(e.key,10))})):u}},{key:"handleTypeToggle",value:function(e){if(this.props.chartType!==e){var t=this.props,n=t.path,r=t.query,o=t.onChartChange,a=void 0===o?u.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(h.k)({chartType:e},n,r),a(e)}}},{key:"handleLegendToggle",value:function(e){if(this.props.interactiveLegend){var t=e.currentTarget.id.split("_").pop(),n=this.state,r=n.focusedKeys,o=n.visibleKeys;o.includes(t)?this.setState({focusedKeys:Object(u.without)(r,t),visibleKeys:Object(u.without)(o,t)}):this.setState({focusedKeys:r.concat([t]),visibleKeys:o.concat([t])})}}},{key:"handleLegendHover",value:function(e){if("mouseleave"===e.type||"blur"===e.type)this.setState({focusedKeys:[]});else if("mouseenter"===e.type||"focus"===e.type){var t=e.currentTarget.id.split("__").pop();this.setState({focusedKeys:[t]})}}},{key:"updateDimensions",value:function(){this.setState({width:this.props.width?this.props.width:this.chartBodyRef.current.offsetWidth})}},{key:"getVisibleData",value:function(e,t){var n=t.filter((function(e){return e.visible}));return Object(u.isEmpty)(n)?[]:e.map((function(e){var t={date:e.date};return n.forEach((function(n){t[n.key]=e[n.key]})),t}))}},{key:"setInterval",value:function(e){var t=this.props,n=t.path,r=t.query,o=t.onIntervalChange,a=void 0===o?u.noop:o,i=t.updateQuery;(void 0===i||i)&&Object(h.k)({interval:e},n,r),a(e)}},{key:"renderIntervalSelector",value:function(){var e=this.props,t=e.interval,n=e.allowedIntervals;if(!n||n.length<1)return null;!0===n.includes("quarter")&&n.splice(n.indexOf("quarter"),1);var a={hour:Object(o.__)("By hour","funnel-builder"),day:Object(o.__)("By day","funnel-builder"),week:Object(o.__)("By week","funnel-builder"),month:Object(o.__)("By month","funnel-builder"),quarter:Object(o.__)("By quarter","funnel-builder"),year:Object(o.__)("By year","funnel-builder")};return Object(r.createElement)(f.SelectControl,{value:t,options:n.map((function(e){return{value:e,label:a[e]}})),onChange:this.setInterval})}},{key:"getChartHeight",value:function(){var e=this.props,t=e.isViewportLarge;return e.isViewportMobile?180:t?300:220}},{key:"getLegendPosition",value:function(){var e=this.props,t=e.legendPosition,n=e.mode,r=e.isViewportWide;return t||(r&&"time-comparison"===n?"top":r&&"item-comparison"===n?"side":"bottom")}},{key:"render",value:function(){var e=this.state,t=e.focusedKeys,n=e.visibleKeys,a=e.width,c=this.props,l=c.baseValue,p=c.chartType,b=c.data,y=c.dateParser,m=c.emptyMessage,v=c.filterParam,g=c.interactiveLegend,O=c.interval,w=c.isRequesting,j=c.isViewportLarge,E=c.itemsLabel,_=c.mode,S=c.query,x=c.screenReaderFormat,C=c.showHeaderControls,N=c.title,T=c.tooltipLabelFormat,D=c.tooltipValueFormat,I=c.tooltipTitle,A=c.valueType,M=c.xFormat,L=c.x2Format,R=c.yBelow1Format,F=c.yFormat,B=c.hideTypeSelect,q=c.className,z=c.customHeaderItem,U=c.showLegend,Y=c.height,V=c.emptyText,H=c.chartMeta,G=c.chartId,X=c.customFooter,K=c.isProFeatureLocked,$=v?Object(h.e)(S[v]):[],W=this.getOrderedKeys(t,n,$),Z=w||Object(u.isEmpty)(b)?null:this.getVisibleData(b,W),Q=this.getLegendPosition(),J="top"===Q?"row":"column",ee="side"===Q?"row":"column",te=Y||this.getChartHeight(),ne=w||!U?null:"donut"===p?this.getDonutLegends():Object(r.createElement)(Je,{colorScheme:d.a,data:W,handleLegendHover:this.handleLegendHover,handleLegendToggle:this.handleLegendToggle,interactive:g,legendDirection:J,legendValueFormat:D,totalLabel:Object(o.sprintf)(E,W.length)}),re=F,oe=R;if(!F)switch(A){case"average":re=",.0f";break;case"currency":re="$.3~s",oe="$.3~f";break;case"number":re=",.0f"}return Object(r.createElement)("div",tt({className:i()("bwf-chart",q)},G&&{id:G}),C&&Object(r.createElement)("div",{className:"bwf-chart-header"},Object(r.createElement)("div",{className:"bwf-chart-title"},N),"top"===Q&&ne,z,this.renderIntervalSelector(),!B&&Object(r.createElement)(f.NavigableMenu,{className:"bwf-chart-types",orientation:"horizontal",role:"menubar"},Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"line"===p}),title:Object(o.__)("Line chart","funnel-builder"),"aria-checked":"line"===p,role:"menuitemradio",tabIndex:"line"===p?0:-1,onClick:Object(u.partial)(this.handleTypeToggle,"line")},Object(r.createElement)(s.a,{icon:"line-graph"})),Object(r.createElement)(f.Button,{className:i()("bwf-chart-type-button",{"bwf-chart-type-button-selected":"bar"===p}),title:Object(o.__)("Bar chart","funnel-builder"),"aria-checked":"bar"===p,role:"menuitemradio",tabIndex:"bar"===p?0:-1,onClick:Object(u.partial)(this.handleTypeToggle,"bar")},Object(r.createElement)(s.a,{icon:"stats-alt"})))),Object(r.createElement)(P.b,{component:!1},Object(r.createElement)("div",{className:i()("bwf-chart-body","bwf-chart-body-".concat(ee)),ref:this.chartBodyRef},"side"===Q&&ne,w&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"screen-reader-text"},Object(o.__)("Your requested data is loading","funnel-builder")),Object(r.createElement)(k,{height:te})),!w&&!Object(u.isEmpty)(Z)&&a>0&&Object(r.createElement)(Ye,{baseValue:l,chartType:p,colorScheme:d.a,data:Z,dateParser:y,height:te,emptyMessage:m,interval:O,margin:{bottom:50,left:50,right:30,top:0},mode:_,orderedKeys:W,screenReaderFormat:x,tooltipLabelFormat:T,tooltipValueFormat:D,tooltipPosition:j?"over":"below",tooltipTitle:I,valueType:A,width:"row"===ee?a-320:a,xFormat:M,x2Format:L,yBelow1Format:oe,yFormat:re,emptyText:V,chartMeta:H,chartId:G,isProFeatureLocked:K})),"bottom"===Q&&Object(r.createElement)("div",{className:"bwf-chart-footer"},ne)),X)}}])&&ot(n.prototype,a),l&&ot(n,l),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a,l}(r.Component);t.a=Object(b.withViewportMatch)({isViewportMobile:"< medium",isViewportLarge:">= large",isViewportWide:">= wide"})(Object(Ae.a)(st,{baseValue:0,chartType:"line",data:[],dateParser:"%Y-%m-%dT%H:%M:%S",interactiveLegend:!0,interval:"day",isRequesting:!1,mode:"time-comparison",screenReaderFormat:"%B %-d, %Y",showHeaderControls:!0,tooltipLabelFormat:"%B %-d, %Y",tooltipValueFormat:",",xFormat:"%d",x2Format:"%b %Y",currency:{symbol:"$",symbolPosition:"left",decimalSeparator:".",thousandSeparator:","},className:"",showLegend:!0}))},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){"use strict";var r=n(0),o=n(52),a=n(18),i=n.n(a),c=n(9),u=n(5),l=n.n(u);n(574);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var f=["label","value","help","className","instanceId","onChange","onClick","prefix","suffix","type","disabled","trafficError"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b(r.key),r)}}function b(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function h(e,t,n){return t=y(t),function(e,t){if(t&&("object"==s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],y(e).constructor):t.apply(e,n))}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var v=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=h(this,t,[e])).state={isFocused:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}(t,e),n=t,(o=[{key:"handleFocusOutside",value:function(){this.setState({isFocused:!1})}},{key:"handleOnClick",value:function(e,t){this.setState({isFocused:!0}),"function"==typeof t&&t(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,o=t.value,a=t.help,i=t.className,u=t.instanceId,s=t.onChange,p=t.onClick,b=t.prefix,h=t.suffix,y=t.type,m=void 0===y?"text":y,v=t.disabled,g=t.trafficError,O=void 0!==g&&g,w=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(t,f),j=(this.state.isFocused,"inspector-text-control-with-affixes-".concat(u)),E=[];a&&E.push("".concat(j,"__help")),b&&E.push("".concat(j,"__prefix")),h&&E.push("".concat(j,"__suffix"));var _=l()(i,{"with-value":""!==o,empty:""===o}),S=l()("text-control-with-affixes",{"text-control-with-prefix":b,"text-control-with-suffix":h,disabled:v});return Object(r.createElement)(c.BaseControl,{label:n,id:j,help:a,className:_,onClick:function(t){return e.handleOnClick(t,p)}},Object(r.createElement)("div",{className:S},b&&Object(r.createElement)("span",{id:"".concat(j,"__prefix"),className:"text-control-with-affixes__prefix"},b),Object(r.createElement)("input",d({className:"components-text-control__input ".concat(O?"bwf-error":""),type:m,id:j,value:o,onChange:function(e){return s(e.target.value)},"aria-describedby":E.join(" "),disabled:v,onFocus:function(){return e.setState({isFocused:!0})}},w)),h&&Object(r.createElement)("span",{id:"".concat(j,"__suffix"),className:"text-control-with-affixes__suffix"},h)))}}])&&p(n.prototype,o),a&&p(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);v.propTypes={label:i.a.string,help:i.a.string,type:i.a.string,value:i.a.string.isRequired,className:i.a.string,onChange:i.a.func.isRequired,prefix:i.a.node,suffix:i.a.node,disabled:i.a.bool},t.a=Object(o.compose)([o.withInstanceId,c.withFocusOutside])(v)},function(e,t,n){},,function(e,t,n){e.exports={graphlib:n(300),layout:n(656),debug:n(713),util:{time:n(287).time,notime:n(287).notime},version:n(714)}},function(e,t,n){var r=n(578);e.exports={Graph:r.Graph,json:n(646),alg:n(647),version:r.version}},function(e,t,n){e.exports={Graph:n(423),version:n(645)}},function(e,t,n){var r=n(474);e.exports=function(e){return r(e,4)}},function(e,t,n){var r=n(444);e.exports=function(){this.__data__=new r,this.size=0}},function(e,t){e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},function(e,t){e.exports=function(e){return this.__data__.get(e)}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t,n){var r=n(444),o=n(585),a=n(543);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var i=n.__data__;if(!o||i.length<199)return i.push([e,t]),this.size=++n.size,this;n=this.__data__=new a(i)}return n.set(e,t),this.size=n.size,this}},,function(e,t,n){var r=n(347),o=n(313);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},,function(e,t,n){var r=n(347),o=n(322);e.exports=function(e,t){return e&&r(t,o(t),e)}},function(e,t,n){var r=n(298),o=n(477),a=n(591),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return a(e);var t=o(e),n=[];for(var c in e)("constructor"!=c||!t&&i.call(e,c))&&n.push(c);return n}},function(e,t){e.exports=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}},function(e,t,n){var r=n(347),o=n(427);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(347),o=n(482);e.exports=function(e,t){return r(e,o(e),t)}},function(e,t,n){var r=n(484),o=n(482),a=n(322);e.exports=function(e){return r(e,a,o)}},function(e,t){var n=Object.prototype.hasOwnProperty;e.exports=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&n.call(e,"index")&&(r.index=e.index,r.input=e.input),r}},function(e,t,n){var r=n(429),o=n(597),a=n(598),i=n(599),c=n(486);e.exports=function(e,t,n){var u=e.constructor;switch(t){case"[object ArrayBuffer]":return r(e);case"[object Boolean]":case"[object Date]":return new u(+e);case"[object DataView]":return o(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return c(e,n);case"[object Map]":return new u;case"[object Number]":case"[object String]":return new u(e);case"[object RegExp]":return a(e);case"[object Set]":return new u;case"[object Symbol]":return i(e)}}},function(e,t,n){var r=n(429);e.exports=function(e,t){var n=t?r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}},function(e,t){var n=/\w*$/;e.exports=function(e){var t=new e.constructor(e.source,n.exec(e));return t.lastIndex=e.lastIndex,t}},function(e,t,n){var r=n(343),o=r?r.prototype:void 0,a=o?o.valueOf:void 0;e.exports=function(e){return a?Object(a.call(e)):{}}},function(e,t,n){var r=n(601),o=n(446),a=n(544),i=a&&a.isMap,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(354),o=n(311);e.exports=function(e){return o(e)&&"[object Map]"==r(e)}},function(e,t,n){var r=n(603),o=n(446),a=n(544),i=a&&a.isSet,c=i?o(i):r;e.exports=c},function(e,t,n){var r=n(354),o=n(311);e.exports=function(e){return o(e)&&"[object Set]"==r(e)}},function(e,t){e.exports=function(e){return function(t,n,r){for(var o=-1,a=Object(t),i=r(t),c=i.length;c--;){var u=i[e?c:++o];if(!1===n(a[u],u,a))break}return t}}},function(e,t,n){var r=n(318);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,i=t?a:-1,c=Object(n);(t?i--:++i<a)&&!1!==o(c[i],i,c););return n}}},function(e,t,n){var r=n(384);e.exports=function(e,t){var n=[];return r(e,(function(e,r,o){t(e,r,o)&&n.push(e)})),n}},function(e,t,n){var r=n(608),o=n(616),a=n(498);e.exports=function(e){var t=o(e);return 1==t.length&&t[0][2]?a(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},function(e,t,n){var r=n(380),o=n(493);e.exports=function(e,t,n,a){var i=n.length,c=i,u=!a;if(null==e)return!c;for(e=Object(e);i--;){var l=n[i];if(u&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<c;){var s=(l=n[i])[0],f=e[s],d=l[1];if(u&&l[2]){if(void 0===f&&!(s in e))return!1}else{var p=new r;if(a)var b=a(f,d,s,e,t,p);if(!(void 0===b?o(d,f,3,a,p):b))return!1}}return!0}},function(e,t,n){var r=n(380),o=n(494),a=n(613),i=n(615),c=n(354),u=n(285),l=n(353),s=n(403),f="[object Object]",d=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,p,b,h){var y=u(e),m=u(t),v=y?"[object Array]":c(e),g=m?"[object Array]":c(t),O=(v="[object Arguments]"==v?f:v)==f,w=(g="[object Arguments]"==g?f:g)==f,j=v==g;if(j&&l(e)){if(!l(t))return!1;y=!0,O=!1}if(j&&!O)return h||(h=new r),y||s(e)?o(e,t,n,p,b,h):a(e,t,v,n,p,b,h);if(!(1&n)){var E=O&&d.call(e,"__wrapped__"),_=w&&d.call(t,"__wrapped__");if(E||_){var S=E?e.value():e,x=_?t.value():t;return h||(h=new r),b(S,x,n,p,h)}}return!!j&&(h||(h=new r),i(e,t,n,p,b,h))}},function(e,t){e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},function(e,t){e.exports=function(e){return this.__data__.has(e)}},function(e,t){e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},function(e,t,n){var r=n(343),o=n(485),a=n(352),i=n(494),c=n(614),u=n(433),l=r?r.prototype:void 0,s=l?l.valueOf:void 0;e.exports=function(e,t,n,r,l,f,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!f(new o(e),new o(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var p=c;case"[object Set]":var b=1&r;if(p||(p=u),e.size!=t.size&&!b)return!1;var h=d.get(e);if(h)return h==t;r|=2,d.set(e,t);var y=i(p(e),p(t),r,l,f,d);return d.delete(e),y;case"[object Symbol]":if(s)return s.call(e)==s.call(t)}return!1}},function(e,t){e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},function(e,t,n){var r=n(483),o=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,a,i,c){var u=1&n,l=r(e),s=l.length;if(s!=r(t).length&&!u)return!1;for(var f=s;f--;){var d=l[f];if(!(u?d in t:o.call(t,d)))return!1}var p=c.get(e),b=c.get(t);if(p&&b)return p==t&&b==e;var h=!0;c.set(e,t),c.set(t,e);for(var y=u;++f<s;){var m=e[d=l[f]],v=t[d];if(a)var g=u?a(v,m,d,t,e,c):a(m,v,d,e,t,c);if(!(void 0===g?m===v||i(m,v,n,a,c):g)){h=!1;break}y||(y="constructor"==d)}if(h&&!y){var O=e.constructor,w=t.constructor;O==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof O&&O instanceof O&&"function"==typeof w&&w instanceof w||(h=!1)}return c.delete(e),c.delete(t),h}},function(e,t,n){var r=n(497),o=n(313);e.exports=function(e){for(var t=o(e),n=t.length;n--;){var a=t[n],i=e[a];t[n]=[a,i,r(i)]}return t}},function(e,t,n){var r=n(493),o=n(618),a=n(499),i=n(546),c=n(497),u=n(498),l=n(404);e.exports=function(e,t){return i(e)&&c(t)?u(l(e),t):function(n){var i=o(n,e);return void 0===i&&i===t?a(n,e):r(t,i,3)}}},function(e,t,n){var r=n(385);e.exports=function(e,t,n){var o=null==e?void 0:r(e,t);return void 0===o?n:o}},function(e,t){e.exports=function(e,t){return null!=e&&t in Object(e)}},function(e,t,n){var r=n(500),o=n(621),a=n(546),i=n(404);e.exports=function(e){return a(e)?r(i(e)):o(e)}},function(e,t,n){var r=n(385);e.exports=function(e){return function(t){return r(t,e)}}},function(e,t){e.exports=function(e,t,n,r){var o=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++o]);++o<a;)n=t(n,e[o],o,e);return n}},function(e,t){e.exports=function(e,t,n,r,o){return o(e,(function(e,o,a){n=r?(r=!1,e):t(n,e,o,a)})),n}},function(e,t,n){var r=n(545),o=n(354),a=n(318),i=n(625),c=n(626);e.exports=function(e){if(null==e)return 0;if(a(e))return i(e)?c(e):e.length;var t=o(e);return"[object Map]"==t||"[object Set]"==t?e.size:r(e).length}},function(e,t,n){var r=n(356),o=n(285),a=n(311);e.exports=function(e){return"string"==typeof e||!o(e)&&a(e)&&"[object String]"==r(e)}},function(e,t,n){var r=n(627),o=n(628),a=n(629);e.exports=function(e){return o(e)?a(e):r(e)}},function(e,t,n){var r=n(500)("length");e.exports=r},function(e,t){var n=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return n.test(e)}},function(e,t){var n="[\\ud800-\\udfff]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",o="\\ud83c[\\udffb-\\udfff]",a="[^\\ud800-\\udfff]",i="(?:\\ud83c[\\udde6-\\uddff]){2}",c="[\\ud800-\\udbff][\\udc00-\\udfff]",u="(?:"+r+"|"+o+")"+"?",l="[\\ufe0e\\ufe0f]?"+u+("(?:\\u200d(?:"+[a,i,c].join("|")+")[\\ufe0e\\ufe0f]?"+u+")*"),s="(?:"+[a+r+"?",r,i,c,n].join("|")+")",f=RegExp(o+"(?="+o+")|"+s+l,"g");e.exports=function(e){for(var t=f.lastIndex=0;f.test(e);)++t;return t}},function(e,t,n){var r=n(425),o=n(488),a=n(431),i=n(309),c=n(383),u=n(285),l=n(353),s=n(424),f=n(298),d=n(403);e.exports=function(e,t,n){var p=u(e),b=p||l(e)||d(e);if(t=i(t,4),null==n){var h=e&&e.constructor;n=b?p?new h:[]:f(e)&&s(h)?o(c(e)):{}}return(b?r:a)(e,(function(e,r,o){return t(n,e,r,o)})),n}},function(e,t,n){var r=n(434),o=n(386),a=n(636),i=n(508),c=o((function(e){return a(r(e,1,i,!0))}));e.exports=c},function(e,t,n){var r=n(343),o=n(426),a=n(285),i=r?r.isConcatSpreadable:void 0;e.exports=function(e){return a(e)||o(e)||!!(i&&e&&e[i])}},function(e,t){e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},function(e,t,n){var r=n(430),o=n(475),a=n(323),i=o?function(e,t){return o(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:a;e.exports=i},function(e,t){var n=Date.now;e.exports=function(e){var t=0,r=0;return function(){var o=n(),a=16-(o-r);if(r=o,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}},function(e,t,n){var r=n(495),o=n(637),a=n(641),i=n(496),c=n(642),u=n(433);e.exports=function(e,t,n){var l=-1,s=o,f=e.length,d=!0,p=[],b=p;if(n)d=!1,s=a;else if(f>=200){var h=t?null:c(e);if(h)return u(h);d=!1,s=i,b=new r}else b=t?[]:p;e:for(;++l<f;){var y=e[l],m=t?t(y):y;if(y=n||0!==y?y:0,d&&m==m){for(var v=b.length;v--;)if(b[v]===m)continue e;t&&b.push(m),p.push(y)}else s(b,m,n)||(b!==p&&b.push(m),p.push(y))}return p}},function(e,t,n){var r=n(638);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},function(e,t,n){var r=n(507),o=n(639),a=n(640);e.exports=function(e,t,n){return t==t?a(e,t,n):r(e,o,n)}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n){for(var r=n-1,o=e.length;++r<o;)if(e[r]===t)return r;return-1}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=null==e?0:e.length;++r<o;)if(n(t,e[r]))return!0;return!1}},function(e,t,n){var r=n(749),o=n(643),a=n(433),i=r&&1/a(new r([,-0]))[1]==1/0?function(e){return new r(e)}:o;e.exports=i},function(e,t){e.exports=function(){}},function(e,t,n){var r=n(448);e.exports=function(e,t){return r(t,(function(t){return e[t]}))}},function(e,t){e.exports="2.1.8"},function(e,t,n){var r=n(293),o=n(423);function a(e){return r.map(e.nodes(),(function(t){var n=e.node(t),o=e.parent(t),a={v:t};return r.isUndefined(n)||(a.value=n),r.isUndefined(o)||(a.parent=o),a}))}function i(e){return r.map(e.edges(),(function(t){var n=e.edge(t),o={v:t.v,w:t.w};return r.isUndefined(t.name)||(o.name=t.name),r.isUndefined(n)||(o.value=n),o}))}e.exports={write:function(e){var t={options:{directed:e.isDirected(),multigraph:e.isMultigraph(),compound:e.isCompound()},nodes:a(e),edges:i(e)};r.isUndefined(e.graph())||(t.value=r.clone(e.graph()));return t},read:function(e){var t=new o(e.options).setGraph(e.value);return r.each(e.nodes,(function(e){t.setNode(e.v,e.value),e.parent&&t.setParent(e.v,e.parent)})),r.each(e.edges,(function(e){t.setEdge({v:e.v,w:e.w,name:e.name},e.value)})),t}}},function(e,t,n){e.exports={components:n(648),dijkstra:n(510),dijkstraAll:n(649),findCycles:n(650),floydWarshall:n(651),isAcyclic:n(652),postorder:n(653),preorder:n(654),prim:n(655),tarjan:n(512),topsort:n(513)}},function(e,t,n){var r=n(293);e.exports=function(e){var t,n={},o=[];function a(o){r.has(n,o)||(n[o]=!0,t.push(o),r.each(e.successors(o),a),r.each(e.predecessors(o),a))}return r.each(e.nodes(),(function(e){t=[],a(e),t.length&&o.push(t)})),o}},function(e,t,n){var r=n(510),o=n(293);e.exports=function(e,t,n){return o.transform(e.nodes(),(function(o,a){o[a]=r(e,a,t,n)}),{})}},function(e,t,n){var r=n(293),o=n(512);e.exports=function(e){return r.filter(o(e),(function(t){return t.length>1||1===t.length&&e.hasEdge(t[0],t[0])}))}},function(e,t,n){var r=n(293);e.exports=function(e,t,n){return function(e,t,n){var r={},o=e.nodes();return o.forEach((function(e){r[e]={},r[e][e]={distance:0},o.forEach((function(t){e!==t&&(r[e][t]={distance:Number.POSITIVE_INFINITY})})),n(e).forEach((function(n){var o=n.v===e?n.w:n.v,a=t(n);r[e][o]={distance:a,predecessor:e}}))})),o.forEach((function(e){var t=r[e];o.forEach((function(n){var a=r[n];o.forEach((function(n){var r=a[e],o=t[n],i=a[n],c=r.distance+o.distance;c<i.distance&&(i.distance=c,i.predecessor=o.predecessor)}))}))})),r}(e,t||o,n||function(t){return e.outEdges(t)})};var o=r.constant(1)},function(e,t,n){var r=n(513);e.exports=function(e){try{r(e)}catch(e){if(e instanceof r.CycleException)return!1;throw e}return!0}},function(e,t,n){var r=n(514);e.exports=function(e,t){return r(e,t,"post")}},function(e,t,n){var r=n(514);e.exports=function(e,t){return r(e,t,"pre")}},function(e,t,n){var r=n(293),o=n(423),a=n(511);e.exports=function(e,t){var n,i=new o,c={},u=new a;function l(e){var r=e.v===n?e.w:e.v,o=u.priority(r);if(void 0!==o){var a=t(e);a<o&&(c[r]=n,u.decrease(r,a))}}if(0===e.nodeCount())return i;r.each(e.nodes(),(function(e){u.add(e,Number.POSITIVE_INFINITY),i.setNode(e)})),u.decrease(e.nodes()[0],0);var s=!1;for(;u.size()>0;){if(n=u.removeMin(),r.has(c,n))i.setEdge(n,c[n]);else{if(s)throw new Error("Input graph is not connected: "+e);s=!0}e.nodeEdges(n).forEach(l)}return i}},function(e,t,n){"use strict";var r=n(278),o=n(692),a=n(695),i=n(696),c=n(287).normalizeRanks,u=n(698),l=n(287).removeEmptyRanks,s=n(699),f=n(700),d=n(701),p=n(702),b=n(711),h=n(287),y=n(300).Graph;e.exports=function(e,t){var n=t&&t.debugTiming?h.time:h.notime;n("layout",(function(){var t=n("  buildLayoutGraph",(function(){return function(e){var t=new y({multigraph:!0,compound:!0}),n=x(e.graph());return t.setGraph(r.merge({},v,S(n,m),r.pick(n,g))),r.forEach(e.nodes(),(function(n){var o=x(e.node(n));t.setNode(n,r.defaults(S(o,O),w)),t.setParent(n,e.parent(n))})),r.forEach(e.edges(),(function(n){var o=x(e.edge(n));t.setEdge(n,r.merge({},E,S(o,j),r.pick(o,_)))})),t}(e)}));n("  runLayout",(function(){!function(e,t){t("    makeSpaceForEdgeLabels",(function(){!function(e){var t=e.graph();t.ranksep/=2,r.forEach(e.edges(),(function(n){var r=e.edge(n);r.minlen*=2,"c"!==r.labelpos.toLowerCase()&&("TB"===t.rankdir||"BT"===t.rankdir?r.width+=r.labeloffset:r.height+=r.labeloffset)}))}(e)})),t("    removeSelfEdges",(function(){!function(e){r.forEach(e.edges(),(function(t){if(t.v===t.w){var n=e.node(t.v);n.selfEdges||(n.selfEdges=[]),n.selfEdges.push({e:t,label:e.edge(t)}),e.removeEdge(t)}}))}(e)})),t("    acyclic",(function(){o.run(e)})),t("    nestingGraph.run",(function(){s.run(e)})),t("    rank",(function(){i(h.asNonCompoundGraph(e))})),t("    injectEdgeLabelProxies",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.width&&n.height){var r=e.node(t.v),o={rank:(e.node(t.w).rank-r.rank)/2+r.rank,e:t};h.addDummyNode(e,"edge-proxy",o,"_ep")}}))}(e)})),t("    removeEmptyRanks",(function(){l(e)})),t("    nestingGraph.cleanup",(function(){s.cleanup(e)})),t("    normalizeRanks",(function(){c(e)})),t("    assignRankMinMax",(function(){!function(e){var t=0;r.forEach(e.nodes(),(function(n){var o=e.node(n);o.borderTop&&(o.minRank=e.node(o.borderTop).rank,o.maxRank=e.node(o.borderBottom).rank,t=r.max(t,o.maxRank))})),e.graph().maxRank=t}(e)})),t("    removeEdgeLabelProxies",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);"edge-proxy"===n.dummy&&(e.edge(n.e).labelRank=n.rank,e.removeNode(t))}))}(e)})),t("    normalize.run",(function(){a.run(e)})),t("    parentDummyChains",(function(){u(e)})),t("    addBorderSegments",(function(){f(e)})),t("    order",(function(){p(e)})),t("    insertSelfEdges",(function(){!function(e){var t=h.buildLayerMatrix(e);r.forEach(t,(function(t){var n=0;r.forEach(t,(function(t,o){var a=e.node(t);a.order=o+n,r.forEach(a.selfEdges,(function(t){h.addDummyNode(e,"selfedge",{width:t.label.width,height:t.label.height,rank:a.rank,order:o+ ++n,e:t.e,label:t.label},"_se")})),delete a.selfEdges}))}))}(e)})),t("    adjustCoordinateSystem",(function(){d.adjust(e)})),t("    position",(function(){b(e)})),t("    positionSelfEdges",(function(){!function(e){r.forEach(e.nodes(),(function(t){var n=e.node(t);if("selfedge"===n.dummy){var r=e.node(n.e.v),o=r.x+r.width/2,a=r.y,i=n.x-o,c=r.height/2;e.setEdge(n.e,n.label),e.removeNode(t),n.label.points=[{x:o+2*i/3,y:a-c},{x:o+5*i/6,y:a-c},{x:o+i,y:a},{x:o+5*i/6,y:a+c},{x:o+2*i/3,y:a+c}],n.label.x=n.x,n.label.y=n.y}}))}(e)})),t("    removeBorderNodes",(function(){!function(e){r.forEach(e.nodes(),(function(t){if(e.children(t).length){var n=e.node(t),o=e.node(n.borderTop),a=e.node(n.borderBottom),i=e.node(r.last(n.borderLeft)),c=e.node(r.last(n.borderRight));n.width=Math.abs(c.x-i.x),n.height=Math.abs(a.y-o.y),n.x=i.x+n.width/2,n.y=o.y+n.height/2}})),r.forEach(e.nodes(),(function(t){"border"===e.node(t).dummy&&e.removeNode(t)}))}(e)})),t("    normalize.undo",(function(){a.undo(e)})),t("    fixupEdgeLabelCoords",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(r.has(n,"x"))switch("l"!==n.labelpos&&"r"!==n.labelpos||(n.width-=n.labeloffset),n.labelpos){case"l":n.x-=n.width/2+n.labeloffset;break;case"r":n.x+=n.width/2+n.labeloffset}}))}(e)})),t("    undoCoordinateSystem",(function(){d.undo(e)})),t("    translateGraph",(function(){!function(e){var t=Number.POSITIVE_INFINITY,n=0,o=Number.POSITIVE_INFINITY,a=0,i=e.graph(),c=i.marginx||0,u=i.marginy||0;function l(e){var r=e.x,i=e.y,c=e.width,u=e.height;t=Math.min(t,r-c/2),n=Math.max(n,r+c/2),o=Math.min(o,i-u/2),a=Math.max(a,i+u/2)}r.forEach(e.nodes(),(function(t){l(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.has(n,"x")&&l(n)})),t-=c,o-=u,r.forEach(e.nodes(),(function(n){var r=e.node(n);r.x-=t,r.y-=o})),r.forEach(e.edges(),(function(n){var a=e.edge(n);r.forEach(a.points,(function(e){e.x-=t,e.y-=o})),r.has(a,"x")&&(a.x-=t),r.has(a,"y")&&(a.y-=o)})),i.width=n-t+c,i.height=a-o+u}(e)})),t("    assignNodeIntersects",(function(){!function(e){r.forEach(e.edges(),(function(t){var n,r,o=e.edge(t),a=e.node(t.v),i=e.node(t.w);o.points?(n=o.points[0],r=o.points[o.points.length-1]):(o.points=[],n=i,r=a),o.points.unshift(h.intersectRect(a,n)),o.points.push(h.intersectRect(i,r))}))}(e)})),t("    reversePoints",(function(){!function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);n.reversed&&n.points.reverse()}))}(e)})),t("    acyclic.undo",(function(){o.undo(e)}))}(t,n)})),n("  updateInputGraph",(function(){!function(e,t){r.forEach(e.nodes(),(function(n){var r=e.node(n),o=t.node(n);r&&(r.x=o.x,r.y=o.y,t.children(n).length&&(r.width=o.width,r.height=o.height))})),r.forEach(e.edges(),(function(n){var o=e.edge(n),a=t.edge(n);o.points=a.points,r.has(a,"x")&&(o.x=a.x,o.y=a.y)})),e.graph().width=t.graph().width,e.graph().height=t.graph().height}(e,t)}))}))};var m=["nodesep","edgesep","ranksep","marginx","marginy"],v={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},g=["acyclicer","ranker","rankdir","align"],O=["width","height"],w={width:0,height:0},j=["minlen","weight","width","height","labeloffset"],E={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},_=["labelpos"];function S(e,t){return r.mapValues(r.pick(e,t),Number)}function x(e){var t={};return r.forEach(e,(function(e,n){t[n.toLowerCase()]=e})),t}},function(e,t,n){var r=n(474);e.exports=function(e){return r(e,5)}},function(e,t,n){var r=n(386),o=n(352),a=n(387),i=n(322),c=Object.prototype,u=c.hasOwnProperty,l=r((function(e,t){e=Object(e);var n=-1,r=t.length,l=r>2?t[2]:void 0;for(l&&a(t[0],t[1],l)&&(r=1);++n<r;)for(var s=t[n],f=i(s),d=-1,p=f.length;++d<p;){var b=f[d],h=e[b];(void 0===h||o(h,c[b])&&!u.call(e,b))&&(e[b]=s[b])}return e}));e.exports=l},function(e,t,n){var r=n(660)(n(661));e.exports=r},function(e,t,n){var r=n(309),o=n(318),a=n(313);e.exports=function(e){return function(t,n,i){var c=Object(t);if(!o(t)){var u=r(n,3);t=a(t),n=function(e){return u(c[e],e,c)}}var l=e(t,n,i);return l>-1?c[u?t[l]:l]:void 0}}},function(e,t,n){var r=n(507),o=n(309),a=n(662),i=Math.max;e.exports=function(e,t,n){var c=null==e?0:e.length;if(!c)return-1;var u=null==n?0:a(n);return u<0&&(u=i(c+u,0)),r(e,o(t,3),u)}},function(e,t,n){var r=n(515);e.exports=function(e){var t=r(e),n=t%1;return t==t?n?t-n:t:0}},function(e,t,n){var r=n(432),o=n(491),a=n(322);e.exports=function(e,t){return null==e?e:r(e,o(t),a)}},function(e,t){e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},function(e,t,n){var r=n(382),o=n(431),a=n(309);e.exports=function(e,t){var n={};return t=a(t,3),o(e,(function(e,o,a){r(n,o,t(e,o,a))})),n}},function(e,t,n){var r=n(435),o=n(667),a=n(323);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t){e.exports=function(e,t){return e>t}},function(e,t,n){var r=n(669),o=n(673)((function(e,t,n){r(e,t,n)}));e.exports=o},function(e,t,n){var r=n(380),o=n(517),a=n(432),i=n(670),c=n(298),u=n(322),l=n(518);e.exports=function e(t,n,s,f,d){t!==n&&a(n,(function(a,u){if(d||(d=new r),c(a))i(t,n,u,s,e,f,d);else{var p=f?f(l(t,u),a,u+"",t,n,d):void 0;void 0===p&&(p=a),o(t,u,p)}}),u)}},function(e,t,n){var r=n(517),o=n(478),a=n(486),i=n(479),c=n(487),u=n(426),l=n(285),s=n(508),f=n(353),d=n(424),p=n(298),b=n(671),h=n(403),y=n(518),m=n(672);e.exports=function(e,t,n,v,g,O,w){var j=y(e,n),E=y(t,n),_=w.get(E);if(_)r(e,n,_);else{var S=O?O(j,E,n+"",e,t,w):void 0,x=void 0===S;if(x){var k=l(E),P=!k&&f(E),C=!k&&!P&&h(E);S=E,k||P||C?l(j)?S=j:s(j)?S=i(j):P?(x=!1,S=o(E,!0)):C?(x=!1,S=a(E,!0)):S=[]:b(E)||u(E)?(S=j,u(j)?S=m(j):p(j)&&!d(j)||(S=c(E))):x=!1}x&&(w.set(E,S),g(S,E,v,O,w),w.delete(E)),r(e,n,S)}}},function(e,t,n){var r=n(356),o=n(383),a=n(311),i=Function.prototype,c=Object.prototype,u=i.toString,l=c.hasOwnProperty,s=u.call(Object);e.exports=function(e){if(!a(e)||"[object Object]"!=r(e))return!1;var t=o(e);if(null===t)return!0;var n=l.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&u.call(n)==s}},function(e,t,n){var r=n(347),o=n(322);e.exports=function(e){return r(e,o(e))}},function(e,t,n){var r=n(386),o=n(387);e.exports=function(e){return r((function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,c=a>2?n[2]:void 0;for(i=e.length>3&&"function"==typeof i?(a--,i):void 0,c&&o(n[0],n[1],c)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var u=n[r];u&&e(t,u,r,i)}return t}))}},function(e,t,n){var r=n(435),o=n(519),a=n(323);e.exports=function(e){return e&&e.length?r(e,a,o):void 0}},function(e,t,n){var r=n(435),o=n(309),a=n(519);e.exports=function(e,t){return e&&e.length?r(e,o(t,2),a):void 0}},function(e,t,n){var r=n(677),o=n(680)((function(e,t){return null==e?{}:r(e,t)}));e.exports=o},function(e,t,n){var r=n(678),o=n(499);e.exports=function(e,t){return r(e,t,(function(t,n){return o(e,n)}))}},function(e,t,n){var r=n(385),o=n(679),a=n(447);e.exports=function(e,t,n){for(var i=-1,c=t.length,u={};++i<c;){var l=t[i],s=r(e,l);n(s,l)&&o(u,a(l,e),s)}return u}},function(e,t,n){var r=n(381),o=n(447),a=n(445),i=n(298),c=n(404);e.exports=function(e,t,n,u){if(!i(e))return e;for(var l=-1,s=(t=o(t,e)).length,f=s-1,d=e;null!=d&&++l<s;){var p=c(t[l]),b=n;if("__proto__"===p||"constructor"===p||"prototype"===p)return e;if(l!=f){var h=d[p];void 0===(b=u?u(h,p,d):void 0)&&(b=i(h)?h:a(t[l+1])?[]:{})}r(d,p,b),d=d[p]}return e}},function(e,t,n){var r=n(516),o=n(505),a=n(506);e.exports=function(e){return a(o(e,void 0,r),e+"")}},function(e,t,n){var r=n(682)();e.exports=r},function(e,t,n){var r=n(683),o=n(387),a=n(515);e.exports=function(e){return function(t,n,i){return i&&"number"!=typeof i&&o(t,n,i)&&(n=i=void 0),t=a(t),void 0===n?(n=t,t=0):n=a(n),i=void 0===i?t<n?1:-1:a(i),r(t,n,i,e)}}},function(e,t){var n=Math.ceil,r=Math.max;e.exports=function(e,t,o,a){for(var i=-1,c=r(n((t-e)/(o||1)),0),u=Array(c);c--;)u[a?c:++i]=e,e+=o;return u}},function(e,t,n){var r=n(434),o=n(685),a=n(386),i=n(387),c=a((function(e,t){if(null==e)return[];var n=t.length;return n>1&&i(e,t[0],t[1])?t=[]:n>2&&i(t[0],t[1],t[2])&&(t=[t[0]]),o(e,r(t,1),[])}));e.exports=c},function(e,t,n){var r=n(448),o=n(385),a=n(309),i=n(503),c=n(686),u=n(446),l=n(687),s=n(323),f=n(285);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return f(e)?function(t){return o(t,1===e.length?e[0]:e)}:e})):[s];var d=-1;t=r(t,u(a));var p=i(e,(function(e,n,o){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return c(p,(function(e,t){return l(e,t,n)}))}},function(e,t){e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},function(e,t,n){var r=n(688);e.exports=function(e,t,n){for(var o=-1,a=e.criteria,i=t.criteria,c=a.length,u=n.length;++o<c;){var l=r(a[o],i[o]);if(l)return o>=u?l:l*("desc"==n[o]?-1:1)}return e.index-t.index}},function(e,t,n){var r=n(395);e.exports=function(e,t){if(e!==t){var n=void 0!==e,o=null===e,a=e==e,i=r(e),c=void 0!==t,u=null===t,l=t==t,s=r(t);if(!u&&!s&&!i&&e>t||i&&c&&l&&!u&&!s||o&&c&&l||!n&&l||!a)return 1;if(!o&&!i&&!s&&e<t||s&&n&&a&&!o&&!i||u&&n&&a||!c&&a||!l)return-1}return 0}},function(e,t,n){var r=n(750),o=0;e.exports=function(e){var t=++o;return r(e)+t}},function(e,t,n){var r=n(381),o=n(691);e.exports=function(e,t){return o(e||[],t||[],r)}},function(e,t){e.exports=function(e,t,n){for(var r=-1,o=e.length,a=t.length,i={};++r<o;){var c=r<a?t[r]:void 0;n(i,e[r],c)}return i}},function(e,t,n){"use strict";var r=n(278),o=n(693);e.exports={run:function(e){var t="greedy"===e.graph().acyclicer?o(e,function(e){return function(t){return e.edge(t).weight}}(e)):function(e){var t=[],n={},o={};function a(i){r.has(o,i)||(o[i]=!0,n[i]=!0,r.forEach(e.outEdges(i),(function(e){r.has(n,e.w)?t.push(e):a(e.w)})),delete n[i])}return r.forEach(e.nodes(),a),t}(e);r.forEach(t,(function(t){var n=e.edge(t);e.removeEdge(t),n.forwardName=t.name,n.reversed=!0,e.setEdge(t.w,t.v,n,r.uniqueId("rev"))}))},undo:function(e){r.forEach(e.edges(),(function(t){var n=e.edge(t);if(n.reversed){e.removeEdge(t);var r=n.forwardName;delete n.reversed,delete n.forwardName,e.setEdge(t.w,t.v,n,r)}}))}}},function(e,t,n){var r=n(278),o=n(300).Graph,a=n(694);e.exports=function(e,t){if(e.nodeCount()<=1)return[];var n=function(e,t){var n=new o,i=0,c=0;r.forEach(e.nodes(),(function(e){n.setNode(e,{v:e,in:0,out:0})})),r.forEach(e.edges(),(function(e){var r=n.edge(e.v,e.w)||0,o=t(e),a=r+o;n.setEdge(e.v,e.w,a),c=Math.max(c,n.node(e.v).out+=o),i=Math.max(i,n.node(e.w).in+=o)}));var l=r.range(c+i+3).map((function(){return new a})),s=i+1;return r.forEach(n.nodes(),(function(e){u(l,s,n.node(e))})),{graph:n,buckets:l,zeroIdx:s}}(e,t||i),l=function(e,t,n){var r,o=[],a=t[t.length-1],i=t[0];for(;e.nodeCount();){for(;r=i.dequeue();)c(e,t,n,r);for(;r=a.dequeue();)c(e,t,n,r);if(e.nodeCount())for(var u=t.length-2;u>0;--u)if(r=t[u].dequeue()){o=o.concat(c(e,t,n,r,!0));break}}return o}(n.graph,n.buckets,n.zeroIdx);return r.flatten(r.map(l,(function(t){return e.outEdges(t.v,t.w)})),!0)};var i=r.constant(1);function c(e,t,n,o,a){var i=a?[]:void 0;return r.forEach(e.inEdges(o.v),(function(r){var o=e.edge(r),c=e.node(r.v);a&&i.push({v:r.v,w:r.w}),c.out-=o,u(t,n,c)})),r.forEach(e.outEdges(o.v),(function(r){var o=e.edge(r),a=r.w,i=e.node(a);i.in-=o,u(t,n,i)})),e.removeNode(o.v),i}function u(e,t,n){n.out?n.in?e[n.out-n.in+t].enqueue(n):e[e.length-1].enqueue(n):e[0].enqueue(n)}},function(e,t){function n(){var e={};e._next=e._prev=e,this._sentinel=e}function r(e){e._prev._next=e._next,e._next._prev=e._prev,delete e._next,delete e._prev}function o(e,t){if("_next"!==e&&"_prev"!==e)return t}e.exports=n,n.prototype.dequeue=function(){var e=this._sentinel,t=e._prev;if(t!==e)return r(t),t},n.prototype.enqueue=function(e){var t=this._sentinel;e._prev&&e._next&&r(e),e._next=t._next,t._next._prev=e,t._next=e,e._prev=t},n.prototype.toString=function(){for(var e=[],t=this._sentinel,n=t._prev;n!==t;)e.push(JSON.stringify(n,o)),n=n._prev;return"["+e.join(", ")+"]"}},function(e,t,n){"use strict";var r=n(278),o=n(287);e.exports={run:function(e){e.graph().dummyChains=[],r.forEach(e.edges(),(function(t){!function(e,t){var n,r,a,i=t.v,c=e.node(i).rank,u=t.w,l=e.node(u).rank,s=t.name,f=e.edge(t),d=f.labelRank;if(l===c+1)return;for(e.removeEdge(t),a=0,++c;c<l;++a,++c)f.points=[],r={width:0,height:0,edgeLabel:f,edgeObj:t,rank:c},n=o.addDummyNode(e,"edge",r,"_d"),c===d&&(r.width=f.width,r.height=f.height,r.dummy="edge-label",r.labelpos=f.labelpos),e.setEdge(i,n,{weight:f.weight},s),0===a&&e.graph().dummyChains.push(n),i=n;e.setEdge(i,u,{weight:f.weight},s)}(e,t)}))},undo:function(e){r.forEach(e.graph().dummyChains,(function(t){var n,r=e.node(t),o=r.edgeLabel;for(e.setEdge(r.edgeObj,o);r.dummy;)n=e.successors(t)[0],e.removeNode(t),o.points.push({x:r.x,y:r.y}),"edge-label"===r.dummy&&(o.x=r.x,o.y=r.y,o.width=r.width,o.height=r.height),t=n,r=e.node(t)}))}}},function(e,t,n){"use strict";var r=n(388).longestPath,o=n(520),a=n(697);e.exports=function(e){switch(e.graph().ranker){case"network-simplex":c(e);break;case"tight-tree":!function(e){r(e),o(e)}(e);break;case"longest-path":i(e);break;default:c(e)}};var i=r;function c(e){a(e)}},function(e,t,n){"use strict";var r=n(278),o=n(520),a=n(388).slack,i=n(388).longestPath,c=n(300).alg.preorder,u=n(300).alg.postorder,l=n(287).simplify;function s(e){e=l(e),i(e);var t,n=o(e);for(p(n),f(n,e);t=h(n);)m(n,e,t,y(n,e,t))}function f(e,t){var n=u(e,e.nodes());n=n.slice(0,n.length-1),r.forEach(n,(function(n){!function(e,t,n){var r=e.node(n).parent;e.edge(n,r).cutvalue=d(e,t,n)}(e,t,n)}))}function d(e,t,n){var o=e.node(n).parent,a=!0,i=t.edge(n,o),c=0;return i||(a=!1,i=t.edge(o,n)),c=i.weight,r.forEach(t.nodeEdges(n),(function(r){var i,u,l=r.v===n,s=l?r.w:r.v;if(s!==o){var f=l===a,d=t.edge(r).weight;if(c+=f?d:-d,i=n,u=s,e.hasEdge(i,u)){var p=e.edge(n,s).cutvalue;c+=f?-p:p}}})),c}function p(e,t){arguments.length<2&&(t=e.nodes()[0]),b(e,{},1,t)}function b(e,t,n,o,a){var i=n,c=e.node(o);return t[o]=!0,r.forEach(e.neighbors(o),(function(a){r.has(t,a)||(n=b(e,t,n,a,o))})),c.low=i,c.lim=n++,a?c.parent=a:delete c.parent,n}function h(e){return r.find(e.edges(),(function(t){return e.edge(t).cutvalue<0}))}function y(e,t,n){var o=n.v,i=n.w;t.hasEdge(o,i)||(o=n.w,i=n.v);var c=e.node(o),u=e.node(i),l=c,s=!1;c.lim>u.lim&&(l=u,s=!0);var f=r.filter(t.edges(),(function(t){return s===v(e,e.node(t.v),l)&&s!==v(e,e.node(t.w),l)}));return r.minBy(f,(function(e){return a(t,e)}))}function m(e,t,n,o){var a=n.v,i=n.w;e.removeEdge(a,i),e.setEdge(o.v,o.w,{}),p(e),f(e,t),function(e,t){var n=r.find(e.nodes(),(function(e){return!t.node(e).parent})),o=c(e,n);o=o.slice(1),r.forEach(o,(function(n){var r=e.node(n).parent,o=t.edge(n,r),a=!1;o||(o=t.edge(r,n),a=!0),t.node(n).rank=t.node(r).rank+(a?o.minlen:-o.minlen)}))}(e,t)}function v(e,t,n){return n.low<=t.lim&&t.lim<=n.lim}e.exports=s,s.initLowLimValues=p,s.initCutValues=f,s.calcCutValue=d,s.leaveEdge=h,s.enterEdge=y,s.exchangeEdges=m},function(e,t,n){var r=n(278);e.exports=function(e){var t=function(e){var t={},n=0;function o(a){var i=n;r.forEach(e.children(a),o),t[a]={low:i,lim:n++}}return r.forEach(e.children(),o),t}(e);r.forEach(e.graph().dummyChains,(function(n){for(var r=e.node(n),o=r.edgeObj,a=function(e,t,n,r){var o,a,i=[],c=[],u=Math.min(t[n].low,t[r].low),l=Math.max(t[n].lim,t[r].lim);o=n;do{o=e.parent(o),i.push(o)}while(o&&(t[o].low>u||l>t[o].lim));a=o,o=r;for(;(o=e.parent(o))!==a;)c.push(o);return{path:i.concat(c.reverse()),lca:a}}(e,t,o.v,o.w),i=a.path,c=a.lca,u=0,l=i[u],s=!0;n!==o.w;){if(r=e.node(n),s){for(;(l=i[u])!==c&&e.node(l).maxRank<r.rank;)u++;l===c&&(s=!1)}if(!s){for(;u<i.length-1&&e.node(l=i[u+1]).minRank<=r.rank;)u++;l=i[u]}e.setParent(n,l),n=e.successors(n)[0]}}))}},function(e,t,n){var r=n(278),o=n(287);e.exports={run:function(e){var t=o.addDummyNode(e,"root",{},"_root"),n=function(e){var t={};return r.forEach(e.children(),(function(n){!function n(o,a){var i=e.children(o);i&&i.length&&r.forEach(i,(function(e){n(e,a+1)}));t[o]=a}(n,1)})),t}(e),a=r.max(r.values(n))-1,i=2*a+1;e.graph().nestingRoot=t,r.forEach(e.edges(),(function(t){e.edge(t).minlen*=i}));var c=function(e){return r.reduce(e.edges(),(function(t,n){return t+e.edge(n).weight}),0)}(e)+1;r.forEach(e.children(),(function(u){!function e(t,n,a,i,c,u,l){var s=t.children(l);if(!s.length)return void(l!==n&&t.setEdge(n,l,{weight:0,minlen:a}));var f=o.addBorderNode(t,"_bt"),d=o.addBorderNode(t,"_bb"),p=t.node(l);t.setParent(f,l),p.borderTop=f,t.setParent(d,l),p.borderBottom=d,r.forEach(s,(function(r){e(t,n,a,i,c,u,r);var o=t.node(r),s=o.borderTop?o.borderTop:r,p=o.borderBottom?o.borderBottom:r,b=o.borderTop?i:2*i,h=s!==p?1:c-u[l]+1;t.setEdge(f,s,{weight:b,minlen:h,nestingEdge:!0}),t.setEdge(p,d,{weight:b,minlen:h,nestingEdge:!0})})),t.parent(l)||t.setEdge(n,f,{weight:0,minlen:c+u[l]})}(e,t,i,c,a,n,u)})),e.graph().nodeRankFactor=i},cleanup:function(e){var t=e.graph();e.removeNode(t.nestingRoot),delete t.nestingRoot,r.forEach(e.edges(),(function(t){e.edge(t).nestingEdge&&e.removeEdge(t)}))}}},function(e,t,n){var r=n(278),o=n(287);function a(e,t,n,r,a,i){var c={width:0,height:0,rank:i,borderType:t},u=a[t][i-1],l=o.addDummyNode(e,"border",c,n);a[t][i]=l,e.setParent(l,r),u&&e.setEdge(u,l,{weight:1})}e.exports=function(e){r.forEach(e.children(),(function t(n){var o=e.children(n),i=e.node(n);if(o.length&&r.forEach(o,t),r.has(i,"minRank")){i.borderLeft=[],i.borderRight=[];for(var c=i.minRank,u=i.maxRank+1;c<u;++c)a(e,"borderLeft","_bl",n,i,c),a(e,"borderRight","_br",n,i,c)}}))}},function(e,t,n){"use strict";var r=n(278);function o(e){r.forEach(e.nodes(),(function(t){a(e.node(t))})),r.forEach(e.edges(),(function(t){a(e.edge(t))}))}function a(e){var t=e.width;e.width=e.height,e.height=t}function i(e){e.y=-e.y}function c(e){var t=e.x;e.x=e.y,e.y=t}e.exports={adjust:function(e){var t=e.graph().rankdir.toLowerCase();"lr"!==t&&"rl"!==t||o(e)},undo:function(e){var t=e.graph().rankdir.toLowerCase();"bt"!==t&&"rl"!==t||function(e){r.forEach(e.nodes(),(function(t){i(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,i),r.has(n,"y")&&i(n)}))}(e);"lr"!==t&&"rl"!==t||(!function(e){r.forEach(e.nodes(),(function(t){c(e.node(t))})),r.forEach(e.edges(),(function(t){var n=e.edge(t);r.forEach(n.points,c),r.has(n,"x")&&c(n)}))}(e),o(e))}}},function(e,t,n){"use strict";var r=n(278),o=n(703),a=n(704),i=n(705),c=n(709),u=n(710),l=n(300).Graph,s=n(287);function f(e,t,n){return r.map(t,(function(t){return c(e,t,n)}))}function d(e,t){var n=new l;r.forEach(e,(function(e){var o=e.graph().root,a=i(e,o,n,t);r.forEach(a.vs,(function(t,n){e.node(t).order=n})),u(e,n,a.vs)}))}function p(e,t){r.forEach(t,(function(t){r.forEach(t,(function(t,n){e.node(t).order=n}))}))}e.exports=function(e){var t=s.maxRank(e),n=f(e,r.range(1,t+1),"inEdges"),i=f(e,r.range(t-1,-1,-1),"outEdges"),c=o(e);p(e,c);for(var u,l=Number.POSITIVE_INFINITY,b=0,h=0;h<4;++b,++h){d(b%2?n:i,b%4>=2),c=s.buildLayerMatrix(e);var y=a(e,c);y<l&&(h=0,u=r.cloneDeep(c),l=y)}p(e,u)}},function(e,t,n){"use strict";var r=n(278);e.exports=function(e){var t={},n=r.filter(e.nodes(),(function(t){return!e.children(t).length})),o=r.max(r.map(n,(function(t){return e.node(t).rank}))),a=r.map(r.range(o+1),(function(){return[]}));var i=r.sortBy(n,(function(t){return e.node(t).rank}));return r.forEach(i,(function n(o){if(r.has(t,o))return;t[o]=!0;var i=e.node(o);a[i.rank].push(o),r.forEach(e.successors(o),n)})),a}},function(e,t,n){"use strict";var r=n(278);function o(e,t,n){for(var o=r.zipObject(n,r.map(n,(function(e,t){return t}))),a=r.flatten(r.map(t,(function(t){return r.sortBy(r.map(e.outEdges(t),(function(t){return{pos:o[t.w],weight:e.edge(t).weight}})),"pos")})),!0),i=1;i<n.length;)i<<=1;var c=2*i-1;i-=1;var u=r.map(new Array(c),(function(){return 0})),l=0;return r.forEach(a.forEach((function(e){var t=e.pos+i;u[t]+=e.weight;for(var n=0;t>0;)t%2&&(n+=u[t+1]),u[t=t-1>>1]+=e.weight;l+=e.weight*n}))),l}e.exports=function(e,t){for(var n=0,r=1;r<t.length;++r)n+=o(e,t[r-1],t[r]);return n}},function(e,t,n){var r=n(278),o=n(706),a=n(707),i=n(708);e.exports=function e(t,n,c,u){var l=t.children(n),s=t.node(n),f=s?s.borderLeft:void 0,d=s?s.borderRight:void 0,p={};f&&(l=r.filter(l,(function(e){return e!==f&&e!==d})));var b=o(t,l);r.forEach(b,(function(n){if(t.children(n.v).length){var o=e(t,n.v,c,u);p[n.v]=o,r.has(o,"barycenter")&&(a=n,i=o,r.isUndefined(a.barycenter)?(a.barycenter=i.barycenter,a.weight=i.weight):(a.barycenter=(a.barycenter*a.weight+i.barycenter*i.weight)/(a.weight+i.weight),a.weight+=i.weight))}var a,i}));var h=a(b,c);!function(e,t){r.forEach(e,(function(e){e.vs=r.flatten(e.vs.map((function(e){return t[e]?t[e].vs:e})),!0)}))}(h,p);var y=i(h,u);if(f&&(y.vs=r.flatten([f,y.vs,d],!0),t.predecessors(f).length)){var m=t.node(t.predecessors(f)[0]),v=t.node(t.predecessors(d)[0]);r.has(y,"barycenter")||(y.barycenter=0,y.weight=0),y.barycenter=(y.barycenter*y.weight+m.order+v.order)/(y.weight+2),y.weight+=2}return y}},function(e,t,n){var r=n(278);e.exports=function(e,t){return r.map(t,(function(t){var n=e.inEdges(t);if(n.length){var o=r.reduce(n,(function(t,n){var r=e.edge(n),o=e.node(n.v);return{sum:t.sum+r.weight*o.order,weight:t.weight+r.weight}}),{sum:0,weight:0});return{v:t,barycenter:o.sum/o.weight,weight:o.weight}}return{v:t}}))}},function(e,t,n){"use strict";var r=n(278);e.exports=function(e,t){var n={};return r.forEach(e,(function(e,t){var o=n[e.v]={indegree:0,in:[],out:[],vs:[e.v],i:t};r.isUndefined(e.barycenter)||(o.barycenter=e.barycenter,o.weight=e.weight)})),r.forEach(t.edges(),(function(e){var t=n[e.v],o=n[e.w];r.isUndefined(t)||r.isUndefined(o)||(o.indegree++,t.out.push(n[e.w]))})),function(e){var t=[];function n(e){return function(t){t.merged||(r.isUndefined(t.barycenter)||r.isUndefined(e.barycenter)||t.barycenter>=e.barycenter)&&function(e,t){var n=0,r=0;e.weight&&(n+=e.barycenter*e.weight,r+=e.weight);t.weight&&(n+=t.barycenter*t.weight,r+=t.weight);e.vs=t.vs.concat(e.vs),e.barycenter=n/r,e.weight=r,e.i=Math.min(t.i,e.i),t.merged=!0}(e,t)}}function o(t){return function(n){n.in.push(t),0==--n.indegree&&e.push(n)}}for(;e.length;){var a=e.pop();t.push(a),r.forEach(a.in.reverse(),n(a)),r.forEach(a.out,o(a))}return r.map(r.filter(t,(function(e){return!e.merged})),(function(e){return r.pick(e,["vs","i","barycenter","weight"])}))}(r.filter(n,(function(e){return!e.indegree})))}},function(e,t,n){var r=n(278),o=n(287);function a(e,t,n){for(var o;t.length&&(o=r.last(t)).i<=n;)t.pop(),e.push(o.vs),n++;return n}e.exports=function(e,t){var n=o.partition(e,(function(e){return r.has(e,"barycenter")})),i=n.lhs,c=r.sortBy(n.rhs,(function(e){return-e.i})),u=[],l=0,s=0,f=0;i.sort((d=!!t,function(e,t){return e.barycenter<t.barycenter?-1:e.barycenter>t.barycenter?1:d?t.i-e.i:e.i-t.i})),f=a(u,c,f),r.forEach(i,(function(e){f+=e.vs.length,u.push(e.vs),l+=e.barycenter*e.weight,s+=e.weight,f=a(u,c,f)}));var d;var p={vs:r.flatten(u,!0)};s&&(p.barycenter=l/s,p.weight=s);return p}},function(e,t,n){var r=n(278),o=n(300).Graph;e.exports=function(e,t,n){var a=function(e){var t;for(;e.hasNode(t=r.uniqueId("_root")););return t}(e),i=new o({compound:!0}).setGraph({root:a}).setDefaultNodeLabel((function(t){return e.node(t)}));return r.forEach(e.nodes(),(function(o){var c=e.node(o),u=e.parent(o);(c.rank===t||c.minRank<=t&&t<=c.maxRank)&&(i.setNode(o),i.setParent(o,u||a),r.forEach(e[n](o),(function(t){var n=t.v===o?t.w:t.v,a=i.edge(n,o),c=r.isUndefined(a)?0:a.weight;i.setEdge(n,o,{weight:e.edge(t).weight+c})})),r.has(c,"minRank")&&i.setNode(o,{borderLeft:c.borderLeft[t],borderRight:c.borderRight[t]}))})),i}},function(e,t,n){var r=n(278);e.exports=function(e,t,n){var o,a={};r.forEach(n,(function(n){for(var r,i,c=e.parent(n);c;){if((r=e.parent(c))?(i=a[r],a[r]=c):(i=o,o=c),i&&i!==c)return void t.setEdge(i,c);c=r}}))}},function(e,t,n){"use strict";var r=n(278),o=n(287),a=n(712).positionX;e.exports=function(e){(function(e){var t=o.buildLayerMatrix(e),n=e.graph().ranksep,a=0;r.forEach(t,(function(t){var o=r.max(r.map(t,(function(t){return e.node(t).height})));r.forEach(t,(function(t){e.node(t).y=a+o/2})),a+=o+n}))})(e=o.asNonCompoundGraph(e)),r.forEach(a(e),(function(t,n){e.node(n).x=t}))}},function(e,t,n){"use strict";var r=n(278),o=n(300).Graph,a=n(287);function i(e,t){var n={};return r.reduce(t,(function(t,o){var a=0,i=0,c=t.length,l=r.last(o);return r.forEach(o,(function(t,s){var f=function(e,t){if(e.node(t).dummy)return r.find(e.predecessors(t),(function(t){return e.node(t).dummy}))}(e,t),d=f?e.node(f).order:c;(f||t===l)&&(r.forEach(o.slice(i,s+1),(function(t){r.forEach(e.predecessors(t),(function(r){var o=e.node(r),i=o.order;!(i<a||d<i)||o.dummy&&e.node(t).dummy||u(n,r,t)}))})),i=s+1,a=d)})),o})),n}function c(e,t){var n={};function o(t,o,a,i,c){var l;r.forEach(r.range(o,a),(function(o){l=t[o],e.node(l).dummy&&r.forEach(e.predecessors(l),(function(t){var r=e.node(t);r.dummy&&(r.order<i||r.order>c)&&u(n,t,l)}))}))}return r.reduce(t,(function(t,n){var a,i=-1,c=0;return r.forEach(n,(function(r,u){if("border"===e.node(r).dummy){var l=e.predecessors(r);l.length&&(a=e.node(l[0]).order,o(n,c,u,i,a),c=u,i=a)}o(n,c,n.length,a,t.length)})),n})),n}function u(e,t,n){if(t>n){var r=t;t=n,n=r}var o=e[t];o||(e[t]=o={}),o[n]=!0}function l(e,t,n){if(t>n){var o=t;t=n,n=o}return r.has(e[t],n)}function s(e,t,n,o){var a={},i={},c={};return r.forEach(t,(function(e){r.forEach(e,(function(e,t){a[e]=e,i[e]=e,c[e]=t}))})),r.forEach(t,(function(e){var t=-1;r.forEach(e,(function(e){var u=o(e);if(u.length)for(var s=((u=r.sortBy(u,(function(e){return c[e]}))).length-1)/2,f=Math.floor(s),d=Math.ceil(s);f<=d;++f){var p=u[f];i[e]===e&&t<c[p]&&!l(n,e,p)&&(i[p]=e,i[e]=a[e]=a[p],t=c[p])}}))})),{root:a,align:i}}function f(e,t,n,a,i){var c={},u=function(e,t,n,a){var i=new o,c=e.graph(),u=function(e,t,n){return function(o,a,i){var c,u=o.node(a),l=o.node(i),s=0;if(s+=u.width/2,r.has(u,"labelpos"))switch(u.labelpos.toLowerCase()){case"l":c=-u.width/2;break;case"r":c=u.width/2}if(c&&(s+=n?c:-c),c=0,s+=(u.dummy?t:e)/2,s+=(l.dummy?t:e)/2,s+=l.width/2,r.has(l,"labelpos"))switch(l.labelpos.toLowerCase()){case"l":c=l.width/2;break;case"r":c=-l.width/2}return c&&(s+=n?c:-c),c=0,s}}(c.nodesep,c.edgesep,a);return r.forEach(t,(function(t){var o;r.forEach(t,(function(t){var r=n[t];if(i.setNode(r),o){var a=n[o],c=i.edge(a,r);i.setEdge(a,r,Math.max(u(e,t,o),c||0))}o=t}))})),i}(e,t,n,i),l=i?"borderLeft":"borderRight";function s(e,t){for(var n=u.nodes(),r=n.pop(),o={};r;)o[r]?e(r):(o[r]=!0,n.push(r),n=n.concat(t(r))),r=n.pop()}return s((function(e){c[e]=u.inEdges(e).reduce((function(e,t){return Math.max(e,c[t.v]+u.edge(t))}),0)}),u.predecessors.bind(u)),s((function(t){var n=u.outEdges(t).reduce((function(e,t){return Math.min(e,c[t.w]-u.edge(t))}),Number.POSITIVE_INFINITY),r=e.node(t);n!==Number.POSITIVE_INFINITY&&r.borderType!==l&&(c[t]=Math.max(c[t],n))}),u.successors.bind(u)),r.forEach(a,(function(e){c[e]=c[n[e]]})),c}function d(e,t){return r.minBy(r.values(t),(function(t){var n=Number.NEGATIVE_INFINITY,o=Number.POSITIVE_INFINITY;return r.forIn(t,(function(t,r){var a=function(e,t){return e.node(t).width}(e,r)/2;n=Math.max(t+a,n),o=Math.min(t-a,o)})),n-o}))}function p(e,t){var n=r.values(t),o=r.min(n),a=r.max(n);r.forEach(["u","d"],(function(n){r.forEach(["l","r"],(function(i){var c,u=n+i,l=e[u];if(l!==t){var s=r.values(l);(c="l"===i?o-r.min(s):a-r.max(s))&&(e[u]=r.mapValues(l,(function(e){return e+c})))}}))}))}function b(e,t){return r.mapValues(e.ul,(function(n,o){if(t)return e[t.toLowerCase()][o];var a=r.sortBy(r.map(e,o));return(a[1]+a[2])/2}))}e.exports={positionX:function(e){var t,n=a.buildLayerMatrix(e),o=r.merge(i(e,n),c(e,n)),u={};r.forEach(["u","d"],(function(a){t="u"===a?n:r.values(n).reverse(),r.forEach(["l","r"],(function(n){"r"===n&&(t=r.map(t,(function(e){return r.values(e).reverse()})));var i=("u"===a?e.predecessors:e.successors).bind(e),c=s(e,t,o,i),l=f(e,t,c.root,c.align,"r"===n);"r"===n&&(l=r.mapValues(l,(function(e){return-e}))),u[a+n]=l}))}));var l=d(e,u);return p(u,l),b(u,e.graph().align)},findType1Conflicts:i,findType2Conflicts:c,addConflict:u,hasConflict:l,verticalAlignment:s,horizontalCompaction:f,alignCoordinates:p,findSmallestWidthAlignment:d,balance:b}},function(e,t,n){var r=n(278),o=n(287),a=n(300).Graph;e.exports={debugOrdering:function(e){var t=o.buildLayerMatrix(e),n=new a({compound:!0,multigraph:!0}).setGraph({});return r.forEach(e.nodes(),(function(t){n.setNode(t,{label:t}),n.setParent(t,"layer"+e.node(t).rank)})),r.forEach(e.edges(),(function(e){n.setEdge(e.v,e.w,{},e.name)})),r.forEach(t,(function(e,t){var o="layer"+t;n.setNode(o,{rank:"same"}),r.reduce(e,(function(e,t){return n.setEdge(e,t,{style:"invis"}),t}))})),n}}},function(e,t){e.exports="0.8.5"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(290),a=n(121),i=n(2),c=n(5),u=n.n(c),l=n(1),s=n(9),f=n(4),d=n(26);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var b=["getStateProp"];function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=p(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==p(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(){var e=Object(d.a)("funnelCanvas"),t=e.getStateProp;return v(v({},function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(e,b)),{},{nodeElements:t("nodes"),isLoading:t("isLoading"),getNodeById:function(e){var n,r={},o=h(t("nodes"));try{for(o.s();!(n=o.n()).done;){var a=n.value;if(a.id==e){r=a;break}}}catch(e){o.e(e)}finally{o.f()}return r},getSteps:function(){return t("nodes")},getNodeElements:function(){return t("nodes")},getFunnelId:function(){return t("funnelId")},getStepsList:function(){return t("stepsList")},getFunnelData:function(){return t("funnelData")},isLoadingAnalytics:t("analyticsLoading"),isAnalyticsLoaded:t("analyticsLoaded")})},w=n(83),j=n(51),E=n(59),_=n(37),S=n(6),x=n(11),k=n.n(x),P=n(40),C=n(28),N=n(13),T=n(22),D=function(e){var t=e.isSuccess,n=void 0===t||t,o=e.onRequestClose,a=e.stepName,i=e.onConfirm,c=e.isLoading,f=e.error,d=e.modalTitle,p=void 0===d?"":d,b=e.isParentOffer,h=void 0!==b&&b;return Object(r.createElement)(s.Modal,{isDismissible:!0,title:!1===n?Object(l.__)("Failed","funnel-builder"):""!==p?p:Object(l.__)("Delete Step","funnel-builder"),onRequestClose:function(){c||o()},className:"bwf-admin-modal bwf-admin-modal-small",shouldCloseOnClickOutside:!c},n?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},h?Object(r.createElement)(r.Fragment,null,a?Object(r.createElement)(r.Fragment,null,Object(l.__)("You are about to delete parent offer ","funnel-builder"),Object(r.createElement)("strong",null,a),Object(l.__)(". The path of dependent offers would need an update.","funnel-builder")):Object(l.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(r.createElement)(r.Fragment,null,a?Object(r.createElement)(r.Fragment,null,Object(l.__)("You are about to delete ","funnel-builder"),Object(r.createElement)("strong",null,Object(_.decodeEntities)(a)),Object(l.__)(". This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder")):Object(l.__)("You are about to delete step. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"".concat(isRtl?"bwf-t-left":"bwf-t-right")},Object(r.createElement)(T.a,{onClick:function(){c||o()},className:"bwf-modal-cancel-btn",disabled:c},Object(l.__)("Cancel","funnel-builder")),Object(r.createElement)(T.a,{isBusy:c,disabled:c,onClick:i,className:u()({"is-danger":!h,"is-primary":h})},h?Object(l.__)("Update Path to Delete","funnel-builder"):Object(l.__)("Delete","funnel-builder")))):!c&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-modal-content"},f?f.hasOwnProperty("message")?f.message:f:"")),!c&&!1===n&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_clear_20"}),Object(r.createElement)("div",{className:"bwf-modal-action".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(T.a,{className:"bwf-modal-confirm-btn",isPrimary:!0,onClick:o},Object(l.__)("OK","funnel-builder")))))},I=n(361),A=n(74),M=n(19),L=n(362);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(){F=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==R(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(R(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=R(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=R(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==R(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var H={landing:Object(l.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(l.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(l.__)("Add Upsell Page","funnel-builder"),optin:Object(l.__)("Add Optin Page","funnel-builder"),optin_ty:Object(l.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(l.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(l.__)("Add Order Bump","funnel-builder"),offer:Object(l.__)("Add Offer","funnel-builder")},G=function(e){e.title;var t=e.type,n=e.funnelId,o=e.stepID,a=e.parent_id,c=e.mainIndex,u=e.stepIndex,d=e.subIndex,p=Object(M.a)().isProFeatureLocked,b=Object(M.a)("ul").isProFeatureLocked,h=Y(Object(r.useState)(!1),2),y=h[0],m=h[1],v=Y(Object(r.useState)(!1),2),g=v[0],j=v[1],_=Y(Object(r.useState)({}),2),x=_[0],P=_[1],C=O().getStepsList,N=Object(w.a)(),T=N.setStepList,D=N.duplicateStepNode,R=C(),B=Object(f.fb)(),z=function(){var e,r=(e=F().mark((function e(){var r,l,s,p,b,h,y,v,g=arguments;return F().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=g.length>0&&void 0!==g[0]?g[0]:{},l=r.copyFrom,s=void 0===l?{}:l,p=r.title,b=void 0===p?"":p,(h=s&&s.hasOwnProperty("key")?s.key:0)<1&&(h=s&&s.hasOwnProperty("id")?s.id:0),y="",v={inherit_from:h,title:b,type:t,canvas:{mode:"sibling",insert_after:o}},e.t0=t,e.next="wc_order_bump"===e.t0?9:11;break;case 9:return y=B?Object(f.u)("/store-checkout/".concat(n,"/step/").concat(a,"/substeps/")):Object(f.u)("/funnels/".concat(n,"/steps/").concat(a,"/substeps/")),e.abrupt("break",13);case 11:return y=Object(f.u)("/funnels/".concat(n,"/steps")),e.abrupt("break",13);case 13:return e.prev=13,j(!0),e.next=17,k()({method:"POST",path:y,data:v}).then((function(e){if(e.hasOwnProperty("status")&&e.status&&e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var n=Object(i.cloneDeep)(R),r=e.data,o=r.groups,a=void 0===o?[]:o,l=r.steps_list,s=void 0===l?{}:l;n=q(q({},n),s),T(n),D(t,c,u,d,a[0]),m(!1),j(!1)}}));case 17:e.next=23;break;case 19:e.prev=19,e.t1=e.catch(13),console.log(e.t1),j(!1);case 23:case"end":return e.stop()}}),e,null,[[13,19]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){U(a,r,o,i,c,"next",e)}function c(e){U(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return r.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-add-horizontal-wrap",onClick:function(){"wc_order_bump"===t&&p?P({bump:!0}):"wc_upsells"!==t&&"offer"!==t||!b?m(!0):P({status:!0})}},Object(r.createElement)(A.a,{toolTipText:H.hasOwnProperty(t)?H[t]:Object(l.__)("Add Step","funnel-builder")},Object(r.createElement)(S.a,{icon:"dashed-plus"}))),y&&Object(r.createElement)(s.Modal,{title:H.hasOwnProperty(t)?H[t]:Object(l.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return m(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(I.a,{step:{type:t,parent_id:a,title:Object(f.nb)(t),is_substep:["wc_order_bump","offer"].includes(t)},requestCreateStep:z,onRequestClose:function(){return m(!1)},isBusy:g})),x.status&&Object(r.createElement)(E.a,{isOpen:x.status,onRequestClose:function(){return P({status:!1})},modalContent:x,type:x.type}),x.bump&&Object(r.createElement)(L.a,{isOpen:x.bump,onRequestClose:function(){return P({status:!1})}}))},X=n(459),K=n(422),$=n(78),W=n(42),Z=n(111),Q=n(277);function J(e){return(J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e){return function(e){if(Array.isArray(e))return ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ce(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(){te=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==J(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(J(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){oe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=J(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==J(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ce(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){if(e){if("string"==typeof e)return ue(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e.setIsOpen,n=void 0===t?function(){}:t,o=e.offerId,a=void 0===o?"":o,c=e.stepGroupData,u=void 0===c?{}:c,d=e.stepList,p=void 0===d?{}:d,b=e.onUpdateDynamicOffer,h=void 0===b?function(){}:b,y=e.orphanNode,m=void 0!==y&&y,v=ie(Object(r.useState)(!1),2),g=v[0],O=v[1],w=ie(Object(r.useState)(""),2),E=w[0],x=w[1],P=u.id,C=u.substeps,N=void 0===C?[]:C,T=ie(Object(r.useState)({}),2),D=T[0],I=T[1],A=Object(r.useMemo)((function(){var e=[];return N.forEach((function(t){var n=t.id,r=void 0===n?"":n;if(""!==r&&p.hasOwnProperty(r)){var o=p[r].title,a=void 0===o?"":o;e.push({key:parseInt(r)>0?parseInt(r):r,label:a})}})),e}),[N]),M=Object(r.useMemo)((function(){var e,t=[],n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ce(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}(N);try{for(n.s();!(e=n.n()).done;){var r=e.value.id,o=void 0===r?"":r;""!==o&&p.hasOwnProperty(o)&&t.push(parseInt(o))}}catch(e){n.e(e)}finally{n.f()}return t.push(0),t}),[N]);Object(r.useEffect)((function(){var e;e={},N.forEach((function(t,n){var r=t.id,o=void 0===r?"":r;if(""!==o&&o!=a){var i=p[o],c=i.accept,u=void 0===c?"":c,l=i.reject,s=void 0===l?"":l;e[o]={accept:""===u||""!==a&&parseInt(u)==a||!M.includes(parseInt(u))?"":parseInt(u),reject:""===s||""!==a&&parseInt(s)==a||!M.includes(parseInt(s))?"":parseInt(s)}}})),I(e)}),[N]);var L=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=[],o=[];return A.map((function(n,a){a>t&&n.key!=e&&(n.label=Object(_.decodeEntities)(n.label),r.push(n),o.push(n.key))})),n?o:r},R=function(){var e=[];if(Object.keys(D).map((function(t){""!==D[t].accept&&""!==D[t].reject||e.push(t)})),e.length>0){var t=e.map((function(e){if(p.hasOwnProperty(e)&&p[e].hasOwnProperty("title"))return p[e].title}));return x(Object(l.__)("Please set the path of following offer:","funnel-builder")+" "+t.join(", ")),!1}return x(""),!0},F=function(){var e,t=(e=te().mark((function e(){var t;return te().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==R()){e.next=2;break}return e.abrupt("return");case 2:return O(!0),t={path:D},a&&!m&&(t=re(re({},t),{},{delete:!0,offer_id:a})),e.prev=5,e.next=8,k()({path:Object(f.u)("/funnel-upsell/".concat(P,"/dynamic-path")),method:"POST",data:t}).then((function(e){e.hasOwnProperty("success")&&e.success&&e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)?h(e.data):x(Object(l.__)("Unable to update the offer path.","funnel-builder")),O(!1)}));case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(5),x(Object(l.__)("Error encountered while making API call.","funnel-builder")),O(!1),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ae(a,r,o,i,c,"next",e)}function c(e){ae(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-medium bwf-dynamic-offer-path-modal bwf-admin-modal-no-header",onRequestClose:function(){return n(!1)},isDismissible:!1,shouldCloseOnClickOutside:!1},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between bwf-mb-16"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(l.__)("Dynamic Offer Path","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-btn-small is-primary components-button",onClick:function(){return F()}},Object(r.createElement)("span",{style:re({},g&&{visibility:"hidden"})},a&&!m?Object(l.__)("Update & Delete","funnel-builder"):Object(l.__)("Update","funnel-builder")),g&&Object(r.createElement)(j.a,{color:"#ffffff",style:{position:"absolute"}})),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(l.__)("Close","funnel-builder"),onClick:function(){return n(!1)}},Object(r.createElement)(S.a,{icon:"close",height:24,width:24})))),Object(r.createElement)("div",{className:"bwf-dynamic-path-modal-content"},E?Object(r.createElement)("div",{className:"bwf-dynamic-error"},E):Object(r.createElement)("div",{className:"bwf-desc"},Object(l.__)("You can set the offer path and redirect users to the acceptance/rejection of an offer","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-wrapper"},N.map((function(e,t){var n=e.id,o=void 0===n?"":n;if(""!==o&&o!=a){var c=p[o].title,u=void 0===c?"":c;return Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item",key:t},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-header"},Object(_.decodeEntities)(u)),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-wrap"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(l.__)("On Acceptance","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(Q.b,{options:[{key:"",label:Object(l.__)("Select","funnel-builder"),getOptionList:L}].concat(ee(L(o,t-1)),[{key:0,label:Object(l.__)("Thankyou Page","funnel-builder")}]),selected:D.hasOwnProperty(o)?D[o].accept:"",onChange:function(e){var t=Object(i.cloneDeep)(D);t[o].accept=e,I(t)},className:D.hasOwnProperty(o)&&""!==D[o].accept?"":"rule-error"}))),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item"},Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-label"},Object(l.__)("On Reject","funnel-builder")),Object(r.createElement)("div",{className:"bwf-dynamic-o-p-list-item-select-item-val"},Object(r.createElement)(Q.b,{options:[{key:"",label:Object(l.__)("Select","funnel-builder")}].concat(ee(L(o,t-1)),[{key:0,label:Object(l.__)("Thankyou Page","funnel-builder")}]),selected:D.hasOwnProperty(o)?D[o].reject:"",onChange:function(e){var t=Object(i.cloneDeep)(D);t[o].reject=e,I(t)},className:D.hasOwnProperty(o)&&""!==D[o].reject?"":"rule-error"})))))}})))))},se=n(81),fe=n(82),de={1:Object(l.__)("A/B Test Draft","funnel-builder"),2:Object(l.__)("A/B Test Running","funnel-builder"),3:Object(l.__)("A/B Test Paused","funnel-builder")},pe={1:"warning",2:"success",3:"default"},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?pe[e]:de[e]},he=n(25),ye=n(130),me=n(75),ve=n(129),ge=n(123),Oe=n(60);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(){je=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==we(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(we(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){Se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Se(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=we(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=we(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==we(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function ke(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ce={status:!0,feature:Object(l.__)("One Click Upsell","funnel-builder"),proLink:Object(f.P)(["Canvas","One","Click","Upsell","Upgrade","Modal"])},Ne=function(e){var t=e.setIsOpenModal,n=e.allowedSteps,o=void 0===n?[]:n,a=e.defaultType,c=void 0===a?"":a,d=(e.parentStep,e.mainIndex),p=void 0===d?"":d,b=e.addNodeData,h=void 0===b?{}:b,y=e.newStep,m=void 0!==y&&y,v=e.replaceCurrentStep,g=void 0!==v&&v,j=e.currentParentType,_=e.hasCheckout,x=Object(M.a)("ul").isProFeatureLocked,P=ke(Object(r.useState)(c),2),C=P[0],N=P[1],D=ke(Object(r.useState)(!1),2),L=D[0],R=D[1],F=ke(Object(r.useState)(null),2),B=F[0],q=F[1],z=O(),U=z.getFunnelId,Y=z.getStepsList,V=Object(w.a)(),H=V.addNewStepGroup,G=V.setStepList,X=V.replaceCurrentStepData,K=V.replaceCurrentSubStepData,$=V.setUpsellStepNode,W=U(),Z=Y(),Q=Object(f.fb)(),J=ke(Object(r.useState)({}),2),ee=J[0],te=J[1],ne=h.prevFirstParent,re=void 0===ne?"":ne,oe=h.lastIteratedStep,ae=void 0===oe?"":oe,ie=h.mainIndex,ce=void 0===ie?"":ie,ue=h.stepIndex,le=void 0===ue?"":ue,se=(h.newUpsell,h.upsellEndAddLast),fe=void 0!==se&&se;Object(r.useLayoutEffect)((function(){var e=""==c&&1==o.length?o[0]:c;return"offer"!==e&&"wc_order_bump"!==e||N(e),function(){N("")}}),[]);var de={landing:Object(l.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(l.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(l.__)("Add Upsell Page","funnel-builder"),optin:Object(l.__)("Add Optin Page","funnel-builder"),optin_ty:Object(l.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(l.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(l.__)("Add Order Bump","funnel-builder"),offer:Object(l.__)("Add Offer","funnel-builder")},pe=[{key:"landing",label:Object(l.__)("Sales","funnel-builder")},{key:"wc_checkout",label:Object(l.__)("Checkout","funnel-builder")},{key:"wc_upsells",label:Object(l.__)("One Click Upsell Offer","funnel-builder")},{key:"wc_thankyou",label:Object(l.__)("Thankyou","funnel-builder")},{key:"optin",label:Object(l.__)("Optin","funnel-builder")},{key:"optin_ty",label:Object(l.__)("Optin Confirmation","funnel-builder")}],be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];switch(C){case"optin":t={type:"optin",steps:[e]};break;case"optin_ty":t={type:"optin_ty",steps:[e]};break;case"wc_thankyou":t={type:"wc_thankyou",steps:[e]};break;case"landing":t={type:"landing",steps:[e]};break;case"wc_checkout":t=g?e:{type:"wc_checkout",steps:[e]};break;case"wc_order_bump":t=e;break;case"wc_upsells":t={type:"wc_upsells",steps:[e]}}return t},ye=function(){var e,n=(e=je().mark((function e(){var n,r,o,a,c,u,l,s,d,b=arguments;return je().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b.length>0&&void 0!==b[0]?b[0]:{},r=n.copyFrom,o=void 0===r?{}:r,a=n.title,c=void 0===a?"":a,(u=o&&o.hasOwnProperty("key")?o.key:0)<1&&(u=o&&o.hasOwnProperty("id")?o.id:0),l={inherit_from:u,title:c,type:C,funnel_id:W,canvas:{mode:"start_group",insert_after:ae}},"offer"===C&&(l.canvas={empty:!1,position:fe?"end":""}),"wc_order_bump"===C&&(l.canvas.mode="sibling"),m&&(l.canvas.insert_after=""),s="",e.t0=C,e.next="wc_order_bump"===e.t0?12:"offer"===e.t0?14:16;break;case 12:return s=Q?Object(f.u)("/store-checkout/".concat(W,"/step/").concat(re,"/substeps/")):Object(f.u)("/funnels/".concat(W,"/steps/").concat(re,"/substeps/")),e.abrupt("break",18);case 14:return s=Object(f.u)("/funnel-upsell/".concat(re,"/offers/")),e.abrupt("break",18);case 16:return s=Object(f.u)("/funnels/".concat(W,"/steps/")),e.abrupt("break",18);case 18:return e.prev=18,R(!0),e.next=22,k()({method:"POST",path:s,data:l}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var n,r=Object(i.cloneDeep)(Z),o=e.data,a=o.groups,c=void 0===a?[]:a,u=o.steps_list,l=void 0===u?{}:u;r=_e(_e({},r),l),n=c[0],G(r),"offer"===C?$(ce,le,n):"wc_order_bump"===C?K(ce,le,0,n):g?X(ce,le,C,n):H(p,be(n)),t(!1)}t(!1)}else{var s;q({add_err:null!==(s=null==e?void 0:e.msg)&&void 0!==s?s:null==e?void 0:e.message})}R(!1)}));case 22:e.next=29;break;case 24:e.prev=24,e.t1=e.catch(18),console.log(e.t1),R(!1),q({add_err:null!==(d=null===e.t1||void 0===e.t1?void 0:e.t1.msg)&&void 0!==d?d:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 29:case"end":return e.stop()}}),e,null,[[18,24]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){xe(a,r,o,i,c,"next",e)}function c(e){xe(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return n.apply(this,arguments)}}(),me=function(e,t){var n=!(Object(i.isEmpty)(o)||o.includes(e.key)||"wc_upsells"===e.key&&x);return Object(r.createElement)("div",{key:t},Object(r.createElement)(T.a,{isSecondary:!0,style:{width:"100%"},onClick:function(){n||("wc_upsells"===e.key&&x?te(Ce):N(e.key))},className:u()({disabled:n})},Object(r.createElement)("span",{className:"bwf-type-select-icons",key:"bwf-icon"+e.key+"-"+t,"data-type":e.key},Object(r.createElement)(S.a,{icon:"".concat(e.key,"-flow")})),Object(r.createElement)("span",{className:"bwf-type-select-label",key:"bwf-label"+e.key+"-"+t},e.label),"wc_upsells"===e.key&&x&&Object(r.createElement)(he.b,null)))},ve=function(e){var t,n,r;if(Object(f.fb)()&&["landing","optin","optin_ty"].includes(e))return Object(l.sprintf)(Object(l.__)("%s Page is not available in Store Checkout","funnel-builder"),null===(r=pe.find((function(t){return t.key===e})))||void 0===r?void 0:r.label);switch(e){case"landing":case"optin":return Object(l.sprintf)(Object(l.__)("%s Page is not available after %s Step","funnel-builder"),null===(t=pe.find((function(t){return t.key===e})))||void 0===t?void 0:t.label,null===(n=pe.find((function(e){return e.key===j})))||void 0===n?void 0:n.label);case"wc_checkout":return _?Object(l.__)("A Checkout Step is already created, click plus icon next to checkout","funnel-builder"):Object(l.__)("Checkout will be available after Sales Step","funnel-builder");case"wc_upsells":return Object(l.__)("One Click Upsell will be available after Checkout Step","funnel-builder");case"optin_ty":return Object(l.__)("Optin Confirmation will be available after Optin Step","funnel-builder");case"wc_thankyou":return Object(l.__)("Thank you will be available after One Click Upsell or Checkout Step","funnel-builder")}};return Object(r.createElement)(r.Fragment,null," ",""===C?Object(r.createElement)(r.Fragment,null,ee.status?Object(r.createElement)(E.a,{isOpen:ee.status,onRequestClose:function(){return te({status:!1})},modalContent:ee,type:ee.type}):Object(r.createElement)(Oe.a,{onFocusOutside:function(){return t(!1)},position:"bottom center",placement:"bottom-start",className:"bwf-step-type-select-modal",onClick:function(e){return e.stopPropagation()}},Object(r.createElement)("div",{className:"bwf-title-wrap",key:"bwf-step-header-1"},Object(r.createElement)("div",{className:"bwf-title bwf_w_full"},Object(l.__)("Add Step","funnel-builder")),Object(r.createElement)("div",{className:"bwf-cross bwf-cursor-pointer",onClick:function(){return t(!1)}},Object(r.createElement)(S.a,{icon:"cross",size:20})," ")),Object(r.createElement)("div",{className:"bwf-step-type-wrapper",key:"bwf-step-wrap-2"},pe.map((function(e,t){return Object(i.isEmpty)(o)||o.includes(e.key)||"wc_upsells"===e.key&&x?me(e,t):Object(r.createElement)(A.a,{key:t,toolTipText:ve(e.key),noInlineStyle:!0,size:150},me(e,t))}))))):Object(r.createElement)(s.Modal,{title:de.hasOwnProperty(C)?de[C]:Object(l.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){t(!1),q(null)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(I.a,{step:{type:C,title:Object(f.nb)(C),parent_id:re,is_substep:["wc_order_bump","offer"].includes(C)},requestCreateStep:ye,onRequestClose:function(){return t(!1)},isBusy:L,errors:B})))},Te=n(55),De=n(34);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e){return function(e){if(Array.isArray(e))return Ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ue(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(){Me=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ie(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ie(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){Fe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Fe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ie(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function qe(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Be(a,r,o,i,c,"next",e)}function c(e){Be(a,r,o,i,c,"throw",e)}i(void 0)}))}}function ze(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||Ue(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){if(e){if("string"==typeof e)return Ye(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ye(e,t):void 0}}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ve=window.wffn.is_ab_experiment,He={status:!0,title:Object(l.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(l.__)("Increased Conversion Rates","funnel-builder"),Object(l.__)("Greater Return on Ad Spend","funnel-builder"),Object(l.__)("Reduced Bounce Rates","funnel-builder")]},image:Object(f.O)()+"AB-testing.png",proLink:Object(f.P)(["Canvas","AB_Test","Upgrade","Modal"])},Ge=function(e){var t,n,a,c=Object(M.a)("ul").isProFeatureLocked,d=Object(M.a)().isProFeatureLocked,p=Object(N.i)(),b=Object(M.b)().showSnackbar,h=e.data,y=void 0===h?{}:h,m=e.id,v=void 0===m?"":m,g=y.id,j=y.sub_title,x=y.stats,T=y.type,R=void 0===T?"":T,F=(y.tabs,y.control),B=void 0===F?null:F,q=y.edit_link,z=void 0===q?"":q,U=y.parent_id,Y=void 0===U?"":U,V=y.links,H=void 0===V?[]:V,Q=y.tags,J=void 0===Q?["has_rules","end","draft","ab_test"]:Q,ee=y.mainIndex,te=void 0===ee?"":ee,ne=y.stepIndex,re=void 0===ne?"":ne,oe=y.subIndex,ae=void 0===oe?"":oe,ie=y.upsellEnd,ce=void 0!==ie&&ie,ue=y._data,de=void 0===ue?{}:ue,pe=y.bwfSourceEdgeType,Oe=void 0===pe?[]:pe,we=y.upsellId,je=void 0===we?"":we,Ee=y.orphanNode,_e=void 0!==Ee&&Ee,Se=y.experiment_status,xe=O().isLoadingAnalytics,ke=ze(Object(r.useState)(!1),2),Pe=ke[0],Ce=ke[1],Ie=ze(Object(r.useState)(!1),2),Le=Ie[0],Fe=Ie[1],Be=ze(Object(r.useState)(!1),2),Ue=Be[0],Ye=Be[1],Ge=ze(Object(r.useState)(!1),2),Xe=Ge[0],Ke=Ge[1],$e=ze(Object(r.useState)({}),2),We=$e[0],Ze=$e[1],Qe=ze(Object(r.useState)(!1),2),Je=Qe[0],et=Qe[1],tt=ze(Object(r.useState)({}),2),nt=tt[0],rt=tt[1],ot=de.title,at=void 0===ot?"":ot,it=de.status,ct=void 0===it?0:it,ut=de.view_link,lt=ze(Object(r.useState)(!1),2),st=lt[0],ft=lt[1],dt=ze(Object(r.useState)(!1),2),pt=dt[0],bt=dt[1],ht=O(),yt=ht.getFunnelId,mt=ht.getStepsList,vt=ht.getNodeElements,gt=Object(P.a)().setPreviousStep,Ot=ze(Object(r.useState)(!1),2),wt=Ot[0],jt=Ot[1],Et=ze(Object(r.useState)(!1),2),_t=Et[0],St=Et[1],xt=ze(Object(r.useState)(""),2),kt=xt[0],Pt=xt[1],Ct=ze(Object(r.useState)(!1),2),Nt=Ct[0],Tt=Ct[1],Dt=ze(Object(r.useState)(!1),2),It=Dt[0],At=Dt[1],Mt=ze(Object(r.useState)(!1),2),Lt=Mt[0],Rt=Mt[1],Ft=ze(Object(r.useState)(!1),2),Bt=Ft[0],qt=Ft[1],zt=ze(Object(r.useState)(!1),2),Ut=zt[0],Yt=zt[1],Vt=Object(w.a)(),Ht=Vt.deleteStepNode,Gt=Vt.updateStepTitle,Xt=Vt.setStepList,Kt=Vt.setUpsellStepNode,$t=Vt.setCanvasSingleStepListData,Wt=Object(f.fb)(),Zt=yt(),Qt=mt(),Jt=vt(),en=Object(C.a)().setStepTitle,tn=Object(se.a)().setExperimentStatus,nn=Object(Te.a)().setStepHeaderData,rn=function(e,t){if(Ye(!0),(e=e.trim())===at&&(null==de?void 0:de.post_name)===t)Fe(!1),Ye(!1);else{var n='{"title":"'.concat(e,'","slug":"').concat(t,'"}');k()({path:Object(f.u)("/funnel-".concat(R,"/save-state/").concat(g,"?funnel_id=").concat(Zt)),data:JSON.parse(n),method:"POST"}).then((function(n){if(!n.success)throw new Error(n.msg);Gt(g,e,t),Fe(!1),Ye(!1)})).catch((function(e){console.log(e.message?e.message:e)}))}},on=function(){var e=qe(Me().mark((function e(){var t;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:St(!0),t="",e.t0=R,e.next="wc_order_bump"===e.t0?5:"offer"===e.t0?7:9;break;case 5:return t=Wt?Object(f.u)("/store-checkout/".concat(Zt,"/step/").concat(Y,"/substeps/").concat(g)):Object(f.u)("/funnels/".concat(Zt,"/steps/").concat(Y,"/substeps/").concat(g)),e.abrupt("break",11);case 7:return t=Object(f.u)("/funnel-upsell/".concat(g,"/offers")),e.abrupt("break",11);case 9:return t=Wt?Object(f.u)("/store-checkout/".concat(Zt,"/step/").concat(g)):Object(f.u)("/funnels/".concat(Zt,"/steps/").concat(g)),e.abrupt("break",11);case 11:return e.prev=11,e.next=14,k()({path:t,method:"DELETE",data:{type:R,parent_id:Y}}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if("offer"===R){var t=Object(i.cloneDeep)(Qt),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,c=void 0===a?{}:a;t=Re(Re({},t),c),Xt(t),Kt(te,re,o[0])}else if(Object(f.fb)()&&e.hasOwnProperty("groups")&&!Object(i.isEmpty)(e.groups)&&e.hasOwnProperty("steps_list")&&!Object(i.isEmpty)(e.steps_list)){var u=Object(i.cloneDeep)(Qt),l=e.groups,s=void 0===l?[]:l,d=e.steps_list,p=void 0===d?{}:d;u=Re(Re({},u),p),Xt(u),Kt(te,re,s[0],"wc_native")}else Ht(te,re,ae);jt(!1)}else Pt(e);St(!1)}));case 14:e.sent,e.next=22;break;case 17:e.prev=17,e.t1=e.catch(11),Pt(e.t1),St(!1),console.log(e.t1);case 22:case"end":return e.stop()}}),e,null,[[11,17]])})));return function(){return e.apply(this,arguments)}}(),an=Object(f.w)(),cn=function(){return Object(f.V)(Zt,R,g,g,!0)},un=function(){var e=qe(Me().mark((function e(){var t,n,r,o,a,c,u,l,s=arguments;return Me().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(c=r&&r.hasOwnProperty("key")?r.key:0)<1&&(c=r&&r.hasOwnProperty("id")?r.id:0),u={inherit_from:c,title:a,type:"offer",funnel_id:Zt,canvas:{empty:!1,position:"before",offer_id:g}},l=Object(f.u)("/funnel-upsell/".concat(je,"/offers/")),e.prev=6,Ke(!0),e.next=10,k()({method:"POST",path:l,data:u}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var t=Object(i.cloneDeep)(Qt),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,c=void 0===a?{}:a;t=Re(Re({},t),c),Xt(t),Kt(te,re,o[0]),ft(!1)}ft(!1)}Ke(!1)}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),Ke(!1);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(){return e.apply(this,arguments)}}(),ln=Object(r.useMemo)((function(){return!!("offer"!==R||g&&Qt.hasOwnProperty(g))}),[Qt]),sn=Object(r.useCallback)((function(){return Jt[te].steps[re]}),[Jt]),fn=Object(r.useMemo)((function(){var e=0;return"offer"===R&&Jt.hasOwnProperty(te)&&Jt[te].hasOwnProperty("steps")&&Jt[te].steps.hasOwnProperty(re)&&Jt[te].steps[re].hasOwnProperty("substeps")&&!Object(i.isEmpty)(Jt[te].steps[re].substeps)&&(e=Jt[te].steps[re].substeps.length),e}),[Jt]),dn=function(){return Object(r.createElement)("div",{className:"bwf-node-not-exists-wrap"},Object(r.createElement)("div",{className:"bwf-node-not-exists-header"},Object(l.__)("This offer is not visible to the customers","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-content"},Object(l.__)("Because it's tied to the rejection of another offer that you've deleted. To display this offer, set its dynamic offer path.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-node-not-exists-btn",onClick:function(){return bt(!0)}},Object(r.createElement)(S.a,{icon:"dynamic-offer-path",width:25,height:24}),Object(r.createElement)("span",{className:"bwf-node-not-exists-btn-text"},Object(l.__)("Set Dynamic Offer Path","funnel-builder"))))},pn=function(){v&&(Ve&&!d?(tn(Se),en(Object(_.decodeEntities)(at)+Object(l.__)(" A/B Test","funnel-builder")),gt("canvas"),Object(N.k)({},Object(f.fb)()?"/store-checkout/experiments/".concat(g):"/funnels/".concat(Zt,"/experiments/").concat(g))):rt(He))},bn="wc_upsells"!==R?[{title:Object(l.__)("A/B Test","funnel-builder"),type:"ab_test",link:Object(f.fb)()?Object(f.H)("/store-checkout/experiments/".concat(g)):Object(f.H)("/funnels/".concat(Zt,"/experiments/").concat(g))}]:[],hn=function(e){Tt(!0);var t="";switch(R){case"wc_bump":t="/funnel-bump/save-state/".concat(g,"?funnel_id=").concat(Zt);break;case"offer":t="/funnel-offer/save-state/".concat(g,"?funnel_id=").concat(Zt);break;default:t="/funnel-".concat(R,"/save-state/").concat(g,"?funnel_id=").concat(Zt)}k()({path:Object(f.u)(t),method:"POST",data:{status:!Number(ct),canvas:!0}}).then((function(e){e.success?($t(g,e.step_list),Tt(!1),et(!1),At(!1),Ze({}),b(Object(l.__)("Changes Saved","funnel-builder"))):(Tt(!1),At(!1),et(!1))})).catch((function(e){console.log(e),b("Status Updation Failed")}))},yn=Object(r.createElement)(De.a,{h:18,w:36}),mn=Object(r.useMemo)((function(){return"offer"===R&&(_e||Oe.includes("bwf-orphan"))}),[Oe,_e]);return Object(r.createElement)("div",{className:u()("bwf-node-wrapper"),"step-id":v},Object(r.createElement)(o.d,{type:"target",position:"top",isConnectable:!1,className:"bwf-target",style:"offer"===R&&!Oe.includes("bwf-default")&&ln?{opacity:0}:{}}),ln?Object(r.createElement)("div",{className:u()("bwf-inner-wrapper "+"node-type-".concat(R),{"is-orphan":!1}),onClick:function(){mn&&Yt(!Ut)},onMouseEnter:function(e){e.currentTarget.classList.contains("bwf-inner-wrapper")&&!e.target.closest(".bwf-add-horizontal-wrap")&&Ce(!0)},onMouseLeave:function(e){var t;null===(t=e.target.querySelector(".bwf-ellipsis-menu__toggle.is-opened"))||void 0===t||t.click(),Ce(!1)}},"offer"===R&&!_e&&(!Oe.includes("bwf-default")||!Oe.includes("bwf-orphan"))&&Object(r.createElement)("div",{className:"bwf-offer-add",onClick:function(){c?rt({status:!0}):ft(!0)}},Object(r.createElement)(S.a,{icon:"plus-circle",size:24,color:"#fff"})),ce?"":Object(r.createElement)("div",{className:"bwf-node-hover","data-status":Pe?"hover":"notHover"},Object(r.createElement)("span",{className:"bwf-options"},!Object(i.isEmpty)(H)&&[].concat(Ae(H),bn).map((function(e,t){var n=e.link,o=e.type;return["edit_link","preview","ab_test"].includes(o)?Object(r.createElement)(A.a,{toolTipText:"edit_link"===o?Object(l.__)("Edit","funnel-builder"):"ab_test"===o?Object(l.__)("A/B Test","funnel-builder"):Object(l.__)("Preview","funnel-builder"),key:t,iconSize:24,position:"bottom center",size:"auto"},Object(r.createElement)("a",{href:"edit_link"===o?cn():Object(_.decodeEntities)(n),onClick:function(e){e.preventDefault(),gt("canvas"),"edit_link"===o?(nn(Object(f.W)(R),g,"offer"===R?g:"",{title:at,view_link:ut,status:1===Number(ct)}),Object(N.d)().push(cn())):"ab_test"===o?pn():window.open(Object(_.decodeEntities)(n),"_blank","noreferrer")}},Object(r.createElement)(S.a,{icon:"edit_link"===o?"edit":"ab_test"===o?"a/b":"view",size:"24"}))):null})),Object(r.createElement)(Z.a,{className:"bwf-c-ellipsis",renderContent:function(e){var t=e.onToggle;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),Fe(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(l.__)("Rename","funnel-builder")))),"wc_upsells"===R&&Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),bt(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(l.__)("Dynamic Offer Path","funnel-builder")))),!(ct&&1===parseInt(ct))&&Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),function(){try{Ze({status:!0,loading:!0,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-publish-title bwf-mt-12"},Object(l.__)("Please wait! Publishing ".concat(Object(_.decodeEntities)(at)),"funnel-builder")))}),hn()}catch(e){console.log(Object(l.__)("Failed Experiment Creation: ","funnel-builder"),e)}}()}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(l.__)("Publish","funnel-builder")))),["1",1].includes(ct)&&Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),["2",2].includes(Se)?At(!0):et(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(l.__)("Draft","funnel-builder")))),Object(r.createElement)($.a,{isClickable:!0,onInvoke:function(){t(),jt(!0)}},Object(r.createElement)(W.a,{justify:"flex-start"},Object(r.createElement)(W.c,null,Object(l.__)("Delete","funnel-builder")))))}}))),Object(r.createElement)("div",{className:"bwf-node-brick is-step-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(S.a,{size:36,icon:R?"".concat(R,"-flow"):"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("span",null,"wc_upsells"===R?Object(l.__)("One Click Upsell","funnel-builder"):Object(f.nb)(R)),Object(r.createElement)("span",null,Object(_.decodeEntities)(j)),Object(r.createElement)("span",{title:Object(_.decodeEntities)(at)},Object(_.decodeEntities)(at))),Object(r.createElement)("div",{className:"bwf-node-action"},null!==B&&Object(r.createElement)("span",{className:"bwf-variant-tag","data-tag":!0===B?"original":""},!0===B?Object(l.__)("Original","funnel-builder"):Object(l.__)("Variant","funnel-builder")),""!==z&&Object(r.createElement)("div",{onClick:function(){return window.open(cn(),"_blank","noreferrer")}},Object(r.createElement)(S.a,{icon:"edit"})))),"offer"!==R&&!ce&&Object(r.createElement)(G,{type:R,title:at,mainIndex:te,stepIndex:re,subIndex:ae,funnelId:Zt,stepID:g,parent_id:Y}),(Object(i.size)(J)>0||mn||!(ct&&1===parseInt(ct))||!Object(i.isEmpty)(Se)&&"4"!==Se)&&Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g8 bwf-flex-wrap"},Object.keys(J).map((function(e){return Object(r.createElement)("div",{key:e,className:"bwf-st-c-badge-wrap",onClick:function(t){"no_bump"===e?d?qt(!0):Rt(!0):(gt("canvas"),Object(N.k)({},J[e].edit,p))}},Object(r.createElement)("div",{className:"bwf-st-c-badge-small "+J[e].label_class},J[e].label))})),mn&&Object(r.createElement)("div",{className:"bwf-st-c-badge-small bwf-st-c-badge-red bwf-display-flex bwf-cursor-pointer",style:{position:"relative"},onClick:function(){return Yt((function(e){return!e}))}},Object(r.createElement)(S.a,{icon:"step-warning",size:12,color:"#E15334"}),Object(l.__)("Not Visible","funnel-builder"),Ut&&Object(r.createElement)("div",{className:"bwf-orphan-offer-wrap"},dn())),!ce&&!Object(i.isEmpty)(Se)&&"4"!==Se&&Object(r.createElement)("div",{className:"bwf-st-c-badge-wrap",onClick:function(){pn()}},Object(r.createElement)(he.c,{content:(t=Se,a="warning"===(n=be(t,!0))?"#B68F40":"success"===n?"#09B29C":"default"===n?"#353030":void 0,Object(r.createElement)(r.Fragment,null,Object(r.createElement)(fe.a,{fill:a}),Object(r.createElement)("span",{className:"".concat(void 0!==a?"bwf-mr-4":"")},be(t)))),type:be(Se,!0)})),!ce&&!(ct&&1===parseInt(ct))&&Object(r.createElement)("div",{className:"bwf--tag bwf-cursor-default is-warning"},Object(l.__)("Draft","funnel-builder"))),!Object(i.isEmpty)(x)&&"wc_upsells"!==R&&Object(r.createElement)("div",{className:"bwf-flex bwf--space-between bwf_w_full bwf-position-relative"},Object(r.createElement)("div",{className:"bwf-node-data-desc"},xe?yn:Object(r.createElement)("span",null,!d&&x.hasOwnProperty("views")&&null!=x.views?x.views:"0"),Object(r.createElement)("span",null,Object(l.__)("Views","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},xe?yn:Object(r.createElement)("span",null,!d&&x.hasOwnProperty("conversion_rate")&&null!=x.conversion_rate?"".concat(x.conversion_rate.toFixed(2),"%"):"-"),Object(r.createElement)("span",null,Object(l.__)("Conversion","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-node-data-desc"},xe?yn:Object(r.createElement)("span",null,!d&&x.hasOwnProperty("revenue")&&null!=x.revenue?an.formatAmount(x.revenue):"-"),Object(r.createElement)("span",null,Object(l.__)("Revenue","funnel-builder"))),d&&Object(r.createElement)(ge.b,{hideContent:!0,modalContent:{feature:Object(l.__)("Step Analytics","funnel-builder")}}))):Object(r.createElement)("div",{className:"bwf-inner-wrapper bwf-offer-node-not-exists"},dn()),st&&Object(r.createElement)(s.Modal,{title:Object(l.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return ft(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(I.a,{step:{type:"offer",upsellId:je,is_substep:!0},requestCreateStep:un,onRequestClose:function(){return ft(!1)},isBusy:Xe})),Le&&("wc_upsells"==R?Object(r.createElement)(X.a,{renameTitle:"Edit Details",title:Object(_.decodeEntities)(at),onclose:function(){return Fe(!1)},updateTitle:function(e){return rn(e)},isLoading:Ue}):Object(r.createElement)(K.a,{pageUrl:null==de?void 0:de.view_link,pageUrlSlug:null==de?void 0:de.post_name,renameTitle:"Step",title:Object(_.decodeEntities)(at),onclose:function(){return Fe(!1)},updateDetail:function(e,t){return rn(e,t)},isLoading:Ue})),Object(r.createElement)(o.d,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}),wt&&Object(r.createElement)(D,{onRequestClose:function(){Pt(""),jt(!1)},onConfirm:function(){"offer"===R&&fn>1?bt(!0):on()},isLoading:_t,stepName:at,isSuccess:!kt,modalTitle:"offer"===R?Object(l.__)("Delete Offer?","funnel-builder"):"",isParentOffer:"offer"===R&&fn>1}),pt&&Object(r.createElement)(le,{setIsOpen:bt,offerId:"offer"===R&&!_e&&g?g:"",stepData:y,stepList:Qt,stepGroupData:sn(),onUpdateDynamicOffer:function(e){var t=e.groups,n=void 0===t?[]:t,r=e.steps_list,o=void 0===r?{}:r,a=Object(i.cloneDeep)(Qt);a=Re(Re({},a),o),Xt(a),Kt(te,re,n[0]),bt(!1)},orphanNode:_e}),It&&Object(r.createElement)(ye.a,{isPublishLoading:Nt,onAction:function(){hn()},onclose:function(){return At(!1)}}),Je&&Object(r.createElement)(ve.a,{isPublishLoading:Nt,onAction:function(){return hn()},onclose:function(){return et(!1)}}),Object(r.createElement)(me.a,{className:u()("bwf-admin-modal-squeezy",We.className),confirmText:We.confirmText,confirmButtonText:We.buttonConfirm,cancelButtonText:We.buttonCancel,onConfirm:We.onConfirm,isLoading:We.loading,successMessage:We.success,errorMessage:We.error,content:We.content,onRequestClose:function(){return Ze({status:!1})},modalTitle:We.modalTitle,isOpen:We.status,closeIcon:We.closeIcon}),nt.status&&Object(r.createElement)(E.a,{isOpen:nt.status,onRequestClose:function(){return rt({status:!1})},modalContent:nt,type:nt.type}),Lt&&Object(r.createElement)(Ne,{setIsOpenModal:function(){return Rt(!1)},defaultType:"wc_order_bump",parentStep:v,addNodeData:y}),Bt&&Object(r.createElement)(L.a,{isOpen:Bt,onRequestClose:function(){return qt(!1)}}))},Xe=function(e){e.data,e.selected;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-end"},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},"End")))},Ke=function(){return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-start"},Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-content-item"},Object(l.__)("Funnel Start","funnel-builder"))),Object(r.createElement)(o.d,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source",style:{opacity:0}}))},$e=function(e){var t=e.id;return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-merger-node","step-id":t},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)(o.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};n(3);function We(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ze(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ze(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Qe=function(e){var t=Object(M.a)("ul").isProFeatureLocked,n=e.data,a=void 0===n?{}:n,i=e.id,c=void 0===i?"":i,u=We(Object(r.useState)(!1),2),s=u[0],f=u[1],d=We(Object(r.useState)(!1),2),p=d[0],b=d[1],h=a.allowedSteps,y=void 0===h?[]:h,m=a.mainIndex,v=void 0===m?"":m,g=a.currentParentType,O=a.hasCheckout,w=1===(null==y?void 0:y.length)&&y[0];return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-add-node"},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-add-node-content",onClick:function(){"offer"===w&&t?b({status:!0}):f(!0)}},Object(r.createElement)(A.a,{toolTipText:Object(l.__)("Add Step","funnel-builder")},Object(r.createElement)(S.a,{icon:"plus-circle",size:24,color:"#fff"})))),Object(r.createElement)(o.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),s&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(Ne,{setIsOpenModal:f,allowedSteps:y,parentStep:c,mainIndex:v,addNodeData:a,currentParentType:g,hasCheckout:O})),p.status&&Object(r.createElement)(E.a,{isOpen:p.status,onRequestClose:function(){return b({status:!1})},modalContent:p,type:p.type}))},Je=n(21);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(){tt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==et(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(et(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function it(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ut={landing:Object(l.__)("Add Sales Page","funnel-builder"),wc_checkout:Object(l.__)("Add Checkout Page","funnel-builder"),wc_upsells:Object(l.__)("Add Upsell Page","funnel-builder"),optin:Object(l.__)("Add Optin Page","funnel-builder"),optin_ty:Object(l.__)("Add Optin Confirmation","funnel-builder"),wc_thankyou:Object(l.__)("Add Thankyou Page","funnel-builder"),wc_order_bump:Object(l.__)("Add Order Bump","funnel-builder"),offer:Object(l.__)("Add Offer","funnel-builder")},lt={status:!0,title:Object(l.__)("Add Offer","funnel-builder"),proLink:Object(f.P)(["Canvas","Add","Offer","Upgrade","Modal"])},st=function(e){var t=e.data,n=void 0===t?{}:t,a=(e.id,n.title),c=void 0===a?"Add":a,u=n.type,d=void 0===u?"":u,p=n.icon,b=void 0===p?"":p,h=n.prevFirstParent,y=void 0===h?"":h,m=n.mainIndex,v=void 0===m?"":m,g=n.stepIndex,j=void 0===g?"":g,x=Object(M.a)().isProFeatureLocked,P=Object(M.a)("ul").isProFeatureLocked,C=it(Object(r.useState)(!1),2),N=C[0],T=C[1],D=it(Object(r.useState)(!1),2),A=D[0],R=D[1],F=O(),B=F.getStepsList,q=F.getFunnelId,z=B(),U=Object(f.fb)(),Y=q(),V=it(Object(r.useState)({}),2),H=V[0],G=V[1],X=Object(w.a)(),K=X.setStepList,$=X.replaceCurrentSubStepData,W=X.setUpsellStepNode,Z=function(){var e,t=(e=tt().mark((function e(){var t,n,r,o,a,c,u,l,s=arguments;return tt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(c=r&&r.hasOwnProperty("key")?r.key:0)<1&&(c=r&&r.hasOwnProperty("id")?r.id:0),u={inherit_from:c,title:a,type:d,funnel_id:Y,canvas:{mode:"start_group",insert_after:y}},"offer"===d&&(u.canvas={empty:!0,position:"",upsell:y}),"wc_order_bump"===d&&(u.canvas.mode="sibling"),l="",e.t0=d,e.next="wc_order_bump"===e.t0?11:"offer"===e.t0?13:15;break;case 11:return l=U?Object(f.u)("/store-checkout/".concat(Y,"/step/").concat(y,"/substeps/")):Object(f.u)("/funnels/".concat(Y,"/steps/").concat(y,"/substeps/")),e.abrupt("break",17);case 13:return l=Object(f.u)("/funnel-upsell/".concat(y,"/offers/")),e.abrupt("break",17);case 15:return l=Object(f.u)("/funnels/".concat(Y,"/steps/")),e.abrupt("break",17);case 17:return e.prev=17,R(!0),e.next=21,k()({method:"POST",path:l,data:u}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var t=Object(i.cloneDeep)(z),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,c=void 0===a?{}:a;switch(t=rt(rt({},t),c),K(t),d){case"wc_order_bump":$(v,j,0,o[0]);break;case"offer":W(v,j,o[0])}T(!1)}T(!1)}R(!1)}));case 21:e.next=27;break;case 23:e.prev=23,e.t1=e.catch(17),console.log(e.t1),R(!1);case 27:case"end":return e.stop()}}),e,null,[[17,23]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){at(a,r,o,i,c,"next",e)}function c(e){at(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)("div",{className:"bwf-node-wrapper bwf-button-node"},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-btn-node-content",onClick:function(){"wc_order_bump"===d&&x?G({bump:!0}):"offer"===d&&P?G(lt):T(!0)}},b&&Object(r.createElement)(S.a,{icon:b,size:"24",color:Je.TEXT_COLOR_2}),Object(_.decodeEntities)(c),"wc_order_bump"===d&&x&&Object(r.createElement)(he.b,null))),N&&Object(r.createElement)(s.Modal,{title:ut.hasOwnProperty(d)?ut[d]:Object(l.__)("Add Step","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return T(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(I.a,{step:{type:d,prevFirstParent:y,is_substep:["wc_order_bump","offer"].includes(d)},requestCreateStep:Z,onRequestClose:function(){return T(!1)},isBusy:A})),Object(r.createElement)(o.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}),H.bump&&Object(r.createElement)(L.a,{isOpen:H.bump,onRequestClose:function(){return G({status:!1})}}),H.status&&Object(r.createElement)(E.a,{isOpen:H.status,onRequestClose:function(){return G({status:!1})},modalContent:H,type:H.type}))};function ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(r.useState)(!1),n=ft(t,2),a=n[0],i=n[1],c=e.data||{},s=c.emptyNodeLabel,f=void 0===s?Object(l.__)("Create New Step","funnel-builder"):s,d=c.allowedSteps,p=void 0===d?["optin","landing","wc_checkout"]:d,b=c.replaceCurrentStep,h=void 0!==b&&b;return Object(r.createElement)("div",{className:u()("bwf-node-wrapper is-empty-node-wrapper")},Object(r.createElement)(o.d,{type:"target",position:"top",isConnectable:!1,style:{opacity:0},className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-inner-wrapper",onClick:function(){return i(!0)}},Object(r.createElement)("div",{className:"bwf-node-brick is-empty-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(S.a,{icon:"page",size:"24"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-label"},f)))),Object(r.createElement)(o.d,{type:"source",position:"bottom",isConnectable:!1,style:{opacity:0},className:"bwf-source"}),a&&Object(r.createElement)("div",{className:"bwf-step-select-wrap"},Object(r.createElement)(Ne,{setIsOpenModal:i,allowedSteps:p,replaceCurrentStep:h,addNodeData:c})))},bt=function(e){var t=e.data,n=void 0===t?{}:t,a=(e.selected,n.title),i=(n.sub_title,n.type);return Object(r.createElement)("div",{className:u()("bwf-node-wrapper bwf-condition",["bwf-condition-".concat(i)])},Object(r.createElement)(o.d,{type:"target",position:"top",style:{opacity:0},isConnectable:!1}),Object(r.createElement)("div",{className:u()("bwf-node-content")},Object(_.decodeEntities)(a)),Object(r.createElement)(o.d,{type:"source",position:"bottom",style:{opacity:0},isConnectable:!1}))};function ht(e){return(ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(){yt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ht(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ht(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function vt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mt(Object(n),!0).forEach((function(t){gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ht(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ht(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function wt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Et={status:!0,title:Object(l.__)("Add Offer","funnel-builder"),proLink:Object(f.P)(["Canvas","Add","Offer","Upgrade","Modal"])},_t=function(e){var t=Object(M.a)("ul").isExpired,n=e.id,a=e.sourceX,c=e.sourceY,u=e.targetX,d=e.targetY,p=e.sourcePosition,b=e.targetPosition,h=e.style,y=void 0===h?{}:h,m=e.data,v=void 0===m?{}:m,g=e.arrowHeadType,j=e.markerEndId,_=Object(o.g)({sourceX:a,sourceY:c,sourcePosition:p,targetX:u,targetY:d,targetPosition:b}),x=Object(o.i)(g,j),P=wt(Object(o.h)({sourceX:a,sourceY:c,targetX:u,targetY:d}),2),C=P[0],N=P[1],T=Object(w.a)(),D=T.setStepList,L=T.setUpsellStepNode,R=wt(Object(r.useState)(!1),2),F=R[0],B=R[1],q=wt(Object(r.useState)({}),2),z=q[0],U=q[1],Y=v.offer,V=void 0===Y?"":Y,H=v.branch,G=void 0===H?"":H,X=v.upsellId,K=void 0===X?"":X,$=v.mainIndex,W=void 0===$?"":$,Z=v.stepIndex,Q=void 0===Z?"":Z,J=O(),ee=J.getFunnelId,te=J.getStepsList,ne=wt(Object(r.useState)(!1),2),re=ne[0],oe=ne[1],ae=ee(),ie=te(),ce=function(){var e,t=(e=yt().mark((function e(){var t,n,r,o,a,c,u,l,s=arguments;return yt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},n=t.copyFrom,r=void 0===n?{}:n,o=t.title,a=void 0===o?"":o,(c=r&&r.hasOwnProperty("key")?r.key:0)<1&&(c=r&&r.hasOwnProperty("id")?r.id:0),u={inherit_from:c,title:a,type:"offer",funnel_id:ae,canvas:{empty:!1,position:G,offer_id:V}},l=Object(f.u)("/funnel-upsell/".concat(K,"/offers/")),e.prev=6,B(!0),e.next=10,k()({method:"POST",path:l,data:u}).then((function(e){if(e.hasOwnProperty("status")&&e.status){if(e.hasOwnProperty("data")&&!Object(i.isEmpty)(e.data)){var t=Object(i.cloneDeep)(ie),n=e.data,r=n.groups,o=void 0===r?[]:r,a=n.steps_list,c=void 0===a?{}:a;t=vt(vt({},t),c),D(t),L(W,Q,o[0]),oe(!1)}oe(!1)}B(!1)}));case 10:e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log(e.t0),B(!1);case 16:case"end":return e.stop()}}),e,null,[[6,12]])})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ot(a,r,o,i,c,"next",e)}function c(e){Ot(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:n,style:y,className:"react-flow__edge-path",d:_,markerEnd:x}),Object(r.createElement)("foreignObject",{width:24,height:24,style:{borderRadius:"50%",overflow:"visible",position:"relative"},x:C-12,y:N-12,className:"edgebutton-foreignobject",requiredExtensions:"http://www.w3.org/1999/xhtml"},Object(r.createElement)("div",{className:"wffn-node-add",onClick:function(){t?U(Et):oe(!0)}},Object(r.createElement)(A.a,{toolTipText:Object(l.__)("Add Offer","funnel-builder")},Object(r.createElement)(S.a,{icon:"dashed-plus",size:28})))),re&&Object(r.createElement)(s.Modal,{title:Object(l.__)("Add Offer","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-squeezy bwf-modal-edit-page bwf-create-new-funnel-modal",onRequestClose:function(){return oe(!1)},isDismissible:!0,shouldCloseOnClickOutside:!1},Object(r.createElement)(I.a,{step:{type:"offer",upsellId:K,is_substep:!0},requestCreateStep:ce,onRequestClose:function(){return oe(!1)},isBusy:F})),z.status&&Object(r.createElement)(E.a,{isOpen:z.status,onRequestClose:function(){return U({status:!1})},modalContent:z,type:z.type}))},St=function(e){var t=e.id,n=e.sourceX,a=e.sourceY,i=e.targetX,c=e.targetY,u=e.sourcePosition,l=e.targetPosition,s=e.style,f=void 0===s?{}:s,d=e.arrowHeadType,p=e.markerEndId,b=Object(o.g)({sourceX:n,sourceY:a,sourcePosition:u,targetX:i,targetY:c,targetPosition:l}),h=Object(o.i)(d,p);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("path",{id:t,style:f,className:"react-flow__edge-path",d:b,markerEnd:h}))};n(797),n(798);var xt=n(77),kt=n(12),Pt=n.n(kt),Ct=(n(522),n(799),n(18)),Nt=n.n(Ct),Tt=n(140),Dt=n(559),It=n.n(Dt),At=n(317),Mt=n.n(At),Lt=n(122),Rt=n(374),Ft=n(17);function Bt(e){var t="",n=function(e){if(Object(i.isString)(e)||Object(i.isNumber)(e))t+=e;else if(Object(i.isArray)(e))e.forEach(n);else if(e&&e.props){var r=e.props.children;Object(i.isArray)(r)?r.forEach(n):n(r)}};return n(e),t}function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yt(r.key),r)}}function Yt(e){var t=function(e,t){if("object"!=qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qt(t)?t:t+""}function Vt(e,t,n){return t=Ht(t),function(e,t){if(t&&("object"==qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Ht(e).constructor):t.apply(e,n))}function Ht(e){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gt(e,t){return(Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xt=function(e){function t(e){var n,r=e.filter,o=e.config,a=e.onFilterChange;zt(this,t),n=Vt(this,t,arguments);var i=o.input.options;return n.state={options:i},n.updateOptions=n.updateOptions.bind(n),!i&&o.input.getOptions&&o.input.getOptions().then(n.updateOptions).then((function(e){if(!r.value){var t=Object(N.c)(o,e);a(r.key,"value",t)}})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gt(e,t)}(t,e),n=t,(o=[{key:"updateOptions",value:function(e){return this.setState({options:e}),e}},{key:"getScreenReaderText",value:function(e,t){if(""===e.value)return"";var n=Object(i.find)(t.rules,{value:e.rule})||{},o=Object(i.find)(t.input.options,{value:e.value})||{};return Bt(Mt()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,o.label),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,c=e.isEnglish,l=this.state.options,f=o.key,d=o.rule,p=o.value,b=n.labels,h=n.rules,y=Mt()({mixedString:b.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:u()(t,"bwf-filters-advanced-rule"),options:h,value:d,onChange:Object(i.partial)(a,f,"rule"),"aria-label":b.rule}),filter:l?Object(r.createElement)(s.SelectControl,{className:u()(t,"bwf-filters-advanced-input"),options:l,value:p,onChange:Object(i.partial)(a,o.key,"value"),"aria-label":b.filter}):Object(r.createElement)(j.a,{size:"xl"})}}),m=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},b.add||""),Object(r.createElement)("div",{className:u()("bwf-filters-advanced-fieldset",{"is-english":c})},y),m&&Object(r.createElement)("span",{className:"screen-reader-text"},m))}}])&&Ut(n.prototype,o),a&&Ut(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Xt.propTypes={config:Nt.a.shape({labels:Nt.a.shape({rule:Nt.a.string,title:Nt.a.string,filter:Nt.a.string}),rules:Nt.a.arrayOf(Nt.a.object),input:Nt.a.object}).isRequired,filter:Nt.a.shape({key:Nt.a.string,rule:Nt.a.string,value:Nt.a.string}).isRequired,onFilterChange:Nt.a.func.isRequired};var Kt=Xt,$t=n(421);function Wt(e){return(Wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zt(Object(n),!0).forEach((function(t){Jt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jt(e,t,n){return(t=nn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nn(r.key),r)}}function nn(e){var t=function(e,t){if("object"!=Wt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Wt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Wt(t)?t:t+""}function rn(e,t,n){return t=on(t),function(e,t){if(t&&("object"==Wt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],on(e).constructor):t.apply(e,n))}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t){return(an=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var cn=function(e){function t(e){var n,r=e.filter,o=e.config,a=e.query;return en(this,t),(n=rn(this,t,arguments)).onSearchChange=n.onSearchChange.bind(n),n.state={selected:[]},n.updateLabels=n.updateLabels.bind(n),r.value.length&&o.input.getLabels(r.value,a).then((function(e){var t=e.map((function(e){return Qt({key:e.id},e)}));n.updateLabels(t)})),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&an(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.filter,o=t.query,a=e.filter;if(r.value.length&&!Object(i.isEqual)(a,r)){var c=this.state.selected.map((function(e){return e.key}));Object(N.e)(r.value).every((function(e){return!c.includes(e)}))&&n.input.getLabels(r.value,o).then(this.updateLabels)}}},{key:"updateLabels",value:function(e){var t=this.state.selected.map((function(e){return e.key})),n=e.map((function(e){return e.key}));Object(i.isEqual)(n.sort(),t.sort())||this.setState({selected:e})}},{key:"onSearchChange",value:function(e){this.setState({selected:e});var t=this.props,n=t.filter,r=t.onFilterChange,o=e.map((function(e){return e.key})).join(",");r(n.key,"value",o)}},{key:"getScreenReaderText",value:function(e,t){var n=this.state.selected;if(0===n.length)return"";var o=Object(i.find)(t.rules,{value:e.rule})||{},a=n.map((function(e){return e.label})).join(", ");return Bt(Mt()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,a),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,c=e.isEnglish,l=this.state.selected,f=o.key,d=o.rule,p=n.input,b=n.labels,h=n.rules,y=Mt()({mixedString:b.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:u()(t,"bwf-filters-advanced-rule"),options:h,value:d,onChange:Object(i.partial)(a,f,"rule"),"aria-label":b.rule}),filter:Object(r.createElement)($t.a,{className:u()(t,"bwf-filters-advanced-input"),onChange:this.onSearchChange,type:p.type,placeholder:b.placeholder,selected:l,inlineTags:!0,"aria-label":b.filter})}}),m=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},b.add||""),Object(r.createElement)("div",{className:u()("bwf-filters-advanced-fieldset",{"is-english":c})},y),m&&Object(r.createElement)("span",{className:"screen-reader-text"},m))}}])&&tn(n.prototype,o),a&&tn(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);cn.propTypes={config:Nt.a.shape({labels:Nt.a.shape({placeholder:Nt.a.string,rule:Nt.a.string,title:Nt.a.string}),rules:Nt.a.arrayOf(Nt.a.object),input:Nt.a.object}).isRequired,filter:Nt.a.shape({key:Nt.a.string,rule:Nt.a.string,value:Nt.a.string}).isRequired,onFilterChange:Nt.a.func.isRequired,query:Nt.a.object};var un=cn,ln=n(573);function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,hn(r.key),r)}}function hn(e){var t=function(e,t){if("object"!=sn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=sn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==sn(t)?t:t+""}function yn(e,t,n){return t=mn(t),function(e,t){if(t&&("object"==sn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],mn(e).constructor):t.apply(e,n))}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e,t){return(vn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var gn=function(e){function t(){return pn(this,t),yn(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vn(e,t)}(t,e),n=t,(o=[{key:"getBetweenString",value:function(){return Object(l._x)("{{rangeStart /}}{{span}} and {{/span}}{{rangeEnd /}}","Numerical range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=this.props.currency,o=Object(i.find)(t.rules,{value:e.rule})||{},a=fn(Object(i.isArray)(e.value)?e.value:[e.value],2),c=a[0],u=a[1];if(!c||"between"===o.value&&!u)return"";if("currency"===Object(i.get)(t,["input","type"],"number")){var l=Object(Tt.a)(n).formatAmount;c=l(c),u=l(u)}var s=c;return"between"===o.value&&(s=Mt()({mixedString:this.getBetweenString(),components:{rangeStart:Object(r.createElement)(r.Fragment,null,c),rangeEnd:Object(r.createElement)(r.Fragment,null,u),span:Object(r.createElement)(r.Fragment,null)}})),Bt(Mt()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,s),rule:Object(r.createElement)(r.Fragment,null,o.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"getFormControl",value:function(e){var t=e.type,n=e.value,o=e.label,a=e.onChange,i=e.currencySymbol,c=e.symbolPosition;return"currency"===t?0===c.indexOf("right")?Object(r.createElement)(ln.a,{suffix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(ln.a,{prefix:Object(r.createElement)("span",{dangerouslySetInnerHTML:{__html:i}}),className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a}):Object(r.createElement)(s.TextControl,{className:"bwf-filters-advanced-input",type:"number",value:n||"","aria-label":o,onChange:a})}},{key:"getFilterInputs",value:function(){var e=this.props,t=e.config,n=e.filter,r=e.onFilterChange,o=e.currency,a=o.symbol,c=o.symbolPosition;if("between"===n.rule)return this.getRangeInput();var u=Object(i.get)(t,["input","type"],"number"),s=fn(Object(i.isArray)(n.value)?n.value:[n.value],2),f=s[0],d=s[1];Boolean(d)&&r(n.key,"value",f||d);var p="";
/* translators: Sentence fragment, "maximum amount" refers to a numeric value the field must be less than. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
return p="lessthan"===n.rule?Object(l._x)("%(field)s maximum amount","maximum value input","funnel-builder"):Object(l._x)("%(field)s minimum amount","minimum value input","funnel-builder"),this.getFormControl({type:u,value:f||d,label:Object(l.sprintf)(p,{field:Object(i.get)(t,["labels","add"])}),onChange:Object(i.partial)(r,n.key,"value"),currencySymbol:a,symbolPosition:c})}},{key:"getRangeInput",value:function(){var e=this.props,t=e.config,n=e.filter,o=e.onFilterChange,a=e.currency,c=a.symbol,u=a.symbolPosition,s=Object(i.get)(t,["input","type"],"number"),f=fn(Object(i.isArray)(n.value)?n.value:[n.value],2),d=f[0],p=f[1];return Mt()({mixedString:this.getBetweenString(),components:{rangeStart:this.getFormControl({type:s,value:d||"",label:Object(l.sprintf)(
/* translators: Sentence fragment, "range start" refers to the first of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(l.__)("%(field)s range start","funnel-builder"),{field:Object(i.get)(t,["labels","add"])}),onChange:function(e){o(n.key,"value",[e,p])},currencySymbol:c,symbolPosition:u}),rangeEnd:this.getFormControl({type:s,value:p||"",label:Object(l.sprintf)(
/* translators: Sentence fragment, "range end" refers to the second of two numeric values the field must be between. Screenshot for context: https://cloudup.com/cmv5CLyMPNQ */
Object(l.__)("%(field)s range end","funnel-builder"),{field:Object(i.get)(t,["labels","add"])}),onChange:function(e){o(n.key,"value",[d,e])},currencySymbol:c,symbolPosition:u}),span:Object(r.createElement)("span",{className:"separator"})}})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.onFilterChange,c=e.isEnglish,l=o.key,f=o.rule,d=n.labels,p=n.rules,b=Mt()({mixedString:d.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:u()(t,"bwf-filters-advanced-rule"),options:p,value:f,onChange:Object(i.partial)(a,l,"rule"),"aria-label":d.rule}),filter:Object(r.createElement)("div",{className:u()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===f})},this.getFilterInputs())}}),h=this.getScreenReaderText(o,n);return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},d.add||""),Object(r.createElement)("div",{className:u()("bwf-filters-advanced-fieldset",{"is-english":c})},b),h&&Object(r.createElement)("span",{className:"screen-reader-text"},h))}}])&&bn(n.prototype,o),a&&bn(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component),On=n(319);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(e,t,n){return(t=kn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function En(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _n(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kn(r.key),r)}}function kn(e){var t=function(e,t){if("object"!=wn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=wn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==wn(t)?t:t+""}function Pn(e,t,n){return t=Cn(t),function(e,t){if(t&&("object"==wn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Cn(e).constructor):t.apply(e,n))}function Cn(e){return(Cn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nn(e,t){return(Nn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Tn=Object(l.__)("MMM D, YYYY","funnel-builder"),Dn=Object(l.__)("MM/DD/YYYY","funnel-builder"),In=function(e){function t(e){var n,r=e.filter;Sn(this,t),n=Pn(this,t,arguments);var o=Array.isArray(r.value)?r.value:[null,r.value],a=En(o,2),i=a[0],c=a[1],u=i?Object(xt.i)(xt.h,i):null,l=c?Object(xt.i)(xt.h,c):null;return n.state={before:l,beforeText:l?l.format(Dn):"",beforeError:null,after:u,afterText:u?u.format(Dn):"",afterError:null},n.onSingleDateChange=n.onSingleDateChange.bind(n),n.onRangeDateChange=n.onRangeDateChange.bind(n),n.onRuleChange=n.onRuleChange.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Nn(e,t)}(t,e),n=t,(o=[{key:"getBetweenString",value:function(){return Object(l._x)("{{after /}}{{span}} and {{/span}}{{before /}}","Date range inputs arranged on a single line","funnel-builder")}},{key:"getScreenReaderText",value:function(e,t){var n=Object(i.find)(t.rules,{value:e.rule})||{},o=this.state,a=o.before,c=o.after;if(!a||"between"===n.value&&!c)return"";var u=a.format(Tn);return"between"===n.value&&(u=Mt()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(r.Fragment,null,c.format(Tn)),before:Object(r.createElement)(r.Fragment,null,a.format(Tn)),span:Object(r.createElement)(r.Fragment,null)}})),Bt(Mt()({mixedString:t.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,u),rule:Object(r.createElement)(r.Fragment,null,n.label),title:Object(r.createElement)(r.Fragment,null)}}))}},{key:"onSingleDateChange",value:function(e){var t=e.date,n=e.text,r=e.error,o=this.props,a=o.filter,i=o.onFilterChange;this.setState({before:t,beforeText:n,beforeError:r}),t&&i(a.key,"value",t.format(xt.h))}},{key:"onRangeDateChange",value:function(e,t){var n=t.date,r=t.text,o=t.error,a=this.props,i=a.filter,c=a.onFilterChange;if(this.setState(jn(jn(jn({},e,n),e+"Text",r),e+"Error",o)),n){var u=this.state,l=u.before,s=u.after,f=null,d=null;"after"===e&&(f=n.format(xt.h),d=l?l.format(xt.h):null),"before"===e&&(f=s?s.format(xt.h):null,d=n.format(xt.h)),f&&d&&c(i.key,"value",[f,d])}}},{key:"isFutureDate",value:function(e){return Pt()().isBefore(Pt()(e),"day")}},{key:"getFilterInputs",value:function(){var e=this.props.filter,t=this.state,n=t.before,o=t.beforeText,a=t.beforeError,c=t.after,u=t.afterText,l=t.afterError;return"between"===e.rule?Mt()({mixedString:this.getBetweenString(),components:{after:Object(r.createElement)(On.b,{date:c,text:u,error:l,onUpdate:Object(i.partial)(this.onRangeDateChange,"after"),dateFormat:Dn,isInvalidDate:this.isFutureDate}),before:Object(r.createElement)(On.b,{date:n,text:o,error:a,onUpdate:Object(i.partial)(this.onRangeDateChange,"before"),dateFormat:Dn,isInvalidDate:this.isFutureDate}),span:Object(r.createElement)("span",{className:"separator"})}}):Object(r.createElement)(On.b,{date:n,text:o,error:a,onUpdate:this.onSingleDateChange,dateFormat:Dn,isInvalidDate:this.isFutureDate})}},{key:"onRuleChange",value:function(e){var t=this.props,n=t.onFilterChange,r=t.filter,o=t.updateFilter,a=this.state.before;"between"===r.rule&&"between"!==e?o({key:r.key,rule:e,value:a?a.format(xt.h):void 0}):n(r.key,"rule",e)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.config,o=e.filter,a=e.isEnglish,i=o.rule,c=n.labels,l=n.rules,f=this.getScreenReaderText(o,n),d=Mt()({mixedString:c.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:u()(t,"bwf-filters-advanced-rule"),options:l,value:i,onChange:this.onRuleChange,"aria-label":c.rule}),filter:Object(r.createElement)("div",{className:u()(t,"bwf-filters-advanced-input-range",{"is-between":"between"===i})},this.getFilterInputs())}});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},c.add||""),Object(r.createElement)("div",{className:u()("bwf-filters-advanced-fieldset",{"is-english":a})},d),f&&Object(r.createElement)("span",{className:"screen-reader-text"},f))}}])&&xn(n.prototype,o),a&&xn(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component),An=n(337);function Mn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Rn=function(e){var t=e.className,n=e.config,o=e.filter,a=e.isEnglish,c=e.onFilterChange,f=o.key,d=o.rule,p=o.value,b=n.labels,h=n.rules,y=Mn(Object(r.useState)([]),2),m=y[0],v=y[1];Object(r.useEffect)((function(){k()({path:"/wc/v3/products/attributes"}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(v)}),[]);var g=Mn(Object(r.useState)(Array.isArray(p)?p[0]:""),2),O=g[0],w=g[1];Object(r.useEffect)((function(){Array.isArray(p)&&w(p[0])}),[p]);var E=Mn(Object(r.useState)([]),2),_=E[0],S=E[1];Object(r.useEffect)((function(){O&&(S([]),k()({path:"/wc/v3/products/attributes/".concat(O,"/terms")}).then((function(e){return e.map((function(e){var t=e.id,n=e.name;return{key:t.toString(),label:n}}))})).then(S))}),[O]);var x=Mn(Object(r.useState)(Array.isArray(p)&&p[1]||""),2),P=x[0],C=x[1],N=function(e){var t=e.attributes,n=e.attributeTerms,o=e.config,a=e.filter,i=e.selectedAttribute,c=e.selectedAttributeTerm;if(0===t.length||0===n.length||""===i||""===c)return"";var u=Array.isArray(o.rules)&&o.rules.find((function(e){return e.value===a.rule}))||{},s=t.find((function(e){return e.key===i})).label,f=n.find((function(e){return e.key===c})).label,d=Mt()({
/* translators: Sentence fragment describing a product attribute match. Example: "Color Is Not Blue" - attribute = Color, equals = Is Not, value = Blue */
mixedString:Object(l.__)("{{attribute /}} {{equals /}} {{value /}}","funnel-builder"),components:{attribute:Object(r.createElement)(r.Fragment,null,s),equals:Object(r.createElement)(r.Fragment,null,u.label),value:Object(r.createElement)(r.Fragment,null,f)}});return Bt(Mt()({mixedString:o.labels.title,components:{filter:Object(r.createElement)(r.Fragment,null,d),rule:Object(r.createElement)(r.Fragment,null),title:Object(r.createElement)(r.Fragment,null)}}))}({attributes:m,attributeTerms:_,config:n,filter:o,selectedAttribute:O,selectedAttributeTerm:P});return Object(r.createElement)("fieldset",{className:"bwf-filters-advanced-line-item",tabIndex:"0"},Object(r.createElement)("legend",{className:"screen-reader-text"},b.add||""),Object(r.createElement)("div",{className:u()("bwf-filters-advanced-fieldset",{"is-english":a})},Mt()({mixedString:b.title,components:{title:Object(r.createElement)("span",{className:t}),rule:Object(r.createElement)(s.SelectControl,{className:u()(t,"bwf-filters-advanced-rule"),options:h,value:d,onChange:Object(i.partial)(c,f,"rule"),"aria-label":b.rule}),filter:Object(r.createElement)("div",{className:u()(t,"bwf-filters-advanced-attribute-fieldset")},m.length>0?Object(r.createElement)(An.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(l.__)("Attribute name","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:m,selected:O,onChange:function(e){"string"!=typeof e&&(e=""),w(e),C(""),c(f,"value",[e])}}):Object(r.createElement)(j.a,{size:"xl"}),m.length>0&&""!==O&&(_.length?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"bwf-filters-advanced-attribute-field-separator"},"="),Object(r.createElement)(An.a,{className:"bwf-filters-advanced-input bwf-search",label:Object(l.__)("Attribute value","funnel-builder"),isSearchable:!0,showAllOnFocus:!0,options:_,selected:P,onChange:function(e){"string"!=typeof e&&(e=""),C(e),c(f,"value",[O,e])}})):Object(r.createElement)(j.a,{size:"xl"})))}})),N&&Object(r.createElement)("span",{className:"screen-reader-text"},N))};Rn.propTypes={config:Nt.a.shape({labels:Nt.a.shape({rule:Nt.a.string,title:Nt.a.string,filter:Nt.a.string}),rules:Nt.a.arrayOf(Nt.a.object),input:Nt.a.object}).isRequired,filter:Nt.a.shape({key:Nt.a.string,rule:Nt.a.string,value:Nt.a.arrayOf(Nt.a.oneOfType([Nt.a.string,Nt.a.number]))}).isRequired,onFilterChange:Nt.a.func.isRequired};var Fn=Rn,Bn=(n(800),n(279));function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zn(Object(n),!0).forEach((function(t){Hn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yn(e){return function(e){if(Array.isArray(e))return Vn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Vn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Vn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Hn(e,t,n){return(t=Kn(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Kn(r.key),r)}}function Kn(e){var t=function(e,t){if("object"!=qn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qn(t)?t:t+""}function $n(e,t,n){return t=Wn(t),function(e,t){if(t&&("object"==qn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Wn(e).constructor):t.apply(e,n))}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t){return(Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Qn=[{value:"all",label:Object(l.__)("All","funnel-builder")},{value:"any",label:Object(l.__)("Any","funnel-builder")}],Jn=function(e){function t(e){var n,o=e.query,a=e.config;return Gn(this,t),(n=$n(this,t,arguments)).state={match:o.match||"all",activeFilters:Object(N.b)(o,a.filters)},n.filterListRef=Object(r.createRef)(),n.onMatchChange=n.onMatchChange.bind(n),n.onFilterChange=n.onFilterChange.bind(n),n.getAvailableFilterKeys=n.getAvailableFilterKeys.bind(n),n.addFilter=n.addFilter.bind(n),n.removeFilter=n.removeFilter.bind(n),n.clearFilters=n.clearFilters.bind(n),n.getUpdateHref=n.getUpdateHref.bind(n),n.updateFilter=n.updateFilter.bind(n),n.onFilter=n.onFilter.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zn(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.config,r=t.query,o=e.query;Object(i.isEqual)(o,r)||this.setState({activeFilters:Object(N.b)(r,n.filters)})}},{key:"onMatchChange",value:function(e){var t=this.props.onAdvancedFilterAction;this.setState({match:e}),t("match",{match:e})}},{key:"onFilterChange",value:function(e,t,n){var r=this.state.activeFilters.map((function(r){return e===r.key?Object.assign({},r,Hn({},t,n)):r}));this.setState({activeFilters:r})}},{key:"updateFilter",value:function(e){var t=this.state.activeFilters.map((function(t){return e.key===t.key?e:t}));this.setState({activeFilters:t})}},{key:"removeFilter",value:function(e){var t=this.props.onAdvancedFilterAction,n=Yn(this.state.activeFilters),r=Object(i.findIndex)(n,(function(t){return t.key===e}));t("remove",n[r]),n.splice(r,1),this.setState({activeFilters:n}),0===n.length&&Object(N.d)().push(this.getUpdateHref([]))}},{key:"getTitle",value:function(){var e=this.state.match,t=this.props.config;return Mt()({mixedString:t.title,components:{select:Object(r.createElement)(s.SelectControl,{className:"bwf-filters-advanced-title-select",options:Qn,value:e,onChange:this.onMatchChange,"aria-label":Object(l.__)("Choose to apply any or all filters","funnel-builder")})}})}},{key:"getAvailableFilterKeys",value:function(){var e=this.props.config,t=this.state.activeFilters.map((function(e){return e.key}));return Object(i.difference)(Object.keys(e.filters),t)}},{key:"addFilter",value:function(e,t){var n=this,r=this.props,o=r.onAdvancedFilterAction,a=r.config.filters[e],i={key:e};Array.isArray(a.rules)&&a.rules.length&&(i.rule=a.rules[0].value),a.input&&a.input.options&&(i.value=Object(N.c)(a,a.input.options)),a.input&&"Search"===a.input.component&&(i.value=""),this.setState((function(e){return{activeFilters:[].concat(Yn(e.activeFilters),[i])}})),o("add",i),t(),setTimeout((function(){n.filterListRef.current.querySelector("li:last-of-type fieldset").focus()}))}},{key:"clearFilters",value:function(){(0,this.props.onAdvancedFilterAction)("clear_all"),this.setState({activeFilters:[],match:"all"})}},{key:"getUpdateHref",value:function(e,t){var n=this.props,r=n.path,o=n.query,a=n.config,i=Object(N.j)(e,o,a.filters),c="all"===t?void 0:t;return Object(N.f)(Un(Un({},i),{},{match:c}),r,o)}},{key:"isEnglish",value:function(){return/en[-|_]/.test(this.props.siteLocale)}},{key:"onFilter",value:function(){var e=this.props,t=e.onAdvancedFilterAction,n=e.query,r=e.config,o=this.state,a=o.activeFilters,i=o.match;t("filter",Un(Un({},Object(N.j)(a,n,r.filters)),{},{match:i}))}},{key:"orderFilters",value:function(e,t){var n=window.location.search,r=n.indexOf(e.key),o=n.indexOf(t.key);return-1===r||-1===o?0:r-o}},{key:"render",value:function(){var e=this,t=this.props,n=t.config,o=t.query,a=t.currency,c=this.state,f=c.activeFilters,d=c.match,p=this.getAvailableFilterKeys(),b=this.getUpdateHref(f,d),h="admin.php"+window.location.search===b||0===f.length,y=this.isEnglish();return Object(r.createElement)(Rt.a,{className:"bwf-filters-advanced bwf-analytics-card",title:this.getTitle()},Object(r.createElement)("ul",{className:"bwf-filters-advanced-list",ref:this.filterListRef},f.sort(this.orderFilters).map((function(t){var c=t.key,l=n.filters[c],f=l.input,d=l.labels;return Object(r.createElement)("li",{className:"bwf-filters-advanced-list-item",key:c},"SelectControl"===f.component&&Object(r.createElement)(Kt,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y}),"Search"===f.component&&Object(r.createElement)(un,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:o}),"Number"===f.component&&Object(r.createElement)(gn,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:o,currency:a}),"Currency"===f.component&&Object(r.createElement)(gn,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:Un(Un({},n.filters[c]),{input:{type:"currency",component:"Currency"}}),onFilterChange:e.onFilterChange,isEnglish:y,query:o,currency:a}),"Date"===f.component&&Object(r.createElement)(In,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:o,updateFilter:e.updateFilter}),"ProductAttribute"===f.component&&Object(r.createElement)(Fn,{className:"bwf-filters-advanced-fieldset-item",filter:t,config:n.filters[c],onFilterChange:e.onFilterChange,isEnglish:y,query:o,updateFilter:e.updateFilter}),Object(r.createElement)(s.Button,{className:u()("bwf-filters-advanced-line-item","bwf-filters-advanced-remove"),label:d.remove,onClick:Object(i.partial)(e.removeFilter,c)},Object(r.createElement)(It.a,{icon:"cross-small"})))}))),p.length>0&&Object(r.createElement)("div",{className:"bwf-filters-advanced-add-filter"},Object(r.createElement)(Lt.a,{className:"bwf-filters-advanced-add-filter-dropdown",position:"bottom center",renderToggle:function(e){var t=e.isOpen,n=e.onToggle;return Object(r.createElement)(s.Button,{className:"bwf-filters-advanced-add-button",onClick:n,"aria-expanded":t},Object(r.createElement)(It.a,{icon:"add-outline"}),Object(l.__)("Add a Filter","funnel-builder"))},renderContent:function(t){var o=t.onClose;return Object(r.createElement)("ul",{className:"bwf-filters-advanced-add-dropdown"},p.map((function(t){return Object(r.createElement)("li",{key:t},Object(r.createElement)(s.Button,{onClick:Object(i.partial)(e.addFilter,t,o)},n.filters[t].labels.add))})))}})),Object(r.createElement)("div",{className:"bwf-filters-advanced-controls"},h&&Object(r.createElement)(s.Button,{isPrimary:!0,disabled:!0,className:"bwf-no-ripple"},Object(l.__)("Filter","funnel-builder")),!h&&Object(r.createElement)(Ft.a,{className:"components-button is-primary is-button",type:"bwf-crm",href:b,onClick:this.onFilter},Object(l.__)("Filter","funnel-builder")),f.length>0&&Object(r.createElement)(Ft.a,{type:"bwf-crm",href:this.getUpdateHref([]),onClick:this.clearFilters},Object(l.__)("Clear all filters","funnel-builder"))))}}])&&Xn(n.prototype,o),a&&Xn(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Jn.propTypes={config:Nt.a.shape({title:Nt.a.string,filters:Nt.a.objectOf(Nt.a.shape({labels:Nt.a.shape({add:Nt.a.string,remove:Nt.a.string,rule:Nt.a.string,title:Nt.a.string,filter:Nt.a.string}),rules:Nt.a.arrayOf(Nt.a.object),input:Nt.a.object}))}).isRequired,path:Nt.a.string.isRequired,query:Nt.a.object,onAdvancedFilterAction:Nt.a.func,siteLocale:Nt.a.string,currency:Nt.a.object.isRequired};var er=Object(Bn.a)(Jn,{query:{},onAdvancedFilterAction:function(){},siteLocale:"en_US"}),tr=function(e){var t=e.className,n=e.count,o=e.children,a=e.disabled,i=e.helpText,c=e.onClick;return!a&&n<2?Object(r.createElement)(s.Tooltip,{text:i},Object(r.createElement)("span",{className:t},Object(r.createElement)(s.Button,{className:"bwf-compare-button",disabled:!0,isSecondary:!0},o))):Object(r.createElement)(s.Button,{className:u()("bwf-compare-button",t),onClick:c,disabled:a,isSecondary:!0},o)};tr.propTypes={className:Nt.a.string,count:Nt.a.number.isRequired,children:Nt.a.node.isRequired,helpText:Nt.a.string.isRequired,onClick:Nt.a.func.isRequired,disabled:Nt.a.bool};var nr=tr;function rr(e){return(rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function or(e,t,n){return(t=cr(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ir(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,cr(r.key),r)}}function cr(e){var t=function(e,t){if("object"!=rr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rr(t)?t:t+""}function ur(e,t,n){return t=lr(t),function(e,t){if(t&&("object"==rr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],lr(e).constructor):t.apply(e,n))}function lr(e){return(lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sr(e,t){return(sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var fr=function(e){function t(e){var n,r=e.getLabels,o=e.param,a=e.query;return ar(this,t),(n=ur(this,t,arguments)).state={selected:[]},n.clearQuery=n.clearQuery.bind(n),n.updateQuery=n.updateQuery.bind(n),n.updateLabels=n.updateLabels.bind(n),a[o]&&r(a[o],a).then(n.updateLabels),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sr(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e,t){var n=e.param,r=e.query,o=t.selected,a=this.props,c=a.getLabels,u=a.param,l=a.query,s=this.state.selected;if(n!==u||o.length>0&&0===s.length)this.clearQuery();else{var f=Object(N.e)(r[u]),d=Object(N.e)(l[u]);Object(i.isEqual)(f.sort(),d.sort())||c(l[u],l).then(this.updateLabels)}}},{key:"clearQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query;this.setState({selected:[]}),Object(N.k)(or({},t,void 0),n,r)}},{key:"updateLabels",value:function(e){this.setState({selected:e})}},{key:"updateQuery",value:function(){var e=this.props,t=e.param,n=e.path,r=e.query,o=this.state.selected.map((function(e){return e.key}));Object(N.k)(or({},t,o.join(",")),n,r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.labels,o=t.type,a=this.state.selected;return Object(r.createElement)(Rt.a,{title:n.title,className:"bwf-filters-compare bwf-analytics-card"},Object(r.createElement)("div",{className:"bwf-filters-compare-body"},Object(r.createElement)($t.a,{type:o,selected:a,placeholder:n.placeholder,onChange:function(t){e.setState({selected:t})}})),Object(r.createElement)("div",{className:"bwf-filters-compare-footer"},Object(r.createElement)(nr,{count:a.length,helpText:n.helpText,onClick:this.updateQuery},n.update),a.length>0&&Object(r.createElement)(s.Button,{isLink:!0,onClick:this.clearQuery},Object(l.__)("Clear all","funnel-builder"))))}}])&&ir(n.prototype,o),a&&ir(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);fr.propTypes={getLabels:Nt.a.func.isRequired,labels:Nt.a.shape({placeholder:Nt.a.string,title:Nt.a.string,update:Nt.a.string}),param:Nt.a.string.isRequired,path:Nt.a.string.isRequired,query:Nt.a.object,type:Nt.a.string.isRequired};var dr=Object(Bn.a)(fr,{labels:{},query:{}});n(416),n(801);function pr(e){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,yr(r.key),r)}}function yr(e){var t=function(e,t){if("object"!=pr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=pr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==pr(t)?t:t+""}function mr(e,t,n){return t=vr(t),function(e,t){if(t&&("object"==pr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],vr(e).constructor):t.apply(e,n))}function vr(e){return(vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e,t){return(gr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Or=function(e){function t(){return br(this,t),mr(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gr(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.className,n=e.options,o=e.selected,a=e.onSelect,c=e.name,l=e.legend;return Object(r.createElement)("fieldset",{className:"bwf-segment-selection"},Object(r.createElement)("legend",{className:"screen-reader-text"},l),Object(r.createElement)("div",{className:u()(t,"bwf-segment-selection-container")},n.map((function(e){var t=e.value,n=e.label;if(!t||!n)return null;var u,l,s,f=Object(i.uniqueId)("".concat(t,"_"));return Object(r.createElement)("div",{className:"bwf-segment-selection-item",key:t},Object(r.createElement)("input",{className:"bwf-segment-selection-input",type:"radio",name:c,id:f,checked:o===t,onChange:Object(i.partial)(a,(u={},l=c,s=t,(l=yr(l))in u?Object.defineProperty(u,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):u[l]=s,u))}),Object(r.createElement)("label",{htmlFor:f},Object(r.createElement)("span",{className:"bwf-segment-selection-label"},n)))}))))}}])&&hr(n.prototype,o),a&&hr(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Or.propTypes={className:Nt.a.string,options:Nt.a.arrayOf(Nt.a.shape({value:Nt.a.string.isRequired,label:Nt.a.string.isRequired})).isRequired,selected:Nt.a.string,onSelect:Nt.a.func.isRequired,name:Nt.a.string.isRequired,legend:Nt.a.string.isRequired};var wr=Or;function jr(e){return(jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Sr(r.key),r)}}function Sr(e){var t=function(e,t){if("object"!=jr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=jr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==jr(t)?t:t+""}function xr(e,t,n){return t=kr(t),function(e,t){if(t&&("object"==jr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],kr(e).constructor):t.apply(e,n))}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pr(e,t){return(Pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Cr=function(e){function t(){return Er(this,t),xr(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pr(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.compare;return Object(r.createElement)(wr,{options:Tr,selected:n,onSelect:t,name:"compare",legend:Object(l.__)("compare to","funnel-builder")})}}])&&_r(n.prototype,o),a&&_r(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Cr.propTypes={onSelect:Nt.a.func.isRequired,compare:Nt.a.string};var Nr=Cr,Tr=[{value:"previous_period",label:Object(l.__)("Previous Period","funnel-builder")},{value:"previous_year",label:Object(l.__)("Previous Year","funnel-builder")}],Dr=(Object(l.__)("Invalid date","funnel-builder"),Object(l.__)("Select a date in the past","funnel-builder"),Object(l.__)("Start date must be before end date","funnel-builder"),Object(l.__)("Start date must be before end date","funnel-builder"),n(333),n(334),n(471)),Ir=n(175),Ar=(n(288),n(315)),Mr=n(357);function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rr(e,t,n){return(t=Br(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Br(r.key),r)}}function Br(e){var t=function(e,t){if("object"!=Lr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lr(t)?t:t+""}function qr(e,t,n){return t=zr(t),function(e,t){if(t&&("object"==Lr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],zr(e).constructor):t.apply(e,n))}function zr(e){return(zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t){return(Ur=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Yr=function(){return"rtl"===document.documentElement.dir},Vr=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=qr(this,t,[e])).onDatesChange=n.onDatesChange.bind(n),n.onFocusChange=n.onFocusChange.bind(n),n.onInputChange=n.onInputChange.bind(n),n.nodeRef=Object(r.createRef)(),n.keepFocusInside=n.keepFocusInside.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ur(e,t)}(t,e),function(e,t,n){return t&&Fr(e.prototype,t),n&&Fr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"keepFocusInside",value:function(e,t){if(this.nodeRef.current){var n=this.props.losesFocusTo;if("container"!==e||!t.target||!t.target.classList.contains("DayPickerNavigation_button")&&!t.target.classList.contains("CalendarDay")||t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay"))){if("onPrevMonthClick"===e||"onNextMonthClick"===e){var r=this.nodeRef.current.querySelector(".DayPickerNavigation_button");r&&r.focus()}}else{if(t.relatedTarget&&(t.relatedTarget.classList.contains("DayPickerNavigation_button")||t.relatedTarget.classList.contains("CalendarDay")))return;if(t.relatedTarget&&n&&n.contains(t.relatedTarget))return;var o=this.nodeRef.current.querySelector(".DayPicker_focusRegion");o&&o.focus()}}}},{key:"onDatesChange",value:function(e){var t=e.startDate,n=e.endDate,r=this.props,o=r.onUpdate,a=r.shortDateFormat;o({after:t,before:n,afterText:t?t.format(a):"",beforeText:n?n.format(a):"",afterError:null,beforeError:null})}},{key:"onFocusChange",value:function(e){this.props.onUpdate({focusedInput:e||"startDate"})}},{key:"onInputChange",value:function(e,t){var n=t.target.value,r=this.props,o=r.after,a=r.before,i=r.shortDateFormat,c=Object(xt.j)(e,n,a,o,i),u=c.date,l=c.error;this.props.onUpdate(Rr(Rr(Rr({},e,u),e+"Text",n),e+"Error",n.length>0?l:null))}},{key:"setTnitialVisibleMonth",value:function(e,t){return function(){var n=t||Pt()();return e?n.clone().subtract(1,"month"):n}}},{key:"render",value:function(){var e=this,t=this.props,n=t.after,o=t.before,a=t.focusedInput,c=t.afterText,s=t.beforeText,f=t.afterError,d=t.beforeError,p=t.shortDateFormat,b=t.isViewportMobile,h=t.isViewportSmall,y=t.isInvalidDate,m=b&&!h;return Object(r.createElement)("div",{className:u()("bwf-calendar",{"is-mobile":b})},Object(r.createElement)("div",{className:"bwf-calendar-inputs"},Object(r.createElement)(Ar.a,{value:c,onChange:Object(i.partial)(this.onInputChange,"after"),dateFormat:p,label:Object(l.__)("Start Date","funnel-builder"),error:f,describedBy:Object(l.sprintf)(Object(l.__)("Date input describing a selected date range's start date in format %s","funnel-builder"),p),onFocus:function(){return e.onFocusChange("startDate")}}),Object(r.createElement)("div",{className:"bwf-calendar-inputs-to"},Object(l.__)("to","funnel-builder")),Object(r.createElement)(Ar.a,{value:s,onChange:Object(i.partial)(this.onInputChange,"before"),dateFormat:p,label:Object(l.__)("End Date","funnel-builder"),error:d,describedBy:Object(l.sprintf)(Object(l.__)("Date input describing a selected date range's end date in format %s","funnel-builder"),p),onFocus:function(){return e.onFocusChange("endDate")}})),Object(r.createElement)("div",{className:"bwf-calendar-react-dates",ref:this.nodeRef,onBlur:Object(i.partial)(this.keepFocusInside,"container"),tabIndex:-1},Object(r.createElement)(Dr.DayPickerRangeController,{onNextMonthClick:Object(i.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(i.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:n,endDate:o,orientation:"horizontal",numberOfMonths:m?2:1,isOutsideRange:function(e){return y&&y(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:Yr(),initialVisibleMonth:this.setTnitialVisibleMonth(m,o),phrases:Mr.a}),Object(r.createElement)(Dr.DayPickerRangeController,{onNextMonthClick:Object(i.partial)(this.keepFocusInside,"onNextMonthClick"),onPrevMonthClick:Object(i.partial)(this.keepFocusInside,"onPrevMonthClick"),onDatesChange:this.onDatesChange,onFocusChange:this.onFocusChange,focusedInput:a,startDate:n,endDate:o,orientation:"horizontal",numberOfMonths:m?2:1,isOutsideRange:function(e){return y&&y(e.toDate())},minimumNights:0,hideKeyboardShortcutsPanel:!0,noBorder:!0,isRTL:Yr(),initialVisibleMonth:this.setTnitialVisibleMonth(m,o),phrases:Mr.a})))}}])}(r.Component);Vr.propTypes={after:Nt.a.object,afterError:Nt.a.string,afterText:Nt.a.string,before:Nt.a.object,beforeError:Nt.a.string,beforeText:Nt.a.string,focusedInput:Nt.a.string,isInvalidDate:Nt.a.func,onUpdate:Nt.a.func.isRequired,shortDateFormat:Nt.a.string.isRequired,losesFocusTo:Nt.a.instanceOf(Element)};var Hr=Object(Ir.withViewportMatch)({isViewportMobile:"< medium",isViewportSmall:"< small"})(Vr),Gr=n(297);function Xr(e){return(Xr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wr(r.key),r)}}function Wr(e){var t=function(e,t){if("object"!=Xr(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Xr(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Xr(t)?t:t+""}function Zr(e,t,n){return t=Qr(t),function(e,t){if(t&&("object"==Xr(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Qr(e).constructor):t.apply(e,n))}function Qr(e){return(Qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jr(e,t){return(Jr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var eo=function(e){function t(){return Kr(this,t),Zr(this,t,arguments)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jr(e,t)}(t,e),n=t,(o=[{key:"render",value:function(){var e=this.props,t=e.onSelect,n=e.period;return Object(r.createElement)(wr,{options:Object(i.filter)(no,(function(e){return"custom"!==e.value})),selected:n,onSelect:t,name:"period",legend:Object(l.__)("select a preset period","funnel-builder")})}}])&&$r(n.prototype,o),a&&$r(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);eo.propTypes={onSelect:Nt.a.func.isRequired,period:Nt.a.string};var to=eo,no=[{value:"today",label:Object(l.__)("Today","funnel-builder")},{value:"yesterday",label:Object(l.__)("Yesterday","funnel-builder")},{value:"week",label:Object(l.__)("Week to Date","funnel-builder")},{value:"last_week",label:Object(l.__)("Last Week","funnel-builder")},{value:"month",label:Object(l.__)("Month to Date","funnel-builder")},{value:"last_month",label:Object(l.__)("Last Month","funnel-builder")},{value:"quarter",label:Object(l.__)("Quarter to Date","funnel-builder")},{value:"last_quarter",label:Object(l.__)("Last Quarter","funnel-builder")},{value:"year",label:Object(l.__)("Year to Date","funnel-builder")},{value:"last_year",label:Object(l.__)("Last Year","funnel-builder")},{value:"custom",label:Object(l.__)("Custom","funnel-builder")}];function ro(e){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ao(r.key),r)}}function ao(e){var t=function(e,t){if("object"!=ro(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ro(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ro(t)?t:t+""}function io(e,t,n){return t=co(t),function(e,t){if(t&&("object"==ro(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],co(e).constructor):t.apply(e,n))}function co(e){return(co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uo(e,t){return(uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var lo=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=io(this,t)).onTabSelect=e.onTabSelect.bind(e),e.controlsRef=Object(r.createRef)(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&uo(e,t)}(t,e),n=t,(o=[{key:"onTabSelect",value:function(e){var t=this.props,n=t.onUpdate,r=t.period;"period"===e&&"custom"===r&&n({period:"today"})}},{key:"isFutureDate",value:function(e){return Pt()().isBefore(Pt()(e),"day")}},{key:"render",value:function(){var e=this,t=this.props,n=t.period,o=t.compare,a=t.hideCompare,i=t.after,c=t.before,f=t.onUpdate,d=t.onClose,p=t.onSelect,b=t.isValidSelection,h=t.resetCustomValues,y=t.focusedInput,m=t.afterText,v=t.beforeText,g=t.afterError,O=t.beforeError,w=t.shortDateFormat,j=t.disablePresets;return Object(r.createElement)("div",null,Object(r.createElement)(Gr.a,{className:"screen-reader-text",tabIndex:"0"},Object(l.__)("Select date range and comparison","funnel-builder")),Object(r.createElement)(Gr.b,{component:!1},Object(r.createElement)(Gr.a,{className:"bwf-filters-date-text"},Object(l.__)("select a date range","funnel-builder")),Object(r.createElement)(s.TabPanel,{tabs:[{name:"period",title:Object(l.__)("Presets","funnel-builder"),className:"bwf-filters-date-tab"},{name:"custom",title:Object(l.__)("Custom","funnel-builder"),className:"bwf-filters-date-tab"}],className:"bwf-filters-date-tabs",activeClass:"is-active",initialTabName:"custom"===n||j?"custom":"period",onSelect:this.onTabSelect},(function(t){return Object(r.createElement)(r.Fragment,null,"period"===t.name&&Object(r.createElement)(to,{onSelect:f,period:n}),"custom"===t.name&&Object(r.createElement)(Hr,{after:i,before:c,onUpdate:f,isInvalidDate:e.isFutureDate,focusedInput:y,afterText:m,beforeText:v,afterError:g,beforeError:O,shortDateFormat:w,losesFocusTo:e.controlsRef.current}),Object(r.createElement)("div",{className:u()("bwf-filters-date-content-controls",{"is-custom":"custom"===t.name}),ref:e.controlsRef},!a&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Gr.a,{className:"bwf-filters-date-text"},Object(l.__)("compare to","funnel-builder")),Object(r.createElement)(Nr,{onSelect:f,compare:o})),Object(r.createElement)("div",{className:u()("bwf-filters-date-button-group",{"bwf-has-reset-filter":"custom"===t.name})},"custom"===t.name&&Object(r.createElement)(s.Button,{className:"bwf-filters-date-button bwf-modal-cancel-btn bwf-no-ripple",onClick:h,disabled:!(i||c)},Object(l.__)("Reset","funnel-builder")),b(t.name)?Object(r.createElement)(s.Button,{className:"bwf-filters-date-button",onClick:p(t.name,d),isPrimary:!0},Object(l.__)("Update","funnel-builder")):Object(r.createElement)(s.Button,{className:"bwf-filters-date-button bwf-no-ripple",isPrimary:!0,disabled:!0},Object(l.__)("Update","funnel-builder")))))}))))}}])&&oo(n.prototype,o),a&&oo(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);lo.propTypes={period:Nt.a.string.isRequired,compare:Nt.a.string.isRequired,onUpdate:Nt.a.func.isRequired,onClose:Nt.a.func.isRequired,onSelect:Nt.a.func.isRequired,resetCustomValues:Nt.a.func.isRequired,focusedInput:Nt.a.string,afterText:Nt.a.string,beforeText:Nt.a.string,afterError:Nt.a.string,beforeError:Nt.a.string,shortDateFormat:Nt.a.string.isRequired};var so=lo,fo=n(367);n(802);function po(e){return(po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ho(r.key),r)}}function ho(e){var t=function(e,t){if("object"!=po(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=po(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==po(t)?t:t+""}function yo(e,t,n){return t=mo(t),function(e,t){if(t&&("object"==po(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],mo(e).constructor):t.apply(e,n))}function mo(e){return(mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vo(e,t){return(vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var go=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=yo(this,t,[e])).state=n.getResetState(),n.update=n.update.bind(n),n.onSelect=n.onSelect.bind(n),n.isValidSelection=n.isValidSelection.bind(n),n.resetCustomValues=n.resetCustomValues.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vo(e,t)}(t,e),n=t,(o=[{key:"formatDate",value:function(e,t){return e&&e._isAMomentObject&&"function"==typeof e.format?e.format(t):""}},{key:"getResetState",value:function(){var e=this.props.dateQuery,t=e.period,n=e.compare,r=e.before,o=e.after;return{period:t,compare:n,before:r,after:o,focusedInput:"startDate",afterText:this.formatDate(o,Object(f.U)()),beforeText:this.formatDate(r,Object(f.U)()),afterError:null,beforeError:null}}},{key:"update",value:function(e){this.setState(e)}},{key:"onSelect",value:function(e,t){var n=this,r=this.props,o=r.isoDateFormat,a=r.onRangeSelect;return function(r){var i=n.state,c=i.period,u=i.compare,l=i.after,s=i.before,f={period:"custom"===e?"custom":c,compare:u};"custom"===e?(f.after=n.formatDate(l,o),f.before=n.formatDate(s,o)):(f.after=void 0,f.before=void 0),a(f),t(r)}}},{key:"getButtonLabel",value:function(){var e=this.props.dateQuery,t=e.primaryDate,n=e.secondaryDate,r=["".concat(t.label," (").concat(t.range,")")];return this.props.hideCompare||r.push("".concat(Object(l.__)("vs.","funnel-builder")," ").concat(n.label," (").concat(n.range,")")),r}},{key:"isValidSelection",value:function(e){var t=this.state,n=t.compare,r=t.after,o=t.before;return"custom"!==e||n&&r&&o}},{key:"resetCustomValues",value:function(){this.setState({after:null,before:null,focusedInput:"startDate",afterText:"",beforeText:"",afterError:null,beforeError:null})}},{key:"render",value:function(){var e=this,t=this.state,n=t.period,o=t.compare,a=t.after,i=t.before,c=t.focusedInput,l=t.afterText,s=t.beforeText,d=t.afterError,p=t.beforeError,b=this.props.disablePresets,h=void 0!==b&&b;return Object(r.createElement)("div",{className:u()("bwf-filters-filter",{"bwf-presets-disable":h})},Object(r.createElement)(Lt.a,{contentClassName:"bwf-filters-date-content",position:"bottom",expandOnMobile:!0,renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(fo.a,{onClick:o,isOpen:n,labels:e.getButtonLabel()})},renderContent:function(t){var u=t.onClose;return Object(r.createElement)(so,{period:n,compare:o,hideCompare:e.props.hideCompare,after:a,before:i,onUpdate:e.update,onClose:u,onSelect:e.onSelect,isValidSelection:e.isValidSelection,resetCustomValues:e.resetCustomValues,focusedInput:c,afterText:l,beforeText:s,afterError:d,beforeError:p,shortDateFormat:f.c,disablePresets:h})}}))}}])&&bo(n.prototype,o),a&&bo(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);go.propTypes={onRangeSelect:Nt.a.func.isRequired,dateQuery:Nt.a.shape({period:Nt.a.string.isRequired,compare:Nt.a.string.isRequired,before:Nt.a.object,after:Nt.a.object,primaryDate:Nt.a.shape({label:Nt.a.string.isRequired,range:Nt.a.string.isRequired}).isRequired,secondaryDate:Nt.a.shape({label:Nt.a.string.isRequired,range:Nt.a.string.isRequired}).isRequired}).isRequired};var Oo=go,wo=n(265),jo=n(788),Eo=n(48),_o=Object(r.createElement)(Eo.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},Object(r.createElement)(Eo.Path,{d:"M14.6 7l-1.2-1L8 12l5.4 6 1.2-1-4.6-5z"})),So=n(276),xo=n(172);n(803);function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Po(){return(Po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,No(r.key),r)}}function No(e){var t=function(e,t){if("object"!=ko(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ko(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ko(t)?t:t+""}function To(e,t,n){return t=Do(t),function(e,t){if(t&&("object"==ko(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Do(e).constructor):t.apply(e,n))}function Do(e){return(Do=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Io(e,t){return(Io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Ao=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=To(this,t)).state={animate:null},e.container=Object(r.createRef)(),e.onExited=e.onExited.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Io(e,t)}(t,e),n=t,(o=[{key:"onExited",value:function(){var e=this.props.onExited;e&&e(this.container.current)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.animationKey,o=e.animate,a=u()("bwf-slide-animation",o&&"animate-".concat(o));return Object(r.createElement)("div",{className:a,ref:this.container},Object(r.createElement)(So.a,null,Object(r.createElement)(xo.a,Po({timeout:200,classNames:"slide",key:n},this.props,{onExited:this.onExited}),(function(e){return t({status:e})}))))}}])&&Co(n.prototype,o),a&&Co(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Ao.propTypes={children:Nt.a.func.isRequired,animationKey:Nt.a.any.isRequired,animate:Nt.a.oneOf([null,"left","right"]),onExited:Nt.a.func};var Mo=Ao;n(804);function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ro(Object(n),!0).forEach((function(t){Bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bo(e,t,n){return(t=Yo(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qo(e){return function(e){if(Array.isArray(e))return zo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return zo(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Yo(r.key),r)}}function Yo(e){var t=function(e,t){if("object"!=Lo(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Lo(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Lo(t)?t:t+""}function Vo(e,t,n){return t=Ho(t),function(e,t){if(t&&("object"==Lo(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],Ho(e).constructor):t.apply(e,n))}function Ho(e){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e,t){return(Go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var Xo=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=(n=Vo(this,t,[e])).getFilter();if(n.state={nav:r.path||[],animate:null,selectedTag:null},n.selectSubFilter=n.selectSubFilter.bind(n),n.getVisibleFilters=n.getVisibleFilters.bind(n),n.updateSelectedTag=n.updateSelectedTag.bind(n),n.onTagChange=n.onTagChange.bind(n),n.onContentMount=n.onContentMount.bind(n),n.goBack=n.goBack.bind(n),r.settings&&r.settings.getLabels){var o=n.props.query,a=r.settings,i=a.param;(0,a.getLabels)(o[i],o).then(n.updateSelectedTag)}return n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Go(e,t)}(t,e),n=t,(o=[{key:"componentDidUpdate",value:function(e){var t=e.query,n=this.props,r=n.query,o=n.config;if(t[o.param]!==r[[o.param]]){var a=this.getFilter();if(a&&"Search"===a.component){this.setState({nav:a.path||[]});var i=a.settings,c=i.param;(0,i.getLabels)(r[c],r).then(this.updateSelectedTag)}}}},{key:"updateSelectedTag",value:function(e){this.setState({selectedTag:e[0]})}},{key:"getFilter",value:function(e){var t=this.props,n=t.config,r=t.query,o=Object(N.a)(n.filters);return e=e||r[n.param]||n.defaultValue||"all",Object(i.find)(o,{value:e})||{}}},{key:"getButtonLabel",value:function(e){if("Search"===e.component){var t=this.state.selectedTag;return[t&&t.label,Object(i.get)(e,"settings.labels.button")]}return e?[e.label]:[]}},{key:"getVisibleFilters",value:function(e,t){if(0===t.length)return e;var n=t[0],r=Object(i.find)(e,{value:n});return this.getVisibleFilters(r&&r.subFilters,t.slice(1))}},{key:"selectSubFilter",value:function(e){this.setState((function(t){return{nav:[].concat(qo(t.nav),[e]),animate:"left"}}))}},{key:"goBack",value:function(){this.setState((function(e){return{nav:e.nav.slice(0,-1),animate:"right"}}))}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.props,r=n.path,o=n.query,a=n.config,i=n.onFilterSelect,c=Object(N.h)(o),u=Fo(Bo({},a.param,(a.defaultValue||"all")===e?void 0:e),t);a.staticParams.forEach((function(e){u[e]=o[e]})),Object(N.k)(u,r,c),i(u)}},{key:"onTagChange",value:function(e,t,n,r){var o=Object(i.last)(r),a=e.value,c=e.settings.param;o?(this.update(a,Bo({},c,o.key)),t()):this.update(n.defaultValue||"all"),this.updateSelectedTag([o])}},{key:"renderButton",value:function(e,t,n){var o=this;if(e.component){var a=e.settings,c=a.type,u=a.labels,l=this.getFilter().value===e.value?this.state.selectedTag:null;return Object(r.createElement)($t.a,{className:"bwf-filters-filter-search",type:c,placeholder:u.placeholder,selected:l?[l]:[],onChange:Object(i.partial)(this.onTagChange,e,t,n),inlineTags:!0,staticResults:!0})}var f=Object(i.partial)(this.selectSubFilter,e.value),d=this.getFilter(),p=d.value===e.value||d.path&&Object(i.includes)(d.path,e.value);return Object(r.createElement)(s.Button,{className:"bwf-filters-filter-button",onClick:function(n){p?t(n):e.subFilters?f(n):function(n){t(n),o.update(e.value,e.query||{}),o.setState({selectedTag:null})}(n)}},e.label)}},{key:"onContentMount",value:function(e){var t=this.state.nav,n=t.length&&this.getFilter(t[t.length-1])?1:0,r=wo.focus.tabbable.find(e)[n];setTimeout((function(){r.focus()}),0)}},{key:"render",value:function(){var e=this,t=this.props.config,n=this.state,o=n.nav,a=n.animate,c=this.getVisibleFilters(t.filters,o),f=!!o.length&&this.getFilter(o[o.length-1]),d=this.getFilter();return Object(r.createElement)("div",{className:"bwf-filters-filter"},t.label&&Object(r.createElement)("span",{className:"bwf-filters-label"},t.label,":"),Object(r.createElement)(Lt.a,{contentClassName:"bwf-filters-filter-content",position:"bottom",expandOnMobile:!0,headerTitle:Object(l.__)("filter report to show:","funnel-builder"),renderToggle:function(t){var n=t.isOpen,o=t.onToggle;return Object(r.createElement)(fo.a,{onClick:o,isOpen:n,labels:e.getButtonLabel(d)})},renderContent:function(n){var l=n.onClose;return Object(r.createElement)(Mo,{animationKey:o,animate:a,onExited:e.onContentMount},(function(){return Object(r.createElement)("ul",{className:"bwf-filters-filter-content-list"},f&&Object(r.createElement)("li",{className:"bwf-filters-filter-content-list-item"},Object(r.createElement)(s.Button,{className:"bwf-filters-filter-button",onClick:e.goBack},Object(r.createElement)(jo.a,{icon:_o}),f.label)),c.map((function(n){return Object(r.createElement)("li",{key:n.value,className:u()("bwf-filters-filter-content-list-item",{"is-selected":d.value===n.value||d.path&&Object(i.includes)(d.path,n.value)})},e.renderButton(n,l,t))})))}))}}))}}])&&Uo(n.prototype,o),a&&Uo(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);Xo.propTypes={config:Nt.a.shape({label:Nt.a.string,staticParams:Nt.a.array.isRequired,param:Nt.a.string.isRequired,defaultValue:Nt.a.string,showFilters:Nt.a.func.isRequired,filters:Nt.a.arrayOf(Nt.a.shape({chartMode:Nt.a.oneOf(["item-comparison","time-comparison"]),component:Nt.a.string,label:Nt.a.string,path:Nt.a.string,subFilters:Nt.a.array,value:Nt.a.string.isRequired}))}).isRequired,path:Nt.a.string.isRequired,query:Nt.a.object,onFilterSelect:Nt.a.func};var Ko=Object(Bn.a)(Xo,{query:{},onFilterSelect:function(){}});n(805);function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(){return(Wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Zo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Qo(r.key),r)}}function Qo(e){var t=function(e,t){if("object"!=$o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$o(t)?t:t+""}function Jo(e,t,n){return t=ea(t),function(e,t){if(t&&("object"==$o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],ea(e).constructor):t.apply(e,n))}function ea(e){return(ea=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ta(e,t){return(ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var na=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Jo(this,t)).renderCard=e.renderCard.bind(e),e.onRangeSelect=e.onRangeSelect.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ta(e,t)}(t,e),n=t,(o=[{key:"renderCard",value:function(e){var t=this.props,n=t.siteLocale,o=t.advancedFilters,a=t.query,c=t.path,u=t.onAdvancedFilterAction,l=t.currency,s=e.filters,f=e.param;if(!a[f])return null;if(0===a[f].indexOf("compare")){var d=Object(i.find)(s,{value:a[f]});if(!d)return null;var p=d.settings,b=void 0===p?{}:p;return Object(r.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(r.createElement)(dr,Wo({path:c,query:a},b)))}return"advanced"===a[f]?Object(r.createElement)("div",{key:f,className:"bwf-filters-advanced-filters"},Object(r.createElement)(er,{siteLocale:n,currency:l,config:o,path:c,query:a,onAdvancedFilterAction:u})):void 0}},{key:"onRangeSelect",value:function(e){var t=this.props,n=t.query,r=t.path,o=t.onDateSelect,a=t.updateQuery,i=void 0===a||a;e.after&&(e.after=Pt()(Object(xt.a)(Pt()(e.after),"start")).format("YYYY-MM-DD HH:mm:ss")),e.before&&(Pt()(Pt()().format("YYYY-MM-DD")).isSame(e.before)?e.before=Pt()(Object(xt.a)(Pt()(e.before),"now")).format("YYYY-MM-DD HH:mm:ss"):e.before=Pt()(Object(xt.a)(Pt()(e.before),"end")).format("YYYY-MM-DD HH:mm:ss")),i&&Object(N.k)(e,r,n),o(e)}},{key:"getDateQuery",value:function(e){var t=Object(xt.e)(e),n=t.period,r=t.compare,o=t.before,a=t.after,i=Object(xt.d)(e);return{period:n,compare:r,before:o,after:a,primaryDate:i.primary,secondaryDate:i.secondary}}},{key:"render",value:function(){var e=this.props,t=e.dateQuery,n=e.filters,o=e.query,a=e.path,i=e.showDatePicker,c=e.onFilterSelect,u=e.isoDateFormat,s=e.hideCompare;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Gr.a,{className:"screen-reader-text"},Object(l.__)("Filters","funnel-builder")),Object(r.createElement)(Gr.b,{component:"div",className:"bwf-filters"},Object(r.createElement)("div",{className:"bwf-filters-basic-filters"},i&&Object(r.createElement)(Oo,{key:JSON.stringify(o),dateQuery:t||this.getDateQuery(o),onRangeSelect:this.onRangeSelect,isoDateFormat:u,hideCompare:s}),n.map((function(e){return e.showFilters(o)?Object(r.createElement)(Ko,{key:e.param,config:e,query:o,path:a,onFilterSelect:c}):null}))),n.map(this.renderCard)))}}])&&Zo(n.prototype,o),a&&Zo(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,a}(r.Component);na.propTypes={siteLocale:Nt.a.string,advancedFilters:Nt.a.object,filters:Nt.a.array,path:Nt.a.string.isRequired,query:Nt.a.object,showDatePicker:Nt.a.bool,onDateSelect:Nt.a.func,onFilterSelect:Nt.a.func,onAdvancedFilterAction:Nt.a.func,currency:Nt.a.object,dateQuery:Nt.a.shape({period:Nt.a.string.isRequired,compare:Nt.a.string.isRequired,before:Nt.a.object,after:Nt.a.object,primaryDate:Nt.a.shape({label:Nt.a.string.isRequired,range:Nt.a.string.isRequired}).isRequired,secondaryDate:Nt.a.shape({label:Nt.a.string.isRequired,range:Nt.a.string.isRequired})}),hideCompare:Nt.a.bool,isoDateFormat:Nt.a.string};var ra={siteLocale:"en_US",advancedFilters:{},filters:[],query:{},showDatePicker:!0,onDateSelect:function(){},currency:Object(Tt.a)().getCurrencyConfig(),hideCompare:!1};Object(Bn.a)(na,ra),n(27);n(338),n(806);n(289);n(807);n(808);n(809);var oa=function(e){var t=e.data,n=void 0===t?{}:t,a=(e.selected,n.title),i=n.sub_title,c=n.type,l=void 0===c?"":c;return Object(r.createElement)("div",{className:u()("bwf-node-wrapper bwf-section-node")},Object(r.createElement)(o.d,{type:"target",position:"top",isConnectable:!1,className:"bwf-target"}),Object(r.createElement)("div",{className:"bwf-node-content"},Object(r.createElement)("div",{className:"bwf-node-brick is-section-node"},Object(r.createElement)("div",{className:"bwf-node-icon"},Object(r.createElement)(S.a,{size:36,icon:l.includes("landing")?"landing-flow":l.includes("bump")?"wc_order_bump-flow":l.includes("checkout")?"wc_checkout-flow":l.includes("offer")?"offer-flow":l.includes("upsell")?"upsells-flow":l.includes("wc_thankyou")?"wc_thankyou-flow":l.includes("optin_ty")?"optin_ty-flow":"optin-flow"})),Object(r.createElement)("div",{className:"bwf-node-inner-content"},Object(r.createElement)("div",{className:"bwf-node-content-type"},Object(_.decodeEntities)(i)),Object(r.createElement)("div",{className:"bwf-node-content-label"},Object(_.decodeEntities)(a))))),Object(r.createElement)(o.d,{type:"source",position:"bottom",isConnectable:!1,className:"bwf-source"}))},aa=n(576),ia=n.n(aa);function ca(e){return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ua=["sourceEdgeType"];function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){fa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function fa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ca(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ca(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ca(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function da(e){return function(e){if(Array.isArray(e))return pa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pa(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ba=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=e.id,o=void 0===r?"":r,a=e.data,c=void 0===a?{}:a,u=n.hasOwnProperty("maparr")&&n.maparr.hasOwnProperty(o)?n.maparr[o]:[],l=1==u.length?u[0]:0,s=0!=l&&n.hasOwnProperty("source")&&n.source.hasOwnProperty(l)?n.source[l]:[],f=c.type,d=void 0===f?"":f,p=0;switch(e.type){case"step":p=122;var b=c._data,h=void 0===b?{}:b,y=c.tags,m=void 0===y?[]:y,v=c.experiment_status,g=void 0===v?"":v,O=h.status,w=void 0===O?"":O;Object(i.isEmpty)(m)&&w&&1===parseInt(w)&&(Object(i.isEmpty)(g)||"4"===g)||(p+=42),["wc_upsells"].includes(d)&&(p-=58);break;case"rule":p=110;break;case"condition":p=115;break;case"conditional-alter":var j=Object(i.flatten)(e.data.sidebarValues).length,E=j-1;p=j?32*j+29*E+100:150;break;case"addNode":p=24;break;case"btnNode":p=45;break;case"sectionNode":p=90;break;case"start":p=30;break;case"end":p=25;break;case"merger":p=0;break;default:p=95}return u.length>2&&(p+=10*u.length),s.length>2&&(p+=20*s.length),p+t},ha=function(e){if(!e||!e.type)return 325;switch(e.type){case"rule":return 75;case"step":default:return 325}},ya=function(e){var t=new ia.a.graphlib.Graph;t.setDefaultEdgeLabel((function(){return{}})),t.setGraph({rankdir:"TB",ranksep:80,nodesep:100});var n=function(e){var t=[],n=[],r=[];return e.map((function(e){if(e.hasOwnProperty("source")&&e.hasOwnProperty("target")){t.hasOwnProperty(e.source)?t[e.source].includes(e.target)||(t[e.source]=[e.target].concat(da(t[e.source]))):t[e.source]=[e.target],n.hasOwnProperty(e.target)?n[e.target].includes(e.source)||(n[e.target]=[e.source].concat(da(n[e.target]))):n[e.target]=[e.source];var o=e.type?e.type:"default";r.hasOwnProperty(e.target)?r[e.target].includes(e.type)||(r[e.target]=[o].concat(da(r[e.target]))):r[e.target]=[o]}})),{source:n,maparr:t,sourceEdgeType:r}}(e),r=n.sourceEdgeType,a=void 0===r?{}:r,i=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,ua);return e.forEach((function(e){Object(o.j)(e)?t.setNode(e.id,{width:325,height:ba(e,0,i)}):t.setEdge(e.source,e.target)})),ia.a.layout(t),e.map((function(e){if(Object(o.j)(e)){var n=t.node(e.id);e.targetPosition="top",e.sourcePosition="bottom";var r=ba(e,"condition"===e.type?50:100);e.position={x:n.x-ha(e)/2+Math.random()/1e3,y:n.y-r/2};var i={};i=a.hasOwnProperty(e.id)?{bwfSourceEdgeType:a[e.id],orphanNode:!1}:{orphanNode:!0},e.data=sa(sa({},e.data),i)}else e.type;return e}))};function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function va(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||ja(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ga(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ja(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(c)throw a}}}}function Oa(){Oa=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==ma(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(ma(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function wa(e){return function(e){if(Array.isArray(e))return Ea(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ja(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ja(e,t){if(e){if("string"==typeof e)return Ea(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ea(e,t):void 0}}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function _a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_a(Object(n),!0).forEach((function(t){xa(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xa(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ma(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ma(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ma(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ka(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Pa(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){ka(a,r,o,i,c,"next",e)}function c(e){ka(a,r,o,i,c,"throw",e)}i(void 0)}))}}var Ca={expired:{label:Object(l.__)("License Expired","funnel-builder"),label_class:"bwf-st-c-badge-red"}},Na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,o={},a={},c=function(e,n,u,l,s,f){var d=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",b=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";return new Promise(function(){var h=Pa(Oa().mark((function h(y){var m,v,g,O,w,j,E,_,S,x,k,P,C,N,T,D,I,A,M,L,R,F,B,q,z,U,Y,V,H,G,X;return Oa().wrap((function(h){for(;;)switch(h.prev=h.next){case 0:if(m=[],g="node-".concat(v=n,"-offer-").concat(e),++v,a[g]=b,O="node-".concat(e,"-accept"),w="node-".concat(e,"-reject"),m.push({type:"step",id:g,data:Sa(Sa({},t[e]),{},{type:"offer",upsellId:p,mainIndex:l,stepIndex:s},r&&{tags:Sa({},Ca)})},{type:"condition",id:O,data:{type:"success",title:"Accept"}},{id:"edge-id-".concat(e,"-accept-").concat(l,"-").concat(s,"-").concat(f),source:g,target:O},{type:"condition",id:w,data:{type:"error",title:"Reject"}},{id:"edge-id-".concat(e,"-reject-").concat(l,"-").concat(s,"-").concat(f),source:g,target:w}),j=t&&t[e]&&t[e].hasOwnProperty("accept")&&!["","automatic","terminate"].includes(t[e].accept)&&parseInt(t[e].accept)!==parseInt(e)?t[e].accept:"",E=t&&t[e]&&t[e].hasOwnProperty("reject")&&!["","automatic","terminate"].includes(t[e].reject)&&parseInt(t[e].reject)!==parseInt(e)?t[e].reject:"",""!==j||""!==E){h.next=16;break}_=u,m.push({id:"edge-id-".concat(e,"-afteraccept-").concat(l,"-").concat(s,"-").concat(f),source:"node-".concat(e,"-accept"),type:"bwf-default",target:_,data:{offer:e,branch:"accept",upsellId:p,mainIndex:l,stepIndex:s}}),m.push({id:"edge-id-".concat(e,"-afterreject-").concat(l,"-").concat(s,"-").concat(f),source:"node-".concat(e,"-reject"),type:"bwf-default",target:_,data:{offer:e,branch:"reject",upsellId:p,mainIndex:l,stepIndex:s}}),h.next=87;break;case 16:if(""===j||""===E||j!=E||0==j){h.next=42;break}if(S="node-offer-".concat(e,"-merger"),m.push({type:"merger",id:S,data:{offerCommon:!0,offerId:e,upsellId:p,mainIndex:l,stepIndex:s}}),m.push({id:"edge-id-".concat(e,"-afteraccept-").concat(l,"-").concat(s,"-").concat(f),source:"node-".concat(e,"-accept"),type:"bwf-default",target:S,data:{offer:e,branch:"accept",upsellId:p,mainIndex:l,stepIndex:s}}),m.push({id:"edge-id-".concat(e,"-afterreject-").concat(l,"-").concat(s,"-").concat(f),source:"node-".concat(e,"-reject"),type:"bwf-default",target:S,data:{offer:e,branch:"reject",upsellId:p,mainIndex:l,stepIndex:s}}),!o||!o.hasOwnProperty(j)){h.next=26;break}m.push({id:"edge-".concat(O,"-").concat(o[j],"-offeredge"),source:S,target:o[j]}),a.hasOwnProperty(o[j])&&delete a[o[j]],h.next=40;break;case 26:return h.next=28,c(parseInt(t[e].accept),v,u,l,s,f,d,p,b);case 28:x=h.sent,k=x.offerNode,P=void 0===k?[]:k,C=x.newNodeCount,N=void 0===C?0:C,T=x.offerSource,D=void 0===T?"":T,Object(i.isEmpty)(P)||m.push.apply(m,wa(Object(i.cloneDeep)(P))),o[e]=g,m.push({id:"edge-id-".concat(e,"-after-accept-").concat(t[e].accept,"-").concat(l,"-").concat(s,"-").concat(f),source:S,target:D}),a.hasOwnProperty(D)&&delete a[D],N>0&&(v=N);case 40:h.next=87;break;case 42:if(I=u,""!=j&&0!=j){h.next=47;break}m.push({id:"edge-id-".concat(e,"-afteraccept-").concat(l,"-").concat(s,"-").concat(f),source:"node-".concat(e,"-accept"),type:"bwf-default",target:d,data:{offer:e,branch:"accept",upsellId:p,mainIndex:l,stepIndex:s}}),h.next=65;break;case 47:if(!o||!o.hasOwnProperty(t[e].accept)){h.next=52;break}m.push({id:"edge-".concat(O,"-").concat(o[t[e].accept],"-offeredge"),source:O,target:o[t[e].accept],type:"bwf-default",data:{offer:e,branch:"accept",upsellId:p,mainIndex:l,stepIndex:s}}),a.hasOwnProperty(o[t[e].accept])&&delete a[o[t[e].accept]],h.next=65;break;case 52:return h.next=54,c(parseInt(t[e].accept),v,I,l,s,f,d,p,b);case 54:A=h.sent,M=A.offerNode,L=void 0===M?[]:M,R=A.newNodeCount,F=void 0===R?0:R,B=A.offerSource,q=void 0===B?"":B,Object(i.isEmpty)(L)||m.push.apply(m,wa(Object(i.cloneDeep)(L))),m.push({id:"edge-id-".concat(e,"-after-accept-").concat(t[e].accept,"-").concat(l,"-").concat(s,"-").concat(f),source:O,target:q,type:"bwf-default",data:{offer:e,branch:"accept",upsellId:p,mainIndex:l,stepIndex:s}}),a.hasOwnProperty(q)&&delete a[q],F>0&&(v=F);case 65:if(""!=E&&0!=E){h.next=69;break}m.push({id:"edge-id-".concat(e,"-afterreject-").concat(l,"-").concat(s,"-").concat(f),source:"node-".concat(e,"-reject"),type:"bwf-default",target:d,data:{offer:e,branch:"reject",upsellId:p,mainIndex:l,stepIndex:s}}),h.next=87;break;case 69:if(!o.hasOwnProperty(t[e].reject)){h.next=74;break}m.push({id:"edge-".concat(w,"-").concat(o[t[e].reject],"-offeredge"),source:w,target:o[t[e].reject],type:"bwf-default",data:{offer:e,branch:"reject",upsellId:p,mainIndex:l,stepIndex:s}}),a.hasOwnProperty(o[t[e].reject])&&delete a[o[t[e].reject]],h.next=87;break;case 74:return h.next=76,c(parseInt(t[e].reject),v,I,l,s,f,d,p,b);case 76:z=h.sent,U=z.offerNode,Y=void 0===U?[]:U,V=z.newNodeCount,H=void 0===V?0:V,G=z.offerSource,X=void 0===G?"":G,Object(i.isEmpty)(Y)||m.push.apply(m,wa(Object(i.cloneDeep)(Y))),m.push({id:"edge-id-".concat(e,"-after-reject-").concat(t[e].reject,"-").concat(l,"-").concat(s,"-").concat(f),source:w,target:X,type:"bwf-default",data:{offer:e,branch:"reject",upsellId:p,mainIndex:l,stepIndex:s}}),a.hasOwnProperty(X)&&delete a[X],H>0&&(v=H);case 87:o[e]=g,y({offerNode:m,newNodeCount:v,offerSource:g});case 89:case"end":return h.stop()}}),h)})));return function(e){return h.apply(this,arguments)}}())},u=function(){var e=Pa(Oa().mark((function e(u){var s,d,p,b,h,y,m,v,g,O,w,j,E,_,S,x,k,P,C,N;return Oa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=[],!Object(i.isEmpty)(u)){e.next=5;break}s=[{type:"start",id:"start"},{type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"},{id:"edge-id-1",source:"fb-empty",target:"end"},{type:"end",id:"end"}],e.next=36;break;case 5:d="start",p=1,b=!1,s=[{type:"start",id:"start"}],h=Object(f.fb)()?"start":"node-".concat(p),d=h,++p,y=!1,m=!1,v=!1,g=ga(u);try{for(g.s();!(O=g.n()).done;)"wc_upsells"===(w=O.value).type&&(y=!0),"wc_checkout"===w.type&&(m=!0),"wc_thankyou"===w.type&&(v=!0)}catch(e){g.e(e)}finally{g.f()}j=ga(u.entries()),e.prev=18,_=Oa().mark((function e(){var u,f,h,g,O,w,j,_,S,x,k,P,C,N,T,D,I,A,M,L,R,F,B,q,z,U,Y,V,H,G,X,K,$,W,Z,Q,J,ee,te,ne,re,oe,ae,ie,ce,ue,le,se,fe,de,pe,be,he,ye,me,ve;return Oa().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u=va(E.value,2),f=u[0],h=u[1],g=h.type,O=void 0===g?"":g,w=h.steps,j=void 0===w?[]:w,_="start",e.t0=O,e.next="optin"===e.t0||"optin_ty"===e.t0||"wc_thankyou"===e.t0||"landing"===e.t0?6:"wc_native"===e.t0||"wc_checkout"===e.t0?8:"wc_upsells"===e.t0?10:88;break;case 6:if(!Object(i.isEmpty)(j)){S="node-".concat(p),"wc_thankyou"===O?(b=!0,S="end"):++p,x="",k="",P=ga(j.entries());try{for(P.s();!(C=P.n()).done;)N=va(C.value,2),T=N[0],D=N[1],I=D.id,x=A=void 0===I?"":I,_=A,0==T&&(k=A),M="node-".concat(p),s.push({type:"step",id:M,data:Sa(Sa({},t[A]),{},{mainIndex:f,stepIndex:T,subIndex:""})},{id:"edge-".concat(d,"-").concat(M),source:d,target:M},{id:"edge-".concat(M,"-").concat(S),source:M,target:S}),++p}catch(e){P.e(e)}finally{P.f()}"wc_thankyou"!==O&&(L=["optin","landing"],"optin"===O&&L.push("optin_ty"),m||L.push("wc_checkout"),s.push({type:"addNode",id:S,data:{mainIndex:f,lastParentId:x,prevFirstParent:k,currentParentType:O,lastIteratedStep:_,allowedSteps:L,hasCheckout:m}})),d=S}return e.abrupt("break",88);case 8:return Object(i.isEmpty)(j)||(R="node-".concat(p),F="",++p,B="",j.map((function(e,r){var o=e.id,a=void 0===o?"":o,c=e.substeps,u=void 0===c?[]:c;F=a,_=a,0===r&&(B=a);var b="node-".concat(p);++p,Object(i.isEmpty)(u)?(t[a].tags.hasOwnProperty("no_bump")||(t[a].tags.no_bump={label:Object(l.__)("No Order Bump","funnel-builder"),label_class:"bwf-st-c-badge-red"}),s.push({type:"wc_native"===O?"emptyNode":"step",id:b,data:Sa(Sa({},t[a]),{},{mainIndex:f,stepIndex:r,subIndex:"",emptyNodeLabel:"wc_native"===O?"Add Checkout":"",allowedSteps:"wc_native"===O?["wc_checkout"]:[],replaceCurrentStep:!0,prevFirstParent:F,type:O})},{id:"edge-".concat(d,"-").concat(b),source:d,target:b},{type:"btnNode",id:"bump-".concat(b),data:{title:"Add Order Bump",type:"wc_order_bump",icon:"order-bump",prevFirstParent:F,mainIndex:f,stepIndex:r}},{id:"edge-".concat(b,"-bump-").concat(b),source:b,target:"bump-".concat(b)},{id:"edge-bump-".concat(b,"-").concat(R),source:"bump-".concat(b),target:R})):(delete t[a].tags.no_bump,s.push({type:"wc_native"===O?"emptyNode":"step",id:b,data:Sa(Sa({},t[a]),{},{mainIndex:f,stepIndex:r,prevFirstParent:F,emptyNodeLabel:"wc_native"===O?"Add Checkout":"",allowedSteps:"wc_native"===O?["wc_checkout"]:[],replaceCurrentStep:!0})},{id:"edge-".concat(d,"-").concat(b),source:d,target:b}),u.map((function(e,o){var a=e.id,i=void 0===a?"":a,c=(e.tags,"node-".concat(p));++p,s.push({type:"step",id:c,data:Sa(Sa({},t[i]),{},{mainIndex:f,stepIndex:r,subIndex:o,parent_id:F},n&&{tags:Sa({},Ca)})},{id:"edge-".concat(b,"-").concat(c),source:b,target:c},{id:"edge-".concat(c,"-").concat(R),source:c,target:R})})))})),q=[],y||q.push("wc_upsells"),y||v||q.push("wc_thankyou"),s.push({type:0===q.length?"merger":"addNode",id:R,data:{mainIndex:f,lastParentId:F,currentParentType:O,prevFirstParent:B,lastIteratedStep:_,allowedSteps:q,newUpsell:!0}}),d=R),e.abrupt("break",88);case 10:if(Object(i.isEmpty)(j)){e.next=87;break}z="",U="node-".concat(p),++p,Y=ga(j.entries()),e.prev=15,Y.s();case 17:if((V=Y.n()).done){e.next=77;break}if(H=va(V.value,2),G=H[0],X=H[1],K=X.id,$=void 0===K?"":K,W=X.substeps,Z=void 0===W?[]:W,z=parseInt($),_=$,Q="node-".concat(p,"-upsell-start-").concat(G),++p,J=Sa({},t[parseInt($)]),(J=Sa(Sa({},J),{},{mainIndex:f,stepIndex:G})).hasOwnProperty("tags")?J.tags=Sa(Sa({start:{label:Object(l.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&Ca),J.tags):J.tags=Sa({start:{label:Object(l.__)("Start","funnel-builder"),label_class:"bwf-st-c-badge-green"}},r&&Ca),s.push({type:"step",id:Q,data:Sa({},J)},{id:"edge-".concat(d,"-").concat(Q),source:d,target:Q}),++p,ee="node-".concat(p,"-upsell-end-").concat(G),++p,!Object(i.isEmpty)(Z)){e.next=38;break}te="node-".concat(p),++p,s.push({type:"btnNode",id:te,data:{title:"Add Offer",type:"offer",mainIndex:f,stepIndex:0,icon:"offer-flow",prevFirstParent:z}},{id:"edge-".concat(Q,"-").concat(te),source:Q,target:te},{id:"edge-".concat(te,"-").concat(ee),source:te,target:ee}),s.push({type:"step",id:ee,data:Sa(Sa({},t[parseInt($)]),{},{upsellEnd:!0,mainIndex:f,tags:Sa({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&Ca)})},{id:"edge-".concat(ee,"-").concat(U),source:ee,target:U}),e.next=75;break;case 38:ne=ga(Z.entries()),e.prev=39,ne.s();case 41:if((re=ne.n()).done){e.next=64;break}if(oe=va(re.value,2),ae=oe[0],ie=oe[1],ce=ie.id,ue=void 0===ce?"":ce,le="",!o||!o.hasOwnProperty(parseInt(ue))){e.next=49;break}le=o[parseInt(ue)],e.next=61;break;case 49:return e.next=51,c(parseInt(ue),p,ee,f,G,ae,ee,z,Q);case 51:se=e.sent,fe=se.offerNode,de=void 0===fe?[]:fe,pe=se.newNodeCount,be=void 0===pe?0:pe,he=se.offerSource,ye=void 0===he?"":he,Object(i.isEmpty)(de)||(me=s).push.apply(me,wa(Object(i.cloneDeep)(de))),be>0&&(p=be),0==parseInt(ae)&&(le=ye);case 61:0==parseInt(ae)&&""!=le&&(s.push({id:"edge-".concat(Q,"-").concat(le,"-offeredge"),source:Q,target:le}),a.hasOwnProperty(le)&&delete a[le]);case 62:e.next=41;break;case 64:e.next=69;break;case 66:e.prev=66,e.t1=e.catch(39),ne.e(e.t1);case 69:return e.prev=69,ne.f(),e.finish(69);case 72:ve="node-".concat(p,"-upsell-end-node-").concat(G),p++,s.push({type:"addNode",id:ee,data:{upsellAfterId:parseInt($),upsellEndAddLast:!0,mainIndex:f,stepIndex:G,prevFirstParent:z,allowedSteps:["offer"]}},{id:"edge-".concat(ve,"-").concat(U),source:ee,target:ve},{type:"step",id:ve,data:Sa(Sa({},t[parseInt($)]),{},{upsellEnd:!0,mainIndex:f,tags:Sa({end:{label:"End",label_class:"bwf-st-c-badge-red"}},r&&Ca)})},{id:"edge-".concat(ve,"-").concat(U,"-2"),source:ve,target:U});case 75:e.next=17;break;case 77:e.next=82;break;case 79:e.prev=79,e.t2=e.catch(15),Y.e(e.t2);case 82:return e.prev=82,Y.f(),e.finish(82);case 85:s.push({type:v?"merger":"addNode",id:U,data:{mainIndex:f,lastParentId:z,currentParentType:O,allowedSteps:["wc_thankyou"],lastIteratedStep:_}}),d=U;case 87:return e.abrupt("break",88);case 88:case"end":return e.stop()}}),e,null,[[15,79,82,85],[39,66,69,72]])})),j.s();case 21:if((E=j.n()).done){e.next=25;break}return e.delegateYield(_(),"t0",23);case 23:e.next=21;break;case 25:e.next=30;break;case 27:e.prev=27,e.t1=e.catch(18),j.e(e.t1);case 30:return e.prev=30,j.f(),e.finish(30);case 33:if(d==h?(s.push({type:"emptyNode",id:"fb-empty"},{id:"edge-id-2",source:"start",target:"fb-empty"}),d="fb-empty"):Object(f.fb)()?s.push({id:"edge-start-node-".concat(p),source:"start",target:h}):(S=["optin","landing"],m||S.push("wc_checkout"),s.push({type:"addNode",id:h,data:{mainIndex:"start",allowedSteps:S,prevFirstParent:"start",lastIteratedStep:"start"}},{id:"edge-start-node-".concat(p),source:"start",target:h})),b?s.push({type:"end",id:"end"}):s.push({id:"edge-".concat(d,"-end"),source:d,target:"end"},{type:"end",id:"end"}),!Object(i.isEmpty)(a))for(x=Object.keys(a),k=0,P=x;k<P.length;k++)C=P[k],N=a[C],s.push({id:"edge-orphan-node-".concat(p),source:N,target:C,animated:!0,type:"bwf-orphan",data:{bwfSourceEdgeType:"yes"}}),p++;case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}}),e,null,[[18,27,30,33]])})));return function(t){return e.apply(this,arguments)}}();return u(e)};function Ta(e){return(Ta="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(){Da=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",u=a.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var a=t&&t.prototype instanceof y?t:y,i=Object.create(a.prototype),c=new C(r||[]);return o(i,"_invoke",{value:S(e,n,c)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="executing",b="completed",h={};function y(){}function m(){}function v(){}var g={};l(g,i,(function(){return this}));var O=Object.getPrototypeOf,w=O&&O(O(N([])));w&&w!==n&&r.call(w,i)&&(g=w);var j=v.prototype=y.prototype=Object.create(g);function E(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function n(o,a,i,c){var u=f(e[o],e,a);if("throw"!==u.type){var l=u.arg,s=l.value;return s&&"object"==Ta(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,i,c)}),(function(e){n("throw",e,i,c)})):t.resolve(s).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,c)}))}c(u.arg)}var a;o(this,"_invoke",{value:function(e,r){function o(){return new t((function(t,o){n(e,r,t,o)}))}return a=a?a.then(o,o):o()}})}function S(t,n,r){var o=d;return function(a,i){if(o===p)throw Error("Generator is already running");if(o===b){if("throw"===a)throw i;return{value:e,done:!0}}for(r.method=a,r.arg=i;;){var c=r.delegate;if(c){var u=x(c,r);if(u){if(u===h)continue;return u}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===d)throw o=b,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=p;var l=f(t,n,r);if("normal"===l.type){if(o=r.done?b:"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(o=b,r.method="throw",r.arg=l.arg)}}}function x(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var a=f(o,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,h;var i=a.arg;return i?i.done?(n[t.resultName]=i.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,h):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,h)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function N(t){if(t||""===t){var n=t[i];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function n(){for(;++o<t.length;)if(r.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return a.next=a}}throw new TypeError(Ta(t)+" is not iterable")}return m.prototype=v,o(j,"constructor",{value:v,configurable:!0}),o(v,"constructor",{value:m,configurable:!0}),m.displayName=l(v,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,l(e,u,"GeneratorFunction")),e.prototype=Object.create(j),e},t.awrap=function(e){return{__await:e}},E(_.prototype),l(_.prototype,c,(function(){return this})),t.AsyncIterator=_,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new _(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(j),l(j,u,"Generator"),l(j,i,(function(){return this})),l(j,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=N,C.prototype={constructor:C,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function o(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var u=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(u&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),h},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),h}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:N(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),h}},t}function Ia(e,t,n,r,o,a,i){try{var c=e[a](i),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function Aa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ma(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ma(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var La=function(e){var t=e.fullScreen,n=e.setCanvasFullScreen,a=(e.showExperiment,e.funnelId,Object(o.m)().setCenter),c=Object(o.k)(),u=O(),l=u.isLoading,s=u.getNodeElements,f=void 0===s?[]:s,d=u.getStepsList,p=Aa(Object(r.useState)([]),2),b=p[0],h=p[1],y=Aa(Object(r.useState)(!1),2),m=y[0],v=y[1],g=Object(r.useRef)(),w=Aa(Object(r.useState)(!1),2),j=w[0],E=w[1],_=f(),S=d(),x=Object(M.a)().isExpired,k=Object(M.a)("ul").isExpired,P=function(){var e,t=(e=Da().mark((function e(t){var n;return Da().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Na(t,S,x,k);case 2:n=e.sent,h(ya(n));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,o){var a=e.apply(t,n);function i(e){Ia(a,r,o,i,c,"next",e)}function c(e){Ia(a,r,o,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}(),N=Object(C.a)().resetFunnel;Object(r.useEffect)((function(){l||(P(_),E(!0)),j&&N()}),[_,S]);var T=Object(o.l)((function(e){return e.setSelectedElements})),D={"bwf-default":_t,"bwf-orphan":St},I={start:Ke,step:Ge,end:Xe,emptyNode:pt,btnNode:st,addNode:Qe,sectionNode:oa,merger:$e,condition:bt};return Object(r.useEffect)((function(){Object(i.isNull)(document.querySelector("#bwf-funnel-canvas-wrap"))||(g.current=document.querySelector("#bwf-funnel-canvas-wrap").getBoundingClientRect())})),Object(r.useEffect)((function(){if(!m){var e=0,t=0,n=c.getState().nodes;if(n.length&&g.current){var r=n[0];r.hasOwnProperty("__rf")?(e=r.__rf.position.x+140,t=r.__rf.position.y):(e=r.position.x+140,t=r.position.y),t=parseFloat(t)+.4*parseFloat(g.current.height),v(!0),a(e,t,1)}}}),[b,m]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(o.f,{defaultZoom:1,minZoom:.5,maxZoom:4,nodeTypes:I,nodesConnectable:!1,nodesDraggable:!1,elements:b,zoomOnScroll:!1,zoomOnDoubleClick:!1,paneMoveable:!0,panOnScroll:!0,edgeTypes:D},Object(r.createElement)(o.c,{showInteractive:!1},Object(r.createElement)(o.b,{onClick:function(){n(!t),document.body.style.overflow=t?"":"hidden",T([])}},t?Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-exit-alt"}):Object(r.createElement)("span",{style:{fontSize:"15px",marginTop:"6px"},className:"dashicons dashicons-fullscreen-alt"}))),Object(r.createElement)(o.a,null)))};function Ra(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,c=[],u=!0,l=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=a.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Fa(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Fa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.default=function(e){var t=Object(a.useParams)().id,n=e.funnelId,c=void 0===n?t:n,s=e.funnelTitle,d=O(),p=d.isLoading,b=d.getNodeElements,h=d.getFunnelId,y=d.getFunnelData,m=d.isAnalyticsLoaded,v=Object(w.a)(),g=v.fetchNodes,_=v.setLoading,S=v.fetchAnalytics,x=Object(C.a)(),k=x.setFunnelTitle,P=x.setFunnelLoading,N=Ra(Object(r.useState)(!1),2),T=N[0],D=(N[1],Ra(Object(r.useState)(!1),2)),I=D[0],A=D[1],M=Ra(Object(r.useState)(!1),2),L=M[0],R=M[1],F=h(),B=b(),q=y();Object(f.l)(Object(l.__)("Funnel Canvas #","funnel-builder")+c),Object(r.useEffect)((function(){!p&&q.hasOwnProperty("title")&&(k(q.title),P(!1),m||Object(i.isEmpty)(B)||S(c))}),[p]),Object(r.useEffect)((function(){return(parseInt(F)!==parseInt(c)||Object(i.isEmpty)(B))&&(_(!0),g(c,T)),function(){document.body.style.overflow=""}}),[T]);return Object(r.createElement)("div",{id:"bwf-funnel-canvas-wrap",className:u()({"full-screen":L})},L&&Object(r.createElement)("div",{className:"bwf-flow-header-wrap"},Object(r.createElement)("div",{className:"bwf-funnel-flow-header"},Object(f.fb)()&&Object(r.createElement)("div",{className:"bwf-canvas-funnel-title"},s),!Object(i.isEmpty)(B)&&!1)),p?Object(r.createElement)(j.a,{size:"xxl",style:{margin:"100px auto"}}):Object(r.createElement)(o.e,null,Object(r.createElement)(La,{setCanvasFullScreen:function(){R(!L)},fullScreen:L,showExperiment:T,funnelId:c})),!Object(f.eb)()&&Object(r.createElement)(E.a,{isOpen:I,onRequestClose:function(){return A(!1)},modalContent:{title:Object(l.__)("A/B Testing","funnel-builder"),content:{benefits:[Object(l.__)("Increased Conversion Rates","funnel-builder"),Object(l.__)("Greater Return on Ad Spend","funnel-builder"),Object(l.__)("Reduced Bounce Rates","funnel-builder")]},proLink:Object(f.P)(["Canvas","Experiment"])}}))}}])]);