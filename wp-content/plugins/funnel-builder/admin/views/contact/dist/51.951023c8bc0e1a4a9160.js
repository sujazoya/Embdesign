(window.webpackJsonp=window.webpackJsonp||[]).push([[51,9],{271:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(121),c=n(1),l=n(368),i=n(723),o=n(407),u=n(438),s=n(13),f=n(4),b=n(127),d=n(20),m=n(123),p=n(19);function v(){return(v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var y=function(e,t,n){return decodeURIComponent(Object(s.f)(e,t,n))};t.default=function(e){var t=e.type,n=void 0===t?"offer":t,O=e.stepId,j=void 0===O?0:O,h=Object(a.useParams)(),_=h.offerId,g=h.stepType,w=void 0===g?"design":g,E=Object(s.i)().funnel_id,S=Object(d.a)().getStoreCheckoutId(),N=Object(f.fb)()?S:E,k=Object(p.a)("ul").isProFeatureLocked,x=function(e,t){return{design:{name:Object(c.__)("Design","funnel-builder"),link:y({},"".concat(t,"offer/").concat(_,"/design"))},product:{name:Object(c.__)("Products","funnel-builder"),link:y({},"".concat(t,"offer/").concat(_,"/product"))},settings:{name:Object(c.__)("Settings","funnel-builder"),link:y({},"".concat(t,"offer/").concat(_,"/settings"))}}}(0,Object(f.fb)()?"/store-checkout/":"/funnel-");return Object(l.a)({selected:w,headerData:x,funnelID:N,stepId:j,type:n,offerId:_}),Object(r.createElement)(r.Suspense,{fallback:Object(r.createElement)(r.Fragment,null)},Object(r.createElement)(a.Switch,null,Object(r.createElement)(a.Route,{path:["/funnel-offer/:offerId/design","/store-checkout/offer/:offerId/design"],render:function(e){return Object(r.createElement)(r.Fragment,null,k&&Object(r.createElement)(m.b,{onPage:!0}),Object(r.createElement)(u.a,v({type:n,funnelID:N},e)))}}),Object(r.createElement)(a.Route,{path:["/funnel-offer/:offerId/product","/store-checkout/offer/:offerId/product"],render:function(e){return Object(r.createElement)(r.Fragment,null,k&&Object(r.createElement)(m.b,{onPage:!0}),Object(r.createElement)(i.a,v({type:n,funnelID:N},e)))}}),Object(r.createElement)(a.Route,{path:["/funnel-offer/:offerId/settings","/store-checkout/offer/:offerId/settings"],render:function(e){return Object(r.createElement)(r.Fragment,null,k&&Object(r.createElement)(m.b,{onPage:!0}),Object(r.createElement)(o.a,v({type:n,funnelID:N},e)))}}),Object(r.createElement)(a.Route,{component:b.a})))}},283:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(18),l=n.n(c),i=n(125);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(){b=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var c=t&&t.prototype instanceof O?t:O,l=Object.create(c.prototype),i=new A(r||[]);return a(l,"_invoke",{value:k(e,n,i)}),l}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var m="suspendedStart",p="executing",v="completed",y={};function O(){}function j(){}function h(){}var _={};s(_,l,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(T([])));w&&w!==n&&r.call(w,l)&&(_=w);var E=h.prototype=O.prototype=Object.create(_);function S(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(a,c,l,i){var u=d(e[a],e,c);if("throw"!==u.type){var s=u.arg,f=s.value;return f&&"object"==o(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(f).then((function(e){s.value=e,l(s)}),(function(e){return n("throw",e,l,i)}))}i(u.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function k(t,n,r){var a=m;return function(c,l){if(a===p)throw Error("Generator is already running");if(a===v){if("throw"===c)throw l;return{value:e,done:!0}}for(r.method=c,r.arg=l;;){var i=r.delegate;if(i){var o=x(i,r);if(o){if(o===y)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===m)throw a=v,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=p;var u=d(t,n,r);if("normal"===u.type){if(a=r.done?v:"suspendedYield",u.arg===y)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=v,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),y;var c=d(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,y;var l=c.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,y):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,y)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(o(t)+" is not iterable")}return j.prototype=h,a(E,"constructor",{value:h,configurable:!0}),a(h,"constructor",{value:j,configurable:!0}),j.displayName=s(h,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===j||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,h):(e.__proto__=h,s(e,u,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(N.prototype),s(N.prototype,i,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var l=new N(f(e,n,r,a),c);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},S(E),s(E,u,"Generator"),s(E,l,(function(){return this})),s(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var l=this.tryEntries[c],i=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var o=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(o&&u){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,y):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),y}},t}function d(e,t,n,r,a,c,l){try{var i=e[c](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function m(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){d(c,r,a,l,i,"next",e)}function i(e){d(c,r,a,l,i,"throw",e)}l(void 0)}))}}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function v(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function y(e,t,n){return t=O(t),function(e,t){if(t&&("object"==o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,function(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return function(){return!!e}()}()?Reflect.construct(t,n||[],O(e).constructor):t.apply(e,n))}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t){return(j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=y(this,t)).state={values:e.initialValues,errors:e.errors,touched:e.touched},n.getInputProps=n.getInputProps.bind(n),n.handleSubmit=n.handleSubmit.bind(n),n.setTouched=n.setTouched.bind(n),n.setValue=n.setValue.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(t,e),function(e,t,n){return t&&p(e.prototype,t),n&&p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}(t,[{key:"componentDidMount",value:function(){this.validate()}},{key:"componentWillUnmount",value:function(){this.validate((function(){}))}},{key:"componentDidUpdate",value:function(e,t){this.props.initialValues&&this.props.initialValues!==e.initialValues&&this.setState({values:this.props.initialValues})}},{key:"isValidForm",value:(a=m(b().mark((function e(){return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.validate();case 2:return e.abrupt("return",!Object.keys(this.state.errors).length);case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"validate",value:function(){var e=this.state.values,t=this.props.validate(e);this.setState({errors:t})}},{key:"setFormValue",value:function(e){console.log(this),this.setState({values:e})}},{key:"setValue",value:function(e,t){var n=this;this.setState((function(n){return{values:s(s({},n.values),{},f({},e,t))}}),(function(){var r=n.props,a=r.onChange;r.onChangeCallback;a({name:e,value:t},n.state.values,!Object.keys(n.state.errors||{}).length,n.setFormValue),n.validate((function(){}))}))}},{key:"setTouched",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setState((function(n){return{touched:s(s({},n.touched),{},f({},e,t))}}))}},{key:"handleChange",value:function(e,t){var n=this.state.values;t.target?"checkbox"===t.target.type?this.setValue(e,!n[e]):this.setValue(e,t.target.value):this.setValue(e,t)}},{key:"handleBlur",value:function(e){this.setTouched(e)}},{key:"handleSubmit",value:(n=m(b().mark((function e(){var t,n;return b().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.values,n={},Object.keys(t).map((function(e){return n[e]=!0})),this.setState({touched:n}),e.next=6,this.isValidForm();case 6:if(!e.sent){e.next=8;break}this.props.onSubmitCallback(t);case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"getInputProps",value:function(e){var t=this,n=this.state,r=n.errors,a=n.touched,c=n.values;return s(s({value:c[e],checked:Boolean(c[e]),selected:c[e],onChange:function(n){return t.handleChange(e,n)},onBlur:function(){return t.handleBlur(e)}},a[e]&&r[e]&&{className:"has-error"}),{},{help:a[e]?r[e]:null})}},{key:"getStateAndHelpers",value:function(){var e=this.state,t=e.values,n=e.errors;return{values:t,errors:n,touched:e.touched,setTouched:this.setTouched,setValue:this.setValue,handleSubmit:this.handleSubmit,getInputProps:this.getInputProps,isValidForm:!Object.keys(n).length}}},{key:"render",value:function(){var e=this.props.children(this.getStateAndHelpers());return Object(r.cloneElement)(e)}}]);var n,a}(r.Component);h.propTypes={children:l.a.any,errors:l.a.object,initialValues:l.a.object.isRequired,onSubmitCallback:l.a.func,validate:l.a.func};var _={errors:{},initialValues:{},onSubmitCallback:a.noop,touched:{},validate:a.noop,onChange:function(){}};t.a=Object(i.a)(h,_)},284:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(0),a=n(5),c=n.n(a),l=(n(299),["className","onChange","label","color","disabled"]);function i(){return(i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function s(e){var t=e.className,n=e.onChange,a=e.label,u=e.color,s=e.disabled,f=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,l),b=o(Object(r.useState)(!0),2),d=b[0],m=b[1],p=Object(r.useRef)();return Object(r.createElement)("div",{className:c()("bwf-checkbox-control bwf-checkbox",t)},Object(r.createElement)("span",{className:"bwf-checkbox-control-inner"},Object(r.createElement)("input",i({type:"checkbox"},f,{onChange:function(e){s||(n(e.target.checked),m(!1))},ref:p,className:c()({"bwf-no-animation":d,"bwf-disable":s}),style:{"--current-checkbox-color":u}}))),a&&Object(r.createElement)("label",{className:"bwf-checkbox-control__label ".concat(s?"bwf-disable":""),onClick:function(){return p.current.click()}},a))}},286:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(2),c=n(5),l=n.n(c),i=n(52),o=n(9),u=(n(4),n(1)),s=n(60);n(316);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function d(e){var t=e.label,n=void 0===t?"":t,c=e.id,b=void 0===c?"":c,d=e.value,m=e.onChange,p=void 0===m?a.noop:m,v=e.className,y=e.style,O=void 0===y?{}:y,j=e.isHover,h=e.hoverVal,_=void 0===h?"":h,g="inspector-color-".concat(Object(i.useInstanceId)(o.ColorPicker)),w=f(Object(r.useState)(!1),2),E=w[0],S=w[1],N=f(Object(r.useState)(),2),k=N[0],x=N[1],P=f(Object(r.useState)(0),2),C=P[0],A=P[1],T=j?Object(a.isArray)(d)?d:[d,_]:d,I=function(e){if(j){var t=T;return t[C]=e.hex,void p(t,{id:b})}p(e.hex,{id:b})},D=j?T[C]:T;return Object(r.createElement)("div",{className:l()("components-color-field",v),style:O},Object(r.createElement)("div",{className:"components-color-field-label-wrap"},n&&Object(r.createElement)("label",{className:"components-label components-color-field-label",htmlFor:g},n),j&&Object(r.createElement)(o.ButtonGroup,{className:"bwf-color-picker-modes"},Object(r.createElement)(o.Button,{className:l()("is-secondary-gray is-small",{"is-selected":0===C}),onClick:function(){return A(0)}},Object(u.__)("Default","funnel-builder")),Object(r.createElement)(o.Button,{className:l()("is-secondary-gray is-small",{"is-selected":1===C}),onClick:function(){return A(1)}},Object(u.__)("Hover","funnel-builder")))),Object(r.createElement)("div",{className:"component-color-field-inner"},Object(r.createElement)("span",{className:"component-color-indicator-wrap",onClick:function(){return S(!0)}},Object(r.createElement)(o.ColorIndicator,{colorValue:D,ref:x,className:l()({"is-empty":Object(a.isEmpty)(D)})}),Object(r.createElement)("span",{className:"indicator-text"},D||"Select")),E&&Object(r.createElement)(s.a,{position:"top right",onClose:function(){return S(!1)},anchor:k},Object(r.createElement)(o.ColorPicker,{color:D,onChangeComplete:I}),Object(r.createElement)(o.Button,{isLink:!0,className:"bwf-color-picker-reset-btn",onClick:function(){return I({hex:""})}},Object(u.__)("Reset","funnel-builder")))))}},289:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n.n(a),l=n(2),i=n(9),o=n(42),u=(n(303),n(6));function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(){return(f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.data,n=void 0===t?[]:t,a=e.className,b=e.center,d=void 0!==b&&b,m=e.isDismissive,p=void 0!==m&&m,v=e.onDismisal,y=void 0===v?function(){}:v,O=e.isProFeatureLocked;if(Object(l.isEmpty)(n))return!1;return Object(r.createElement)("div",{className:c()("bwf-zero-state",a,{"bwf-block-t-center":d})},p&&Object(r.createElement)("span",{className:"bwf-layout-dismiss",onClick:function(){return y()},style:{transform:"rotate(45deg)"}},Object(r.createElement)(u.a,{icon:"plus",color:"#353030"})),Object(r.createElement)("div",{className:"bwf-zero-state-wrap"},n.map((function(e,t){return Object(r.createElement)(r.Fragment,{key:"section--"+t},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"icon":return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class)},t.content);case"actions":return Object(r.createElement)(o.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.actions.map((function(e,t){return Object(r.createElement)(o.a,{key:"layout-block-"+t,className:c()("bwf-shadow"),gap:3,onClick:e.onClick},Object(r.createElement)(o.c,null,Object(r.createElement)("div",{className:"bwf-circle-mockup"},e.icon)),Object(r.createElement)(o.b,{className:"bwf_text_left"},e.heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-head",dangerouslySetInnerHTML:{__html:e.heading}}),e.sub_heading&&Object(r.createElement)("div",{className:"bwf-zero-sec-action-subhead",dangerouslySetInnerHTML:{__html:e.sub_heading}}),O&&Object(r.createElement)("div",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"18",height:"18"}))))})));case"buttons":return Object(r.createElement)(o.a,{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),gap:4},t.buttons.map((function(e,t){return Object(r.createElement)(i.Button,f({isPrimary:!0,key:t,onClick:e.onClick,className:"".concat(e.className," bwf-no-ripple")},e.props),!1!==e.proCheck&&O&&Object(r.createElement)("span",{className:"bwf-zero-sec-lock"},Object(r.createElement)(u.a,{icon:"king",width:"20",height:"20"})),e.text)})));default:return Object(r.createElement)("div",{className:c()("bwf-zero-sec bwf-zero-sec-"+e,t.class),style:t.style},t.content&&("object"===s(t.content)?t.content:Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:t.content}})))}}(e.type,e.data))}))))}},291:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(56),l=n(2),i=n(9);n(5),n(305);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t=e.value,n=void 0===t?"":t,i=e.onChange,o=e.keyid,u=e.openMergeTagModal,f=e.customSettings,d=void 0===f?{}:f,m=e.toolbar,p=e.quicktags,v=void 0!==p&&p,y=Object(r.useRef)(!1),O=Object(r.useRef)(n);return Object(r.useEffect)((function(){if(y.current){var e=window.tinymce.get("editor-bwf"+o);(null==e?void 0:e.getContent())!==n&&(null==e||e.setContent(n||""),O.current=n||"")}}),[n]),Object(r.useEffect)((function(){function e(){var e=window.tinymce.settings,n=e.plugins,r=void 0===n?"":n,a=["lists","link"];Object(l.isEmpty)(r)||(a=[].concat(b(Object(l.isArray)(r)?r:r.split(",")),b(a))),wp.editor.initialize("editor-bwf"+o,{tinymce:s(s({},e),{},{inline:!1,content_css:!1,setup:t,height:114,resize:!1,toolbar1:m||"bold,italic,,bullist,numlist,mergetagmodal,link",fontsize_formats:b(Array(39)).map((function(e,t){return t+12})).join("px ")+"px",content_style:'body {color: #353030;font-size:14px;font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;}',classic_block_editor:!0,selector:"#editor-bwf"+o,plugins:a},d),quicktags:!!v&&{buttons:"strong,em,link,ul,ol,li,code"}})}function t(e){var t=Object(l.debounce)((function(){var t=e.getContent();t!==e._lastChange&&(e._lastChange=t,i(t))}),250);e.on("Paste Change input Undo Redo",t),e.on("remove",t.cancel),e.on("keydown",(function(t){c.isKeyboardEvent.primary(t,"z")&&t.stopPropagation(),t.keyCode!==c.BACKSPACE&&t.keyCode!==c.DELETE||!function(e){var t=e.getBody();return!(t.childNodes.length>1)&&(0===t.childNodes.length||!(t.childNodes[0].childNodes.length>1)&&/^\n?$/.test(t.innerText||t.textContent))}(e)||(onReplace([]),t.preventDefault(),t.stopImmediatePropagation()),t.altKey&&t.keyCode===c.F10&&t.stopPropagation()})),u&&e.addButton("mergetagmodal",{icon:"merge-tag",text:Object(a.__)("Merge Tags","funnel-builder"),tooltip:Object(a.__)("Merge Tags","funnel-builder"),onclick:function(){u(!0)}}),e.on("init",(function(){null==e||e.setContent(O.current),n!==O.current&&i(O.current)}))}function r(){"complete"===document.readyState&&e()}return y.current=!0,"complete"===document.readyState?e():document.addEventListener("readystatechange",r),function(){document.removeEventListener("readystatechange",r),wp.oldEditor.remove("editor-bwf"+o)}}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("textarea",{key:"editor",id:"editor-bwf"+o,className:"wp-block-freeform block-library-rich-text__tinymce bwf-editor-container",onChange:function(e){i(e.target.value)},onBlur:function(e){i(e.target.value)}}))};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.isTextEditor,n=void 0===t||t,a=p(Object(r.useState)("visual"),2),c=a[0],l=(a[1],p(Object(r.useState)(),2)),o=l[0],u=l[1];return Object(r.useEffect)((function(){u(e.value)}),[e.value]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mce-editor ".concat(e.label?"bwf-is-label":"")},e.label&&Object(r.createElement)("label",null,Object(r.createElement)("span",null,e.label)),Object(r.createElement)("div",{className:e.className},"visual"===c&&Object(r.createElement)(m,e),n&&"text"==c&&Object(r.createElement)(i.TextareaControl,{id:"lead_notification_body",placeholder:null==e?void 0:e.placeholder,className:"form-control wp-textarea bwf-editor-textarea",defaultValue:o,onChange:function(t){null!=e&&e.onChange(t)}}))))}},294:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return f})),n.d(t,"c",(function(){return b}));var r=n(0),a=n(282);function c(){return(c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var o=function(e){return function(t){return Object(r.createElement)(a.a,{onDragEnd:function(e){var n=e.destination,r=e.source;if(n){var a=Array.from(t.items),c=l(a.splice(r.index,1),1)[0];a.splice(n.index,0,c),t.onSortEnd&&t.onSortEnd({oldIndex:r.index,newIndex:n.index,items:a})}}},Object(r.createElement)(a.c,{droppableId:"droppable"},(function(n){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(e,c({},n.droppableProps,t,{provided:n})),n.placeholder)})))}},u=["id","index"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var f=function(e){return function(t){var n=t.id,c=t.index,l=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,u);return Object(r.createElement)(a.b,{draggableId:n.toString(),index:c,key:n},(function(t,n){return Object(r.createElement)(e,s({index:c,provided:t},l,{isDragging:n.isDragging}))}))}},b=function(e){return function(t){var n;return Object(r.createElement)("div",null===(n=t.provided)||void 0===n?void 0:n.dragHandleProps,Object(r.createElement)(e,t))}}},296:function(e,t,n){},299:function(e,t,n){},301:function(e,t,n){},302:function(e,t,n){"use strict";var r=n(0),a=n(3),c=n.n(a),l=(n(296),n(294)),i=(n(9),n(6)),o=n(1),u=n(2);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.groupID,n=e.items,a=void 0===n?[{key:"",label:"",display:Object(r.createElement)("p",null)}]:n,s=e.className,f=void 0===s?"":s,d=e.sortable,v=e.groupData,y=e.handleClick,O=e.actions,j=e.handleIcons,h=e.openedTabs,_=(void 0===h&&u.noop,e.openedKeys),g=e.setOpenedKeys,w=e.returnProps,E=void 0!==w&&w,S=p(Object(r.useState)(_||[0]),2),N=S[0],k=S[1],x={};a.forEach((function(e){x[e.key]=Object(r.createRef)()})),Object(r.useEffect)((function(){void 0!==_&&k(_)}),[_]),Object(r.useEffect)((function(){void 0!==g&&g(N)}),[N]),Object(r.useEffect)((function(){var e=Object.keys(x)[0],t=function(t){jQuery(x[t].current).on("click",(function(n){var r=Object(u.isString)(n.target.className)&&n.target.className.split(" ");if(r&&!r.includes("components-form-toggle__input")&&!r.includes("components-toggle-control__label")){var a=jQuery(this).parents(".bwf-c-s-collapsible");t!==e||a.hasClass("bwf-accordion-closed")?t===e&&a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideDown(400),a.removeClass("bwf-accordion-closed")):a.hasClass("bwf-accordion-closed")?(a.find(".bwf-c-s-full").stop().slideUp(400),a.removeClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideDown(400),a.addClass("bwf-accordion-closed")):(a.find(".bwf-c-s-full").stop().slideUp(400),a.addClass("bwf-accordion-closed"))}}))};for(var n in x)t(n)}),[]);var P=Object(l.c)((function(){return Object(r.createElement)(i.a,{icon:"menu"})}));return Object(r.createElement)("div",{className:"bwf-accordian-list"},a&&a.map((function(e,n){return e.hasOwnProperty("key")?Object(r.createElement)("div",{key:e.key,"data-accordion":n,className:f+" bwf-c-s-collapsible"},Object(r.createElement)("div",{className:"bwf-c-s-heading",ref:x[e.key],onClick:function(e){-1===N.indexOf(n)?k((function(e){return[].concat(m(e),[n])})):setTimeout((function(){k((function(e){return e.filter((function(e){return e!==n}))}))}),400)}},d&&Object(r.createElement)(P,null),Object(r.createElement)("div",{className:"bwf-accordion-label-elm"},e.label),O&&O.map((function(e){return e.hasOwnProperty("key")?Object(r.createElement)("a",{onClick:function(n){n.preventDefault(),y(e.key,t,"group",0,v)},href:"",key:e.key,className:"bwf-accordion-"+e.class},Object(o.__)(null==e?void 0:e.label,"funnel-builder")):null})),Object(r.createElement)("div",{className:"bwf-c-s-icon"},"plus-minus"===j?Object(r.createElement)(i.a,{icon:N.includes(n)?"minus":"plus-3"}):Object(r.createElement)(i.a,{icon:N.includes(n)?"angle-up":"angle-down",width:"16",height:"18"}))),Object(r.createElement)("div",{className:"bwf-c-s-full bwf-c-s-allow-edit bwf-accordion bwf-hide",style:b({},N.includes(n)&&{display:"block"})},e.hint,c.a.isValidElement(e.display)?c.a.cloneElement(e.display,E?{isOpened:N.includes(n)}:{}):e.display)):null})))}},303:function(e,t,n){},305:function(e,t,n){},312:function(e,t,n){"use strict";var r=n(26);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var c=["getStateProp"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(r.a)("settings"),t=e.getStateProp;return i(i({},function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,c)),{},{data:t("data"),tabs:t("tabs"),isLoading:t("isLoading")})}},314:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(9),l=n(63),i=n(6),o=n(4),u=n(21),s=n(20),f=n(23),b=(n(369),n(32));function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var p=[Object(a.__)("Supports One Click Upsells with Express Checkout","funnel-builder"),Object(a.__)("Better Express Payment with Apple & Google Pay","funnel-builder"),Object(a.__)("Recover failure upsells","funnel-builder"),Object(a.__)("Get personalised Support","funnel-builder")],v=Object(o.E)()+"funnel_thumbnail.png";t.a=function(){var e=d(Object(r.useState)(!1),2),t=e[0],n=e[1],o=Object(s.a)().isNoticeclosed,m=Object(f.a)().removeNotice,y=(0,Object(b.a)().getStripeStatus)(),O=o("upsell-stripe-notice");return"connected"===y||O?null:Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-upsell-stripe-notice"},Object(r.createElement)("img",{src:v,alt:"thumbnail",onClick:function(){return n(!0)}}),Object(r.createElement)("div",null,Object(r.createElement)("span",{className:"bwf-upsell-stripe-notice__title"},Object(a.__)("Recover More Upsells with FunnelKit ","funnel-builder"),Object(r.createElement)("strong",null,Object(a.__)("Stripe","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-upsell-stripe-notice__features"},p.map((function(e,t){return Object(r.createElement)("span",{key:"stripe-feature-".concat(t)},Object(r.createElement)(i.a,{icon:"check-circle2",size:"16"}),e)}))),Object(r.createElement)(l.a,{stripeInText:!0})),Object(r.createElement)("span",{className:"bwf-upsell-stripe-notice__close",onClick:function(){return m("upsell-stripe-notice")}},Object(r.createElement)(i.a,{icon:"close",size:"16",color:u.TEXT_COLOR_3}))),t&&Object(r.createElement)(c.Modal,{title:Object(a.__)("How to setup Stripe with FunnelKit","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-xl",onRequestClose:function(){return n(!1)},shouldCloseOnClickOutside:!0,shouldCloseOnEsc:!0},Object(r.createElement)("iframe",{title:"thumbnail",width:"720",height:"372",src:"https://www.youtube.com/embed/01pWZNaGGd4?rel=0",frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})))}},316:function(e,t,n){},320:function(e,t,n){"use strict";var r=n(0);n(296);function a(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.count,n=void 0===t?10:t,c=e.className,l=void 0===c?"":c;return Object(r.createElement)("div",{className:"bwf-accordion-placeholder ".concat(l)},a(Array(n)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-mb-16 bwf-c-s-collapsible",key:"bwf-accordion-placeholder__".concat(t),"data-accordion":t},Object(r.createElement)("div",{className:"bwf-placeholder-temp"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp"}))})))}},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){},327:function(e,t,n){"use strict";var r=n(9),a=n(0),c=n(5),l=n.n(c),i=n(295),o=n(284),u=n(277),s=n(2),f=n(337),b=["ajax_cb","options"];function d(){return(d=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return p(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v=n(291),y=["value","onChange","id","label","className"];function O(){return(O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var j=function(e){var t=e.value,n=void 0===t?"":t,r=e.onChange,c=e.id,i=e.label,o=e.className,u=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,y);function s(e){r(e,c)}return Object(a.createElement)("div",{className:l()("components-richeditor",o)},i&&Object(a.createElement)("label",{className:"components-label components-richeditor-label",htmlFor:c},i),Object(a.createElement)(v.a,O({content:n,value:n,setContent:s,onChange:s,keyid:c},u)))},h=n(6),_=function(e){var t=e.label,n=e.copy_text;return Object(a.createElement)("div",{className:l()("components-copier")},t&&Object(a.createElement)("label",{className:"components-label"},t),n&&Object(a.createElement)("div",{className:"bwf-display-flex"},Object(a.createElement)("span",{className:"bwf-copier-text"},n," "),Object(a.createElement)(r.Button,{className:"bwf-copier-icon",isSecondary:!0,onClick:function(){return e=n,(t=document.createElement("textarea")).value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),void document.body.removeChild(t);var e,t}},Object(a.createElement)(h.a,{icon:"duplicate",size:20}),"Copy")))},g=n(281),w=n(286),E=n(1),S=(n(330),n(4)),N=n(279);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){T(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return A(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t){if(Object(s.isObject)(e))return e;if(Object(s.isString)(e)){var n=e.split(" ");return T(T(T(T({},t.attrTop,Object(s.isEmpty)(n[0])?"0":n[0]),t.attrRight,Object(s.isEmpty)(n[1])?"0":n[1]),t.attrBottom,Object(s.isEmpty)(n[2])?"0":n[2]),t.attrLeft,Object(s.isEmpty)(n[3])?"0":n[3])}return T(T(T(T({},t.attrTop,"0"),t.attrRight,"0"),t.attrBottom,"0"),t.attrLeft,"0")},D={label:Object(E.__)("Padding","funnel-builder"),type:"padding",units:["px","em","%"],unit:"px",min:-250,max:1e3,labelTop:Object(E.__)("Top","funnel-builder"),labelRight:Object(E.__)("Right","funnel-builder"),labelBottom:Object(E.__)("Bottom","funnel-builder"),labelLeft:Object(E.__)("Left","funnel-builder"),attrTop:"top",attrRight:"right",attrBottom:"bottom",attrLeft:"left",value:{},attrKey:"",attrUnit:"unit"},L=Object(N.a)((function(e){var t=e.value,n=void 0===t?{}:t,c=e.label,i=e.type,o=e.onChange,u=void 0===o?s.noop:o,f=(e.defaultSync,I(n,e)),b="",d=C(Object(a.useState)(!Object(S.k)(Object.values(f))),2),m=d[0],p=d[1],v=C(Object(a.useState)(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,T(T(T(T({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),2),y=v[0],O=v[1];b=y&&y[e.attrUnit]?y[e.attrUnit]:"px",Object(a.useEffect)((function(){O(P(P({},y),I(n,e)))}),[n]),Object(a.useEffect)((function(){O(Object(s.cloneDeep)(Object(s.defaultsDeep)(f,T(T(T(T({},e.attrTop,"0"),e.attrRight,"0"),e.attrBottom,"0"),e.attrLeft,"0")))),b=y&&y[e.attrUnit]?y[e.attrUnit]:"px"}),[]);var j=function(t,r){var a=t.target.value;if(m)!function(t){"padding"===i&&(t=t.toString().replace(/-/g,""));var r=P({},y);if(r[e.attrTop]=t,r[e.attrRight]=t,r[e.attrBottom]=t,r[e.attrLeft]=t,Object(s.isString)(n)){var a="".concat(r[e.attrTop]," ").concat(r[e.attrRight]," ").concat(r[e.attrBottom]," ").concat(r[e.attrLeft]);u(a)}else u(r)}(a);else{"padding"===i&&(a=a.toString().replace(/-/g,""));var c=P({},y);if(c[r]=a,Object(s.isString)(n)){var l="".concat(c[e.attrTop]," ").concat(c[e.attrRight]," ").concat(c[e.attrBottom]," ").concat(c[e.attrLeft]);u(l)}else u(c)}};return Object(a.createElement)("div",{className:"bwf-dimensions-control-component"},c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"components-bwf-dimensions-control__inputs"},Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrTop)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrTop],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrRight)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrRight],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrBottom)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrBottom],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)("input",{className:"components-bwf-dimensions-control__number",type:"number",onChange:function(t){return j(t,e.attrLeft)},"aria-label":Object(E.sprintf)(Object(E.__)("%s Top","funnel-builder"),c),value:y&&y[e.attrLeft],min:"padding"===e.type?0:"%"===b?-100:e.min,max:"%"===b?100:e.max,"data-attribute":i}),Object(a.createElement)(r.Button,{className:l()("components-bwf-dimensions-control_reset",{"is-lock":m}),label:Object(E.__)("Reset","funnel-builder"),onClick:function(){return p((function(e){return!e}))},isSmall:!0},Object(a.createElement)(h.a,{icon:m?"lock":"unlock",size:"16"}))),Object(a.createElement)("div",{className:"components-bwf-dimensions-control__input-labels"},Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelTop),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelRight),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelBottom),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"},e.labelLeft),Object(a.createElement)("span",{className:"components-bwf-dimensions-control__number-label"}))))}),D),F=n(52);n(331);function M(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var B=[{id:"h-offset",selectindex:0,label:Object(E.__)("H Offset","funnel-builder"),allownegative:!0},{id:"v-offset",selectindex:1,label:Object(E.__)("V Offest","funnel-builder"),allownegative:!0},{id:"blur",selectindex:2,label:Object(E.__)("Blur","funnel-builder")},{id:"spread",selectindex:3,label:Object(E.__)("Spread","funnel-builder")},{id:"color",selectindex:4,label:Object(E.__)("Color","funnel-builder"),type:"color"},{id:"inset",selectindex:5,label:Object(E.__)("Enable Box Shadow Inset","funnel-builder"),type:"toggle"}],R=function(e){var t=e.typography,n=e.setTypography,r=e.settingOptions,c=e.label,l=Object(F.useInstanceId)(R,"bwf-field-item");return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-box-shadow-control-component ",id:l},c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)("div",{className:"components-bwf-box-shadow-control__inputs "},r.map((function(e){return e.type?"color"===e.type?"":void 0:Object(a.createElement)("div",{className:"bwf-input bwf-"+e.id,key:e.id},Object(a.createElement)("input",{type:"number",value:t[e.selectindex],id:e.id,min:"-200",max:"200",className:"components-bwf-box-shadow-control__number ",onChange:function(r){var a=r.target.value;a=e.hasOwnProperty("allownegative")&&e.allownegative?r.target.value:a<0?0:a;var c=M(t);c[e.selectindex]=a,n(c)}}),Object(a.createElement)("label",{htmlFor:e.id},e.label))})))),Object(a.createElement)("div",{className:"bwf-shadow-color-wrapper",key:"color"},"",Object(a.createElement)("label",{className:"components-base-control__label"},Object(E.__)("Shadow Color","funnel-builder")),Object(a.createElement)(w.a,{value:t[4],onChange:function(e){var r=M(t);r[4]=e,n(r)}})))},q=function(e){var t=e.value,n=void 0===t?{}:t,r=e.label,c=n.h_offset,l=void 0===c?"":c,i=n.v_offset,o=void 0===i?"":i,u=n.blur,s=void 0===u?"":u,f=n.spread,b=void 0===f?"":f,d=n.color,m=void 0===d?"":d,p=n.inset,v=[l,o,s,b,m,void 0===p?"":p];return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(R,{typography:v,setTypography:function(t){var n={h_offset:t[0],v_offset:t[1],blur:t[2],spread:t[3],color:t[4],inset:t[5]};e.onChange(n)},settingOptions:B,label:r}))};n(332);function U(){return(U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var G=function(e){var t=e.value,n=e.onChange,c=e.label,l=e.defaultCustomValue,i=V(Object(a.useState)(""),2),o=i[0],f=i[1],b=V(Object(a.useState)(""),2),d=b[0],m=b[1];return Object(a.useEffect)((function(){Object(s.isEmpty)(d)&&(Object(s.isEmpty)(null==t?void 0:t.toString())?(m("auto"),f("100%")):(m("custom"),f(t)))}),[t]),Object(a.createElement)(a.Fragment,null,c&&Object(a.createElement)("label",{className:"components-base-control__label"},c),Object(a.createElement)("div",{className:"bwf-width-control"},Object(a.createElement)(r.TextControl,U({value:o,onChange:function(e){n(e),f(e)},disabled:"auto"===d},"custom"===d&&{type:"number",min:"0"})),Object(a.createElement)(u.a,{options:[{key:"auto",label:Object(E.__)("Auto","funnel-builder")},{key:"custom",label:Object(E.__)("Custom","funnel-builder")}],selected:d,onChange:function(e){m(e),"auto"===e?(n(""),f("100%")):(n(Object(s.isEmpty)(null==t?void 0:t.toString())?l:t),f(l))}})))},K=n(74),J=["label","tooltip"];function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Y(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=$(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(){return(X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var Z={checkbox:o.a,radio:g.a,select:u.b,textarea:r.TextareaControl,text:r.TextControl,input:r.TextControl,checklist:i.a,ajax:function(e){var t=e.ajax_cb,n=e.options,r=void 0===n?[]:n,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,b),l=m(Object(a.useState)(r),2),i=l[0],o=l[1],u=m(Object(a.useState)(!1),2),p=u[0],v=u[1];Object(a.useEffect)((function(){Object(s.isEmpty)(i)&&y()}),[i]);var y=function(){return new Promise((function(e){jQuery.ajax({type:"POST",url:ajaxurl,data:{action:t,dataType:"json",contentType:"application/json"},success:function(e){var t=Array.isArray(e.results)?e.results:[];t=t.map((function(e){return"object"!==e.value&&(e.key||"object"===e.value||(e.key=e.value),e.value={id:e.value}),e})),o(t),v(!0)}})}))};return Object(a.createElement)(a.Fragment,null,p?Object(a.createElement)(f.a,d({options:i},c)):Object(a.createElement)("div",{className:"setting-form-field"},Object(a.createElement)("div",{className:"is-placeholder long"})))},richeditor:j,richtext:j,copier:_,color:w.a,toggle:r.ToggleControl,"bwf-toggle":function(e){var t=e.label,n=e.tooltip,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,J);return Object(a.createElement)("div",{className:"bwf-flex bwf--space-between"},Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("label",null,t),!Object(s.isEmpty)(n)&&Object(a.createElement)(K.a,{toolTipText:n,size:280,position:"bottom right"},Object(a.createElement)(h.a,{icon:"info",size:16}))),Object(a.createElement)(r.ToggleControl,X({},c,{className:"bwf-tooglecontrol-advance"})))},"dimension-control":L,"box-shadow":q,"bwf-label":function(e){var t=e.label,n=e.class;return Object(a.createElement)("span",{className:l()("bwf_label",n)},t)},width:G};t.a=function(e){var t=e.input,n=e.formProps,c=e.values,i=e.customMapField,o=void 0===i?{}:i,u=Q(Q({},Z),o),f=u.text;if(t.type.toLowerCase()in u&&(f=u[t.type.toLowerCase()]),t.ajax_cb&&(f=u.ajax),"select"===t.type&&t.multiple&&!Object(s.isEmpty)(c)){var b=c[t.id];if(Object(s.isEmpty)(b))c[t.id]=[];else if(!Object(s.isEmpty)(t.options)&&"string"==typeof b[0]){var d=[];t.options.forEach((function(e){if(void 0===e.key)if("string"==typeof e.value&&b.includes(e.value)){var t={};t.key=e.value,t.label=e.label,t.value={id:e.value},d.push(t)}else if("string"==typeof e.value.id&&b.includes(e.value.id)){var n={};n.key=e.value,n.label=e.label,n.value={id:e.value},d.push(n)}})),c[t.id]=d}}var m,p;return Object(a.createElement)("div",{className:l()("form-group",t.class,"text"!==t.type&&"field--"+t.type,{"inline-group":!t.label})},"disabled"===t.type?Object(a.createElement)(r.TextControl,{disabled:!0,value:t.value,label:t.label}):Object(a.createElement)(f,Q(Q({label:t.label},(m=t,p=Object.assign({},m.props),m.type.toLowerCase()in u||(p.type=m.type.toLowerCase()),p.placeholder=m.placeholder,p.options=m.options,m.checkboxlabel&&(p.checkboxlabel=m.checkboxlabel),m.multiple&&(p.multiple=m.multiple),m.ajax_cb&&(p.ajax_cb=m.ajax_cb),"copier"===m.type&&(p=m),"width"===m.type&&(p=m),"color"===m.type&&(p=m,m.isHover&&m.hoverKey&&(p.hoverVal=c[m.hoverKey])),"richeditor"!==m.type&&"richtext"!==m.type&&"textarea"!==m.type||(p=m),"number"===m.type&&(p.min=m.min,p.max=m.max),"select"===m.type&&(p.excludeSelectedOptions=!1,p.options&&(p.options=p.options.map((function(e){return"object"!==$(e.value)&&(e.key="object"!==$(e.value)?e.value:e.key,e.value={id:e.value}),e}))),m.multiple&&(p.excludeSelectedOptions=!0,p.inlineTags=!0)),"richeditor"===m.type&&(p.id=m.id),"bwf-toggle"===m.type&&(p.tooltip=m.tooltip),"input"!==m.type&&"text"!==m.type&&"textarea"!==m.type||(p.placeholder=Object(E.__)("Type here","funnel-builder")),"text"===m.type&&m.disabled&&(p.disabled=m.disabled),"toggle"===m.type&&(p.className="bwf-tooglecontrol-advance",p.tooltip=m.tooltip,p.label=m.label),p.keyid=m.key,p)),n)),t.hint&&Object(a.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:t.hint}}))}},330:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},336:function(e,t,n){"use strict";var r=n(0),a=n(4),c=n(6),l=n(1),i=(n(341),n(51),n(2)),o=n(37),u=(n(5),n(60));function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t,n=e.conditionLabel,b=e.options,d=e.values,m=e.selectedValue,p=e.searchedValue,v=e.onChangeValue,y=e.onChangeData,O=e.className,j=e.isLoading,h=e.defaultOptions,_=e.placeholder,g=e.showInitialList,w=void 0!==g&&g,E=e.multiGroup,S=void 0!==E&&E,N=(e.hasDefaultOption,e.abortController),k=(e.isFirstLoading,Object(r.useRef)()),x=Object(r.useRef)(),P=Object(r.useRef)(),C=f(Object(r.useState)(w),2),A=C[0],T=C[1],I=f(Object(r.useState)([]),2),D=I[0],L=I[1],F=f(Object(r.useState)(""),2),M=F[0],z=F[1],B=f(Object(r.useState)([]),2),R=B[0],q=B[1],U=f(Object(r.useState)(""),2),V=U[0],H=U[1],G=f(Object(r.useState)(0),2),K=G[0],J=G[1],$=f(Object(r.useState)(0),2),Y=$[0],Q=$[1],W=f(Object(r.useState)(),2),X=W[0],Z=W[1],ee=f(Object(r.useState)({}),2),te=ee[0],ne=ee[1],re=f(Object(r.useState)(!1),2),ae=(re[0],re[1]);Object(r.useEffect)((function(){if(Object(i.size)(D)>1&&void 0!==D){var e,t=null==D?void 0:D.filter((function(e){var t;if(!M.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString()))return e}));Q(null===(e=t[0])||void 0===e?void 0:e.id),D.forEach((function(e,n){var r;e.id==(null===(r=t[0])||void 0===r?void 0:r.id)&&J(n)}))}}),[D,M,R]),Object(r.useEffect)((function(){Object(i.size)(D)>1&&void 0!==D&&D.forEach((function(e,t){e.id==Y&&J(t)}))}),[A]),Object(r.useEffect)((function(){if(Object(i.size)(D)>1&&void 0!==D){var e=D.filter((function(e,t){var n;if(null==M||!M.includes(null==e||null===(n=e.id)||void 0===n?void 0:n.toString()))return e}));ne(e)}}),[M]),Object(r.useEffect)((function(){Object(i.size)(D)>1&&void 0!==D&&D.forEach((function(e,t){t==K&&Z(null==e?void 0:e.id)}))}),[K,A]),Object(r.useEffect)((function(){Object(i.size)(D)>1&&void 0!==D&&D.forEach((function(e,t){(null==e?void 0:e.id)==(null==X?void 0:X.id)&&J(t)}))}),[X]),Object(r.useEffect)((function(){var e;((null==b?void 0:b.length)>0||(null==h?void 0:h.length)>0)&&(""==V&&"no-result"===(null===(e=b[0])||void 0===e?void 0:e.id)&&Object(i.isEmpty)(h)?L([{id:"no-result",name:"No data available"}]):""==V||0===(null==b?void 0:b.length)?L(h):L(b),z(d),q(m))}),[b,h,M]),Object(a.pb)(k,(function(){return T(!1)}));var ce=function(e){v(e)},le=function(e){y(e)};Object(r.useEffect)((function(){""==V&&L(h),ie()}),[V]),Object(r.useEffect)((function(){A?P.current.focus():P.current.blur()}),[A]);var ie=function(){if(P.current){var e=P.current.parentElement;if(""===V)return e.style.width="70px",!0;var t=.75*(V.length+1)+"em";e.style.width=t}};Object(r.useEffect)((function(){var e=h.reduce((function(e,t){return e.concat(t.steps)}),[]);Object(i.size)(S?e:h)===Object(i.size)(M)&&L([{id:"no-result",name:"No data available"}])}),[h,M]),Object(r.useEffect)((function(){D.every((function(e){return M.includes(e.id)}))&&(Object(i.isEmpty)(V)?L([{id:"no-result",name:"No data available"}]):L([{id:"no-result",name:'No result found for "'.concat(V,'"')}]))}),[D,M]);return Object(r.createElement)(r.Fragment,null,n?Object(r.createElement)("span",null,n):null,Object(r.createElement)("div",{className:"chosen-container chosen-container-multi ".concat(A&&"chosen-container-active chosen-with-drop"),onClick:function(){return T(!0)},ref:k},Object(r.createElement)("ul",{className:"chosen-choices bwf-select-container bwf-rule-input-conatiner ".concat(O)},null===(t=Object(i.isEmpty)(R)?h:R)||void 0===t?void 0:t.map((function(e,t){var n;if(null!=M&&M.includes(null==e||null===(n=e.id)||void 0===n?void 0:n.toString()))return Object(r.createElement)("li",{className:"bwf-select-choice",key:t},Object(r.createElement)("span",{className:"bwf-selected-label"},e.labelText?e.labelText:null!=e&&e.label?Object(o.decodeEntities)(null==e?void 0:e.label):Object(o.decodeEntities)(null==e?void 0:e.name)),Object(r.createElement)("span",{className:"search-choice-close bwf-cursor-pointer",onClick:function(){var t=R.filter((function(t){return t.id!==e.id})),n=JSON.parse(JSON.stringify(t));q(n),le(n);var r=n.map((function(e){var t;return null==e||null===(t=e.id)||void 0===t?void 0:t.toString()}));z(r),ce(r),T(!1)}},Object(r.createElement)(c.a,{icon:"cross-circle",height:"16",width:"16"})))})),Object(r.createElement)("li",{className:"search-fiesetConditionValueld"},Object(r.createElement)("input",{ref:P,className:"bwf-condition-input bwf_w_full",type:"text",autoComplete:"off",onChange:function(e){var t;N&&(null===(t=N.current)||void 0===t||t.abort());H(e.target.value),x.current&&clearTimeout(x.current),x.current=setTimeout((function(){Object(i.isEmpty)(e.target.value),p(e.target.value),H(e.target.value)}),600)},onFocus:function(){ae(!0)},onBlur:function(){ae(!1)},value:V||"",onKeyDown:function(e){38===e.keyCode&&K>0&&!S?te.map((function(e,t){e.id==X&&Z(te[t-1])})):40===e.keyCode&&K<(null==D?void 0:D.length)-1&&!S&&te.map((function(e,t){e.id==X&&Z(te[t+1])}))},onKeyPress:function(e){var t,n,r,a,c=null===(t=D[K])||void 0===t||null===(t=t.id)||void 0===t?void 0:t.toString();"Enter"!==e.key||!A||S||"no-result"===c||j?"Enter"===e.key&&"no-result"===c&&P.current.focus():(e.preventDefault(),null!=M&&M.includes(null===(n=D[K])||void 0===n||null===(n=n.id)||void 0===n?void 0:n.toString())||(q([].concat(s(R),[D[K]])),le([].concat(s(R),[D[K]])),z([].concat(s(M),[null===(r=D[K])||void 0===r||null===(r=r.id)||void 0===r?void 0:r.toString()])),ce([].concat(s(M),[null===(a=D[K])||void 0===a||null===(a=a.id)||void 0===a?void 0:a.toString()])),p(""),H(""),setTimeout((function(){T(!1)}))))}}),Object(r.createElement)("div",{className:"bwf-chosen-select-placeholder",placeholdervalue:0===V.length?_:""},Object(r.createElement)(c.a,{icon:"search",color:"red",size:15})))),Object(r.createElement)(u.a,{focusOnMount:!1,position:"bottom",className:"chosen-drop ".concat(Object(i.isEmpty)(D)&&!j?"bwf-no-data":"")},Object(r.createElement)("ul",{className:" ".concat(A?"chosen-results":"bwf-hide")},j?Object(r.createElement)("li",{className:"active-result"},Object(r.createElement)("span",{className:"bwf-no-data-found bwf-select-option"},Object(l.__)("Fetching details","funnel-builder"))):null==D?void 0:D.map((function(e,t){var n,a,c,l=null==e||null===(n=e.steps)||void 0===n?void 0:n.every((function(e){var t;return null==M?void 0:M.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())}));return S?Object(r.createElement)("div",{key:"bwf-suggestion-panel-".concat(t)},l?null:Object(r.createElement)("div",{className:"bwf-list-heading"},e.name),null==e||null===(c=e.steps)||void 0===c?void 0:c.map((function(e){var t;return Object(r.createElement)("div",{key:e.id,className:"bwf-list-name ".concat(null!=M&&M.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())?"result-selected":"active-result"," "),onClick:function(){var t,n,r;"no-result"===e.id||null!=M&&M.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())?"no-result"===e.id&&P.current.focus():(q([].concat(s(R),[e])),le([].concat(s(R),[e])),z([].concat(s(M),[null==e||null===(n=e.id)||void 0===n?void 0:n.toString()])),ce([].concat(s(M),[null==e||null===(r=e.id)||void 0===r?void 0:r.toString()])),p("",!1,!1),H(""),setTimeout((function(){T(!1)})))}},Object(r.createElement)("div",null,e.name))}))):Object(r.createElement)("li",{key:t,className:"".concat(null!=M&&M.includes(null==e||null===(a=e.id)||void 0===a?void 0:a.toString())?"result-selected":"active-result ".concat(K===t&&"no-result"!==e.id?"bwf-select-active":null)," "),onMouseOver:function(){var n;return!(null!=M&&M.includes(null==e||null===(n=e.id)||void 0===n?void 0:n.toString()))&&J(t)},onClick:function(){var t,n,r;"no-result"===e.id||null!=M&&M.includes(null==e||null===(t=e.id)||void 0===t?void 0:t.toString())?"no-result"===e.id&&P.current.focus():(q([].concat(s(R),[e])),le([].concat(s(R),[e])),z([].concat(s(M),[null==e||null===(n=e.id)||void 0===n?void 0:n.toString()])),ce([].concat(s(M),[null==e||null===(r=e.id)||void 0===r?void 0:r.toString()])),p("",!1,!1),H(""),setTimeout((function(){T(!1)})))}}," ",e.labelText?e.labelText:null!=e&&e.label?Object(o.decodeEntities)(null==e?void 0:e.label):Object(o.decodeEntities)(null==e?void 0:e.name))}))))))}},341:function(e,t,n){},342:function(e,t,n){"use strict";var r=n(0),a=(n(371),n(11)),c=n.n(a),l=n(4),i=n(1),o=n(6),u=n(2),s=(n(51),n(5)),f=n.n(s);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var m=null;t.a=function(e){e.emptyOption;var t=e.onChange,n=e.value,a=e.apiEndPoint,s=(e.hintLabel,e.label),d=void 0===s?Object(i.__)("Select Page","funnel-builder"):s,p=e.error,v=Object(r.useRef)(),y=b(Object(r.useState)(""),2),O=y[0],j=y[1],h=b(Object(r.useState)(n),2),_=h[0],g=h[1],w=b(Object(r.useState)(),2),E=w[0],S=w[1],N=b(Object(r.useState)(!1),2),k=N[0],x=N[1],P=b(Object(r.useState)(""),2),C=P[0],A=P[1],T=b(Object(r.useState)(0),2),I=T[0],D=T[1];Object(l.pb)(v,(function(){k||j("")}));var L=function(e){g(e),j("")};Object(r.useEffect)((function(){O&&D(0)}),[O]);var F=function(e){t(e)};return Object(r.useEffect)((function(){if(O.length>=3){x(!0);try{if(clearTimeout(m),O!==C)m=setTimeout((function(){A(O);var e=a.includes("?")?"".concat(a,"&term=").concat(O):"".concat(a,"?term=").concat(O);c()({path:Object(l.u)(e)}).then((function(e){x(!1),e.success?S(e.data.pages||e.data.products):S([{ID:"no-data-found",name:"No result found"}])}))}),600);else{var e=JSON.parse(JSON.stringify(E));S(e),x(!1)}}catch(e){}}else clearTimeout(m),x(!1)}),[O]),Object(r.createElement)("div",{className:f()("bwf-custom-select",{"is-selected":!Object(u.isEmpty)(_)})},Object(r.createElement)("div",{className:"form-group required wffn_field_space bwf-display-flex"},Object(r.createElement)("label",{className:"bwf-custom-select-label"},d),Object(r.createElement)("div",{className:"field-wrap",ref:v},Object(r.createElement)("div",{className:" multiselect multiselect--above"},Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("input",{type:"text",autoFocus:!0,value:O,onChange:function(e){return j(e.target.value)},autoComplete:"off",placeholder:"".concat(0==_.length?"Search..":""),className:f()("multiselect__input",{"bwf-error-border":0===O.length&&p}),style:Object(u.isEmpty)(_)?{}:{display:"none"},disabled:!Object(u.isEmpty)(_),onKeyDown:function(e){38===e.keyCode&&I>0?D(I-1):40===e.keyCode&&I<E.length-1&&D(I+1)},onKeyPress:function(e){var t,n;"Enter"===e.key&&"no-data-found"!==(null===(t=E[I])||void 0===t?void 0:t.ID)&&(e.preventDefault(),L(null===(n=E[I])||void 0===n?void 0:n.name),F(E[I]))}}),!Object(u.isEmpty)(_)&&Object(r.createElement)("span",{className:"bwf-selected-item"},"string"==typeof _?_:_.name),""!=_&&Object(r.createElement)("div",{className:"bwf-custom-select-clear",onClick:function(){g(""),F("")}},Object(r.createElement)(o.a,{icon:"dismiss-circle",size:"16"}))),Object(r.createElement)("div",{className:" ".concat(O&&3<=O.length?"multiselect__content-wrapper":"bwf-hide"," ")},k?Object(r.createElement)("div",{className:"multiselect__option"},Object(i.__)("Fetching Details","funnel-builder")):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},null==E?void 0:E.map((function(e,t){return Object(r.createElement)("li",{className:"bwf_multiselect__element",onMouseOver:function(){return D(t)},onClick:function(){"no-data-found"!==e.ID&&(L(null==e?void 0:e.name),F(e))},key:"multiselect__content--key-".concat(t)},e&&"no-data-found"!==e.ID&&Object(r.createElement)("span",{"data-select":Object(i.__)("Press enter to select","funnel-builder"),"data-selected":Object(i.__)("Selected","funnel-builder"),"data-deselect":Object(i.__)("Press enter to remove","funnel-builder"),className:" multiselect__option ".concat(I===t?"multi-select-active":null)},Object(r.createElement)("span",null,null==e?void 0:e.name)),e&&"no-data-found"==e.ID&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.name))})))))),0!==O.length?Object(r.createElement)("div",{className:"bwf-field-hints",style:{fontSize:"12px",margin:"2px",color:"#3c434a"}},Object(i.__)("Enter minimum 3 letters","funnel-builder")):p&&Object(r.createElement)("div",{className:"bwf-error-text"},p))))}},346:function(e,t,n){"use strict";var r=n(0),a=n(121),c=n(2),l=n(1),i=n(391),o=n(292),u=n(76),s=n(308);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=f(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==f(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(e){var t=Object(o.a)(),n=t.getTemplates,f=t.getBuilders,d=t.getDefaultBuilder,m=t.templateLoading,v=t.getActiveBuilder,y=t.getActiveGroup,O=t.getCurrentTemplate,j=t.getActiveStep,h=t.getActiveSubFilter,_=e.onImportComplete,g=e.isStoreCheckout,w=e.storeCheckoutId,E=(e.hasCheckoutStep,e.urlDependency),S=void 0===E||E,N=e.stepId,k=e.funnelId,x=Object(u.a)(),P=x.setActiveGroup,C=(x.setActiveSubFilter,x.setActiveBuilder),A=x.setCurrentTemplate,T=p(p({wc_checkout:Object(l.__)("Checkout","funnel-builder")},!g&&{landing:Object(l.__)("Sales","funnel-builder")}),{},{upsell:Object(l.__)("One Click Upsell Offers","funnel-builder"),wc_thankyou:Object(l.__)("Thank You","funnel-builder")},!g&&{optin:Object(l.__)("Optin","funnel-builder"),optin_ty:Object(l.__)("Optin Confirmation","funnel-builder")}),I=Object(a.useParams)(),D=I.id,L=I.filter,F=I.builder,M=I.templateId,z=b(Object(r.useState)(!1),2),B=z[0],R=z[1],q=n();Object(r.useEffect)((function(){return F&&(P(L),C(F),A({id:M})),function(){P("funnel")}}),[]);var U=function(e){return!(!e||!e.group_type)&&Object.keys(e.group_type)[0]};Object(r.useEffect)((function(){if(!Object(c.isEmpty)(q)&&!B&&F){var e=q[L][F][M];A({id:M,template:e}),R(!0)}}),[q]);var V=f(),H=d(),G=v(),K=m(),J=y(),$=O(),Y=(j(),h()),Q=function(){var e=H;return Object(c.isEmpty)(G)||(e=G),V&&V[J]&&!V[J][e]&&(e=V[J][H]?H:"elementor"),e},W=function(e,t,n){return("wc_checkout"===t||"optin"===t)&&Y&&G?q[t][G][e].group_type[n||Y]:e},X=function(e){return"wc_checkout"===J?Y===e.no_steps:"optin"!==J||e.group.includes(Y)},Z=function(e,t,n){var r="";return"landing"===J?r="sp":"optin"===J?r="op":"optin_ty"===J?r="op-confirmed":"wc_checkout"===J?r="checkouts":"upsell"===J?r="offer":"wc_thankyou"===J&&(r="order-confirmed"),"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===J&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ee=g?"/store-checkout":0===D?"/templates":"/funnels/".concat(D);return Object(r.createElement)(i.a,{filters:s.e,templates:q,activeBuilder:Q(),templateCards:function(){if(Object(c.isEmpty)(q)||Object(c.isEmpty)([J]))return{};var e=Q(),t={};return q[J]&&q[J][e]&&(t=q[J][e]),t}(),editors:V,defaultBuilder:H,isTemplateLoading:K,activeTemplateGroup:J,templateGroup:T,previewData:function(){if(Object(c.isEmpty)(q)||"funnel"===J)return{};var e={},t=[],n=[];try{var r=Q();for(var a in t=[],q[J][r]){var l=q[J][r][a];if(!l.build_from_scratch&&X(l)){var i={};if(i.id=a,i.funnel=l.group_type?l.group_type[Object.keys(l.group_type)[0]]:a,i.slug=a,i.name=l.name,i.thumbnail=l.thumbnail,i.template=null==$?void 0:$.id,i.pro=l.pro,i.group_type=l.group_type,i.type=J,i.preview=null==l?void 0:l.prevslug,t.push(i),l.group_type)Object.values(l.group_type).forEach((function(e){var t=q[J][r][e];n.push({id:null==t?void 0:t.prevslug,preview:Z(0,t,r)})}));else n.push({id:null==l?void 0:l.prevslug,preview:Z(0,l,r)})}}var o=q[J][r][W(null==$?void 0:$.id,J)];e.activeTemplate={thumbnail:W(null==$?void 0:$.id,J),preview:Z(null==$||$.id,o,r),slug:W(null==$?void 0:$.id,J),name:null!=$&&$.id?q[J][r][null==$?void 0:$.id].name:"",pro:null!=$&&$.id?q[J][r][null==$?void 0:$.id].pro:"",tempPro:null!=$&&$.id?q[J][r][W(null==$?void 0:$.id,J,!("wc_checkout"!==J&&"optin"!==J||!U($.template))&&U($.template))].pro:"",group:J,filters:!!o.group_type&&Object.keys(o.group_type),type:J,funnelGroup:[J],prevId:o.prevslug},e.thumbnails=t,e.previews=n}catch(e){console.log("Failed to prepare template preview data:",e)}return e},funnelId:N&&k?k:g&&w?w:D,onImportComplete:_,templateFilterCheck:function(e,t){return"wc_checkout"===J?t===e.no_steps:"optin"!==J||(null===(n=e.group)||void 0===n?void 0:n.includes(t));var n},activeFilter:Y,showDefaultEditorNotice:!1,isStoreCheckout:g,parentRoute:ee,showTemplatesNav:!(N||g&&0===D),urlDependency:S,stepId:N,importApiPrefix:g?"store-checkout":"funnels"})}},348:function(e,t,n){"use strict";var r=n(0),a=n(5),c=n.n(a),l=n(4),i=n(1),o=n(9),u=n(11),s=n.n(u),f=n(2),b=n(75),d=n(351),m=n(61),p=n(312),v=n(22),y=n(6),O=(n(370),n(51)),j=n(21);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=h(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==h(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var E=[Object(i.__)("New Features","funnel-builder"),Object(i.__)("New Add-ons & Integrations","funnel-builder"),Object(i.__)("World Class Support","funnel-builder"),Object(i.__)("Security Improvements","funnel-builder"),Object(i.__)("Wordpress Compatibility","funnel-builder"),Object(i.__)("Marketing & Payment Compatibility","funnel-builder")],S=function(e){var t=e.onclose,n=e.onAction,a=e.isLoading,c=void 0!==a&&a;return Object(r.createElement)(o.Modal,{className:"bwf-c-s-delete-model bwf-admin-modal bwf-admin-modal-small bwf-admin-modal-no-header bwf-alert-modal bwf-deactivate-modal",isDismissible:!1,onRequestClose:t},Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(i.__)("Deactivating License","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(i.__)("Close"),onClick:function(){return t()}},Object(r.createElement)(y.a,{icon:"close",size:20}))),Object(r.createElement)("div",{className:"bwf-content bwf-mt-16"},Object(r.createElement)("span",null,Object(i.__)("You will lose access to the following active license benefits:","funnel-builder")),Object(r.createElement)("br",null),Object(r.createElement)("ul",null,E.map((function(e,t){return Object(r.createElement)("li",{key:"feature-".concat(t)},Object(r.createElement)(y.a,{icon:"cross-circle",color:j.DANGER_COLOR,size:"20"}),e)})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-mt-24"},Object(r.createElement)(o.Button,{className:"bwf-modal-cancel-btn bwf-strong ".concat(c?"bwf-is-active":""),onClick:function(){c||n()}},Object(r.createElement)("span",{style:g({},c&&{visibility:"hidden"})},Object(i.__)("Deactivate","funnel-builder")),c&&Object(r.createElement)(O.a,{color:"#0073aa",style:{position:"absolute"}})),Object(r.createElement)(o.Button,{isPrimary:!0,className:"bwf-btn-medium",onClick:function(){return t()},disabled:c},Object(i.__)("Cancel","funnel-builder")))))},N=n(12),k=n.n(N),x=n(23);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){C=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",o=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof v?t:v,l=Object.create(c.prototype),i=new A(r||[]);return a(l,"_invoke",{value:S(e,n,i)}),l}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var b="suspendedStart",d="executing",m="completed",p={};function v(){}function y(){}function O(){}var j={};u(j,l,(function(){return this}));var h=Object.getPrototypeOf,_=h&&h(h(T([])));_&&_!==n&&r.call(_,l)&&(j=_);var g=O.prototype=v.prototype=Object.create(j);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,c,l,i){var o=f(e[a],e,c);if("throw"!==o.type){var u=o.arg,s=u.value;return s&&"object"==P(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,i)}))}i(o.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function S(t,n,r){var a=b;return function(c,l){if(a===d)throw Error("Generator is already running");if(a===m){if("throw"===c)throw l;return{value:e,done:!0}}for(r.method=c,r.arg=l;;){var i=r.delegate;if(i){var o=N(i,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===b)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?m:"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=m,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var c=f(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,p;var l=c.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(P(t)+" is not iterable")}return y.prototype=O,a(g,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:y,configurable:!0}),y.displayName=u(O,o,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,u(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},w(E.prototype),u(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var l=new E(s(e,n,r,a),c);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(g),u(g,o,"Generator"),u(g,l,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var l=this.tryEntries[c],i=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var o=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(o&&u){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,p):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function A(e,t,n,r,a,c,l){try{var i=e[c](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.id,n=e.label,a=e.license,u=void 0===a?"":a,O=e.setSettingFieldSchema,j=e.is_manually_deactivated,h=e.activated,_=e.expired,g=function(){return Object(f.isEmpty)(u)||h||_||j?Object(f.isEmpty)(u)||!_||j?!h||Object(f.isEmpty)(u)||j?j?"deactivated":"empty":"activated":"expired":"invalid"},w=function(e){var t=e||g();switch(t){case"activated":case"expired":case"invalid":return u.licence?"xxxxxxxxxxxxxxxxxxxxxxxxxx"+u.licence.substring(26):Object(f.isEmpty)(u.api_key)||"activated"!==t?"":u.api_key;default:return""}},E=Object(x.a)().setProData,N=Object(m.a)().setLiteBar,P=Object(d.a)().updateLicense,I=T(Object(r.useState)((function(){return w()})),2),D=I[0],L=I[1],F=T(Object(r.useState)({loading:!1,status:!1}),2),M=F[0],z=F[1],B=T(Object(r.useState)(""),2),R=B[0],q=B[1],U=T(Object(r.useState)(!1),2),V=U[0],H=U[1],G=T(Object(r.useState)(!1),2),K=G[0],J=G[1],$=T(Object(r.useState)(!1),2),Y=$[0],Q=$[1],W=Object(p.a)().data;Object(r.useEffect)((function(){Object(f.size)(D)?(q(""),Q(!0)):Y&&!Object(f.size)(D)&&q(Object(i.__)("Please enter licence key","funnel-builder"))}),[D]);var X=function(){var e,n=(e=C().mark((function e(){return C().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),e.prev=1,e.next=4,s()({path:Object(l.u)("/license/"),method:"POST",data:{name:t,action:"activated"!==g()?"activate":"deactivate",key:D}}).then((function(e){if(200===e.code){var t,n=e.name,a=e.license_data,c=void 0!==a&&a,l=e.license_exist,o=void 0===l?{}:l;e.pro_status,Object(f.isEmpty)(o)||(wffn_contacts_data.license_exist=o),E(e.lev),"activated"!==g()?(N(2),wffn_contacts_data.is_pro=1):(N(1),wffn_contacts_data.is_pro=0);var u=(null===(t=W.woofunnels_general_settings[0])||void 0===t||null===(t=t.tabs)||void 0===t?void 0:t.general).fields.map((function(e){return n===e.id&&(e.license=c,"activated"!==g()?(e.is_manually_deactivated=0,e.expired=0,e.activated=1,wffn_contacts_data.is_pro=1):(e.activated=0,e.is_manually_deactivated=1,wffn_contacts_data.is_pro=0)),e}));O(u),P(u),z({status:!0,loading:!1,content:Object(r.createElement)("div",{className:"bwf-t-center"},Object(r.createElement)("div",{className:"bwf-mt-8"},Object(r.createElement)(y.a,{icon:"check-circle",size:"72"})),Object(r.createElement)("div",{className:"bwf-licence-status"},"activated"!==g()?Object(i.__)("License Activated","funnel-builder"):Object(i.__)("Successfully Deactivated","funnel-builder")))}),J(!1),H(!1)}else 400===e.code&&(J(!1),z({modalTitle:Object(i.__)("License Activation Failed","funnel-builder"),status:!0,error:e.error,hide:8e3}))}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),J(!1),z({status:!0,error:e.t0.message});case 10:case"end":return e.stop()}}),e,null,[[1,6]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){A(c,r,a,l,i,"next",e)}function i(e){A(c,r,a,l,i,"throw",e)}l(void 0)}))});return function(){return n.apply(this,arguments)}}(),Z=function(){switch(g()){case"activated":return!0;default:return!1}};Object(r.useEffect)((function(){"deactivated"===g()?L(w("deactivated")):"activated"===g()&&L(w("activated"))}),[g()]);var ee=w()===D&&Object(f.isEmpty)(R)&&Object(r.createElement)("p",{className:"hint"},Object(r.createElement)("span",{className:"bwfan-error"},e.activated?Object(i.__)("License expired on ","funnel-builder")+k()(null==u?void 0:u.expires).format(Object(l.U)()):Object(i.__)("This license needs to be reactivated. Please contact support for any assistance","funnel-builder"),". "),Object(r.createElement)("span",{className:"is-reset-text"},e.activated?Object(i.__)("Got New License? ","funnel-builder"):"",Object(r.createElement)("span",{className:"is-link",onClick:function(){return L("")}},Object(i.__)("Reset","funnel-builder"))));return Object(r.createElement)("div",{className:c()("bwf-components-licence")},n&&Object(r.createElement)("label",{className:"components-label"},n),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf--g16"},Object(r.createElement)("div",{className:"bwf-flex bwf--align-start bwf-flex-column"},Object(r.createElement)(o.TextControl,{className:c()("bwf-license-text-input",{"has-error":Object(f.size)(R)||"expired"===g()&&w()===D}),placeholder:Object(i.__)("Enter license key here","funnel-builder"),disabled:Z(),value:D,autoComplete:"off",onChange:function(e){return L(e)}}),Object(f.size)(R)?Object(r.createElement)("div",{className:"bwf-error-text"},R):null),Object(r.createElement)(v.a,{isSecondary:"empty"===g()||"deactivated"===g()||"expired"===g()||"invalid"===g(),isBusy:"activated"!==g()&&K,disabled:K,className:c()("bwf-ripple bwf-license-action-btn",{"is-inactive":"activated"===g()}),onClick:function(){return function(){return Object(f.isEmpty)(D)?(Q(!0),void q(Object(i.__)("Please enter licence key","funnel-builder"))):"activated"!==g()&&D.startsWith("xxxx")?(Q(!0),void q(Object(i.__)("Please enter a valid licence key","funnel-builder"))):void("activated"===g()?(Q(!1),H(!0)):X())}(u,j)}},function(){switch(g()){case"activated":return Object(i.__)("Deactivate","funnel-builder");default:return Object(i.__)("Activate","funnel-builder")}}())),function(){switch(g()){case"activated":return Object(r.createElement)("p",{className:"hint"},"3"===(null==u?void 0:u.subscription_status)&&u.expires?Object(r.createElement)(r.Fragment,null,Object(i.__)("This license has been cancelled and will expire on ","funnel-builder"),k()(null==u?void 0:u.expires).format("MMMM D, YYYY")):u.expires?Object(r.createElement)(r.Fragment,null,Object(i.__)("License Expires on ","funnel-builder"),k()(null==u?void 0:u.expires).format("MMMM D, YYYY")):Object(i.__)("Lifetime license","funnel-builder"));case"empty":case"deactivated":return Object(r.createElement)("div",{className:"hint bwf-content"},Object(i.__)("Already Purchased? Access your license key in your account. ","funnel-builder"),Object(r.createElement)("a",{href:"https://myaccount.funnelkit.com/",target:"_blank",rel:"noreferrer"},Object(i.__)("Login to your FunnelKit Account","funnel-builder")));case"expired":case"invalid":return ee}}()),Object(r.createElement)(b.a,{confirmText:M.confirmText,modalTitle:M.modalTitle,confirmButtonText:M.buttonConfirm,cancelButtonText:M.buttonCancel,onConfirm:M.onConfirm,isLoading:M.loading,successMessage:M.success,errorMessage:M.error,content:M.content,onRequestClose:function(){return z({status:!1})},isOpen:M.status,autoHide:M.hide,closeIcon:!0}),V&&Object(r.createElement)(S,{isLoading:K,onAction:function(){X()},onclose:function(){return H(!1)}}))}},351:function(e,t,n){"use strict";var r=n(2),a=n(16),c=n(4),l=n(312);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=["fetch","setStateProp"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=i(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.a=function(){var e=Object(a.a)("settings"),t=e.fetch,n=e.setStateProp,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,o),u=Object(l.a)().data,f=void 0===u?{}:u,b=(f.woofunnels_general_settings&&f.woofunnels_general_settings.general||{}).fields,d=void 0===b?[]:b;return s(s({},i),{},{fetch:function(){t("GET",Object(c.u)("/funnels/global-settings/"))},setSettingsData:function(e){return n("data",e)},updateLicense:function(e){d&&Object(r.isArray)(d)&&d.length&&(f.woofunnels_general_settings.general.fields=e,n("data",f))}})}},360:function(e,t,n){},368:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(113),l=n(29),i=n(4),o=n(41),u=n(61),s=n(28),f=n(40),b=n(13),d=["funnel_id"];t.a=function(e){var t,n,m,p=e.selected,v=e.headerData,y=e.funnelID,O=e.stepId,j=e.type,h=e.checkoutId,_=e.offerId,g=e.editor,w=Object(s.a)(),E=w.setFunnelTitle,S=w.setFunnelData,N=Object(o.a)(),k=N.getFunnelData,x=N.getLoading,P=N.getPreviousStep,C=N.getStepId,A=Object(f.a)(),T=A.setStepFunnelData,I=(A.setStepData,k()),D=x(),L=P(),F=C(),M=Object(b.i)(),z=M.funnel_id,B=(function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}}(M,d),l.a.getSteps().filter((function(e){return"wfob"===j?e.id===h:e.id===O}))),R=null===(t=B[0])||void 0===t||null===(t=t.substeps)||void 0===t?void 0:t.wc_order_bump,q=null==R?void 0:R.filter((function(e){return e.id==O})),U=null===(n=B[0])||void 0===n||null===(n=n.substeps)||void 0===n?void 0:n.offer,V=null==U?void 0:U.filter((function(e){return e.id==_})),H="";if("wfob"===j)void 0!==q&&(H=null===(m=q[0])||void 0===m?void 0:m._data.title);else if("offer"===j){var G;if(void 0!==V)H=null===(G=V[0])||void 0===G?void 0:G._data.title}else{var K;H=null===(K=B[0])||void 0===K?void 0:K._data.title}var J=Object(a.size)(v),$=Object(u.a)(),Y=$.setActiveMultiple,Q=($.resetHeaderMenu,$.setL2NavType),W=$.setL2Nav,X=$.setStepHeader,Z=$.setPageBackLink,ee=$.setIsStepNavActive;$.setL2PostTitle;Object(r.useEffect)((function(){var e;X(""),Q("menu"),W(v),Y({leftNav:Object(i.fb)()?"store-checkout":"funnels",rightNav:p}),ee(!0),Z((e="admin.php?page=bwf&path=","experiment"===L?"".concat(e).concat(Object(i.fb)()?"/store-checkout":"/funnels/".concat(y),"/experiments/").concat(F):"canvas"===L?"".concat(e).concat(Object(i.fb)()?"/store-checkout":"/funnels/".concat(y),"/canvas"):"".concat(e).concat(Object(i.fb)()?"/store-checkout/steps":"/funnels/".concat(y,"/steps")))),X(Object(r.createElement)(c.a,{stepId:O,modalTitle:H,type:j,offerId:_,checkoutId:h,disabled:J?[]:["preview"]}))}),[p,y,O,H,j,g,_,h,J]);var te=I.title,ne=void 0===te?"":te,re=I.status,ae=void 0===re?"":re,ce=I.id;return Object(r.useEffect)((function(){Object(a.size)(I)>0&&(D||""===ne||(E(ne),S("status",ae)),Object(i.fb)()||!ce||z||Object(b.k)({funnel_id:ce}))}),[D,I,ce,z]),Object(r.useEffect)((function(){return function(){ee(!1),W({}),Z(""),T({})}}),[]),!0}},369:function(e,t,n){},370:function(e,t,n){},371:function(e,t,n){},372:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(4),l=(n(406),n(6)),i=n(2),o=["options","label","selected","onChange","disabled"];function u(e){return function(e){if(Array.isArray(e))return b(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return b(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.options,n=e.label,f=e.selected,b=e.onChange,d=e.disabled,m=void 0!==d&&d,p=(function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}}(e,o),Object(r.useRef)()),v=s(Object(r.useState)(!1),2),y=v[0],O=v[1],j=s(Object(r.useState)([]),2),h=j[0],_=j[1],g=s(Object(r.useState)([]),2),w=g[0],E=g[1],S=s(Object(r.useState)(""),2),N=S[0],k=S[1],x=s(Object(r.useState)(t),2),P=x[0],C=x[1],A=s(Object(r.useState)(0),2),T=A[0],I=A[1],D=s(Object(r.useState)({}),2),L=D[0],F=D[1],M=s(Object(r.useState)(),2),z=M[0],B=M[1];Object(c.pb)(p,(function(){return O(!1)})),Object(r.useEffect)((function(){if(Array.isArray(f)&&f.length>0){_(f);var e=null==f?void 0:f.map((function(e){return e.value}));E(e)}}),[]),Object(r.useEffect)((function(){I(0)}),[y]),Object(r.useEffect)((function(){Object(i.size)(P)>1&&void 0!==P&&P.forEach((function(e,t){t===T&&B(null==e?void 0:e.value)}))}),[T,y]),Object(r.useEffect)((function(){Object(i.size)(P)>1&&void 0!==P&&P.forEach((function(e,t){(null==e?void 0:e.value)==(null==z?void 0:z.value)&&I(t)}))}),[z]);return Object(r.useEffect)((function(){if(Object(i.size)(P)>1&&void 0!==P){var e=P.filter((function(e,t){var n;if(null==w||!w.includes(null==e||null===(n=e.value)||void 0===n?void 0:n.toString()))return e}));F(e)}}),[w]),Object(r.useEffect)((function(){b(h)}),[h,w]),Object(r.useEffect)((function(){var e=null==t?void 0:t.filter((function(e){return""==N||e.label.toLowerCase().includes(N.toLowerCase())?e:void 0}));Object(i.isEmpty)(e)?C([{value:"no-data-found",label:"No Data Found"}]):C(e)}),[N]),Object(r.createElement)("div",{className:"bwf-multi-select components-base-control bwf-multiselect-control ".concat(m?"is-disabled":"")},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",{className:"components-base-control__label"},n),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("div",{className:"multiselect ".concat(y&&"multiselect--active"," "),style:{width:"30%"},tabIndex:"-1",onClick:function(){return O((function(e){return!e}))},ref:p},Object(r.createElement)("div",{className:"multiselect__select"},Object(r.createElement)(l.a,{icon:"angle-down",size:"16"})),Object(r.createElement)("div",{className:"multiselect__tags"},Object(r.createElement)("div",{className:"multiselect__tags-wrap"},null==h?void 0:h.map((function(e,t){return Object(r.createElement)("span",{className:"multiselect__tag bwf-badge",key:t},Object(r.createElement)("span",null,e.label," "),Object(r.createElement)("span",{onClick:function(){var t=h.filter((function(t){return t.value!==e.value}));_(t);var n=t.map((function(e){return e.value}));E(n),O(!1)}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:12,height:12})))}))),Object(r.createElement)("div",{className:"multiselect__spinner",style:{display:"none"}}),0==h.length&&Object(r.createElement)("span",null,Object(r.createElement)("span",{className:"multiselect__single"},"Select option"))),Object(r.createElement)("div",{className:"".concat(y?"multiselect__content-wrapper":"bwf-hide")},Object(r.createElement)("ul",{className:"multiselect__content",style:{display:"inline-block"}},Object(r.createElement)("li",null,y&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("input",{type:"text",autoComplete:"off",autoFocus:!0,onChange:function(e){return k(e.target.value)},ref:function(e){e&&e.style.setProperty("margin-left","unset","important")},className:"bwf__multiselect__input",onKeyDown:function(e){38===e.keyCode&&T>0?L.map((function(e,t){e.value==z&&B(L[t-1])})):40===e.keyCode&&T<(null==P?void 0:P.length)-1&&L.map((function(e,t){e.value==z&&B(L[t+1])}))},onKeyPress:function(e){if("Enter"===e.key){var t,n,r;if(e.preventDefault(),!w.includes(null===(t=P[T])||void 0===t?void 0:t.value))_([].concat(u(h),[P[T]])),E([].concat(u(w),[null===(r=P[T])||void 0===r?void 0:r.value]));if(w.includes(null===(n=P[T])||void 0===n?void 0:n.value)){var a=h.filter((function(e){var t;return e.value!==(null===(t=P[T])||void 0===t?void 0:t.value)}));_(a);var c=a.map((function(e){return e.value}));E(c)}setTimeout((function(){O(!1)})),k("")}},placeholder:Object(a.__)("Search...","funnel-builder"),value:N||""}),Object(r.createElement)("span",{className:"bwf_multiselect_input_icon"},Object(r.createElement)(l.a,{icon:"search",width:16,height:16})))),P.map((function(e,t){return Object(r.createElement)("li",{className:"multiselect__element_value",key:t,onClick:function(){if("no-data-found"!==e.value){if(w.includes(e.value)||(_([].concat(u(h),[e])),E([].concat(u(w),[e.value]))),w.includes(e.value)){var t=h.filter((function(t){return t.value!==e.value}));_(t);var n=t.map((function(e){return e.value}));E(n)}setTimeout((function(){O(!1)})),k("")}},onMouseOver:function(){return I(t)},id:"customSelect",tabIndex:"0"},e&&"no-data-found"!==e.value&&Object(r.createElement)("span",{"data-select":Object(a.__)("Press enter to select","funnel-builder"),"data-selected":Object(a.__)("Select to remove","funnel-builder"),"data-deselect":Object(a.__)("Press enter to remove","funnel-builder"),className:" multiselect__option  ".concat(w.includes(e.value)&&"multiselect__option--selected","  ").concat(T===t?"multi-select-active":null," ").concat(T===t?"multi-select-selected-data":null," ")},Object(r.createElement)("span",null,null==e?void 0:e.label)),e&&"no-data-found"==e.value&&Object(r.createElement)("span",{className:" multiselect__option "},null==e?void 0:e.label))}))))))))}},373:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(9),l=n(22),i=n(2),o=n(277);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t,n,c,s=e.title,f=e.desc,b=e.options,d=u(Object(r.useState)(null===(t=b[0])||void 0===t?void 0:t.key),2),m=d[0],p=d[1],v=function(e){return b.find((function(t){return t.key===e}))};return Object(r.createElement)("div",{className:"bwf-card"},Object(r.createElement)("div",{className:"bwf-text-style-7"},s),Object(r.createElement)(o.b,{className:"bwf-mt-16",options:b,selected:m,onChange:function(e){return p(e)}}),Object(r.createElement)("div",{className:"bwf-mt-12 bwf-text-style-3 bwf-color-normal"},f),Object(r.createElement)("div",{className:"bwf-flex bwf-mt-24 bwf--space-between"},Object(i.size)(null===(n=v(m))||void 0===n?void 0:n.setting_url)?Object(r.createElement)(l.a,{className:"bwf-btn-gray is-secondary is-small"},Object(a.__)("Go to Settings","funnel-builder")):null,Object(r.createElement)("a",{href:null===(c=v(m))||void 0===c?void 0:c.documentation_url,target:"__blank",className:"bwf-text-bold"},Object(a.__)("View Docs","funnel-builder"))))},b=(n(360),n(307)),d=function(e){var t,n=e.experimentData;if(Object(i.size)(null==n?void 0:n.post_slug)||Object(i.size)(null==n?void 0:n.variants))return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-url-list"},Object(i.size)(null==n?void 0:n.post_slug)?Object(r.createElement)("div",{className:"bwf-container"},Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",{className:"bwf-text-light"},null==n?void 0:n.title,":")),Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",null,"/",null==n?void 0:n.post_slug))):null,Object(i.size)(null==n?void 0:n.variants)?null==n||null===(t=n.variants)||void 0===t?void 0:t.map((function(e,t){var n=e.title,a=e.control,c=e.post_slug,l=e.isControl,i=void 0!==l&&l,o=e.view_link,u=o?new URL(o).pathname.replace(/^\//,""):"";return Object(r.createElement)("div",{className:"bwf-container",key:t},Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",{className:"bwf-text-light"},n,":"),i?Object(r.createElement)("span",{className:"bwf-text-style-3"},"  ( ".concat(a?"Original":"Variant"," )")):null),Object(r.createElement)("div",{className:"bwf-break-word"},Object(r.createElement)("span",null,"/",c||u)))})):null))},m=[{title:Object(a.__)("Plugins","funnel-builder"),desc:Object(a.__)("Add the URLs in plugin settings to exclude them from cache.","funnel-builder"),key:"plugins"},{title:Object(a.__)("CDNs","funnel-builder"),desc:Object(a.__)("Add the URLs in the CDN's panel to exclude from cache.","funnel-builder"),key:"cdns"},{title:Object(a.__)("Hostings","funnel-builder"),desc:Object(a.__)("Add the URLs in Hosting's panel to exclude from cache.","funnel-builder"),key:"hostings"}],p={variants:[{id:5259,edit:"http://admin.local/wp-admin/admin.php?page=wfacp&wfacp_id=5259",title:"Checkout",desc:"",traffic:"20",control:!0,winner:!1,active:!0,view_link:"http://admin.local/checkouts/checkout-5/"},{id:5390,edit:"http://admin.local/wp-admin/admin.php?page=wfacp&wfacp_id=5390",title:"Checkout  Copy",desc:"",traffic:"40",control:!1,winner:!1,active:!0,view_link:"http://admin.local/checkouts/checkout-copy-19/"},{id:5392,edit:"http://admin.local/wp-admin/admin.php?page=wfacp&wfacp_id=5392",title:"Checkout  Copy",desc:"",traffic:"40",control:!1,winner:!1,active:!0,view_link:"http://admin.local/checkouts/checkout-copy-20/"}]},v=[{label:"W3 Total Cache",key:"w3-total-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/w3-total-cache/",setting_url:"",type:"plugins"},{label:"WP Super Cache",key:"wp-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/wp-super-cache/",setting_url:"",type:"plugins"},{label:"WP Fastest Cache",key:"wpFastestCache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/wp-fastest-cache/",setting_url:"",type:"plugins"},{label:"WP Rocket Cache",key:"wp-rocket",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/wp-rocket/",setting_url:"",type:"plugins"},{label:"Comet Cache",key:"comet-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/comet-cache/",setting_url:"",type:"plugins"},{label:"LiteSpeed Cache",key:"litespeed-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/litespeed-cache/",setting_url:"",type:"plugins"},{label:"Hyper Cache",key:"plugin",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/hyper-cache/",setting_url:"",type:"plugins"},{label:"Cachify Cache",key:"cachify",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/cachify/",setting_url:"",type:"plugins"},{label:"Simple Cache",key:"simple-cache",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/simple-cache/",setting_url:"",type:"plugins"},{label:"WP Hummingbird Cache",key:"wp-hummingbird",documentation_url:"https://funnelkit.com/docs/aerocheckout/caching/hummingbird-page-speed-optimization/",setting_url:"",type:"plugins"},{label:"SiteGround",key:"siteGround",documentation_url:"https://funnelkit.com/docs/checkout-pages/caching/siteground/",setting_url:"",type:"plugins"},{label:"Breeze",key:"breeze",documentation_url:"https://funnelkit.com/docs/checkout-pages/caching/breeze-cloudways/",setting_url:"",type:"plugins"},{label:"WP Engine",key:"wp-engine",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/wp-engine/",setting_url:"",type:"hostings"},{label:"Kinsta",key:"kinsta",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/kinsta/",setting_url:"",type:"hostings"},{label:"Bluehost",key:"bluehost",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/bluehost/",setting_url:"",type:"hostings"},{label:"Flywheel",key:"flywheel",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/flywheel/",setting_url:"",type:"hostings"},{label:"DreamHost",key:"dreamhost",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/dreamhost/",setting_url:"",type:"hostings"},{label:"Pressable",key:"pressable",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/pressable/",setting_url:"",type:"hostings"},{label:"Pagely",key:"pagely",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/pagely/",setting_url:"",type:"hostings"},{label:"Cloudways",key:"cloudways",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/cloudways/",setting_url:"",type:"hostings"},{label:"Cloudflare",key:"cloudflare",documentation_url:"https://funnelkit.com/docs/checkout-pages/hosting-caching/cloudflare/",setting_url:"",type:"hostings"},{label:"KeyCDN",key:"keycdn",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/keycdn/",setting_url:"",type:"cdns"},{label:"BunnyCDN",key:"bunnycdn",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/bunnycdn/",setting_url:"",type:"cdns"},{label:"WP Engine",key:"wp engine",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/wp-engines-cdn/",setting_url:"",type:"cdns"},{label:"Kinsta",key:"kinstaa",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/kinstas-cdn/",setting_url:"",type:"cdns"},{label:"SiteGround",key:"siteGround",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/siteground-cdn/",setting_url:"",type:"cdns"},{label:"Jetpack",key:"jetpack",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/jetpacks-site-accelerator/",setting_url:"",type:"cdns"},{label:"Amazon CloudFront",key:"amazon-cloudFront",documentation_url:"https://funnelkit.com/docs/checkout-pages/cdn-caching/amazon-cloudfront/",setting_url:"",type:"cdns"}];function y(){return(y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}t.a=function(e){var t=e.onCloseModal,n=e.experimentData,l=e.funnelId;return Object(i.isEmpty)(n)&&(n=p),Object(r.createElement)(c.Modal,{className:"bwf-admin-modal bwf-admin-modal-xl bwf-admin-modal-no-header bwf-custom-experiment-modal bwf-cache-modal",isDismissible:!0,onRequestClose:t},Object(r.createElement)(b.a,{title:Object(a.__)("How to exclude pages from cache?","funnel-builder"),onClose:function(){return t()}}),Object(r.createElement)("div",{className:"bwf-t-left"},Object(a.__)("Checkouts & Offers are dynamic pages whose URLs need to be excluded from caching Plugins, CDNs and Hosting providers.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-mt-24"},Object(r.createElement)("section",{className:"bwf-cs__timeline-item is-active"},Object(r.createElement)("div",{className:"bwf-cs__timeline-item-title"},Object(r.createElement)("span",{className:"bwf-cs__timeline-status is-active"}),Object(r.createElement)("span",null,Object(a.__)("Step 1: Choose Caching Provider","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-cs__timeline-item-body bwf-flex bwf--space-between"},m.map((function(e){var t=v.filter((function(t){return t.type===e.key}));return Object(r.createElement)(f,y({},e,{key:e.key,options:t}))})))),Object(r.createElement)("section",{className:"bwf-cs__timeline-item is-active"},Object(r.createElement)("div",{className:"bwf-cs__timeline-item-title"},Object(r.createElement)("span",{className:"bwf-cs__timeline-status is-active"}),Object(r.createElement)("span",null,Object(a.__)("Step 2: Add URLs to Exclusion List","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-cs__timeline-item-body"},Object(r.createElement)(d,{experimentData:n,funnelId:l}),Object(r.createElement)("div",{className:"bwf-text-style-3 bwf-color-normal"},Object(a.__)("Use wildcard characters as recommended by your caching provider to exclude all urls in one go","funnel-builder")))),Object(r.createElement)("section",{className:"bwf-cs__timeline-item is-active"},Object(r.createElement)("div",{className:"bwf-cs__timeline-item-title"},Object(r.createElement)("span",{className:"bwf-cs__timeline-status is-active"}),Object(r.createElement)("span",null,Object(a.__)("Step 3: Confirm Cache Exclusion","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-text-style-5 bwf-t-left"},Object(a.__)("Test these pages as a non-loggedin user in browser's incognito mode to confirm proper cache exclusions.","funnel-builder")),Object(r.createElement)("div",{className:"bwf-text-style-5 bwf-mt-16 bwf-flex bwf--g4 bwf-t-left"},Object(a.__)("Are you still confused?","funnel-builder"),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Support+Footer&utm_campaign=fb+lite+plugin",target:"__blank"},Object(a.__)("Contact support"))))))}},390:function(e,t,n){},392:function(e,t,n){"use strict";n.d(t,"b",(function(){return s})),n.d(t,"a",(function(){return O}));var r=n(0);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var s=function(e){var t=o(Object(r.useState)({}),2),n=t[0],a=t[1],c=Object.keys(n).length>0&&Object.keys(n).reduce((function(e,t){return e&&n[t]}),!0);Object(r.useEffect)((function(){var t={};if(e)for(var n in e)t[n]=!1;a(t)}),[e]);var u=Object(r.useCallback)((function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=l(l({},n),{},i({},e,t));a(r)}}),[n]),s=Object(r.useMemo)((function(){var e={};for(var t in n){var r={selected:n[t],checked:n[t],onChange:u(t)};e[t]=r}return e}),[n]),f=Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!c;a(e)}),[n,c]);return{singleSelectProps:s,selectAllProps:{selected:c,checked:c,onChange:f},floatingBarProps:{items:e,selected:n},resetSelection:Object(r.useCallback)((function(){var e={};for(var t in n)e[t]=!1;a(e)}),[n])}},f=n(9),b=n(1),d=n(6),m=(n(455),n(456),function(e){var t=e.number,n=void 0===t?0:t;return Object(r.createElement)("span",{className:"bwf-count-badge"},n)}),p=n(61);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var O=function(e){var t=e.selected,n=void 0===t?{}:t,a=e.items,c=void 0===a?{}:a,l=e.actions,i=void 0===l?[]:l,o=e.onAction,u=v(Object(r.useState)(!1),2),s=u[0],y=u[1],O=function(e){return e.length>0?{gridTemplateColumns:e.reduce((function(e){return"".concat(e," auto")}),"")}:{}}(i),j=Object(p.a)().setModalData,h=Object.keys(n).reduce((function(e,t){return n[t]?e+1:e}),0);Object(r.useEffect)((function(){y(h>0)}),[h]);var _=Object.keys(c).filter((function(e){return n[e]})).map((function(e){return c[e]})),g=Object(r.createElement)(r.Fragment,null,Object(r.createElement)(m,{number:h}),Object(r.createElement)("b",{style:{marginLeft:"5px"}},Object(b.__)("Items Selected","funnel-builder")));return s&&Object(r.createElement)("div",{className:"bwf-floating-action-bar-outer"},Object(r.createElement)("div",{className:"bwf-floating-action-bar"},Object(r.createElement)("div",{className:"bwf-floating-action-bar-wrapper"},Object(r.createElement)("span",{className:"bwf-floating-action-bar-count"},g),Object(r.createElement)("div",{className:"bwf-floating-action-bar-actions",style:O},i.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object(r.createElement)("span",{key:"bulk-action-".concat(t),title:e.hint?e.hint:"",onClick:function(){if(o){if("delete"===e.id){var t=_.length,n=1===_.length?_[0].title:"";j({title:n,count:t})}o(e.id,_)}}},Object(r.createElement)(d.a,{icon:e.icon}))}))),Object(r.createElement)(f.Button,{isSecondary:!0,onClick:function(){return y(!1)}},Object(b.__)("Close","funnel-builder")))))}},406:function(e,t,n){},407:function(e,t,n){"use strict";var r=n(0),a=n(1),c=n(121),l=n(5),i=n.n(l),o=(n(390),n(11)),u=n.n(o),s=n(9),f=n(4),b=n(283),d=n(277),m=n(295),p=n(286),v=n(348),y=n(281),O=n(342),j=function(e){var t=e.onCloseModal;e.link;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Add Product","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-large bwf-modal-edit-page"}))},h=n(13),_=n(22),g=n(19),w=n(2),E=n(55),S=n(110),N=n(372);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e){var t=function(e,t){if("object"!=k(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k(t)?t:t+""}function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var D={checkbox:s.CheckboxControl,radio:y.a,radios:y.a,select:d.b,textarea:s.TextareaControl,"custom-select":O.a,text:s.TextControl,input:s.TextControl,checklist:m.a,license:v.a,color:p.a,"bwf-label":function(e){var t=e.label;return Object(r.createElement)("span",{className:"bwf_label"},t)},number:function(e){var t=e.value,n=e.onChange,a=(e.errors,e.placeholder),c=e.label,l=e.required;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("label",{id:l?"required":""},c),Object(r.createElement)("input",{type:"number",value:t,onChange:function(e){return n(e.target.value)},placeholder:a}))},"multi-select":N.a},L=function(e){var t,n,l,o,s=Object(c.useParams)(),d=s.stepId,m=s.offerId,p=Object(h.i)().funnel_id,v=T(Object(r.useState)(!1),2),y=v[0],O=v[1],N=Object(g.b)().showSnackbar,x=Object(E.a)().setTabData,C=Object(S.a)().getStep,I=e.tabID,L=e.errorNotice,F=e.type,M=e.fields,z=e.disabled,B=e.saveSettings,R=C(F,d,"products",m).data,q=void 0===R?{}:R,U=T(Object(r.useState)(""),2),V=U[0],H=U[1],G=T(Object(r.useState)(!1),2),K=G[0],J=G[1],$=T(Object(r.useState)(""),2),Y=$[0];$[1];M&&M[I]&&(t=Object.assign({},M[I]),o=M),l=null!=t&&t.fields?t.fields:[],n=null!=t&&t.values?t.values:{};var Q=T(Object(r.useState)(l),2),W=Q[0],X=Q[1];Object(r.useEffect)((function(){return V&&(N(V),O(!1)),function(){H("")}}),[V]),Object(r.useEffect)((function(){X([]);var e=setTimeout((function(){return X(l)}));return function(){clearTimeout(e)}}),[l]);var Z=function(e){var t=o,n=(t[I],function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(t,[I].map(A)));return Object.values(n).forEach((function(t){var n=t.values;e=P(P({},n),e)})),e},ee=function(e,t,n){e.type=e.inputType?e.inputType:e.type,e.type=Array.isArray(e.styleClasses)&&e.styleClasses.includes("wp-color-picker")?"color":e.type;var a=e.type.toLowerCase()in D?D[e.type.toLowerCase()]:D.text;return z&&(t.disabled=!0),Object(r.createElement)("div",{className:i()("form-group",e.class||e.styleClasses,{"checkbox-control-wrap":"checkbox"===e.type},{"inline-group":!e.label},{"checklist-field":"checklist"===e.type},{"checkbox-field":"checkbox"===e.type})},Object(r.createElement)(a,P(P({label:e.label},function(e,t){var n,r=Object.assign({},e.props);return e.type.toLowerCase()in D||(r.type=e.type.toLowerCase()),r.placeholder=e.placeholder,r.options=e.options,Array.isArray(e.values)&&e.values&&e.values.map((function(e){e.name&&(e.label=e.name,delete e.name),e.id&&(e.value=e.id)})),r.options=e.options||e.values,e.checkboxlabel&&(r.checkboxlabel=e.checkboxlabel),e.multiple&&(r.multiple=e.multiple),e.ajax_cb&&(r.ajax_cb=e.ajax_cb),"copier"!==e.type&&"custom-select"!==e.type||(r=e),"select"===e.type&&(r.excludeSelectedOptions=!1,r.options&&(r.options=r.options.map((function(e){return"object"!==k(e.value)&&(e.key="object"!==k(e.value)?e.value:e.key,e.value={id:e.value}),e}))),e.multiple&&(r.excludeSelectedOptions=!0,r.inlineTags=!0)),"richeditor"===e.type&&(r.id=e.id),"textarea"===(null===(n=e.type)||void 0===n?void 0:n.toLowerCase())&&(r=e),"text"===e.type&&e.disabled&&(r.disabled=e.disabled),r.required=e.required,r.error=t.hasOwnProperty(e.key)&&t[e.key],r}(e,n)),t)),e.hint&&Object(r.createElement)("div",{className:"hint",dangerouslySetInnerHTML:{__html:e.hint}}))},te=function(e,t){if(z)return!1;try{var n,r=!1;if(n=e[t.key],Array.isArray(t))t.every((function(t){return"true"==e[t.key]}))&&(r=!0);else if(Array.isArray(t.value)&&Array.isArray(n)){for(var a=0;a<n.length;a++)if(t.value.indexOf(n[a])>-1){r=!0;break}}else n==t.value&&(r=!0)}catch(e){console.log(e),r=!1}return r};return Object(r.createElement)(r.Fragment,null,W&&Array.isArray(W)&&W.length?Object(r.createElement)(b.a,{onSubmitCallback:function(e){!function(e){var t=Z(e);O(!0),H(""),L("",!1);try{u()({path:Object(f.u)("/funnel-".concat(F,"/").concat("offer"===F?m:d,"/settings?funnel_id=").concat(p)),method:"POST",data:{settings:JSON.stringify(t)}}).then((function(t){if(t.success){if(t.hasOwnProperty("data")&&t.data.hasOwnProperty("ship_dynamic")&&!Object(w.isEmpty)(q)){var n=Object(w.cloneDeep)(q);n=P(P({},n),{},{ship_dynamic:t.data.ship_dynamic}),x(F,d,"products",m,n)}H(Object(a.__)("Setting Saved","funnel-builder")),o[I].values=e,B(o)}else H(t.msg)})).catch((function(e){console.log(e),H(e.message)}))}catch(e){console.log(e),H(Object(a.__)("There are some technical difficulties while updating settings. Contact Support","funnel-builder"))}}(e)},initialValues:n,validate:function(e){var t={};return["landing_page_base","checkout_page_base","optin_page_base","optin_ty_page_base","wfocu_page_base","ty_page_base"].forEach((function(n){e.hasOwnProperty(n)&&!e[n]&&"/%postname%/"!==bwfAdminGen.permalink_structure&&(t[n]=bwfAdminGen.errors.empty_base)})),void 0!==e.checkout_page_base&&e.checkout_page_base&&bwfAdminGen.checkout_page_slug===e.checkout_page_base&&(t.checkout_page_base=bwfAdminGen.errors.checkout_slug),Object(w.isArray)(W)&&W.forEach((function(n){n.toggler&&!te(e,n.toggler)||!n.required||!Object(w.isEmpty)(e[n.key])&&!Object(w.isNull)(e[n.key])||(t[n.key]=Object(a.__)("This Field is required!","funnel-builder"))})),t}},(function(e){var t=e.getInputProps,n=e.values,c=e.errors,o=e.handleSubmit,u=!1;return Object(r.createElement)("div",{className:"wtfb-tab-form"},l.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},e.type&&"label"!==e.type||e.inputType?Object(r.createElement)(r.Fragment,null,"radio"!==e.type&&"radios"!==e.type||"boolean"!=typeof e.values[0].value?"":n[e.key]="true"===n[e.key]||"false"!==n[e.key]&&n[e.key],u=!0,(!e.toggler||te(n,e.toggler))&&ee(e,t(e.key),c)):"label"===e.type&&e.hint?Object(r.createElement)("div",{className:i()("form-group component-label-description",e.styleClasses)},Object(r.createElement)("div",{className:"components-base-control__field"},Object(r.createElement)("label",null,e.label),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint}}))):e.hint||e.desc||e.label?Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:e.hint||e.desc||e.label},className:i()(e.styleClasses,{"field-label":e.label})}):null)})),u&&Object(r.createElement)("div",{className:"bwf-settings-action-wrap"},Object(r.createElement)(_.a,{isPrimary:!0,onClick:function(){z||(Object.keys(c).length?N(Object(a.__)("Please Validate Fields.","funnel-builder")):o())},disabled:z||y,isBusy:y,className:z?"bwf-no-ripple":""},Object(a.__)("Save","funnel-builder"))))})):null,K&&Object(r.createElement)(j,{onCloseModal:function(){J(!1)},link:Y}))},F=n(302);n(3);var M=function(e){var t=e.onCloseModal,n=e.modalData;return Object(r.createElement)(s.Modal,{onRequestClose:function(){t()},title:Object(a.__)("Offer Success/Failure Messages Help","funnel-builder"),className:"bwf-admin-modal bwf-admin-modal-xl bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal"},Object(r.createElement)("img",{src:n,alt:"settings"}))},z=n(37),B=n(25),R=(n(17),function(e){var t=e.html,n=e.className,a=Object(r.useRef)(null),l=Object(c.useHistory)(),i=Object(r.useCallback)((function(e){"A"===e.target.tagName&&"react"===e.target.getAttribute("data-link")&&(e.preventDefault(),l.push(e.target.getAttribute("href")))}),[l]);return Object(r.useEffect)((function(){var e=a.current;return e&&e.addEventListener("click",i),function(){e&&e.removeEventListener("click",i)}}),[i]),Object(r.createElement)("div",{ref:a,dangerouslySetInnerHTML:{__html:t},className:n})});function q(e){return(q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=Object(g.a)("ck").isProFeatureLocked,n=e.tabs,a=void 0===n?[]:n,c=e.type,l=e.getdata,i=e.saveSettings,o=U(Object(r.useState)(!1),2),u=(o[0],o[1]),s=U(Object(r.useState)(""),2),b=(s[0],s[1]),d=U(Object(r.useState)(a[0].key),2),m=(d[0],d[1]),p=U(Object(r.useState)(!1),2),v=p[0],y=p[1],O=U(Object(r.useState)(""),2),j=O[0],h=O[1],_=Object(f.Q)(),E=Object(w.get)(_,"0.modal",{}).primary_action;Object(r.useEffect)((function(){m(a[0].key)}),[a[0].key]);var S=function(e,t){var n="";u(t),Array.isArray(e)?e.forEach((function(e){n+="<p>"+e+"</p>"})):"object"===q(e)?Object.values(e).forEach((function(e){n+="<p>"+e+"</p>"})):n+="<p>"+e+"</p>",b(n)};return Object(r.createElement)(r.Fragment,null,a.length&&Object(r.createElement)("div",{className:"bwf-tabs-accordian-wrap"},Object(r.createElement)(F.a,{items:a.map((function(e){return{key:e.key,label:Object(r.createElement)(r.Fragment,null,e.label," ","checkout"===c&&t&&"tracking_analysis"===e.key&&Object(r.createElement)(B.b,null)),hint:e.hintLink?Object(r.createElement)("div",{className:"hint"},Object(z.decodeEntities)(e.hint)," ",Object(r.createElement)("a",{onClick:function(t){var n;t.stopPropagation(),n=e.hintLink,y(!0),h(n)}},e.hintLinkText)," "):Object(w.size)(e.hint)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)(R,{html:e.hint,className:"hint"}),"checkout"===c&&t&&"tracking_analysis"===e.key&&Object(r.createElement)("a",{href:Object(f.P)(["Tracking","Id","Setting","Upgrade","Link"]),target:"_blank",className:"bwf-upgrade-pro-text",rel:"noreferrer"},E)):null,display:Object(r.createElement)(L,{tabID:e.key,errorNotice:S,type:c,fields:l,saveSettings:i,disabled:"checkout"===c&&t&&"tracking_analysis"===e.key})}})),className:"bwf-accordion",openedTabs:function(e){var t;m(null===(t=a[e])||void 0===t?void 0:t.key)}})),v&&Object(r.createElement)(M,{onCloseModal:function(){y(!1)},modalData:j}))},G=n(320),K=n(40),J=n(29),$=n(314);t.a=function(e){var t=e.type,n=void 0===t?"":t,a=e.funnelID,l=void 0===a?"":a,i=Object(c.useParams)(),o=i.stepId,u=i.offerId,s=Object(r.useRef)(new AbortController),f=Object(E.a)(),b=f.fetchStep,d=f.setFunnelId,m=f.setTabData,p=Object(S.a)(),v=p.getStep,y=p.getStepHeaderData,O=p.getFunnelData,j=Object(K.a)(),h=j.setStepData,_=j.setLoading,g=j.setStepFunnelData,N=j.setIsFormLoading,k=y(n,o,"design",u),x=O(),P=J.a.getFunnelTitle();Object(r.useEffect)((function(){N(!1),!Object(w.isEmpty)(x)&&Object(w.isEmpty)(P)&&g(x),Object(w.isEmpty)(k)||(h(k),_(!1))}),[k,x]);var C=v(n,o,"settings",u),A=C.data,T=void 0===A?{}:A,I=C.loading,D=void 0===I||I,L=T.settings,F=void 0===L?{}:L;if(Object(r.useEffect)((function(){return Object(w.isEmpty)(T)&&b(n,o,"settings",u,s.current.signal),d(l),function(){s.current.abort()}}),[]),!D&&Object(w.size)(F)>0){var M=[];for(var z in F){var B={key:z,label:F[z].title,heading:F[z].heading,priority:F[z].priority,hint:F[z].hint,hintLink:F[z].hint_link,hintLinkText:F[z].hint_link_text};F[z]&&F[z].fields&&Object(w.isArray)(F[z].fields)&&F[z].fields.length>0&&M.push(B)}M.length&&M.sort((function(e,t){return e.priority-t.priority}))}return Object(r.createElement)(r.Fragment,null,D?Object(r.createElement)(G.a,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(H,{tabs:M,type:n,getdata:F,saveSettings:function(e){m(n,o,"settings",u,{settings:e})}}),["offer","upsell"].includes(n)&&Object(r.createElement)($.a,null)))}},436:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){"use strict";var r=n(0),a=(n(324),n(121)),c=n(1),l=n(6),i=n(74),o=n(19);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var f=function(e){var t=e.additionalTabs,n=u(Object(r.useState)([]),2),a=n[0],s=n[1],f=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){s(null==t?void 0:t.fields)}),[t]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-additional-heading"},null==t?void 0:t.heading),Object(r.createElement)("div",{className:"bwf-shortcodes"},null==a?void 0:a.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading",key:t},e.heading):Object(r.createElement)("div",{key:t,className:"bwf-additional-container"},Object(r.createElement)("div",{className:"bwf-additional-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(c.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),f(t+" "+Object(c.__)("copied","funnel-builder")),void f(t+" copied");var t,n,r}},Object(r.createElement)(l.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))}))))},b=n(11),d=n.n(b),m=n(75),p=n(2),v=n(9),y=n(4),O=n(22),j=n(55),h=n(40),_=n(28),g=n(110),w=n(41),E=n(304);function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var k=function(e){var t=e.pageUrl,n=void 0===t?"":t,a=e.onRequestClose,l=e.stepId,i=e.type,u=e.stepTitle,s=e.urlSlug,f=e.stepDescription,b=e.offerId,m=(0,Object(w.a)().getStepsData)(),N=S(Object(r.useState)(!1),2),k=N[0],x=N[1],P=S(Object(r.useState)(""),2),C=P[0],A=P[1],T=S(Object(r.useState)(f),2),I=T[0],D=(T[1],S(Object(r.useState)(u),2)),L=D[0],F=(D[1],S(Object(r.useState)(""),2)),M=F[0],z=F[1],B=S(Object(r.useState)(),2),R=B[0],q=B[1],U=Object(r.useRef)(),V=Object(r.useRef)(),H=Object(h.a)().setStepData,G=Object(_.a)().setSingleStepData,K=Object(g.a)().getStep,J=Object(j.a)(),$=J.setStepHeaderData,Y=J.setTabData,Q=K(i,l,"design",b).data,W=void 0===Q?{}:Q,X=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){var e;null===(e=V.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){var e=n.split("/");U.current=e.slice(0,Object(p.isEmpty)(e[e.length-1])?-2:-1).join("/"),z(n)}),[n]),Object(r.useEffect)((function(){A(s)}),[s]);var Z=function(){var e={},t=L.replace(/\s/g,"");Object(p.isEmpty)(t)&&(e.heading=Object(c.__)("Title: This field is required","funnel-builder"));var n=C.replace(/\s/g,"");if(Object(p.isEmpty)(n)&&(e.title=Object(c.__)("Page Url Slug: This field is required","funnel-builder")),0===Object(p.size)(e)){x(!0);var r='{"title":"'.concat(null==m?void 0:m.title,'","slug":"').concat(C,'","description":"').concat(I,'"}');d()({path:Object(y.u)("/funnel-".concat(i,"/save-state/").concat(l)),method:"POST",data:JSON.parse(r)}).then((function(e){if(e.success){if(x(!1),e.hasOwnProperty("step_data")){H(e.step_data),$(i,l,b,e.step_data);var t=Object(p.cloneDeep)(W);t.step.post_name=C,t.step.view_link=e.step_data.view_link,Y(i,l,"design",b,t)}e.hasOwnProperty("step_list")&&G(e.step_list.id,e.step_list),a(),X(Object(c.__)("Changes Saved","funnel-builder"))}})).catch((function(e){return console.log(e)}))}else q(e)};return Object(r.createElement)(v.Modal,{title:Object(c.__)("Edit Page URL","funnel-builder"),onRequestClose:a,className:"bwf-admin-modal bwf-modal-edit-page bwf-edit-page"},R&&Object(p.size)(R)>0&&Object(r.createElement)(E.a,{status:"error",isDismissible:!0,onRemove:function(){return q({})}},Object(r.createElement)("ul",null,Object.keys(R).map((function(e){return Object(r.createElement)("li",{key:e},R[e])})))),Object(r.createElement)("label",{id:"required"},Object(c.__)("Page URL Slug","funnel-builder")),Object(r.createElement)(v.TextControl,{value:C,onChange:function(e){A(e.replace(/\s+/g,"-").toLocaleLowerCase()),z(U.current+"/"+e.replace(/\s+/g,"-").toLowerCase().toLocaleLowerCase())},onKeyPress:function(e){"Enter"===e.key&&Z()},className:Object(p.size)(C.trim())?"":"bwf-error-border",ref:V,required:!0}),Object(p.size)(C.trim())?null:Object(r.createElement)("div",{style:{color:"#E15334",marginTop:"8px"}},Object(c.__)("Page URL Slug is required","funnel-builder")),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-url-title"},Object(c.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},M))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.a,{onClick:a,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,disabled:!Object(p.size)(C.trim()),className:Object(p.size)(C.trim())?"":"bwf-no-ripple",isBusy:k,onClick:Z},Object(c.__)("Update","funnel-builder"))))},x=(n(436),n(124)),P=n(327),C=n(302),A=n(51);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=T(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=T(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==T(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return M(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var z=function(e){var t=e.activeTab,n=void 0===t?"content":t,a=e.formFields,l=e.activeProduct,i=e.initialValues,u=void 0===i?{}:i,s=e.styleRef,f=e.type,b=e.stepId,m=e.offerId,O=e.addTabIndex,h=Object(j.a)().setTabData,_=(0,Object(g.a)().getStep)(f,b,"design",m).data,w=void 0===_?{}:_,E=F(Object(r.useState)({}),2),S=E[0],N=E[1],k=F(Object(r.useState)({}),2),T=k[0],I=k[1],L=F(Object(r.useState)(!1),2),M=L[0],z=L[1],B=F(Object(r.useState)(""),2),R=B[0],q=B[1],U=F(Object(r.useState)([0]),2),V=U[0],H=U[1],G=F(Object(r.useState)([0]),2),K=G[0],J=G[1],$=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){R&&($(R),q(""))}),[R]),Object(r.useEffect)((function(){W()}),[l]),Object(r.useEffect)((function(){Y()}),[T,S]);var Y=function(){if(S){var e=[];for(var t in T){var n,r;if(S.hasOwnProperty(t)){var a=S[t];null!=a&&a.toggler&&(null==a||null===(n=a.toggler)||void 0===n?void 0:n.value)!=T[null==a||null===(r=a.toggler)||void 0===r?void 0:r.key]||e.push(D(D({},a),{},{value:T[t]}))}}Q(e)}},Q=function(e){var t="";e.forEach((function(e){switch(e.type){case"text":e.contentClass&&jQuery(e.contentClass).text(e.value);break;case"richtext":case"richeditor":case"textarea":e.contentClass&&jQuery(e.contentClass).html(e.value);break;case"label":break;case"toggle":if(e.selectors){var n=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;0==e.value?jQuery(n).hide():jQuery(n).show()}break;case"image":if(e.selectors){var r,a,c,l=Array.isArray(e.selectors)?e.selectors.toString():e.selectors;if("product"===e.value.type)if(jQuery(l+" img").length)jQuery(l+" img").attr("src",null==e||null===(a=e.value)||void 0===a?void 0:a.image_url);else jQuery(l).find("svg").remove(),jQuery(l).append('<img src="'+(null==e||null===(c=e.value)||void 0===c?void 0:c.image_url)+'" alt="order bump" />');else if(Object(p.isEmpty)(null==e||null===(r=e.value)||void 0===r?void 0:r.custom_url))jQuery(l+" img").attr("src","").attr("srcset","");else{var i,o;if(jQuery(l+" img").length)jQuery(l+" img").attr("src",null==e||null===(i=e.value)||void 0===i?void 0:i.custom_url).attr("srcset","");else jQuery(l).find("svg").remove(),jQuery(l).append('<img src="'+(null==e||null===(o=e.value)||void 0===o?void 0:o.custom_url)+'" alt="order bump" />').attr("srcset","")}}break;default:if(e.selectors&&e.stylekey){var u,s=Array.isArray(e.selectors)?e.selectors.toString():e.selectors,f="".concat(e.stylekey,":").concat(e.value).concat(null!==(u=null==e?void 0:e.styleUnit)&&void 0!==u?u:"",";");-1!==t.search("".concat(s,"{"))?t=t.replace("".concat(s,"{"),"".concat(s,"{").concat(f)):t+="".concat(s,"{").concat(f,"}")}}})),null!=s&&s.current&&(s.current.innerHTML=t)},W=function(){var e;if(!Object(p.isEmpty)(a)&&!Object(p.isEmpty)(l)){var t,n={};if(null!=a&&null!==(e=a.content)&&void 0!==e&&e[l])(null==a||null===(t=a.content)||void 0===t?void 0:t[l]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}));if(null!=a&&a.design)(null==a?void 0:a.design).forEach((function(e){((null==e?void 0:e.fields)||[]).forEach((function(e){var t=(null==e?void 0:e.key)||(null==e?void 0:e.id);n[t]=e}))}));N(n),console.log("fields",n)}},X=function(e,t,n){return e.map((function(e,a){return Object(r.createElement)(r.Fragment,{key:a},(Object(p.isEmpty)(e.toggler)||Z(t,e.toggler,e))&&Object(r.createElement)(P.a,{input:e,formProps:n(e.key),values:t}))}))},Z=function(e,t){var n=!1;try{var r;if(!e[t.key])return n;if(r=e[t.key],Array.isArray(t.value)&&Array.isArray(r)){for(var a=0;a<r.length;a++)if(t.value.indexOf(r[a])>-1){n=!0;break}}else r==t.value&&(n=!0)}catch(e){console.log("Toggler:",e),n=!1}return n};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(x.a,{onSubmitCallback:function(e){z(!0);try{d()({path:Object(y.u)("/funnel-".concat(f,"/").concat(b,"/design/save-settings")),method:"POST",data:e}).then((function(t){if(t.success){var n=Object(p.cloneDeep)(w);n.step.additional_tabs[O].values=e,h(f,b,"design",m,n),q(Object(c.__)("Changes Saved","funnel-builder")),z(!1)}else z(!1),q(t.msg)}))}catch(e){console.log(e),z(!1),q(e.message)}},initialValues:u,validate:function(){return{}},onChange:function(e,t){I(t)}},(function(e){var t=e.getInputProps,i=e.values,o=(e.errors,e.handleSubmit);return Object(r.createElement)(r.Fragment,null,function(e,t){var c;if("content"===n){var i,o=null==a||null===(i=a.content)||void 0===i?void 0:i[l];return Object(r.createElement)("div",{style:{padding:"16px 16px 0"}},X(o,t,e))}var u=null!==(c=a[n])&&void 0!==c?c:[],s=null==u?void 0:u.map((function(n,a){var c;return{label:null==n?void 0:n.label,key:null!==(c=null==n?void 0:n.key)&&void 0!==c?c:a,display:Object(r.createElement)("div",{className:"bwf-form-fields-wrapper"},X(null==n?void 0:n.fields,t,e))}}));return"tab_form_style"===n?Object(r.createElement)(C.a,{items:s,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:V,setOpenedKeys:function(e){H(e)}}):Object(r.createElement)(C.a,{items:s,className:"bwf-accordion bwf-c-s-collapsible__md bwf-step-shortcode-form",handleIcons:"up-down",openedKeys:K,setOpenedKeys:function(e){J(e)}})}(t,i),Object(r.createElement)(v.Button,{isPrimary:!0,onClick:o,isBusy:M,disabled:M,className:"bwf-mt-24"},Object(r.createElement)("span",{style:D({},M&&{visibility:"hidden"})},Object(c.__)("Save","funnel-builder")),M&&Object(r.createElement)(A.a,{color:"#ffffff",style:{position:"absolute"}})))})))};function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var q=function(e){var t,n=e.additionalTabs,a=e.type,u=e.stepId,s=e.offerId,f=e.addTabIndex,b=B(Object(r.useState)(null),2),d=b[0],m=b[1],v=B(Object(r.useState)(null==n?void 0:n.tabs[0]),2),y=v[0],O=v[1],j=B(Object(r.useState)(!1),2),h=j[0],_=j[1],g=Object(o.b)().showSnackbar;Object(r.useEffect)((function(){"shortcode"===n.content[y.id].type?(m(n.content[y.id].fields),_(!1)):_(!0)}),[y]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-additional-heading"},null==n?void 0:n.heading),n&&n.hasOwnProperty("tabs")&&Object(r.createElement)("div",{className:"bwf-tabs-list"},null==n||null===(t=n.tabs)||void 0===t?void 0:t.map((function(e,t){return Object(r.createElement)("button",{key:t,className:"bwf-tabs-list-button ".concat((null==y?void 0:y.id)===e.id?"active-btn":""),onClick:function(){O(e),"tab_custom_shortcode"===e.id?_(!1):_(!0)}},null==e?void 0:e.name)}))),Object(r.createElement)("div",{className:"bwf-shortcodes"},!h&&Object(p.size)(d)>0&&(null==d?void 0:d.map((function(e,t){return e.heading?Object(r.createElement)("div",{className:"bwf-additional-sub-heading bwf-grid-full",key:t},e.heading):Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-setting-title"},e.label),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==e?void 0:e.value),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(c.__)("Copy","funnel-builder")},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return null==e||e.id,t=e.label+" shortcode",n=e.value,(r=document.createElement("textarea")).value=n,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),g(t+" "+Object(c.__)("copied","funnel-builder")),void g(t+" copied");var t,n,r}},Object(r.createElement)(l.a,{icon:"duplicate",width:20,height:20,color:"#82838E"}))))),e.hint&&Object(r.createElement)("span",{className:"bwf-code-copy__hint",dangerouslySetInnerHTML:{__html:e.hint}}))})))),h&&Object(r.createElement)(z,{activeTab:y.id,formFields:null==n?void 0:n.content,initialValues:null==n?void 0:n.values,type:a,stepId:u,offerId:s,addTabIndex:f}))},U=(n(301),n(283)),V=n(277);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){J(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=H(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(){return($=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var W=function(e){var t=e.onCloseModal,n=e.onSuccess,l=e.SnackBarMsg,i=e.fieldTypes,o=Object(a.useParams)().stepId,u=Y(Object(r.useState)(!1),2),s=u[0],f=u[1],b=Y(Object(r.useState)("text"),2),m=b[0],p=b[1],O=Y(Object(r.useState)({label:"",placeholder:"",name:"",cssready:"",field_type:"text",section_type:"advanced",options:"",default:"",enable_time:!1,preferred_time_format:"12",allow_delete:!1,show_custom_field_at_thankyou:!1,show_custom_field_at_email:!1,required:!0,multiselect_maximum:"",multiselect_maximum_error:"You can only select {maximum_number} items"}),2),j=O[0],h=O[1],_=function(){t()};Object(r.useEffect)((function(){j.field_type=m,j.default="checkbox"===m?"1":"";var e=JSON.parse(JSON.stringify(j));h(e)}),[m]);var g=j;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{onRequestClose:_,title:Object(c.__)("Add New Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-section-modal"},Object(r.createElement)(U.a,{validate:function(e){var t={};return""!==e.label.trim()&&e.label||(t.label=Object(c.__)("Label is required","funnel-builder")),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email"].includes(e.field_type)&&!e.name&&(t.name="Field ID is required"),["wfacp_radio","select","select2","multiselect"].includes(e.field_type)&&!e.options&&(t.options="Options are required"),e.name&&["billing","shipping"].includes(e.name.trim().toLowerCase())&&(t.name=Object(c.sprintf)(Object(c.__)("Field ID contains a reserved term '%s'","funnel-builder"),e.name.trim().toLowerCase())),t},onSubmitCallback:function(e){f(!0),d()({path:Object(y.u)("/funnel-checkout/".concat(o,"/form_fields/add_field")),method:"POST",data:e}).then((function(e){e.success?(f(!1),n(e.data)):(f(!1),l(e.msg||e.message))})).catch((function(e){f(!1),l(e.msg||e.message)}))},initialValues:g,onChange:function(e,t){p(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,l=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(V.b,$({},t("field_type"),{options:i})))),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,$({},t("label"),{placeholder:Object(c.__)("Type here...","funnel-builder"),autoComplete:"off",required:!0}))),l.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder"))),["text","wfacp_radio","wfacp_wysiwyg","select","textarea","checkbox","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.name&&a.name?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Field ID (Order Meta Key)","funnel-builder")),Object(r.createElement)(v.TextControl,$({},t("name"),{placeholder:Object(c.__)("Type here...","funnel-builder")}))),l.name&&a.name&&Object(r.createElement)("div",{className:"bwf-error-text"},a.name),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Field ID (Order Meta Key) where value of this field gets stored. Use '_' to seperate in case of multiple words.Example: date_of_birth","funnel-builder"))),["wfacp_radio","select","select2","multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.options&&a.options?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(v.TextControl,$({},t("options"),{placeholder:Object(c.__)("Type here...","funnel-builder")}))),l.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field")),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,$({},t("multiselect_maximum"),{label:Object(c.__)("Max number of selection","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["multiselect"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,$({},t("multiselect_maximum_error"),{label:Object(c.__)("Error Message","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["text","wfacp_radio","select","textarea","hidden","select2","multiselect","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,$({},t("default"),{label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["text","textarea","select","select2","number","tel","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,$({},t("placeholder"),{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here...","funnel-builder")})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(V.b,$({options:[{label:"True",value:"1",key:"1"},{label:"False",value:"0",key:"0"}]},t("default"))))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,$({},t("show_custom_field_at_thankyou"),{label:Object(c.__)("Show On Thank You Page","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["text","wfacp_radio","select","textarea","checkbox","wfacp_wysiwyg","select2","multiselect","number","tel","hidden","password","email","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,$({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Show In Order Email","funnel-builder")})))),["text","wfacp_radio","select","textarea","checkbox","select2","multiselect","number","tel","password","email","wfacp_html","wfacp_date"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,$({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.Button,{onClick:_,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(v.Button,{isPrimary:!0,onClick:o,isBusy:s,disabled:s},Object(r.createElement)("span",{style:K({},s&&{visibility:"hidden"})},Object(c.__)("Add","funnel-builder")),s&&Object(r.createElement)(A.a,{color:"#ffffff",style:{position:"absolute"}}))))}))))};function X(){return(X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var te=function(e){var t=e.onCloseModal,n=e.addedSection,a=Object(r.useRef)(),l=Z(Object(r.useState)(!1),2),i=l[0],o=l[1],u=function(){t()};return Object(r.useEffect)((function(){a.current.focus()}),[]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{onRequestClose:u,title:Object(c.__)("Add New Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(U.a,{validate:function(){return{}},onSubmitCallback:function(e){o(!0);var t=e.name.replace(/\s+/g,"-").toLowerCase(),r=t+"".concat(Object(p.size)(t)>0?"-":"")+Math.floor(1e3*Math.random());e.id=r,n(e)},initialValues:{name:"",sub_heading:"",class:"",fields:[],id:""}},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(v.TextControl,X({},t("name"),{label:Object(c.__)("Name","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:a,onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(v.TextControl,X({},t("sub_heading"),{label:Object(c.__)("Sub Heading","funnel-builder"),autoComplete:"off",placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(v.TextControl,X({},t("class"),{label:Object(c.__)("Classes","funnel-builder"),autoComplete:"off",placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(v.Button,{onClick:u,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,onClick:n,isBusy:i},Object(c.__)("Add","funnel-builder"))))}))))},ne=n(291);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(){return(ae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function le(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ce(Object(n),!0).forEach((function(t){ie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ie(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=re(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=re(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==re(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ue(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ue(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var se=function(e){var t=e.onCloseModal,n=e.updatedField,i=e.fields,o=e.updated,u=e.updatedSectionId,s=e.activeStep,f=e.SnackBarMsg,b=Object(a.useParams)().stepId,m=Object(r.useRef)(),p=oe(Object(r.useState)(!1),2),j=p[0],h=p[1],_=oe(Object(r.useState)(n),2),g=_[0],w=_[1],E=function(){t()};Object(r.useEffect)((function(){var e;null===(e=m.current)||void 0===e||e.focus()}),[]),Object(r.useEffect)((function(){"1"===g.allow_delete||"true"===g.allow_delete?w((function(e){return le(le({},e),{},{allow_delete:!0})})):"0"===g.allow_delete||"false"===g.allow_delete?w((function(e){return le(le({},e),{},{allow_delete:!1})})):"1"===g.coupon_style||"true"===g.coupon_style?w((function(e){return le(le({},e),{},{coupon_style:!0})})):"0"===g.coupon_style||"false"===g.coupon_style?w((function(e){return le(le({},e),{},{coupon_style:!1})})):"1"===g.show_custom_field_at_thankyou||"true"===g.show_custom_field_at_thankyou?w((function(e){return le(le({},e),{},{show_custom_field_at_thankyou:!0})})):"0"===g.show_custom_field_at_thankyou||"false"===g.show_custom_field_at_thankyou?w((function(e){return le(le({},e),{},{show_custom_field_at_thankyou:!1})})):"1"===g.show_custom_field_at_email||"true"===g.show_custom_field_at_email?w((function(e){return le(le({},e),{},{show_custom_field_at_email:!0})})):"0"===g.show_custom_field_at_email||"false"===g.show_custom_field_at_email?w((function(e){return le(le({},e),{},{show_custom_field_at_email:!1})})):"1"===g.required||"true"===g.required?w((function(e){return le(le({},e),{},{required:!0})})):"0"!==g.required&&"false"!==g.required||w((function(e){return le(le({},e),{},{required:!1})}))}),[g]);var S=g,N=function(e){var t;h(!0),i.fieldsets[s][u].fields=null===(t=i.fieldsets[s][u])||void 0===t||null===(t=t.fields)||void 0===t?void 0:t.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(y.u)("/funnel-checkout/".concat(b,"/form_fields")),method:"POST",data:i}).then((function(e){e.success?o(i):f(Object(c.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){f(e.message||e.msg)}};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{onRequestClose:E,shouldCloseOnClickOutside:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-update-field-modal bwf-section-modal bwf-admin-modal-no-header",isDismissible:!1},Object(r.createElement)(U.a,{validate:function(e){var t={};return["radios","select","select2","multiselect","wfacp_radio"].includes(e.type)&&!e.options&&(t.options=Object(c.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){N(e)},initialValues:S},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,i=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(c.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," "),Object(r.createElement)("span",null,"(",Object(c.__)("Field ID : ","funnel-builder")," ",n.id,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.data_label," ")),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:E},Object(r.createElement)(l.a,{icon:"close",size:20}))),(["text","radios","wfacp_radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel","select2","multiselect","number","password","wfacp_wysiwyg","wfacp_html","wfacp_date"].includes(n.type)||["shipping_calculator","order_coupon","order_summary","order_total","_bwf_dob"].includes(n.id))&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({},t("label"),{label:Object(c.__)("Label","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)},placeholder:Object(c.__)("Type here","funnel-builder"),autoFocus:!0,autoComplete:"off",ref:m})),("wfop_wysiwyg"===n.type||"html"===n.type||"wfacp_wysiwyg"===n.type||"_bwf_dob"===n.id)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(c.__)("This label is for admin purpose only, won't appear on the checkout form.","funnel-builder")))))),"_bwf_dob"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({},t("_bwf_dob"),{label:Object(c.__)("Minimum Age","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["radios","wfacp_radio","select","select2","multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.options&&a.options?"bwf-validation":"")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options (|) separated","funnel-builder")),Object(r.createElement)(v.TextControl,ae({placeholder:Object(c.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"))),i.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["order_coupon"].includes(n.id)&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({label:Object(c.__)("Success message","funnel-builder")},t("coupon_success_message_heading"),{placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"order_coupon"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Use merge tags to display Coupon Code: {{coupon_code}} & Coupon Value: {{coupon_value}} in success message","funnel-builder")))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,ae({},t("coupon_style"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Make coupon field a clickable link","funnel-builder")}))))),(["text","textarea","select","email","tel","select2","number","password","wfacp_date"].includes(n.type)||["shipping_calculator"].includes(n.id))&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({},t("placeholder"),{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&N(n)}})),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Enter the default text for shipping method","funnel-builder")))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({},t("multiselect_maximum"),{label:Object(c.__)("Max number of selection","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder")})))),["multiselect"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({},t("multiselect_maximum_error"),{label:Object(c.__)("Error Message","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder")})))),["radios","wfacp_radio","select","textarea","hidden","select2","text","multiselect","number","tel","password","email","wfacp_date"].includes(n.type)&&!["billing_first_name","billing_last_name","billing_phone","shipping_phone","billing_email"].includes(n.id)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["checkbox"].includes(n.type)&&"shipping_calculator"!==n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(V.b,ae({options:[{label:Object(c.__)("True","funnel-builder"),value:"1",key:"1"},{label:Object(c.__)("False","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),"shipping_calculator"===n.id&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,ae({label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder")},t("default"),{onKeyPress:function(e){"Enter"===e.key&&N(n)}})))),["wfop_wysiwyg","html","wfacp_wysiwyg"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ne.a,ae({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,link,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["order_summary"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,ae({},t("allow_delete"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Enable this to show delete icon below item subtotal","funnel-builder")))),["order_total"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,ae({},t("default"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Detailed Summary","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-edit-hint"},Object(c.__)("Enable this to show detailed summary including Subtotal, Coupon, Fees, Shipping and Taxes whichever are applicable.","funnel-builder")))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,ae({},t("show_custom_field_at_thankyou"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Show On Thank You Page","funnel-builder")})))),n.is_wfacp_field&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,ae({},t("show_custom_field_at_email"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Show In Order Email","funnel-builder")})))),["text","radios","wfacp_radio","select","textarea","checkbox","email","tel","select2","multiselect","number","password","wfacp_html","wfacp_date"].includes(n.type)&&!["shipping_calculator","order_total","order_summary","order_coupon","order_comments"].includes(n.id)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,ae({},t("required"),{className:"bwf-tooglecontrol-advance",label:Object(c.__)("Required","funnel-builder")})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.Button,{onClick:E,className:"bwf-modal-cancel-btn",disabled:j},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,disabled:j,isBusy:j,onClick:o},Object(c.__)("Update","funnel-builder"))))}))))},fe=(n(325),n(13)),be=n(27),de=n(79),me=n(284),pe=n(84),ve=n(37),ye=n(5),Oe=n.n(ye);function je(){return(je=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function he(e){return function(e){if(Array.isArray(e))return we(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return we(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?we(e,t):void 0}}function we(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ee=function(e){var t=Object(a.useParams)(),n=t.stepId,i=(t.id,window.location&&window.location.search?Object(be.parse)(window.location.search.substring(1)):{}),o=e.onCloseModal,u=e.productData,s=e.onChange,f=e.addToCartSettings,b=_e(Object(r.useState)("general"),2),d=b[0],m=b[1],j=_e(Object(r.useState)([]),2),h=j[0],_=j[1],g=_e(Object(r.useState)(""),2),w=g[0],E=g[1],S=_e(Object(r.useState)(""),2),N=S[0],k=S[1],P=_e(Object(r.useState)(""),2),C=P[0],A=P[1],T=_e(Object(r.useState)(""),2),I=T[0],D=T[1],L=_e(Object(r.useState)(""),2),F=L[0],M=L[1],z=_e(Object(r.useState)(""),2),B=z[0],R=z[1],q=_e(Object(r.useState)(""),2),U=q[0],H=q[1],G=_e(Object(r.useState)(""),2),K=G[0],J=G[1],$=_e(Object(r.useState)(""),2),Y=$[0],Q=$[1],W=_e(Object(r.useState)(""),2),X=W[0],Z=W[1],ee=_e(Object(r.useState)([]),2),te=ee[0],re=ee[1],ae=_e(Object(r.useState)({}),2),ce=ae[0],le=ae[1],ie=_e(Object(r.useState)(""),2),oe=ie[0],ue=ie[1],se=_e(Object(r.useState)([]),2),ye=se[0],ge=se[1],we=_e(Object(r.useState)(""),2),Ee=we[0],Ne=we[1],ke=_e(Object(r.useState)(!1),2),xe=ke[0],Pe=ke[1],Ce=function(){o()};Object(r.useEffect)((function(){0!==u.products.length&&(_(u.default_products),re(null==u?void 0:u.products),le(null==u?void 0:u.settings),E(u.settings.enable_delete_item),k(u.settings.enable_custom_name_in_order_summary),A(u.settings.is_hide_additional_information),D(u.settings.additional_information_title),M(u.settings.hide_best_value),R(u.settings.hide_quantity_switcher),H(u.settings.hide_quick_view),J(u.settings.hide_product_image),Q(u.settings.best_value_text),Z(u.settings.best_value_position),Ne(u.settings.best_value_product))}),[u]),Object(r.useEffect)((function(){if(Object(p.size)(te)>0){var e=te.map((function(e){return{label:e.title,value:e.key,key:e.key}}));ge([].concat([{label:"Select Product",value:"",key:""}],he(e)))}}),[te]);var Ae={label:u.label},Te=Object(pe.a)({containerClass:"#product_switching .bwf-step-menu-header .bwfan_navigation",selectedClass:".bwfan_navigation_active",orientation:"horizontal"}).switchTab,Ie=[{type:"general",id:"general",label:Object(c.__)("General","funnel-builder")},{type:"description",id:"description",label:Object(c.__)("Description","funnel-builder")},{type:"advanced",id:"advanced",label:Object(c.__)("Advanced","funnel-builder")}];return Object(r.useEffect)((function(){var e,t;Te((e=d,t=0,Ie.map((function(n,r){n.id===e&&(t=r)})),t))}),[d]),Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{className:"bwf-admin-modal bwf-admin-modal-no-header bwf-admin-modal-xl bwf-modal-edit-page  bwf-edit-product-modal"},Object(r.createElement)("div",{className:"sections bwf-product-field"},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(c.__)("Edit Field","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:function(){return Ce()}},Object(r.createElement)(l.a,{icon:"close",size:20})))),Object(r.createElement)("div",{className:"wfacp_product_swicther_field_wrap"},Object(r.createElement)("div",{id:"product_switching"},Object(r.createElement)("div",{className:"wfacp_tabs"},0===u.products.length&&Object(r.createElement)("div",{className:"bwf-welcome-card"},Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_welc_icon"},Object(r.createElement)("span",{className:"bwf-product-h"}," ",Object(c.__)("Oops! no products found","funnel-builder")," ")),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"bwf-product-p"},Object(c.__)("To edit this field please add atleast one product","funnel-builder")," "),Object(r.createElement)("div",{className:"bwf_clear_30"}),Object(r.createElement)("div",{className:"wfacp_btns_welcome_card"},Object(r.createElement)(v.Button,{isPrimary:!0,onClick:function(){return Object(fe.k)({},"".concat(Object(y.fb)()?"/store-checkout/checkout":"/funnel-checkout","/").concat(n,"/products"),i)}},Object(c.__)(" Add Product ","funnel-builder")),Object(r.createElement)("div",{className:"wfacp_clear_20"}),Object(r.createElement)("div",{className:"wfacp_clear_20"}))),0!==u.products.length&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwfan_header bwfan__step-header"},Object(r.createElement)("div",{className:"bwfan_header_l2 bwf-step-menu-header"},Object(r.createElement)("div",{className:"bwfan_header_l"},Object(r.createElement)("div",{className:"bwfan_navigation"},Ie.map((function(e,t){return Object(r.createElement)("a",{className:Oe()("bwf-cursor-pointer",{bwfan_navigation_active:d===e.id}),onClick:function(){"general"===e.id&&m("general"),"description"===e.id&&m("description"),"advanced"===e.id&&m("advanced")},key:t},e.label)})),Object(r.createElement)("div",{className:"bwf-nav-indicator"}))))),Object(r.createElement)(x.a,{validate:function(e){var t={};return ue(""),""===e.label.trim()&&(t.label="",ue("Label is required")),e.label||(t.label="",ue("Label is required")),t},onSubmitCallback:function(e){!function(e){Pe(!0),ce.enable_delete_item=w,ce.enable_custom_name_in_order_summary=N,ce.enable_custom_name_in_order_summary=N,ce.is_hide_additional_information=C,ce.additional_information_title=I,ce.additional_information_title=I,ce.hide_best_value=F,ce.hide_quantity_switcher=B,ce.hide_quick_view=U,ce.hide_product_image=K,ce.best_value_text=Y,ce.best_value_position=X,ce.best_value_product=Ee,le(ce);var t={default_products:h,settings:ce,products:te,label:e.label};s(t)}(e)},initialValues:Ae},(function(e){var t=e.getInputProps,n=e.values,a=(e.errors,e.touched),l=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,oe&&a.label&&Object(r.createElement)("div",{className:"bwf-validate-product"},Object(r.createElement)(de.a,{errorMessage:oe}),Object(r.createElement)("div",{className:"bwf_clear_10"})),"general"===d&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{id:"required"},Object(c.__)("Label","funnel-builder")),Object(r.createElement)(v.TextControl,je({},t("label"),{onKeyPress:function(e){"Enter"===e.key&&l(n)},placeholder:Object(c.__)("Label","funnel-builder"),className:"bwf-product-validation-text",autoComplete:"off"})))),Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-general-product bwf-product-header bwf-mt-24 ".concat("1"!==f?"":"bwf-no-value")},"1"!==f&&Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Title","funnel-builder")))),null==te?void 0:te.map((function(e,t){return Object(r.createElement)("div",{className:"bwf-general-product bwf-product-end ".concat("1"!==f?"":"bwf-no-value"),key:t},"2"===f&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("input",{type:"radio",value:e.key,checked:h.includes(e.key),onChange:function(e){return _([e.target.value])},className:"components-radio-control__input ".concat(h===e.key?"active":"")})),"3"===f&&Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)(me.a,{checked:h.includes(e.key),onChange:function(t){return function(e,t){if(e)_([].concat(he(h),[t]));else{var n=h.filter((function(e){return e!==t}));_(n)}}(t,e.key)}})),Object(r.createElement)("div",{className:"bwf-flex"},Object(ve.decodeEntities)(e.old_title)),Object(r.createElement)("div",{className:"bwf-product-title"},Object(r.createElement)("input",{type:"text",defaultValue:e.title,placeholder:"Title",onChange:function(t){return function(e,t){te.map((function(n){n.key===e&&(n.title=t.target.value)}));var n=JSON.parse(JSON.stringify(te));re(n)}(e.key,t)},className:"bwf-h-36"}),Object(r.createElement)("input",{type:"text",defaultValue:e.you_save_text,placeholder:"You Save Text",onChange:function(t){return function(e,t){te.map((function(n){n.key===e&&(n.you_save_text=t.target.value)}));var n=JSON.parse(JSON.stringify(te));re(n)}(e.key,t)},className:"bwf-h-36"})))})),Object(r.createElement)("div",{className:"bwf-product-desc field-wrap"},Object(r.createElement)("label",{type:"description"},Object(c.__)("Merge Tags","funnel-builder")+": {{quantity}}, {{saving_value}}, {{saving_percentage}} and {{unit_price}}")),Object(r.createElement)("div",{className:"wfacp_ps_conditional_wrap bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(v.ToggleControl,{checked:w,onChange:function(){return E(!w)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Enable Product Deletion","funnel-builder")})),Object(r.createElement)("div",{className:"wfacp_product_switcher_delete_options bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(v.ToggleControl,{checked:N,onChange:function(){return k(!N)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Enable Custom Product Name In Order Details","funnel-builder")})),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(c.__)("This option will allow you to view the product custom name on Thank you page, Customer Email & Admin Order Detail page","funnel-builder"))))))),"description"===d&&Object(r.createElement)("div",null,Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"description"},Object(c.__)("Use this section to show per product custom description when the product is selected.","funnel-builder"),Object(r.createElement)("br",null),Object(c.__)("Note: This feature will work if you are using product specific order forms.","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field bwf-mt-24"},Object(r.createElement)(v.ToggleControl,{checked:C,onChange:function(){return A(!C)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Custom Product Description","funnel-builder")})),Object(r.createElement)("div",{className:"form-group bwf-display-flex_column field-wrap"},Object(r.createElement)("label",{type:"text"},Object(c.__)("Title","funnel-builder")),Object(r.createElement)("input",{type:"text",value:I,className:"bwf-h-36",onChange:function(e){return D(e.target.value)}}))),Object(r.createElement)("div",{className:"bwf-product-textarea bwf-product-header bwf-mt-24"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Custom Details","funnel-builder")))),null==te?void 0:te.map((function(e,t){return Object(r.createElement)("div",{key:t},Object(r.createElement)("div",{className:"bwf-product-textarea"},Object(r.createElement)("div",{className:"bwf-flex"},null==e?void 0:e.title),Object(r.createElement)("div",{className:"form-group bwf_w_full"},Object(r.createElement)(ne.a,{keyid:"".concat(e.key).concat(Math.floor(100*Math.random())),content:e.whats_included,value:e.whats_included,onChange:function(t){return function(e,t){te.map((function(n){n.key===e&&(n.whats_included=t)}));var n=JSON.parse(JSON.stringify(te));re(n)}(e.key,t)},toolbar:"bold,italic, underline,bullist,numlist,link",quicktags:!0}))))}))),"advanced"===d&&Object(r.createElement)("div",{className:"bwf-display-flex_column bwf-mt-16"},Object(r.createElement)("div",{className:"pro_mb"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Best Value Tag","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(v.ToggleControl,{checked:F,onChange:function(){return M(!F)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Best Value Tag","funnel-builder")}))),!F&&Object(r.createElement)("div",{className:"bwf-product-advanced"},Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(c.__)("Apply on Product","funnel-builder")),Object(r.createElement)(V.b,{options:ye,selected:Ee,onChange:function(e){Ne(e)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(c.__)("Label","funnel-builder")),Object(r.createElement)("input",{type:"text",placeholder:"Best Value Product",className:"bwf-h-36",value:Y,onChange:function(e){return Q(e.target.value)}})),Object(r.createElement)("div",{className:"bwf-input-options field-wrap"},Object(r.createElement)("label",null,Object(c.__)("Position","funnel-builder")),Object(r.createElement)(V.b,{options:Se,selected:X,onChange:function(e){Z(e)}}))),Object(r.createElement)("div",{className:"pro_checkbox_wrap pro_mb bwf_display_flex bwf-flex-column"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)("label",{type:"heading"},Object(c.__)("Other","funnel-builder"))),Object(r.createElement)("div",{className:"form-group bwf-section-field bwf-products-other-detail"},Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(v.ToggleControl,{checked:B,onChange:function(){return R(!B)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Quantity Incrementor","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(v.ToggleControl,{checked:U,onChange:function(){return H(!U)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Quick View","funnel-builder")})),Object(r.createElement)("div",{className:"bwf-product-form-field"},Object(r.createElement)(v.ToggleControl,{checked:K,onChange:function(){return J(!K)},className:"bwf-tooglecontrol-advance",label:Object(c.__)("Hide Product Image","funnel-builder")}))))),Object(r.createElement)("div",{className:"bwf-product-modal-footer"},Object(r.createElement)(v.Button,{onClick:Ce,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,isBusy:xe,onClick:l},Object(c.__)("Update","funnel-builder"))))})))))))))},Se=[{label:"Default",value:"",key:""},{label:"Above product title",value:"above",key:"above"},{label:"Below product title",value:"below",key:"below"},{label:"Top left corner",value:"top_left_corner",key:"top_left_corner"},{label:"Top Right corner",value:"top_right_corner",key:"top_right_corner"}],Ne=n(294),ke=n(85),xe=n.n(ke),Pe=n(307);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e){return function(e){if(Array.isArray(e))return De(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ie(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Te(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||Ie(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ie(e,t){if(e){if("string"==typeof e)return De(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(e,t):void 0}}function De(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Le(){return(Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fe(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ze(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ce(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ce(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ce(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Be=Object(Ne.c)((function(){return Object(r.createElement)("span",{title:"Click here and start drag and drop",style:{cursor:"move"}},Object(r.createElement)(l.a,{icon:"ul",size:"20"}))})),Re=function(e){var t=e.index,n=e.data,a=e.setFieldId,i=e.setShowContent,o=e.changeVisibility,u=e.fieldId,s=e.showContent,f=e.changePlaceholder,b=e.changeLabel,d=e.changeRequired,m=e.sortable,O=void 0===m||m,j=e.provided;return Object(r.createElement)("div",Le({key:t,"data-key":"first_name",className:"bwf_address_field bwf_sortable_address_field"},O&&Me({ref:j.innerRef},j.draggableProps)),Object(r.createElement)("div",{className:Oe()("bwf_billing_accordion_inner",{"is-opened":u===n.key&&s}),onClick:function(){a(n.key),n.key===u?i(!s):(a(n.key),i(!0))}},Object(r.createElement)("div",{className:"accordion_left"},O&&Object(r.createElement)(Be,{provided:j}),Object(r.createElement)("div",{className:"accordion_heading"},n.data_label),n.key.includes("same_as")?null:Object(r.createElement)("div",{className:"bwf_hint_small"},"(",Object(c.__)("Field ID: ","funnel-builder"),n.key,")")),Object(r.createElement)("div",{className:"accordion_right"},Object(r.createElement)("span",{onClick:function(e){e.stopPropagation(),o(n.key)}},Object(r.createElement)(l.a,{icon:null!=n&&n.status?"eye":"eye-close",size:24})),Object(r.createElement)(l.a,{icon:"angle-down",size:24})),Object(r.createElement)("div",{className:"bwf_billing_clear"}),!Object(p.isEmpty)(n.configuration_message)&&Object(r.createElement)("div",{className:"bwf_misconfiguration_field"},n.configuration_message)),Object(r.createElement)("div",{className:Oe()("bwf_billing_accordion_content form-group",{"bwf-display-block":u===n.key&&s})},"billing_wc_custom_field"===u||"shipping_wc_custom_field"===u?Object(r.createElement)("span",null,Object(c.sprintf)(/* translators: %s: Field type. */
Object(c.__)("Enable this field to show the extra %s fields registered by other plugins. Still not seeing the field on the checkout? ","funnel-builder"),"billing_wc_custom_field"===u?Object(c.__)("billing","funnel-builder"):Object(c.__)("shipping","funnel-builder")),Object(r.createElement)("a",{target:"_blank",href:Object(y.bb)(["Step","Checkout","Form","Address","Edit"]),rel:"noreferrer"},Object(c.__)("Contact Support.","funnel-builder"))):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(v.TextControl,{label:Object(c.__)("Label","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),className:"form-control bwf_label",value:n.label||"",onChange:function(e){return b(n.key,e)}}))),!n.key.includes("same_as")&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"bwf_billing_right"},Object(r.createElement)(v.TextControl,{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),className:"form-control bwf_placeholder",value:n.placeholder||"",onChange:function(e){return f(n.key,e)}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,{checked:!!n.required,onChange:function(){return d(n.key)},type:"checkbox",className:"bwf-tooglecontrol-advance",label:Object(c.__)("Required","funnel-builder")})))))))},qe=Object(Ne.b)(Re),Ue=Object(Ne.a)((function(e){var t=e.items,n=e.setAddress,a=(e.onPopupClose,e.lastItems),c=e.setLastItems,l=e.provided,i=Te(Object(r.useState)(""),2),o=i[0],u=i[1],s=Te(Object(r.useState)(!1),2),f=s[0],b=s[1],d=function(e,t){e.includes("same_as")?c((function(n){return n.map((function(n){return n.key===e?Me(Me({},n),{},{label:t}):n}))})):n((function(n){return n.map((function(n){return n.key===e?Me(Me({},n),{},{label:t}):n}))}))},m=function(e,t){n((function(n){return n.map((function(n){return n.key===e?Me(Me({},n),{},{placeholder:t}):n}))}))},p=function(e){e.includes("same_as")?c((function(t){return t.map((function(t){return t.key===e?Me(Me({},t),{},{status:!t.status}):t}))})):n((function(t){return t.map((function(t){return t.key===e?Me(Me({},t),{},{status:!t.status}):t}))}))},v=function(e){n((function(t){return t.map((function(t){return t.key===e?Me(Me({},t),{},{required:!t.required}):t}))}))};return Object(r.createElement)("div",Le({id:"bwf_address_field_address","data-address-type":"address",className:"bwf_accordion bwf_address_sortable_area ui-sortable",ref:l.innerRef},l.droppableProps),t.map((function(e,t){return Object(r.createElement)(qe,{key:"bwf-address-field-sort-".concat(t),data:e,id:e.key,index:t,setFieldId:u,setShowContent:b,changeVisibility:p,fieldId:o,showContent:f,changePlaceholder:m,changeLabel:d,changeRequired:v})})),a&&a.map((function(e,t){return Object(r.createElement)(Re,{key:"bwf-address-field-".concat(t),data:e,index:t,setFieldId:u,setShowContent:b,changeVisibility:p,fieldId:o,showContent:f,changePlaceholder:m,changeLabel:d,changeRequired:v,sortable:!1})})))})),Ve=function(e){var t=e.onCloseModal,n=e.addressType,a=e.addressData,l=e.onChange,i=Te(Object(r.useState)([]),2),o=i[0],u=i[1],s=Te(Object(r.useState)([]),2),f=s[0],b=s[1],d=Te(Object(r.useState)(!1),2),m=d[0],p=d[1],y=function(){t()};Object(r.useEffect)((function(){u(a.filter((function(e){return!e.key.includes("same_as")}))),b(a.filter((function(e){return e.key.includes("same_as")})))}),[]);return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{onRequestClose:y,shouldCloseOnClickOutside:!1,isDismissible:!1,className:"bwf-admin-modal bwf-admin-modal-medium bwf-modal-edit-page bwf-fields-edit-field-modal bwf-section-modal bwf-admin-modal-no-header",overlayClassName:"bwf-dragging-overlay"},Object(r.createElement)(Pe.a,{title:Object(r.createElement)(r.Fragment,null,Object(c.__)("Field","funnel-builder")," -"," ","".concat(n," Address")),onClose:y}),Object(r.createElement)("div",{className:"sections"},Object(r.createElement)("div",{className:"bwf_vue_forms"},Object(r.createElement)("div",{className:"bwf_without_form_generator "},Object(r.createElement)("div",{className:"bwf_billing"},Object(r.createElement)(Ue,{onPopupClose:y,addressData:a,helperClass:"bwf-address-item__helper-class",onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;u((function(e){return xe()(e,t,n)}))},items:o,setAddress:u,setLastItems:b,lastItems:f})),Object(r.createElement)("div",{className:"bwf-admin-modal-footer wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(v.Button,{onClick:y,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,isBusy:m,onClick:function(){p(!0),l([].concat(Ae(o),Ae(f)))}},Object(c.__)("Update","funnel-builder"))))))))},He=(n(437),function(e){var t=e.onRequestClose,n=e.desc,a=void 0===n?"":n;return Object(r.createElement)(v.Modal,{title:Object(c.__)("Alert!","funnel-builder"),className:"bwf-validation-modal bwf-admin-modal bwf-admin-modal-small bwf-c-s-delete-model",onRequestClose:t},Object(r.createElement)("div",{className:"bwf-validation-desc bwf-modal-error bwf-modal-content"},a),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.a,{isPrimary:!0,onClick:t},Object(c.__)("Close","funnel-builder"))))}),Ge=n(282),Ke=n(25),Je=n(59);function $e(){return($e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var We=["product_switching","order_total"],Xe=function(e){var t=e.list,n=e.fieldIndex,a=e.sectionIndex,i=e.editField,u=e.onDeleteField,s=Object(o.a)("ck").isProFeatureLocked,f=Ye(Object(r.useState)({status:!1}),2),b=f[0],d=f[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ge.b,{draggableId:t.id?JSON.stringify(t.id):"field-list-".concat(n),key:t.id,index:n},(function(e){return Object(r.createElement)("div",$e({ref:e.innerRef,key:t.id},e.draggableProps,e.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui - sortable - handle bwf - width - auto",onClick:function(){s&&(null!=t&&t.is_pro||We.includes(t.id))?d({status:!0,feature:"product_switching"===t.id?Object(c.__)("Product Field","funnel-builder"):"order_total"===t.id?Object(c.__)("Order Total Field","funnel-builder"):Object(c.__)("Advanced Fields","funnel-builder"),proLink:Object(y.P)(["Form","Field","Section","Field","Upgrade","Modal"])}):i(t,a)}}),s&&((null==t?void 0:t.is_pro)||We.includes(t.id))&&Object(r.createElement)(Ke.b,{className:"size-16"}),Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==t?void 0:t.data_label),!t.hasOwnProperty("id")||"billing_email"===t.id||s&&(null!=t&&t.is_pro||We.includes(t.id))?Object(r.createElement)("span",{className:"bwf-ml-4"}):Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(e){u(t,a),e.stopPropagation()}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16})),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(c.__)("Click to edit. Drag to re-order.","funnel-builder")))})),b.status&&Object(r.createElement)(Je.a,{isOpen:b.status,onRequestClose:function(){return d({status:!1})},modalContent:b,type:2,module:"ck"}))};var Ze=function(e){var t=e.data,n=e.sectionIndex,a=e.editField,l=e.onDeleteField;return Object(r.createElement)(Ge.c,{droppableId:"droppableVM-".concat(t.id),type:"droppableVM",direction:"horizontal"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",{ref:e.innerRef,className:"bwf_template_field_container single_step ui-sortable"},t.hasOwnProperty("fields")&&Object(p.isArray)(t.fields)&&t.fields.length>0?null==t?void 0:t.fields.map((function(e,t){return Object(r.createElement)(Xe,{list:e,fieldIndex:t,sectionIndex:n,editField:a,onDeleteField:l,key:t})})):Object(r.createElement)("span",null,Object(c.__)("Drag new fields here to populate the section","funnel-builder"))),e.placeholder)}))};function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(){return(tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function nt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nt(Object(n),!0).forEach((function(t){at(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function at(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=et(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=et(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==et(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return lt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var it=function(e){var t=e.data,n=e.index,a=e.editSection,i=e.deleteSection,o=e.editField,u=e.onDeleteField,s=e.onDropFields,f=ct(Object(r.useState)(),2),b=f[0],d=f[1],v=ct(Object(r.useState)({}),2),y=v[0],O=v[1];return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(Ge.b,{draggableId:(null==t?void 0:t.id)||"section-".concat(n),key:null==t?void 0:t.id,index:n},(function(e){return Object(r.createElement)("div",{key:null==t?void 0:t.id},Object(r.createElement)("div",tt({ref:e.innerRef},e.draggableProps,{key:n,className:"bwf_field_container ui-sortable-handle",onDrop:function(e){s(e,b)},onDragEnter:function(e){d(n)},onDragOver:function(e){e.preventDefault()}}),Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("span",e.dragHandleProps,Object(r.createElement)("span",{title:"Click here and start drag and drop",className:"bwf-cursor-move"},Object(r.createElement)(l.a,{icon:"ul",size:"16"}))),Object(r.createElement)("div",{className:"bwf-flex"},Object(r.createElement)("span",{className:"bwf-section-name"},null==t?void 0:t.name),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"-"),Object(r.createElement)("span",{className:"bwf-section-heading ".concat(Object(p.isEmpty)(null==t?void 0:t.sub_heading)?"":"bwf-section-dash")},null==t?void 0:t.sub_heading)),Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){return a(t,n)}},Object(r.createElement)(l.a,{icon:"edit",color:"#82838E",size:16}))),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("span",{className:"bwf-cursor-pointer",onClick:function(){var e,a,l;e=null==t?void 0:t.name,a=n,l={modalTitle:Object(c.__)("Remove Section","funnel-builder"),content:Object(r.createElement)(r.Fragment,null,Object(c.__)("You are about to remove ","funnel-builder"),Object(r.createElement)("b",null,e),Object(c.__)(". This action cannot be undone. Cancel to stop, Remove to proceed.","funnel-builder")),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0},O(rt(rt({},l),{},{onConfirm:function(){i(a),O({status:!1})}}))}},Object(r.createElement)(l.a,{icon:"trash",color:"#82838E",size:18})))),Object(r.createElement)(Ze,{data:t,sectionIndex:n,editField:o,onDeleteField:u}))))})),Object(r.createElement)(m.a,{isLoading:y.loading,successMessage:y.success,errorMessage:y.error,isOpen:y.status,autoHide:8e3,closeIcon:!0,content:y.content,confirmText:y.confirmText,confirmButtonText:y.confirmButtonText,confirmButtonClass:y.confirmButtonClass,cancelButtonText:y.cancelButtonText,onConfirm:y.onConfirm,onCancel:y.onCancel,modalTitle:y.modalTitle,disableConfirm:y.disableConfirm,onRequestClose:function(){return O({status:!1})}}))};function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(){return(ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function st(e){return function(e){if(Array.isArray(e))return vt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ft(Object(n),!0).forEach((function(t){dt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ot(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ot(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ot(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){if(e){if("string"==typeof e)return vt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var yt=function(e,t,n){var r=Array.from(e),a=mt(r.splice(t,1),1)[0];return r.splice(n,0,a),r},Ot=function(e){var t=e.step,n=e.fieldsStep,a=e.setIsAddSection,l=e.onDeleteField,i=e.deleteSection,o=e.editSection,u=e.editField,s=e.updateStepField,f=e.onDropFields,b=e.activeStep,d=n[Object(p.size)(n)-1];return Object(r.createElement)("div",{"data-slug":"third_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder third_step ui-sortable"},Object(r.createElement)(Ge.a,{onDragEnd:function(e){var n=e.source,r=e.destination;if(e.destination)if("droppableStep"===e.type){var a=yt(t,e.source.index,e.destination.index);s(a)}else if("droppableVM"===e.type){var c,l=n.droppableId.substring(n.droppableId.indexOf("-")+1),i=r.droppableId.substring(r.droppableId.indexOf("-")+1),o=t.filter((function(e){return e.id===l})),u=t.filter((function(e){return e.id===i})),f=yt(null===(c=o[0])||void 0===c?void 0:c.fields,e.source.index,e.destination.index);if(l===i){var b=t.map((function(e){return e.id===l?bt(bt({},e),{},{fields:f}):e}));s(b)}else{var d,m,p=st(null===(d=o[0])||void 0===d?void 0:d.fields),v=st(null===(m=u[0])||void 0===m?void 0:m.fields),y=mt(p.splice(e.source.index,1),1)[0];v.splice(e.destination.index,0,y);var O=t.map((function(e){return e.id===l?bt(bt({},e),{},{fields:p}):e.id===i?bt(bt({},e),{},{fields:v}):e}));s(O)}}}},Object(r.createElement)(Ge.c,{droppableId:"droppable",type:"droppableStep"},(function(e){return Object(r.createElement)("div",null,Object(r.createElement)("div",ut({ref:e.innerRef},e.droppableProps),t.map((function(e,t){return Object(r.createElement)(it,{data:e,key:t,index:t,editSection:o,deleteSection:i,editField:u,onDeleteField:l,onDropFields:f})}))),e.placeholder)})))),d===b&&Object(r.createElement)("div",{className:"bwf_form_note_sec bwf_field_container bwf-mb-16"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(c.__)("Payment Gateways","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("span",null,Object(c.__)("Note: Payment Information containing gateways will be automatically added to the end of order form.","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)(v.Button,{isSecondary:!0,onClick:function(){return a(!0)}},Object(c.__)("Add New Section","funnel-builder"))))};function jt(){return(jt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function ht(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _t(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_t(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var gt=function(e){var t=e.onCloseModal,n=e.editData,a=e.editId,l=e.editSection,i=ht(Object(r.useState)({name:"",sub_heading:"",class:"",fields:[],id:""}),2),o=i[0],u=i[1],s=Object(r.useRef)(),f=ht(Object(r.useState)(!1),2),b=f[0],d=f[1];Object(r.useEffect)((function(){u(n)}),[n]);var m=function(){t()};Object(r.useEffect)((function(){s.current.focus()}),[]);var p=o;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{onRequestClose:m,title:Object(c.__)("Edit Section","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-section-modal"},Object(r.createElement)(U.a,{validate:function(){return{}},onSubmitCallback:function(e){d(!0),l(e,a)},initialValues:p},(function(e){var t=e.getInputProps,n=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(v.TextControl,jt({},t("name"),{label:Object(c.__)("Name","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()},ref:s}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(v.TextControl,jt({},t("sub_heading"),{label:Object(c.__)("Sub Heading","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)(v.TextControl,jt({},t("class"),{label:Object(c.__)("Classes","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&n()}}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-40"},Object(r.createElement)(v.Button,{onClick:m,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,isBusy:b,onClick:n},Object(c.__)("Update","funnel-builder"))))}))))};function wt(e){return function(e){if(Array.isArray(e))return Et(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Et(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Et(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var St=function(e){var t=e.selectors,n=void 0===t?[7,1,5]:t,a=e.sectionCount,c=void 0===a?3:a,l=e.staticSection,i=void 0===l||l,o=e.addSection,u=void 0===o||o,s=e.steps,f=void 0===s||s;return Object(r.createElement)("div",{className:"bwf-design-form"},Object(r.createElement)("div",{className:"bwf-form-title bwf-placeholder-temp bwf-h-28 bwf-w-180 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-form-description bwf-placeholder-temp bwf-h-20 bwf-w-400 bwf-mt-8"}),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},f?Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-240 bwf-h-30 bwf-rounded-3 bwf-border-1"}))):Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-20"}))),Object(r.createElement)("div",{className:"single_step_template"},wt(Array(c)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf_field_container",key:"bwf_field_container__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "})),Object(r.createElement)("div",{className:"bwf_field_container_action"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-20 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},wt(Array(4)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-drag-item-".concat(t)})}))))})),i&&Object(r.createElement)("div",{className:"bwf_field_container"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-20 "}))),Object(r.createElement)("div",{className:"bwf_template_field_container"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-400 bwf-h-16 "}))),u&&Object(r.createElement)("div",{className:"bwf_input_fields_btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-36 bwf-rounded-3 bwf-border-1"})))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in bwf-h-30"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-40 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}))),n.map((function(e,t){return Object(r.createElement)("div",{className:"bwf_input_fields",key:"bwf_input_fields__placeholder-".concat(t)},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-18 "}),Object(r.createElement)("div",{className:"bwf_input_fields_list"},wt(Array(e)).map((function(e,n){return Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-full bwf-h-30 bwf-rounded-3 bwf-border-1",key:"bwf-selector-drag-item__placeholder-".concat(t,"-").concat(n)})})))))}))))),Object(r.createElement)("div",{className:"bwf_form_submit bwf-mt-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-36 bwf-rounded-3 bwf-border-1"})))},Nt=n(21),kt=n(123);function xt(e){return(xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(){Pt=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",o=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof v?t:v,l=Object.create(c.prototype),i=new P(r||[]);return a(l,"_invoke",{value:S(e,n,i)}),l}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var b="suspendedStart",d="executing",m="completed",p={};function v(){}function y(){}function O(){}var j={};u(j,l,(function(){return this}));var h=Object.getPrototypeOf,_=h&&h(h(C([])));_&&_!==n&&r.call(_,l)&&(j=_);var g=O.prototype=v.prototype=Object.create(j);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,c,l,i){var o=f(e[a],e,c);if("throw"!==o.type){var u=o.arg,s=u.value;return s&&"object"==xt(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,i)}))}i(o.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function S(t,n,r){var a=b;return function(c,l){if(a===d)throw Error("Generator is already running");if(a===m){if("throw"===c)throw l;return{value:e,done:!0}}for(r.method=c,r.arg=l;;){var i=r.delegate;if(i){var o=N(i,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===b)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?m:"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=m,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var c=f(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,p;var l=c.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(xt(t)+" is not iterable")}return y.prototype=O,a(g,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:y,configurable:!0}),y.displayName=u(O,o,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,u(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},w(E.prototype),u(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var l=new E(s(e,n,r,a),c);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(g),u(g,o,"Generator"),u(g,l,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var l=this.tryEntries[c],i=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var o=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(o&&u){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,p):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function Ct(e,t,n,r,a,c,l){try{var i=e[c](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function At(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){Ct(c,r,a,l,i,"next",e)}function i(e){Ct(c,r,a,l,i,"throw",e)}l(void 0)}))}}function Tt(e){return function(e){if(Array.isArray(e))return zt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Mt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Lt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=xt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=xt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==xt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||Mt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e,t){if(e){if("string"==typeof e)return zt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zt(e,t):void 0}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Bt=function(e){var t=e.type,n=e.stepId,a=e.tab,i=e.offerId,u=Object(o.a)("ck").isProFeatureLocked,s=Object(o.b)().showSnackbar,f=Ft(Object(r.useState)(),2),b=f[0],v=f[1],h=Ft(Object(r.useState)(),2),_=h[0],w=h[1],E=Ft(Object(r.useState)(),2),S=E[0],N=E[1],k=Ft(Object(r.useState)(),2),x=k[0],P=k[1],C=Ft(Object(r.useState)(!1),2),A=C[0],T=C[1],I=Ft(Object(r.useState)(!1),2),D=I[0],L=I[1],F=Ft(Object(r.useState)(!1),2),M=F[0],z=F[1],B=Ft(Object(r.useState)(!1),2),R=B[0],q=B[1],U=Ft(Object(r.useState)(""),2),V=U[0],H=U[1],G=Ft(Object(r.useState)(!1),2),K=G[0],J=G[1],$=Ft(Object(r.useState)({}),2),Y=$[0],Q=$[1],X=Ft(Object(r.useState)({}),2),Z=X[0],ee=X[1],ne=Ft(Object(r.useState)(""),2),re=ne[0],ae=ne[1],ce=Ft(Object(r.useState)(["single_step"]),2),le=ce[0],ie=ce[1],oe=Ft(Object(r.useState)("single_step"),2),ue=oe[0],fe=oe[1],be=Ft(Object(r.useState)([]),2),de=be[0],me=be[1],pe=Ft(Object(r.useState)([]),2),ve=pe[0],ye=pe[1],Oe=Ft(Object(r.useState)([]),2),je=Oe[0],he=Oe[1],_e=Ft(Object(r.useState)({}),2),ge=_e[0],we=_e[1],Se=Ft(Object(r.useState)(""),2),Ne=Se[0],ke=Se[1],Pe=Ft(Object(r.useState)(""),2),Ce=Pe[0],Ae=Pe[1],Te=Ft(Object(r.useState)([]),2),Ie=Te[0],De=Te[1],Le=Ft(Object(r.useState)([]),2),Fe=Le[0],Me=Le[1],ze=Ft(Object(r.useState)([]),2),Be=ze[0],Re=ze[1],qe=Ft(Object(r.useState)(!1),2),Ue=qe[0],Ge=qe[1],$e=Ft(Object(r.useState)(),2),Ye=$e[0],Qe=$e[1],We=Ft(Object(r.useState)(""),2),Xe=We[0],Ze=We[1],et=Ft(Object(r.useState)({status:!1}),2),tt=et[0],nt=et[1],rt=Ft(Object(r.useState)(!1),2),at=rt[0],ct=rt[1],lt=Ft(Object(r.useState)(!1),2),it=lt[0],ot=lt[1],ut=Ft(Object(r.useState)([]),2),st=ut[0],ft=ut[1],bt=Ft(Object(r.useState)(!1),2),dt=bt[0],mt=bt[1],pt=Object(r.useRef)(new AbortController),vt=Object(r.useRef)(!0),yt=Object(g.a)(),jt=yt.getFormLoading,ht=yt.getFormData,_t=yt.getStep,wt=Object(j.a)(),Et=wt.fetchStepFields,xt=wt.setFormFieldData,Ct=wt.setSaveDataValue,It=wt.fetchStep,Lt=jt(),Mt=ht(t,n,a,i),zt=_t(t,n,a,i).unSavedData,Bt=void 0!==zt&&zt;Object(r.useEffect)((function(){re&&(s(re),ae(""))}),[re]);var Rt=Mt.dependency_messages,qt=void 0===Rt?[]:Rt,Ut=Mt.fields,Vt=void 0===Ut?[]:Ut,Ht=Mt.fields_data,Gt=void 0===Ht?{}:Ht,Kt=Mt.fields_types,Jt=void 0===Kt?[]:Kt,$t=Vt.active_fields,Yt=void 0===$t?[]:$t,Qt=Vt.steps,Wt=void 0===Qt?{}:Qt,Xt=Vt.product_fields,Zt=void 0===Xt?{}:Xt,en=Gt.basic,tn=Gt.advanced,nn=Gt.product,rn=Gt.third_party,an=Gt.address_order,cn=void 0===an?{}:an,ln=cn.address,on=void 0===ln?[]:ln,un=cn.shipping_address,sn=void 0===un?[]:un,fn=Zt.products,bn=void 0===fn?[]:fn,dn=Zt.default_products,mn=void 0===dn?"":dn,pn=Zt.settings,vn=void 0===pn?{}:pn,yn=Zt.add_to_cart_setting,On=void 0===yn?"":yn,jn=Vt.fieldsets,hn=void 0===jn?{}:jn;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(hn)){if(hn.hasOwnProperty("single_step")&&hn.single_step){var e=hn.single_step;me(e),De(e)}hn.hasOwnProperty("two_step")&&hn.two_step?(ye(hn.two_step),Me(hn.two_step)):(ye([]),Me([])),hn.hasOwnProperty("third_step")&&hn.third_step?(he(hn.third_step),Re(hn.third_step)):(he([]),Re([]))}}),[hn]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(qt)){var e=qt.map((function(e){return Dt(Dt({},e),{},{showDependency:!1})}));ft(e)}}),[qt]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(hn)){var e=Object(p.cloneDeep)(Mt);e.fields.active_fields=_n(hn),xt(t,n,a,i,e,{})}}),[Lt]),Object(r.useEffect)((function(){if(!Object(p.isEmpty)(Wt)){var e=["single_step"];Wt.hasOwnProperty("two_step")&&"yes"===Wt.two_step.active&&e.push("two_step"),e.includes("two_step")&&Wt.hasOwnProperty("third_step")&&"yes"===Wt.third_step.active&&e.push("third_step"),ie(e)}}),[Wt]),Object(r.useEffect)((function(){return(Object(p.isEmpty)(Mt)||Lt||Bt)&&Et(t,n,a,i,pt.current.signal),function(){vt.current=!1,pt.current.abort()}}),[]);var _n=function(e){var t=[];e.hasOwnProperty("single_step")&&e.single_step.length>0&&e.single_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,Tt(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("two_step")&&e.two_step.length>0&&e.two_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,Tt(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))})),e.hasOwnProperty("third_step")&&e.third_step.length>0&&e.third_step.forEach((function(e){e&&e.hasOwnProperty("fields")&&Object(p.isArray)(e.fields)&&t.push.apply(t,Tt(null==e?void 0:e.fields.map((function(e){return e.id.toString()}))))}));var n=[].concat(t);return Tt(new Set(n))},gn=function(e){var r=tn.filter((function(t){return t.id!==e})),c=Object(p.cloneDeep)(Mt);c.fields_data.advanced=r,xt(t,n,a,i,c)},wn=function(e){var t=0,n=0,r="";r=0===Object(p.size)(le)||1==Object(p.size)(le)?"single_step":2===Object(p.size)(le)?"two_step":"third_step";var a=!1;return Object.values(e).every((function(e){return e.every((function(e){return e.fields.every((function(e){return"address"===e.id?(n=1,t=2,a=!0):"shipping_address"===e.id&&(t=1,n=2,a=!0),!0!==a})),!0!==a})),!0!==a})),{current_step:r,have_billing_address:Yt.includes("address")?"true":"false",have_shipping_address:Yt.includes("shipping_address")?"true":"false",have_coupon_field:Yt.includes("order_coupon")?"true":"false",have_shipping_method:Yt.includes("shipping_calculator")?"true":"false",enabled_product_switching:Yt.includes("product_switching")?"yes":"no",have_billing_address_index:n,have_shipping_address_index:t}},En=function(){var e=At(Pt().mark((function e(){var r,l,o,u,s,f,b,m,v,O,j,h,_,g=arguments;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=g.length>0&&void 0!==g[0]?g[0]:{},l=g.length>1?g[1]:void 0,o=g.length>2?g[2]:void 0,u=wn(r.hasOwnProperty("fieldsets")?r.fieldsets:hn),s={steps:Wt,fieldsets:r.hasOwnProperty("fieldsets")?r.fieldsets:hn,products:bn,address_order:r.hasOwnProperty("address_order")?r.address_order:cn,default_products:Object(p.get)(r,"product_fields.default_products",mn),product_settings:vn,product_fields:r.hasOwnProperty("product_fields")?r.product_fields:Zt,current_step:u.current_step,have_billing_address:u.have_billing_address,have_shipping_address:u.have_shipping_address,have_coupon_field:u.have_coupon_field,have_shipping_method:u.have_shipping_method,enabled_product_switching:u.enabled_product_switching,have_billing_address_index:u.have_billing_address_index,have_shipping_address_index:u.have_shipping_address_index,active_fields:Yt},f=!1,b=!1,le.includes("third_step")&&(v=0,null===(m=r.hasOwnProperty("fieldsets")?r.fieldsets:hn)||void 0===m||null===(m=m.two_step)||void 0===m||m.map((function(e){0===Object(p.size)(e.fields)&&0===v?f=!0:v+=1})),0===Object(p.size)(null==hn?void 0:hn.two_step)&&(f=!0)),le.includes("two_step")&&(h=0,null===(O=r.hasOwnProperty("fieldsets")?r.fieldsets:hn)||void 0===O||null===(O=O.single_step)||void 0===O||O.map((function(e){0===Object(p.size)(e.fields)&&0===h?b=!0:h+=1})),0===Object(p.size)(null===(j=r.hasOwnProperty("fieldsets")?r.fieldsets:hn)||void 0===j?void 0:j.single_step)&&(b=!0)),_=!1,Yt.includes("billing_email")&&(_=!0),_){e.next=15;break}Ge(!0),e.next=32;break;case 15:if(!b){e.next=19;break}ot(!0),e.next=32;break;case 19:if(!f){e.next=23;break}ct(!0),e.next=32;break;case 23:return e.prev=23,e.next=26,d()({path:Object(y.u)("/funnel-checkout/".concat(n,"/form_fields")),method:"POST",data:s}).then((function(e){e.success?(Ct(!1),l?(gn(o),Q({loading:!1,status:!1})):xt(t,n,a,i,{},{unSavedData:!1}),"checkout"===t&&It(t,n,"optimizations",i),ae(Object(c.__)("Changes Saved","funnel-builder"))):ae(e.msg||e.message)}));case 26:e.next=32;break;case 28:e.prev=28,e.t0=e.catch(23),console.log(e.t0),ae(e.t0.message);case 32:mt(!1);case 33:case"end":return e.stop()}}),e,null,[[23,28]])})));return function(){return e.apply(this,arguments)}}(),Sn=function(e){var r=Object(p.cloneDeep)(Mt);switch(e){case"third_step":r.fields.current_step="two_step";break;case"two_step":r.fields.current_step="single_step"}r.fields.steps[e].active="no",delete r.fields.fieldsets[e],r.fields.active_fields=_n(r.fields.fieldsets),xt(t,n,a,i,r,{unSavedData:!0})},Nn=function(e){var r=Object(p.cloneDeep)(Mt);r.fields.current_step=e,r.fields.steps[e].active="yes",xt(t,n,a,i,r,{unSavedData:!0}),setTimeout((function(){return fe(e)}),100)},kn=function(e,t){var n=[];return e.map((function(e,r){r===t&&e.fields.map((function(e){return n.push(e.id)}))})),Yt.filter((function(e){return!n.includes(e)}))},xn={wfacp_duplicate_billing_first_and_last_name:function(){return!!["billing_first_name","billing_last_name"].map((function(e){var t=!1;return Yt.includes(e)&&on.filter((function(t){if(t.key===e)return t})).map((function(e){return!!e.status})).includes(!0)&&(t=!0),t})).includes(!0)}};Object(r.useEffect)((function(){if(st.length>0){var e=Object(p.cloneDeep)(st);e=e.map((function(e){return e.hasOwnProperty("isRemoved")&&e.isRemoved?(e.showDependency=!1,e):e.hasOwnProperty("ids")&&Array.isArray(e.ids)?(Yt.filter((function(t){return e.ids.includes(t)})).length>0?e.showDependency=!1:e.showDependency=!0,e):e.hasOwnProperty("reverse_check")&&e.reverse_check&&e.hasOwnProperty("id")&&""!==e.id?(Yt.includes(e.id)?e.showDependency=!0:e.showDependency=!1,e):e.hasOwnProperty("call_back")&&xn.hasOwnProperty(e.call_back)?(xn[e.call_back]()?e.showDependency=!0:e.showDependency=!1,e):(e.hasOwnProperty("show")&&e.show&&(e.showDependency=!0),e)})),ft(e)}}),[Yt,on,Wt,Lt,le]);var Pn=function(){var e=At(Pt().mark((function e(t){var r;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={},t.hasOwnProperty("message_id")&&(r.message_id=t.message_id),r.message_type=t.hasOwnProperty("is_global")&&!0===t.is_global?"global":"self";try{d()({path:Object(y.u)("/funnel-checkout/".concat(n,"/form_fields/hide-message")),method:"POST",data:r}).then((function(e){if(e.success){if(r.hasOwnProperty("message_id")){var t=Object(p.cloneDeep)(st);t=t.map((function(e){return e.hasOwnProperty("message_id")&&r.message_id===e.message_id&&(e.showDependency=!1,e.isRemoved=!0),e})),ft(t)}}else ae(e.msg||e.message)}))}catch(e){console.log(e.message)}case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cn=function(){nt({status:!0,feature:Object(c.__)("Multistep Checkout","funnel-builder"),proLink:Object(y.P)(["Form","Field","Section","Field","Upgrade","Modal"])})};return Lt?Object(r.createElement)(St,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-title"},Object(c.__)("Checkout Form Fields","funnel-builder")),Object(r.createElement)("style",null,".bwfan__step-header .bwf-step-menu-header{\n\t\tmargin-bottom: 12px !important;\n\t   }"),Object(r.createElement)("div",{className:" bwf_w_full"},st.map((function(e,t){if(e.showDependency)return Object(r.createElement)("div",{key:t,className:"bwf-form-field-warning ".concat(e.dismissible?"":"bwf-remove-icon")},Object(r.createElement)("div",{className:"bwf-warning-text"},Object(r.createElement)("div",{className:"bwf-warning-icon"},Object(r.createElement)(l.a,{icon:"info",width:20,height:20})),Object(r.createElement)("div",{className:"bwf-warning-content",dangerouslySetInnerHTML:{__html:e.message}}),e.dismissible&&Object(r.createElement)("div",{className:"bwf-cursor-pointer",onClick:function(){Pn(e)}},Object(r.createElement)(l.a,{icon:"close",width:16,height:16}))))}))),Object(r.createElement)("div",{id:"bwf_fields_layout_container"},Object(r.createElement)("div",{className:"bwf_form_field_header"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("div",{className:"bwf_template_tabs_container"},Object(r.createElement)("div",{className:"bwf_step_actions"},Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){return fe("single_step")}},Object(r.createElement)("div",{"data-slug":"single_step",className:"bwf_template_tabs ".concat("single_step"===ue&&"bwf_active_tabs"," ")},Object(r.createElement)("span",null,Object(c.__)("Step 1","funnel-builder")))),(null==le?void 0:le.length)>1&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){u?Cn():fe("two_step")}},Object(r.createElement)("div",{"data-slug":"two_step",className:"bwf_template_tabs ".concat("two_step"===ue&&"bwf_active_tabs"," ")},u&&Object(r.createElement)(Ke.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(c.__)("Step 2","funnel-builder")),!u&&2===(null==le?void 0:le.length)&&Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),Sn("two_step"),setTimeout((function(){fe("single_step")}),100)}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16})))),(null==le?void 0:le.length)>2&&Object(r.createElement)("div",{className:"bwf_step_heading",onClick:function(){u?Cn():fe("third_step")}},Object(r.createElement)("div",{"data-slug":"third_step",className:"bwf_template_tabs ".concat("third_step"===ue&&"bwf_active_tabs"," ")},u&&Object(r.createElement)(Ke.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(c.__)("Step 3","funnel-builder")),!u&&Object(r.createElement)("span",{className:"bwf-svg-icon",onClick:function(e){e.stopPropagation(),Sn("third_step"),setTimeout((function(){fe("two_step")}),100)}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16}))))),(null==le?void 0:le.length)<3&&Object(r.createElement)("div",{className:"bwf_add_new_step"},Object(r.createElement)("div",{className:"bwf_step bwf_modal_open bwf_step_add_step_btn",onClick:function(){u?Cn():1==le.length?Nn("two_step"):2==le.length&&Nn("third_step")}},u&&Object(r.createElement)(Ke.b,{className:"size-16"})," ",Object(r.createElement)("span",null,!u&&"+"," ",Object(c.__)("Add New Step","funnel-builder")))))),Object(r.createElement)(O.a,{isPrimary:!0,onClick:function(){mt(!0),En()},isBusy:dt,disabled:dt},Object(c.__)("Save","funnel-builder")))),Object(r.createElement)("div",{className:"bwf_p20_noside bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf_wrap_inner_fields bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container bwf-position-relative"},u&&"single_step"!==ue&&Object(r.createElement)(kt.b,{modalContent:{feature:Object(c.__)("Multistep Checkout","funnel-builder"),proLink:Object(y.P)(["Form","Field","MultiStep","Upgrade","Modal"])},content:Object(c.__)("We're sorry, this feature is not available on your plan. Learn more about Multistep Checkout.","funnel-builder")}),Object(r.createElement)("div",null,Object(r.createElement)(Ot,{activeStep:ue,step:"single_step"==ue?de:"two_step"==ue?ve:je,fields:"single_step"==ue?Ie:"two_step"==ue?Fe:Be,fieldsStep:le,setIsAddSection:L,helperClass:"bwf-section-item__helper-class",onSortEnd:function(e){var r=e.oldIndex,c=e.newIndex;"single_step"==ue?(me((function(e){return xe()(e,r,c)})),De((function(e){return xe()(e,r,c)}))):"two_step"==ue?(ye((function(e){return xe()(e,r,c)})),Me((function(e){return xe()(e,r,c)}))):(he((function(e){return xe()(e,r,c)})),Re((function(e){return xe()(e,r,c)})));var l=Object(p.cloneDeep)(Mt);"single_step"===ue?l.fields.fieldsets.single_step=xe()(l.fields.fieldsets.single_step,r,c):"two_step"===ue?l.fields.fieldsets.two_step=xe()(l.fields.fieldsets.two_step,r,c):"third_step"===ue&&(l.fields.fieldsets.third_step=xe()(l.fields.fieldsets.third_step,r,c)),l.fields.active_fields=_n(l.fields.fieldsets),xt(t,n,a,i,l,{unSavedData:!0})},onDeleteField:function(e,r){var c,l=Object(p.cloneDeep)(Mt);if(l.fields.active_fields=l.fields.active_fields.filter((function(t){if(t!=e.id)return t})),"single_step"==ue)Ie[r].fields=null===(c=Ie[r])||void 0===c||null===(c=c.fields)||void 0===c?void 0:c.filter((function(t){return t.id!=e.id})),l.fields.fieldsets.single_step=JSON.parse(JSON.stringify(Ie));else if("two_step"==ue){var o;Fe[r].fields=null===(o=Fe[r])||void 0===o||null===(o=o.fields)||void 0===o?void 0:o.filter((function(t){return t.id!=e.id})),l.fields.fieldsets.two_step=JSON.parse(JSON.stringify(Fe))}else if("third_step"==ue){var u;Be[r].fields=null===(u=Be[r])||void 0===u||null===(u=u.fields)||void 0===u?void 0:u.filter((function(t){return t.id!=e.id})),l.fields.fieldsets.third_step=JSON.parse(JSON.stringify(Be))}xt(t,n,a,i,l,{unSavedData:!0})},deleteSection:function(e){var r=Object(p.cloneDeep)(Mt),c=[];if("single_step"==ue){var l=de.filter((function(t,n){return n!==e}));r.fields.fieldsets.single_step=JSON.parse(JSON.stringify(l)),c=kn(de,e)}else if("two_step"==ue){var o=ve.filter((function(t,n){return n!==e}));r.fields.fieldsets.two_step=JSON.parse(JSON.stringify(o)),c=kn(ve,e)}else{var u=je.filter((function(t,n){return n!==e}));r.fields.fieldsets.third_step=JSON.parse(JSON.stringify(u)),c=kn(je,e)}r.fields.active_fields=c,xt(t,n,a,i,r,{unSavedData:!0})},editSection:function(e,t){we(e),Ze(!0),ke(t)},editField:function(e,t){ee(e),"product_switching"===e.id?q(!0):"address"===e.id?(H("Billing"),J(!0)):"shipping_address"===e.id?(H("Shipping"),J(!0)):"product_switching"!==e.id&&"wc_advanced_order_field"!==e.id&&(z(!0),Qe(t))},updateStepField:function(e){var r=Object(p.cloneDeep)(Mt);"single_step"===ue?(r.fields.fieldsets.single_step=e,me(e),De(e)):"two_step"===ue?(r.fields.fieldsets.two_step=e,ye(e),Me(e)):"third_step"===ue&&(r.fields.fieldsets.third_step=e,he(e),Re(e)),r.fields.active_fields=_n(r.fields.fieldsets),xt(t,n,a,i,r)},onDropFields:function(e,r){var c=Object(p.cloneDeep)(Mt);if("single_step"===ue){var l;if("product"===Ce)null===(l=de[r])||void 0===l||l.fields.push(S);else if("advance"===Ce){var o;null===(o=de[r])||void 0===o||o.fields.push(b)}else if("basic"===Ce){var u;null===(u=de[r])||void 0===u||u.fields.push(_)}else if("third_party"===Ce){var s;null===(s=de[r])||void 0===s||s.fields.push(x)}c.fields.fieldsets.single_step=JSON.parse(JSON.stringify(de))}else if("two_step"===ue){var f;if("product"==Ce)null===(f=ve[r])||void 0===f||f.fields.push(S);else if("advance"===Ce){var d;null===(d=ve[r])||void 0===d||d.fields.push(b)}else if("basic"===Ce){var m;null===(m=ve[r])||void 0===m||m.fields.push(_)}else if("third_party"===Ce){var v;null===(v=ve[r])||void 0===v||v.fields.push(x)}c.fields.fieldsets.two_step=JSON.parse(JSON.stringify(ve))}else if("third_step"===ue){var y;if("product"==Ce)null===(y=je[r])||void 0===y||y.fields.push(S);else if("advance"===Ce){var O;null===(O=je[r])||void 0===O||O.fields.push(b)}else if("basic"===Ce){var j;null===(j=je[r])||void 0===j||j.fields.push(_)}else if("third_party"===Ce){var h;null===(h=je[r])||void 0===h||h.fields.push(x)}c.fields.fieldsets.third_step=JSON.parse(JSON.stringify(je))}c.fields.active_fields=_n(c.fields.fieldsets),xt(t,n,a,i,c,{unSavedData:!0})}}))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in "},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(c.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=en[n];null!=Yt&&Yt.includes(t.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(e){return n=t,Ae("basic"),void w(n);var n},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in en)t();return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Product","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=nn[n];null!=Yt&&Yt.includes(t.id)||u&&t.is_pro?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&t.is_pro&&Object(r.createElement)(Ke.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(e){return n=t,Ae("product"),void N(n);var n},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in nn)t();return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t={a:0,b:0},a=function(){var a=tn[i];Object(p.isEmpty)(a.label)||(null!=Yt&&Yt.includes(a.id.toString())||u&&a.is_pro?(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id+t.a.toString()},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&a.is_pro&&Object(r.createElement)(Ke.b,{className:"size-16"}),Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==a?void 0:a.label))))),t.a++):(e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:a.id+t.b.toString()},Object(r.createElement)("div",{onDragStart:function(e){return t=a,Ae("advance"),void v(t);var t},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text bwf-white-break-space"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==a?void 0:a.label)),a.allow_delete&&Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(c.__)("Delete Field","funnel-builder"),content:Object(c.sprintf)(Object(c.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),a.label),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};Q(Dt(Dt({},e),{},{onConfirm:function(){!function(e,t){Q(Dt(Dt({},t),{},{disableConfirm:!0}));try{d()({path:Object(y.u)("/funnel-checkout/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:{section:"advanced",index:e}}).then((function(t){t.success?(gn(e),En({},!0,e)):ae(t.msg||t.message)}))}catch(e){Q({status:!0,error:e.message||e.msg})}}(a.id,e)}}))}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16}))))),t.b++))};for(var i in tn)a();return e}()))),Object(r.createElement)("div",{className:"bwf_input_fields bwf-third-party"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title bwf-flex bwf--space-between "},Object(r.createElement)("div",{className:"bwf-flex bwf--align-end bwf--g8"},Object(r.createElement)("b",null,Object(c.__)("Third Party Addon Field","funnel-builder")))),Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=rn[n];null!=Yt&&Yt.includes(t.id)||u&&"yes"===t.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder"},u&&"yes"===t.is_locked&&Object(r.createElement)(Ke.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(e){return n=t,Ae("third_party"),void P(n);var n},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in rn)t();return e}()),Object(r.createElement)("div",{className:"bwf-description bwf-text-style-3 bwf-color-normal"},Object(r.createElement)("div",null,Object(c.__)("Drag this field to show the advanced fields registered by other plugins in case they are missing from the checkout.","funnel-builder")),Object(r.createElement)("div",null,Object(r.createElement)("span",null,Object(c.__)("Still not seeing field on the checkout?","funnel-builder")),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Third+Party+Checkout+Field&utm_campaign=fb+lite+plugin",target:"_blank"},Object(c.__)(" Contact Support","funnel-builder"))))))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(O.a,{isSmall:!0,isSecondary:!0,onClick:function(){u?nt({status:!0,feature:Object(c.__)("Adding Field","funnel-builder"),content:{},proLink:Object(y.P)(["Form","Field","New","Field","Upgrade","Modal"])}):T(!0)}},u?Object(r.createElement)(l.a,{icon:"king",size:"20",color:Nt.BLUE_BASE}):""," ",Object(c.__)("Add New Field","funnel-builder"))))))))),A&&Object(r.createElement)(W,{fieldTypes:Jt,onCloseModal:function(){T(!1)},onSuccess:function(e){T(!1);var r=Object(p.cloneDeep)(Mt);r.fields_data.advanced=[].concat(Tt(tn),[e]),xt(t,n,a,i,r)},SnackBarMsg:function(e){ae(e)}}),D&&Object(r.createElement)(te,{onCloseModal:function(){L(!1)},addedSection:function(){var e=At(Pt().mark((function e(r){var c;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(p.cloneDeep)(Mt),"single_step"===ue?c.fields.fieldsets.single_step=[].concat(Tt(de),[r]):"two_step"===ue?c.fields.fieldsets.two_step=[].concat(Tt(ve),[r]):"third_step"===ue&&(c.fields.fieldsets.third_step=[].concat(Tt(je),[r])),xt(t,n,a,i,c,{unSavedData:!0}),L(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Xe&&Object(r.createElement)(gt,{onCloseModal:function(){Ze(!1)},editId:Ne,editData:ge,editSection:function(){var e=At(Pt().mark((function e(r,c){var l,o,u,s;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l=Object(p.cloneDeep)(Mt),"single_step"===ue?(o=de.map((function(e,t){return t==c?r:e})),l.fields.fieldsets.single_step=JSON.parse(JSON.stringify(o))):"two_step"===ue?(u=ve.map((function(e,t){return t===c?r:e})),l.fields.fieldsets.two_step=JSON.parse(JSON.stringify(u))):"third_step"===ue&&(s=je.map((function(e,t){return t==c?r:e})),l.fields.fieldsets.third_step=JSON.parse(JSON.stringify(s))),xt(t,n,a,i,l,{unSavedData:!0}),Ze(!1);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),M&&Object(r.createElement)(se,{onCloseModal:function(){z(!1)},updated:function(e){var r=Object(p.cloneDeep)(Mt);r.fields=e,xt(t,n,a,i,r),z(!1),ae(Object(c.__)("Changes Saved","funnel-builder"))},updatedField:Z,fields:Vt,activeStep:ue,updatedSectionId:Ye,SnackBarMsg:function(e){ae(e)}}),R&&Object(r.createElement)(Ee,{onCloseModal:function(){q(!1)},productData:Zt,addToCartSettings:On,onChange:function(){var e=At(Pt().mark((function e(r){var c;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=Object(p.cloneDeep)(Mt)).fields.product_fields=Dt(Dt({},c.fields.product_fields),r),xt(t,n,a,i,c,{unSavedData:!0}),e.next=5,En({product_fields:c.fields.product_fields});case 5:q(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),K&&Object(r.createElement)(Ve,{onCloseModal:function(){J(!1)},addressType:V,addressData:"Billing"===V?on:sn,onChange:function(){var e=At(Pt().mark((function e(r){var c;return Pt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=Object(p.cloneDeep)(Mt),"Billing"===V?c.fields_data.address_order.address=JSON.parse(JSON.stringify(r)):c.fields_data.address_order.shipping_address=JSON.parse(JSON.stringify(r)),xt(t,n,a,i,c),e.next=5,En({address_order:c.fields_data.address_order});case 5:J(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:Y.loading,successMessage:Y.success,errorMessage:Y.error,isOpen:Y.status,autoHide:8e3,closeIcon:!0,content:Y.content,confirmText:Y.confirmText,confirmButtonText:Y.confirmButtonText,confirmButtonClass:Y.confirmButtonClass,cancelButtonText:Y.cancelButtonText,onConfirm:Y.onConfirm,onCancel:Y.onCancel,modalTitle:Y.modalTitle,disableConfirm:Y.disableConfirm,onRequestClose:function(){return Q({status:!1})}}),Ue&&Object(r.createElement)(He,{desc:Object(c.__)("Billing Email is required for processing payment","funnel-builder"),onRequestClose:function(){Ge(!1),Ct(!1)}}),at&&Object(r.createElement)(He,{desc:Object(c.__)("Step 2 can't be blank. Add a few fields or remove the step and save again.","funnel-builder"),onRequestClose:function(){ct(!1),Ct(!1)}}),it&&Object(r.createElement)(He,{desc:Object(c.__)("Step 1 can't be blank. Add a few fields and save again.","funnel-builder"),onRequestClose:function(){ot(!1),Ct(!1)}}),tt.status&&Object(r.createElement)(Je.a,{isOpen:tt.status,onRequestClose:function(){return nt({status:!1})},modalContent:tt,type:2,module:"ck"})))},Rt=(n(326),n(281));function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ut(){return(Ut=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vt(Object(n),!0).forEach((function(t){Gt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=qt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Jt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var $t=function(e){var t=e.onCloseModal,n=e.onSuccess,a=e.SnackBarMsg,l=e.stepId,i=Kt(Object(r.useState)(!1),2),o=i[0],u=i[1],s=Kt(Object(r.useState)("text"),2),f=s[0],b=s[1],m=function(){t()},p=Kt(Object(r.useState)({field_type:"text",label:"",placeholder:"",default:"",required:!1,options:"",radio_alignment:"horizontal",section_type:"advanced",enable_time:"false",preferred_time_format:"",show_custom_field_at_thankyou:"false",show_custom_field_at_email:"false",width:""}),2),j=p[0],h=p[1];Object(r.useEffect)((function(){h((function(e){return Ht(Ht({},e),{},{field_type:f,default:"checkbox"===f?"1":""})}))}),[f]);var _=j;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{onRequestClose:m,title:Object(c.__)("Add Field","funnel-builder"),className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-add-field-modal bwf-optin-form-modal"},Object(r.createElement)(U.a,{validate:function(e){var t={};return""===e.label.trim()&&(t.label=Object(c.__)("Label is required","funnel-builder")),e.label||(t.label=Object(c.__)("Label is required","funnel-builder")),["radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(c.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){u(!0);try{var t='{"section":"advanced","fields":'.concat(JSON.stringify(e),"}");d()({path:Object(y.u)("/funnel-optin/".concat(l,"/form_fields/add_field")),method:"POST",data:JSON.parse(t)}).then((function(e){e.success?(u(!1),n(e.data)):(u(!1),a(Object(c.__)("Something went wrong, Please contact to support team","funnel-builder")))}))}catch(e){u(!1),a(e.msg||e.message)}},initialValues:_,onChange:function(e,t){b(t.field_type)}},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,l=e.touched,i=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Field Type","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(V.b,Ut({},t("field_type"),{options:[{label:Object(c.__)("Text","funnel-builder"),value:"text",key:"text"},{label:Object(c.__)("Radio","funnel-builder"),value:"radio",key:"radio"},{label:Object(c.__)("HTML","funnel-builder"),value:"wfop_wysiwyg",key:"wfop_wysiwyg"},{label:Object(c.__)("Select","funnel-builder"),value:"select",key:"select"},{label:Object(c.__)("Textarea","funnel-builder"),value:"textarea",key:"textarea"},{label:Object(c.__)("Checkbox","funnel-builder"),value:"checkbox",key:"checkbox"},{label:Object(c.__)("Hidden","funnel-builder"),value:"hidden",key:"hidden"}]})))),["text","radio","wfop_wysiwyg","select","textarea","checkbox","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Label","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Ut({},t("label"),{placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})),l.label&&a.label&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["text","select","textarea"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Ut({},t("placeholder"),{label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})))),["text","radio","select","textarea","hidden"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Ut({},t("default"),{label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&i()}})))),["checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(V.b,Ut({options:[{label:Object(c.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(c.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]},t("default"),{onKeyPress:function(e){"Enter"===e.key&&i()}})))),["radio","select"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(l.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Ut({placeholder:Object(c.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&i()}})),l.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},Object(c.__)("This is a required field","funnel-builder")))),["radio"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-modal-radio"},Object(r.createElement)(Rt.a,Ut({options:[{label:Object(c.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(c.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["text","radio","select","textarea","checkbox"].includes(n.field_type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,Ut({},t("required"),{label:Object(c.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons"},Object(r.createElement)(O.a,{onClick:m,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,onClick:i,isBusy:o,disabled:o},Object(c.__)("Add","funnel-builder"))))}))))};function Yt(e){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(){return(Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Wt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(n),!0).forEach((function(t){Zt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Yt(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yt(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function en(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var nn=function(e){var t=e.onCloseModal,n=e.updatedField,a=e.fields,i=e.updated,o=e.SnackBarMsg,u=e.stepId,s=en(Object(r.useState)(!1),2),f=s[0],b=s[1],m=en(Object(r.useState)(n),2),p=m[0],j=m[1],h=function(){t()};Object(r.useEffect)((function(){switch(p.required){case"1":case"true":j((function(e){return Xt(Xt({},e),{},{required:!0})}));break;case"0":case"false":j((function(e){return Xt(Xt({},e),{},{required:!1})}))}switch(p.phone_validation){case"1":case"true":j((function(e){return Xt(Xt({},e),{},{phone_validation:!0})}));break;case"0":case"false":j((function(e){return Xt(Xt({},e),{},{phone_validation:!1})}))}}),[p]);var _=p;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(v.Modal,{onRequestClose:h,isDismissible:!1,className:"bwf-admin-modal bwf-modal-edit-page bwf-fields-update-field-modal bwf-optin-form-modal bwf-admin-modal-no-header",shouldCloseOnClickOutside:!1},Object(r.createElement)(U.a,{validate:function(e){var t={};return["radios","radio","select"].includes(e.field_type)&&!e.options&&(t.options=Object(c.__)("Options are required","funnel-builder")),t},onSubmitCallback:function(e){!function(e){b(!0);var t=a.map((function(t){return t.id===e.id?e:t}));try{d()({path:Object(y.u)("/funnel-optin/".concat(u,"/form_fields")),method:"POST",data:t}).then((function(e){e.success?(b(!1),i(t)):o(Object(c.__)("Something went wrong, Please contact to support team","funnel-builder"))}))}catch(e){o(e.message||e.msg)}}(e)},initialValues:_},(function(e){var t=e.getInputProps,n=e.values,a=e.errors,i=e.touched,o=e.handleSubmit;return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(c.__)("Field","funnel-builder")," -"," ","wfop_wysiwyg"!==n.type&&"html"!==n.type?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label),Object(r.createElement)("span",null,"(",Object(c.__)("Field Type : ","funnel-builder")," ",null==n?void 0:n.type,")")):Object(r.createElement)("span",{className:"subtitle_wrap"},null==n?void 0:n.label)),Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(c.__)("Close","funnel-builder"),onClick:h},Object(r.createElement)(l.a,{icon:"close",size:20}))),["text","radios","radio","html","select","textarea","checkbox","hidden","email","wfop_wysiwyg","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.label&&a.label?"bwf-validation":""," ")},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Qt({},t("label"),{label:Object(c.__)("Label","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})),("wfop_wysiwyg"===n.type||"html"===n.type)&&Object(r.createElement)("small",null,Object(r.createElement)("strong",null,Object(r.createElement)("i",null,Object(c.__)("This label is for admin purpose only, won't appear on the optin form.","funnel-builder")))))),["text","select","textarea","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Qt({label:Object(c.__)("Placeholder","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder")},t("placeholder"),{onKeyPress:function(e){"Enter"===e.key&&o()}})))),["text","radios","radio","select","textarea","hidden","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Qt({},t("default"),{label:Object(c.__)("Default","funnel-builder"),placeholder:Object(c.__)("Type here","funnel-builder"),onKeyPress:function(e){"Enter"===e.key&&o()}})))),["checkbox"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Default","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(V.b,Qt({},t("default"),{options:[{label:Object(c.__)("Checked","funnel-builder"),value:"1",key:"1"},{label:Object(c.__)("Un-checked","funnel-builder"),value:"0",key:"0"}]})))),["radios","select","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field ".concat(i.options&&a.options?"bwf-validation":"")},Object(r.createElement)("label",{id:"required"},Object(c.__)("Options","funnel-builder")),Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.TextControl,Qt({placeholder:Object(c.__)("Enter options comma separated. Example: apple,grapes","funnel-builder")},t("options"),{onKeyPress:function(e){"Enter"===e.key&&o()}})),i.options&&a.options&&Object(r.createElement)("div",{className:"bwf-error-text"},"This is a required field"))),["radios","radio"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("label",null,Object(r.createElement)("span",null,Object(c.__)("Alignment","funnel-builder"))),Object(r.createElement)("div",{className:"field-wrap bwf-form-radio"},Object(r.createElement)(Rt.a,Qt({options:[{label:Object(c.__)("Horizontal","funnel-builder"),value:"horizontal"},{label:Object(c.__)("Vertical","funnel-builder"),value:"vertical"}]},t("radio_alignment"))))),["wfop_wysiwyg","html"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field field-input"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(ne.a,Qt({},t("default"),{toolbar:"bold,italic, underline,alignleft,aligncenter,alignright,bullist,numlist,forecolor,fontsizeselect,mergetagmodal",quicktags:!0})))),["text","radios","radio","select","textarea","checkbox","email","tel","optin_birthday"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,Qt({},t("required"),{label:Object(c.__)("Required","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),["tel"].includes(n.type)&&Object(r.createElement)("div",{className:"form-group bwf-section-field"},Object(r.createElement)("div",{className:"field-wrap"},Object(r.createElement)(v.ToggleControl,Qt({},t("phone_validation"),{label:Object(c.__)("Enable Validation","funnel-builder"),className:"bwf-tooglecontrol-advance"})))),Object(r.createElement)("div",{className:Oe()("bwf-form-buttons",{wf_funnel_right_align:!Object(c.isRTL)(),wf_funnel_left_align:Object(c.isRTL)()})},Object(r.createElement)(O.a,{onClick:h,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,onClick:o,isBusy:f,disabled:f},Object(c.__)("Update","funnel-builder"))))}))))};function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function an(){return(an=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function cn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ln(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cn(Object(n),!0).forEach((function(t){on(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=rn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=rn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==rn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function un(e){return function(e){if(Array.isArray(e))return bn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||fn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fn(e,t){if(e){if("string"==typeof e)return bn(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(e,t):void 0}}function bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var dn=function(e){var t=e.type,n=e.stepId,a=e.tab,i=e.offerId,u=Object(o.a)().isProFeatureLocked,s=Object(o.b)().showSnackbar,f=sn(Object(r.useState)([]),2),b=f[0],h=f[1],_=sn(Object(r.useState)(),2),w=_[0],E=_[1],S=sn(Object(r.useState)(!1),2),N=S[0],k=S[1],x=sn(Object(r.useState)(!1),2),P=x[0],C=x[1],A=sn(Object(r.useState)({}),2),T=A[0],I=A[1],D=sn(Object(r.useState)({}),2),L=D[0],F=D[1],M=sn(Object(r.useState)(""),2),z=M[0],B=M[1],R=sn(Object(r.useState)(!1),2),q=R[0],U=R[1],V=sn(Object(r.useState)(!1),2),H=V[0],G=V[1],K=sn(Object(r.useState)({status:!1}),2),J=K[0],$=K[1],Y=Object(g.a)(),Q=Y.getLoading,W=Y.getFormLoading,X=Y.getFormData,Z=Y.getStep,ee=Object(j.a)(),te=ee.fetchStepFields,ne=ee.setFormFieldData,re=ee.setSaveDataValue,ae=Q(),ce=W(),le=X(t,n,a,i),ie=Z(t,n,a,i).unSavedData,oe=void 0!==ie&&ie,ue=le.fields,se=void 0===ue?[]:ue,fe=le.fields_data,be=void 0===fe?{}:fe,de=be.basic,me=void 0===de?[]:de,pe=be.advanced,ve=void 0===pe?[]:pe,ye=ve.length>0;Object(r.useEffect)((function(){if(!Object(p.isEmpty)(se)&&se.hasOwnProperty("single_step")&&se.single_step){var e=se.single_step[0].fields;h(e)}}),[se]),Object(r.useEffect)((function(){z&&(s(z),B(""))}),[z]);var Oe=Object(r.useRef)(new AbortController),je=function(e){E(e)};Object(r.useEffect)((function(){return(Object(p.isEmpty)(le)&&!ae||oe)&&te(t,n,a,i,Oe.current.signal),function(){Oe.current.abort()}}),[]);var he=null==b?void 0:b.map((function(e){return null==e?void 0:e.id})),_e=function(e){var r=ve.filter((function(t){return t.id!==e})),c=Object(p.cloneDeep)(le);c.fields_data.advanced=r,ne(t,n,a,i,c)},ge=function(e,r,l){var o=!1;if(b.map((function(e){"wfop_optin_email"===e.id&&(o=!0)})),!o&&l)U(!0),G(!1);else try{d()({path:Object(y.u)("/funnel-optin/".concat(n,"/form_fields")),method:"POST",data:b}).then((function(l){if(l.success){if(re(!1),e)_e(r),I({loading:!1,status:!1});else{var o=Object(p.cloneDeep)(le);ne(t,n,a,i,o,{unSavedData:!1})}B(Object(c.__)("Changes Saved","funnel-builder")),G(!1)}else B(l.msg||l.message)}))}catch(e){console.log(e),B(e.message)}};return ce?Object(r.createElement)(St,null):Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-form-header"},Object(r.createElement)("span",{className:"bwf-form-title "},Object(c.__)("Optin Form Fields","funnel-builder")),Object(r.createElement)(O.a,{isPrimary:!0,onClick:function(){G(!0),ge("","",!0)},isBusy:H,disabled:H},Object(c.__)("Save","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_layout_container"},Object(r.createElement)("div",{className:"bwf_box_size"},Object(r.createElement)("div",{className:"bwf_wrap_inner bwf_wrap_inner_offers bwf-ml-0"},Object(r.createElement)("div",{className:"bwf_wrap_r"},Object(r.createElement)("div",{className:"bwf_template_field_holder bwf_field_holder"},Object(r.createElement)("div",{className:"bwf_template_steps_container bwf_steps_container"},Object(r.createElement)("div",{"data-slug":"single_step",className:"single_step_template"},Object(r.createElement)("div",{className:"bwf_sections_holder single_step"},Object(r.createElement)("div",{className:"bwf_field_container","step-name":"single_step"},Object(r.createElement)("div",{className:"bwf_fields_border_div"},Object(r.createElement)("div",{className:"bwf_field_container_head"},Object(r.createElement)("div",{className:"bwf_field_container_heading"},Object(r.createElement)("h4",{className:"bwf-form-field-heading"},Object(c.__)("Fields","funnel-builder"))),Object(r.createElement)("div",null)),Object(r.createElement)(Ge.a,{onDragEnd:function(e){var r=e.source,c=e.destination;if(e.destination){var l=function(e,t,n){var r=Array.from(e),a=sn(r.splice(t,1),1)[0];return r.splice(n,0,a),r}(b,r.index,c.index),o=Object(p.cloneDeep)(le);o.fields.single_step[0].fields=l,ne(t,n,a,i,o)}}},Object(r.createElement)(Ge.c,{droppableId:"droppable",direction:"horizontal"},(function(e){return Object(r.createElement)("div",an({ref:e.innerRef},e.droppableProps,{className:"bwf_template_field_container single_step ui-sortable",onDrop:function(e){!function(e){e.preventDefault();var r=Object(p.cloneDeep)(le);r.fields.single_step[0].fields=Object(p.cloneDeep)([].concat(un(b),[w])),ne(t,n,a,i,r,{unSavedData:!0})}(e)},onDragOver:function(e){e.preventDefault()}}),null==b?void 0:b.map((function(e,o){return Object(r.createElement)(Ge.b,{key:e.id,draggableId:e.id||"field-".concat(o),index:o},(function(o,u){return Object(r.createElement)("div",an({ref:o.innerRef},o.draggableProps,o.dragHandleProps,{className:"bwf_save_btn_style bwf_item_drag ui-sortable-handle",onClick:function(){F(e),C(!0)}}),Object(r.createElement)("span",{className:"bwf_tooltip"},Object(c.__)("Click to edit. Drag to re-order.","funnel-builder")),Object(r.createElement)("span",null,Object(c.__)(null==e?void 0:e.label,"funnel-builder")),Object(r.createElement)("span",{className:"bwf_remove_fields",onClick:function(r){!function(e){var r=Object(p.cloneDeep)(le),c=b.filter((function(t){return t.label!==e.label}));r.fields.single_step[0].fields=Object(p.cloneDeep)(c),ne(t,n,a,i,r,{unSavedData:!0})}(e),r.stopPropagation()}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:12,height:12})))}))})),e.placeholder)})))))))),Object(r.createElement)("div",{className:"bwf_template_field_selecter bwf_field_selecter"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head"},Object(r.createElement)("div",{className:"bwf_fsetting_table_head_in"},Object(r.createElement)("div",{className:"bwf_fsetting_table_title"},Object(r.createElement)("span",{className:"bwf-form-field-name"},Object(c.__)("Fields","funnel-builder"))))),Object(r.createElement)("div",{className:"bwf_input_fields_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Basic","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_basic_container"},function(){var e=[],t=function(){var t=me[n];he.includes(t.id)||u&&"yes"===t.is_locked?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf-cursor-pointer bwf_input_field_place_holder"},u&&"yes"===t.is_locked&&Object(r.createElement)(Ke.b,{className:"size-16"}),Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(){return je(t)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style bwf-cursor-pointer"},Object(r.createElement)("span",null,Object(r.createElement)("span",null,null==t?void 0:t.label)))))};for(var n in me)t();return e}()))),ye&&Object(r.createElement)("div",{className:"bwf_input_fields"},Object(r.createElement)("div",{className:"bwf_input_fields_list_wrap"},Object(r.createElement)("div",{className:"bwf_input_fields_title"},Object(r.createElement)("b",null,Object(c.__)("Advanced","funnel-builder"))),Object(r.createElement)("div",{className:"bwf_input_fields_list",id:"input_field_advanced_container"},function(){var e=[],t=function(){var t=ve[a];he.includes(t.id)?e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{className:"ss bwf_save_btn_style bwf_input_field_place_holder bwf-cursor-pointer"},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize"},null==t?void 0:t.label))))):e.push(Object(r.createElement)("div",{className:"bwf_input_field_btn_holder",key:t.id},Object(r.createElement)("div",{onDragStart:function(){return je(t)},draggable:!0,className:"ui-sortable-handle bwf_item_drag bwf_save_btn_style "},Object(r.createElement)("span",{className:"bwf-advance-field-text"},Object(r.createElement)("span",{className:"bwf-text-capitalize bwf-white-break-space"},null==t?void 0:t.label)),Object(r.createElement)("span",{className:"bwf_remove_fields bwf-remove-advance-field",onClick:function(){var e={modalTitle:Object(c.__)("Delete Field","funnel-builder"),content:Object(c.sprintf)(Object(c.__)("You are about to delete field %s. This action cannot be undone. Cancel to stop, Delete to proceed.","funnel-builder"),t.label),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Delete","funnel-builder"),confirmButtonClass:"is-danger",status:!0};I(ln(ln({},e),{},{onConfirm:function(){!function(e,t){try{I(ln(ln({},t),{},{disableConfirm:!0,confirmButtonText:Object(c.__)("Deleting")}));var r='{"section":"advanced","index":"'.concat(e,'"}');d()({path:Object(y.u)("/funnel-optin/".concat(n,"/form_fields/remove_field")),method:"DELETE",data:JSON.parse(r)}).then((function(t){t.success?(_e(e),ge(!0,e)):B(t.msg||t.message)}))}catch(e){I({status:!0,error:e.message||e.msg})}}(t.id,e)}}))}},Object(r.createElement)(l.a,{icon:"dismiss-circle",width:16,height:16})))))};for(var a in ve)t();return e}())))),Object(r.createElement)("div",{className:"bwf_fsetting_table_footer"},Object(r.createElement)(v.Button,{isSecondary:!0,isSmall:!0,onClick:function(){u?$({status:!0,title:Object(c.__)("Add New Form Field is a Pro Feature","funnel-builder"),content:Object(c.__)("We're sorry, the Add New Form Field is not available on your plan. Please upgrade to the PRO plan to unlock all these awesome features.","funnel-builder"),feature:Object(c.__)("Adding Field","funnel-builder"),proLabel:Object(c.__)("Upgrade to PRO Now","funnel-builder"),proLink:Object(y.P)([t,"Form","New","Field","Upgrade","Modal"])}):k(!0)}},u?Object(r.createElement)(l.a,{icon:"king",size:16,color:"#0073aa"}):""," ",Object(c.__)("Add New Field","funnel-builder")))))))),N&&Object(r.createElement)($t,{onCloseModal:function(){k(!1)},onSuccess:function(e){k(!1);var r=Object(p.cloneDeep)(le);r.fields_data.advanced=[].concat(un(ve),[e]),ne(t,n,a,i,r),B(Object(c.__)("Changes Saved","funnel-builder"))},SnackBarMsg:function(e){B(e)},stepId:n}),P&&Object(r.createElement)(nn,{onCloseModal:function(){C(!1)},updated:function(e){var r=Object(p.cloneDeep)(le);r.fields.single_step[0].fields=e,ne(t,n,a,i,r),C(!1),B(Object(c.__)("Changes Saved","funnel-builder"))},updatedField:L,fields:b,SnackBarMsg:function(e){B(e)},stepId:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-squeezy",isLoading:T.loading,successMessage:T.success,errorMessage:T.error,isOpen:T.status,autoHide:8e3,closeIcon:!0,content:T.content,confirmText:T.confirmText,confirmButtonText:T.confirmButtonText,confirmButtonClass:T.confirmButtonClass,cancelButtonText:T.cancelButtonText,onConfirm:T.onConfirm,onCancel:T.onCancel,modalTitle:T.modalTitle,disableConfirm:T.disableConfirm,onRequestClose:function(){return I({status:!1})}}),q&&Object(r.createElement)(He,{desc:Object(c.__)("Optin Email is required for optin form","funnel-builder"),onRequestClose:function(){return U(!1)}}),J.status&&Object(r.createElement)(Je.a,{isOpen:J.status,onRequestClose:function(){return $({status:!1})},modalContent:J})))},mn=n(399),pn=n(373),vn=n(314);function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function On(e){return function(e){if(Array.isArray(e))return En(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jn(Object(n),!0).forEach((function(t){_n(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=yn(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=yn(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==yn(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||wn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wn(e,t){if(e){if("string"==typeof e)return En(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?En(e,t):void 0}}function En(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Sn=function(e){switch(e){case"1":case 1:return Object(c.__)("One Step","funnel-builder");case"2":case 2:return Object(c.__)("Two Step","funnel-builder");case"3":case 3:return Object(c.__)("Three Step","funnel-builder");case"inline":return Object(c.__)("Inline","funnel-builder");case"popup":return Object(c.__)("Popup","funnel-builder");default:return""}},Nn=function(e){var t=e.onDelete,n=e.type,a=e.stepId,u=e.offerId,s=e.tab,b=e.isLoading,v=e.fetchStep,O=e.additionalTabs,j=void 0===O?[]:O,_=e.design,g=e.postData,S=e.template,N=e.stepData,x=e.globalData,P=gn(Object(r.useState)({}),2),C=P[0],A=P[1],T=gn(Object(r.useState)(!0),2),I=T[0],D=T[1],L=gn(Object(r.useState)(!1),2),F=L[0],M=L[1],z=gn(Object(r.useState)(!1),2),B=z[0],R=z[1],U=Object(o.b)().showSnackbar,V=Object(w.a)().isFetchCompleted,H=Object(h.a)().setIsFormLoading,G=(N||{}).other_builder;Object(r.useEffect)((function(){b&&D(!0),["checkout","optin"].includes(n)&&!1===b&&null===V&&D(!0),["checkout","optin"].includes(n)&&!1===b&&!0===V&&(D(!1),H(!0)),!1===b&&void 0!==S&&D(!1)}),[b,V]);var K=function(){var e={modalTitle:Object(c.__)("Remove Template","funnel-builder"),content:Object(c.__)("You are about to remove this template. Any changes done to the current template will be lost. Cancel to stop, Remove to proceed.","funnel-builder"),cancelButtonText:Object(c.__)("Cancel","funnel-builder"),confirmButtonText:Object(c.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0};A(hn(hn({},e),{},{onConfirm:function(){!function(e){A(hn(hn({},e),{},{disableConfirm:!0}));try{var r="/funnel-".concat(n,"/").concat(u,"/design"),c="/funnel-".concat(n,"/").concat(a,"/design");d()({path:Object(y.u)("".concat("offer"===n?r:c)),method:"DELETE"}).then((function(e){e.success?(A({loading:!1,status:!1}),t()):A({status:!0,error:e.msg||e.message})}))}catch(e){A({status:!0,error:e.message||e.msg})}}(e)}}))};return Object(r.createElement)(r.Fragment,null,I&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-selected-template bwf-selected-template__placeholder"},Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title bwf-placeholder-temp bwf-h-28 bwf-w-400"}),Object(r.createElement)("span",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-90"}),Object(r.createElement)("span",{className:"bwf-template-last-edited bwf-placeholder-temp bwf-h-20 bwf-w-150"})),Object(r.createElement)("div",{className:"bwf-title-info bwf-mt-4 bwf-placeholder-temp bwf-h-24 bwf-w-270"})),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(r.createElement)("div",{className:"bwf-selected-designed bwf-placeholder-temp bwf-flex"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-25 bwf-w-150 bwf-mt-10"})),Object(r.createElement)("div",{className:"bwf-template-info"},Object(r.createElement)("div",{className:"bwf-action-btn"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3 bwf-mr-16"}),Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-36 bwf-w-210 bwf-border-1 bwf-rounded-3"}),Object(r.createElement)("div",{className:"bwf-mt-16"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-100"}),Object(r.createElement)("div",{className:"bwf-h-36 bwf-w-full bwf-border-1 bwf-rounded-3 bwf-mb-24"},Object(r.createElement)("div",{className:"bwf-placeholder-temp bwf-h-16 bwf-w-200 bwf-ml-5 bwf-mt-10"})))))),Object(r.createElement)("div",{className:"bwf-additional-details"},Object(r.createElement)("div",{className:"bwf-settings"},Object(r.createElement)("div",{className:"bwf-additional-heading bwf-placeholder-temp bwf-h-28 bwf-w-210 bwf_display_block"}),Object(r.createElement)("div",{className:"bwf-additional-tab-hint bwf-mt-4 bwf-placeholder-temp bwf-h-20 bwf-w-300"}),Object(r.createElement)("div",{className:"bwf-shortcodes"},On(Array(3)).map((function(e,t){return Object(r.createElement)("div",{className:"bwf-additional-container",key:t},Object(r.createElement)("div",{className:"bwf-additional-title bwf-placeholder-temp bwf-h-16 bwf-w-90"}),Object(r.createElement)("div",{className:"bwf-copy-link bwf-placeholder bwf-placeholder-temp bwf-h-36"}))})))),["checkout","optin"].includes(n)&&Object(r.createElement)(St,null))))),Object(r.createElement)("div",{className:"bwf-selected-template"},!I&&Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-mb-16 bwf-mt-8"},Object(r.createElement)("div",{className:"bwf-template-name"},Object(r.createElement)("span",{className:"bwf-template-title"},Object(c.__)("Template: ","funnel-builder"),null!=S&&S.build_from_scratch?Object(c.__)("Start from scratch","funnel-builder"):null==S?void 0:S.name),S&&S.group&&Object(p.isArray)(S.group)&&S.group[0]&&Object(r.createElement)(Ke.c,{content:Sn(S.group[0])}),Object(r.createElement)("span",{className:"bwf-template-last-edited"},Object(c.__)("Last Edited","funnel-builder"),":"," ",null==g?void 0:g.post_modified_date))),Object(r.createElement)("div",{className:"bwf-template"},Object(r.createElement)("div",{className:"bwf-template-image"},Object(p.isEmpty)(null==S?void 0:S.thumbnail)?Object(r.createElement)("div",{className:"bwf-selected-designed is-build-from-scratch"},Object(r.createElement)("div",{className:"bwf-funnel-overlay"},Object(r.createElement)("div",{className:"bwf-middle-align"},Object(r.createElement)("div",{className:"wffn_template_btn_add"},Object(r.createElement)(l.a,{icon:"default-template",width:"60",height:"60",color:"#82838E"}))))):Object(r.createElement)("div",{className:"bwf-selected-designed"},Object(r.createElement)("img",{src:null==S?void 0:S.thumbnail,alt:"thumbnail"})),Object(r.createElement)("div",{className:"bwf-delete-template bwf-cursor-pointer",onClick:function(){return K()}},Object(r.createElement)("span",null,Object(r.createElement)(l.a,{icon:"trash",color:"#82838E"})),Object(r.createElement)("span",{className:"bwf-delete-text"},Object(c.__)("Delete","funnel-builder")))),Object(r.createElement)("div",{className:"bwf-template-info bwf-additional-settings"},Object(r.createElement)("div",{className:"bwf-action-btn"},(!(null!=j&&j.some((function(e){return e.hasOwnProperty("tabs")})))||G&&G.page_builder&&"Other Page Builder"!==G.page_builder)&&Object(r.createElement)(r.Fragment,null,G&&G.page_builder?Object(r.createElement)("a",{className:"bwf-edit-template-btn components-button is-primary",href:null==G?void 0:G.url},Object(c.sprintf)(/* translators: %s: Builder Name. */
Object(c.__)("Edit %s Template","funnel-builder"),G.page_builder)):Object(r.createElement)("a",{className:"bwf-edit-template-btn components-button is-primary",href:null==g?void 0:g.edit_link},Object(c.__)("Edit ","funnel-builder"),"embed_forms"===(null==_?void 0:_.builder_name)?Object(c.__)("Form","funnel-builder"):"pre_built"===(null==_?void 0:_.builder_name)?Object(c.__)("Customizer Template","funnel-builder"):(null==_?void 0:_.builder_name)+Object(c.__)(" Template","funnel-builder"))),"gutenberg"!==(null==_?void 0:_.selected_type)&&Object(r.createElement)("a",{className:"bwf-switch-editor-btn components-button is-secondary",href:null==g?void 0:g.post_edit_link},Object(c.__)("Switch to WordPress Editor","funnel-builder"))),Object(r.createElement)("div",{className:"bwf-page-url bwf-mt-16"},"offer"!==n||"custom_page"!==(null==_?void 0:_.selected_type)?Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-url-title"},Object(c.__)("Page URL","funnel-builder")),Object(r.createElement)("div",{className:"bwf-copy-link"},Object(r.createElement)("span",{className:"bwf-code-copy"},null==g?void 0:g.view_link),Object(r.createElement)("div",{className:"bwf-url-icon"},Object(r.createElement)(i.a,{toolTipText:Object(c.__)("Edit","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-edit-icon",onClick:function(){return M(!0)}},Object(r.createElement)(l.a,{icon:"edit",width:20,height:20,color:"#82838E"}))),Object(r.createElement)(i.a,{toolTipText:Object(c.__)("Copy","funnel-builder"),size:50},Object(r.createElement)("div",{className:"bwf-copy-icon",onClick:function(){return e="Page URL",(t=document.createElement("textarea")).value=null==g?void 0:g.view_link,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),U(e+" "+Object(c.__)("copied","funnel-builder")),void U(e+" copied");var e,t}},Object(r.createElement)(l.a,{icon:"duplicate",width:20,height:20,color:"#82838E"})))))):Object(r.createElement)(E.a,{status:"info"},Object(r.createElement)("strong",null,Object(c.__)("Information: ","funnel-builder")),Object(c.__)('Creating offers using WordPress custom pages is a legacy feature. We recommend using the "Start From Blank" option to create templates using your preferred page builder.',"funnel-builder"))),"checkout"===n||"offer"===n?Object(r.createElement)("div",{className:"bwf-brown-light-notice bwf-mw-517 bwf-style-3"},Object(r.createElement)(l.a,{icon:"bulb"}),Object(r.createElement)("div",{className:"bwf-text-style-2"},Object(c.__)("Recommendation: ","funnel-builder"),Object(r.createElement)("span",{className:"bwf-font-normal"},"checkout"===n?Object(c.__)("Checkout pages need to be excluded from all types of caching including caching done by Plugins, CDNs, or Hosting. ","funnel-builder"):Object(c.__)("Upsells need to be excluded from all types of caching including caching done by Plugins, CDNs, or Hosting. ","funnel-builder")),Object(r.createElement)("a",{onClick:function(){return R(!0)},className:"bwf-underline"},Object(c.__)("Learn More")))):null),["wp_editor","embed_forms","custom"].includes(null==_?void 0:_.selected_type)&&Object(r.createElement)(mn.a,{type:n}),Object(r.createElement)(m.a,{className:"bwf-admin-modal-small",isLoading:C.loading,successMessage:C.success,errorMessage:C.error,isOpen:C.status,autoHide:8e3,closeIcon:!0,content:C.content,confirmText:C.confirmText,confirmButtonText:C.confirmButtonText,confirmButtonClass:C.confirmButtonClass,cancelButtonText:C.cancelButtonText,onConfirm:C.onConfirm,onCancel:C.onCancel,modalTitle:C.modalTitle,disableConfirm:C.disableConfirm,onRequestClose:function(){return A({status:!1})}}),F&&Object(r.createElement)(k,{pageUrl:null==g?void 0:g.view_link,urlSlug:null==g?void 0:g.post_name,toggleState:null==g?void 0:g.status,onRequestClose:function(){return M(!1)},stepId:"offer"===n?u:a,offerId:u,onComplete:v,type:n,stepTitle:null==g?void 0:g.post_title,stepDescription:null==g?void 0:g.post_description})),Object(r.createElement)("div",{className:"bwf-additional-details bwf-additional-settings"},Object(r.createElement)("div",{className:"bwf-settings"},j.map((function(e,t){return e&&e.hasOwnProperty("tabs")?Object(r.createElement)(q,{additionalTabs:e,key:"bwf-additional-tab-".concat(t),type:n,stepId:a,offerId:u,addTabIndex:t}):Object(r.createElement)(f,{additionalTabs:e,key:"bwf-additional-tab-".concat(t)})}))))),!b&&Object(r.createElement)("div",{className:"bwf-design-form"},"checkout"===n&&Object(r.createElement)(Bt,{type:n,stepId:a,tab:s,offerId:u}),"optin"===n&&Object(r.createElement)(dn,{type:n,stepId:a,tab:s,offerId:u})),B&&Object(r.createElement)(pn.a,{onCloseModal:function(){return R(!1)},experimentData:x})),"offer"===n&&Object(r.createElement)(vn.a,null))},kn=(n(398),n(346)),xn=n(76),Pn=n(29);function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var An=["template","additional_tabs","design"];function Tn(){Tn=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",o=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof v?t:v,l=Object.create(c.prototype),i=new P(r||[]);return a(l,"_invoke",{value:S(e,n,i)}),l}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var b="suspendedStart",d="executing",m="completed",p={};function v(){}function y(){}function O(){}var j={};u(j,l,(function(){return this}));var h=Object.getPrototypeOf,_=h&&h(h(C([])));_&&_!==n&&r.call(_,l)&&(j=_);var g=O.prototype=v.prototype=Object.create(j);function w(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(a,c,l,i){var o=f(e[a],e,c);if("throw"!==o.type){var u=o.arg,s=u.value;return s&&"object"==Cn(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,i)}))}i(o.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function S(t,n,r){var a=b;return function(c,l){if(a===d)throw Error("Generator is already running");if(a===m){if("throw"===c)throw l;return{value:e,done:!0}}for(r.method=c,r.arg=l;;){var i=r.delegate;if(i){var o=N(i,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===b)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?m:"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=m,r.method="throw",r.arg=u.arg)}}}function N(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,N(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var c=f(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,p;var l=c.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function k(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(k,this),this.reset(!0)}function C(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(Cn(t)+" is not iterable")}return y.prototype=O,a(g,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:y,configurable:!0}),y.displayName=u(O,o,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,u(e,o,"GeneratorFunction")),e.prototype=Object.create(g),e},t.awrap=function(e){return{__await:e}},w(E.prototype),u(E.prototype,i,(function(){return this})),t.AsyncIterator=E,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var l=new E(s(e,n,r,a),c);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},w(g),u(g,o,"Generator"),u(g,l,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=C,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var l=this.tryEntries[c],i=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var o=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(o&&u){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,p):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;x(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:C(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function In(e,t,n,r,a,c,l){try{var i=e[c](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function Dn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ln(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ln(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ln(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}t.a=function(e){var t=e.type,n=e.funnelID,c=Object(a.useParams)(),l=c.stepId,i=c.offerId,o=void 0===i?"":i,u=Object(r.useRef)(new AbortController),s=Dn(Object(r.useState)(""),2),f=s[0],b=s[1],d=Dn(Object(r.useState)([]),2),m=d[0],v=(d[1],Dn(Object(r.useState)({}),2)),y=v[0],O=v[1],_=Object(j.a)(),E=_.fetchStep,S=_.setFunnelId,N=(_.fetchStepFields,Object(g.a)()),k=N.getStep,x=N.getStepHeaderData,P=N.getFunnelData,C=Object(h.a)(),A=C.setStepData,T=C.setLoading,I=C.setStepFunnelData,D=C.setIsFormLoading,L=Object(w.a)().getStepsData,F=x(t,l,"design",o),M=P(),z=L(),B=k(t,l,"design",o),R=B.data,q=void 0===R?{}:R,U=B.loading,V=void 0===U||U,H=q.step,G=void 0===H?{}:H,K=q.step_data,J=void 0===K?{}:K,$=Pn.a.getFunnelTitle(),Y=G.template,Q=void 0===Y?{}:Y,W=G.additional_tabs,X=void 0===W?[]:W,Z=G.design,ee=void 0===Z?{}:Z,te=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(G,An),ne=Object(xn.a)().setActiveGroup;Object(r.useEffect)((function(){D(!1),!Object(p.isEmpty)(M)&&Object(p.isEmpty)($)&&I(M),Object(p.isEmpty)(F)||(A(F),T(!1))}),[F,M,V]),Object(r.useEffect)((function(){f&&!V&&null===X&&ne(f)}),[V,X,f]),Object(r.useEffect)((function(){b("offer"===t?"upsell":"thankyou"===t?"wc_thankyou":"optin-confirmation"===t?"optin_ty":"checkout"===t?"wc_checkout":t)}),[t]);var re=function(){E(t,l,"design",o,u.current.signal)};Object(r.useEffect)((function(){"offer"===t&&Object.keys(y).length&&re()}),[y]),Object(r.useEffect)((function(){return Object(p.isEmpty)(q)&&re(),S(n),function(){u.current.abort()}}),[]);var ae=function(){var e,t=(e=Tn().mark((function e(){return Tn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re();case 1:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){In(c,r,a,l,i,"next",e)}function i(e){In(c,r,a,l,i,"throw",e)}l(void 0)}))});return function(){return t.apply(this,arguments)}}();return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{className:"bwf-template-design"},"upsell"==f&&Object(r.createElement)("div",{className:"wfocu_secondary_top_bar"},Object(r.createElement)("div",{className:"wfocu_steps"},Object(r.createElement)("div",{className:"wfocu_steps_sortable ui-sortable"},null==m?void 0:m.map((function(e,t){return Object(r.createElement)("div",{key:e.id,className:"wfocu_step_container ui-sortable-handle "},Object(r.createElement)("a",{className:"wfocu_step ".concat(y.id==e.id?"current_offer":""),onClick:function(){O(e)}},Object(r.createElement)("span",{className:"step_name"},e.name)))}))))),V||null!==X?Object(r.createElement)(Nn,{onDelete:function(){re()},isLoading:V,template:Q,fetchStep:re,additionalTabs:X,design:ee,postData:te,stepData:J,type:t,stepId:l,tab:"design",offerId:o,globalData:z}):Object(r.createElement)(kn.a,{onImportComplete:ae,urlDependency:!1,stepId:"offer"===t?o:l,funnelId:n})))}},450:function(e,t,n){"use strict";var r=n(0),a=n(2),c=n(5),l=n.n(c),i=n(1),o=n(11),u=n.n(o),s=n(9),f=n(4),b=(n(719),n(6)),d=n(284),m=n(79),p=n(22);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=v(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==v(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return w(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var E=null;t.a=function(e){var t=e.onCloseModal,n=e.saveProduct,c=e.type,o=Object(r.useRef)(),v=_(Object(r.useState)(!1),2),O=v[0],h=v[1],g=_(Object(r.useState)([]),2),w=g[0],S=g[1],N=_(Object(r.useState)([]),2),k=N[0],x=N[1],P=_(Object(r.useState)(""),2),C=P[0],A=P[1],T=_(Object(r.useState)([]),2),I=T[0],D=T[1],L=_(Object(r.useState)(!1),2),F=L[0],M=L[1],z=_(Object(r.useState)(!1),2),B=z[0],R=z[1],q=_(Object(r.useState)(!1),2),U=q[0],V=q[1],H=_(Object(r.useState)(0),2),G=H[0],K=H[1],J=_(Object(r.useState)(""),2),$=J[0],Y=J[1],Q=function(){t()};Object(f.pb)(o,(function(){h(!1),M(!1),A("")})),Object(r.useEffect)((function(){return C.length>0?(clearTimeout(E),E=setTimeout((function(){M(!0),u()({path:Object(f.u)("/funnels/products/search_variant?term=".concat(C,"&variations=").concat(U,"&type=").concat(c))}).then((function(e){if(M(!1),e.success){h(!0);var t=e.data.products.map((function(e){return j(j({},e),{},{uniqueKey:e.id+"bwf"+Math.floor(1e3*Math.random())})}));D(t)}else h(!0),D([{id:"no-data-found",product:Object(i.__)("Oops! No products found. Consider changing the search query.","funnel-builder"),noResult:!0}])}))}),750)):(clearTimeout(E),D([])),function(){M(!1)}}),[C]);var W=function(){k.length?(Y(""),R(!0),n(k)):Y(Object(i.__)("Please add atleast one product","funnel-builder"))};return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(s.Modal,{className:"bwf-admin-modal bwf-admin-modal-large bwf-admin-modal-no-header bwf-modal-overflow-visible",isDismissible:!1},Object(r.createElement)("div",{className:"bwf-custom-header bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-modal-title"},Object(i.__)("Add Product","funnel-builder")),Object(r.createElement)("div",{className:"bwf-modal-action bwf-flex bwf--g24"},Object(r.createElement)("div",{className:"bwf-modal-close bwf-cursor-pointer",title:Object(i.__)("Close"),onClick:function(){return Q()}},Object(r.createElement)(b.a,{icon:"close",size:20})))),$&&Object(r.createElement)("div",{className:"bwf-mt-16"},Object(r.createElement)(m.a,{errorMessage:$})),Object(r.createElement)("div",{className:"bwf-search-list-components bwf-product-search-list",ref:o},Object(r.createElement)("div",{className:"bwf-conatiner-heading bwf-flex bwf--space-between"},Object(r.createElement)("div",{className:"bwf-title"},Object(i.__)("Select Product","funnel-builder")),Object(r.createElement)("div",{className:"bwf-product-variant"},Object(r.createElement)(d.a,{checked:U,onChange:function(){return V(!U)},label:Object(i.__)("Include Variant","funnel-builder")}))),Object(r.createElement)("div",{className:"bwf-input-container"},Object(r.createElement)("input",{type:"text",autoComplete:"off",onChange:function(e){return A(e.target.value)},className:"bwf-input",placeholder:0==C.length?Object(i.__)("Search product to add","funnel-builder"):"",value:C||"",onKeyDown:function(e){38===e.keyCode&&G>0?K(G-1):40===e.keyCode&&G<I.length-1&&K(G+1)},onKeyPress:function(e){"Enter"===e.key&&Object(a.size)(I)>0&&(e.preventDefault(),"no-data-found"!==I[0].id&&(S([].concat(y(w),[I[G]])),x([].concat(y(k),[I[G].id])),setTimeout((function(){h(!1)})),A(""),K(0),D([]))),"Enter"===e.key&&0==Object(a.size)(I)&&Object(a.size)(w)>0&&W()}}),Object(r.createElement)("div",{className:"bwf-placeholder"},Object(r.createElement)(b.a,{icon:"search",size:15})),Object(r.createElement)("div",{className:"bwf-product-arrow"},Object(r.createElement)(b.a,{icon:"angle-down",height:12,width:12}))),Object(r.createElement)("div",{className:" ".concat(O||F?"bwf-options bwf-custom-search-list-popover":"bwf-hide"," ")},F?Object(r.createElement)("ul",{className:"multiselect__content bwf-inline-block bwf-w-full bwf-m-0"},Object(r.createElement)("li",{className:"bwf-text",id:"customSelect"},Object(r.createElement)("span",{className:"bwf-no-data-found bwf-select-option"},Object(i.__)("Fetching Products","funnel-builder")))):Object(r.createElement)("ul",{className:"multiselect__content bwf-inline-block bwf-w-full bwf-m-0"},null==I?void 0:I.map((function(e,t){var n=e.product_stock_status?"bwf-tag-green":"bwf-tag-red";return Object(r.createElement)("li",{onMouseOver:function(){"no-data-found"!==I[0].id&&K(t)},className:"bwf-text ".concat("active-result ".concat(G!==t||e.hasOwnProperty("noResult")?"":"bwf-select-active")," "),key:t,onClick:function(t){"no-data-found"!==I[0].id&&(S([].concat(y(w),[e])),x([].concat(y(k),[e.id])),setTimeout((function(){h(!1)})),A(""),K(0),D([]))},id:"customSelect",tabIndex:"0"},e&&"no-data-found"!==e.id&&Object(r.createElement)("div",{className:"bwf-options-data"},Object(r.createElement)("span",{className:" bwf-select-option"},Object(r.createElement)("span",null,null==e?void 0:e.product," ","(#".concat(e.id,")")," ",Object(r.createElement)("span",{className:l()("bwf-tags",n)},e.product_stock))),Object(r.createElement)("span",{className:"bwf-flex"},null==e?void 0:e.product_attribute),Object(r.createElement)("div",{dangerouslySetInnerHTML:{__html:Object(a.isEmpty)(null==e?void 0:e.product_price)?"0":"".concat(null==e?void 0:e.product_price)},className:"bwf-flex",style:{padding:"0 12px"}})),e&&"no-data-found"==e.id&&Object(r.createElement)("span",{className:" bwf-select-option bwf-no-data-found"},null==e?void 0:e.product))}))))),Object(r.createElement)("div",{className:" ".concat(w.length>0?"bwf-selected-data":"")},null==w?void 0:w.map((function(e,t){return Object(r.createElement)("div",{key:t,className:"bwf-prd-list-wrap"},Object(r.createElement)("div",{className:"bwf-product-image"},Object(r.createElement)("img",{src:e.product_image,alt:Object(i.__)("Product")})),Object(r.createElement)("div",{className:"bwf-selected-text"},null==e?void 0:e.product," ",Object(r.createElement)("span",{className:l()("bwf-tags",{"bwf-tag-green":null==e?void 0:e.product_stock_status},{"bwf-tag-red":!(null!=e&&e.product_stock_status)})},null==e?void 0:e.product_stock)),Object(r.createElement)("div",{className:"bwf-selected-text bwf-lh-16"},null==e?void 0:e.product_attribute),Object(r.createElement)("div",{className:"bwf-selected-text bwf-lh-16"},null==e?void 0:e.product_price),Object(r.createElement)("div",{onClick:function(){var t=w.filter((function(t){if(t.uniqueKey!=e.uniqueKey)return t}));S(t);var n=t.map((function(e){return e.id}));x(n)},className:"bwf-delete-product"},Object(r.createElement)(b.a,{icon:"delete"})))}))),Object(r.createElement)("div",{className:"wf_funnel_right_align bwf-form-buttons bwf-mt-24 bwf-mr-2"},Object(r.createElement)(p.a,{onClick:function(){return Q()},className:"bwf-modal-cancel-btn"},Object(i.__)("Cancel","funnel-builder")),Object(r.createElement)(p.a,{isPrimary:!0,disabled:!k.length||B,className:k.length?"":"bwf-no-ripple",isBusy:B,onClick:W},Object(i.__)("Add","funnel-builder")))))}},455:function(e,t,n){},456:function(e,t,n){},717:function(e,t,n){},718:function(e,t,n){},719:function(e,t,n){},720:function(e,t,n){},721:function(e,t,n){},722:function(e,t,n){},723:function(t,n,r){"use strict";var a=r(0),c=r(289),l=r(6),i=r(1),o=(r(717),r(9)),u=r(51);r(718);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var b=function(e){var t=e.onCloseModal,n=e.source,r=s(Object(a.useState)(!1),2),c=r[0],f=r[1],b=function(){t()};return Object(a.useEffect)((function(){document.getElementById("createProduct").addEventListener("load",(function(){f(!0)}))}),[]),Object(a.createElement)(o.Modal,{onRequestClose:function(){return b},className:"bwf-admin-modal bwf-create-product-modal bwf-modal-no-header",isDismissible:!1,focusOnMount:!1,overlayClassName:"bwf-create-product-overlay"},!c&&Object(a.createElement)(u.a,{size:"xl",className:"bwf-iframe-loader"}),Object(a.createElement)("div",{className:"bwf-custom-modal-header"},Object(a.createElement)("div",{className:"bwf-frame-modal-close bwf-cursor-pointer",title:Object(i.__)("Close"),onClick:function(){return b()}},Object(a.createElement)(l.a,{icon:"close",width:"13",height:"13"}))),Object(a.createElement)("div",{className:"bwf-create-product-frame"},Object(a.createElement)("iframe",{id:"createProduct",src:n,className:"".concat(c?"":"bwf-hide")})))},d=r(450),m=r(11),p=r.n(m),v=r(4),y=r(40),O=r(55),j=r(28);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(){_=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",i=c.asyncIterator||"@@asyncIterator",o=c.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof v?t:v,l=Object.create(c.prototype),i=new A(r||[]);return a(l,"_invoke",{value:k(e,n,i)}),l}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var b="suspendedStart",d="executing",m="completed",p={};function v(){}function y(){}function O(){}var j={};u(j,l,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(T([])));w&&w!==n&&r.call(w,l)&&(j=w);var E=O.prototype=v.prototype=Object.create(j);function S(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function N(e,t){function n(a,c,l,i){var o=f(e[a],e,c);if("throw"!==o.type){var u=o.arg,s=u.value;return s&&"object"==h(s)&&r.call(s,"__await")?t.resolve(s.__await).then((function(e){n("next",e,l,i)}),(function(e){n("throw",e,l,i)})):t.resolve(s).then((function(e){u.value=e,l(u)}),(function(e){return n("throw",e,l,i)}))}i(o.arg)}var c;a(this,"_invoke",{value:function(e,r){function a(){return new t((function(t,a){n(e,r,t,a)}))}return c=c?c.then(a,a):a()}})}function k(t,n,r){var a=b;return function(c,l){if(a===d)throw Error("Generator is already running");if(a===m){if("throw"===c)throw l;return{value:e,done:!0}}for(r.method=c,r.arg=l;;){var i=r.delegate;if(i){var o=x(i,r);if(o){if(o===p)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(a===b)throw a=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);a=d;var u=f(t,n,r);if("normal"===u.type){if(a=r.done?m:"suspendedYield",u.arg===p)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(a=m,r.method="throw",r.arg=u.arg)}}}function x(t,n){var r=n.method,a=t.iterator[r];if(a===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,x(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),p;var c=f(a,t.iterator,n.arg);if("throw"===c.type)return n.method="throw",n.arg=c.arg,n.delegate=null,p;var l=c.arg;return l?l.done?(n[t.resultName]=l.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,p):l:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,p)}function P(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function A(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(P,this),this.reset(!0)}function T(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,c=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return c.next=c}}throw new TypeError(h(t)+" is not iterable")}return y.prototype=O,a(E,"constructor",{value:O,configurable:!0}),a(O,"constructor",{value:y,configurable:!0}),y.displayName=u(O,o,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,O):(e.__proto__=O,u(e,o,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},S(N.prototype),u(N.prototype,i,(function(){return this})),t.AsyncIterator=N,t.async=function(e,n,r,a,c){void 0===c&&(c=Promise);var l=new N(s(e,n,r,a),c);return t.isGeneratorFunction(n)?l:l.next().then((function(e){return e.done?e.value:l.next()}))},S(E),u(E,o,"Generator"),u(E,l,(function(){return this})),u(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=T,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(C),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function a(r,a){return i.type="throw",i.arg=t,n.next=r,a&&(n.method="next",n.arg=e),!!a}for(var c=this.tryEntries.length-1;c>=0;--c){var l=this.tryEntries[c],i=l.completion;if("root"===l.tryLoc)return a("end");if(l.tryLoc<=this.prev){var o=r.call(l,"catchLoc"),u=r.call(l,"finallyLoc");if(o&&u){if(this.prev<l.catchLoc)return a(l.catchLoc,!0);if(this.prev<l.finallyLoc)return a(l.finallyLoc)}else if(o){if(this.prev<l.catchLoc)return a(l.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<l.finallyLoc)return a(l.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var c=a;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var l=c?c.completion:{};return l.type=e,l.arg=t,c?(this.method="next",this.next=c.finallyLoc,p):this.complete(l)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var a=r.arg;C(n)}return a}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:T(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}function g(e,t,n,r,a,c,l){try{var i=e[c](l),o=i.value}catch(e){return void n(e)}i.done?t(o):Promise.resolve(o).then(r,a)}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?E(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=e.productAdded,n=e.type,r=e.stepId,o=e.offerId,u=e.showError,s=w(Object(a.useState)(!1),2),f=s[0],m=s[1],h=w(Object(a.useState)(!1),2),E=h[0],S=h[1],N=Object(y.a)().setStepData,k=Object(O.a)().setStepHeaderData,x=Object(j.a)().setSingleStepData,P=[{type:"icon",data:{class:"bwf-pb-gap",content:"bump"===n||"checkout"===n?Object(a.createElement)(l.a,{icon:"zero-checkout"}):Object(a.createElement)(l.a,{icon:"zero-offer"})}},{type:"content",data:{class:"bwf-zero-heading",content:"bump"===n?Object(i.__)("Add a product as order bump","funnel-builder"):"checkout"===n?Object(i.__)("Add a product to Checkout","funnel-builder"):Object(i.__)("Add a product to this offer","funnel-builder")}},{type:"content",data:{class:"bwf-zero-content",content:"bump"===n?Object(i.__)("Choose a complimentary product to increase the uptake rate","funnel-builder"):"checkout"===n?Object(i.__)("Sell one or multiple products. No limitations. Skip this in case of store checkout","funnel-builder"):Object(i.__)("Add a product that perfectly complements your customer's main purchase","funnel-builder")}},{type:"buttons",data:{buttons:[{text:Object(i.__)("Add Product","funnel-builder"),onClick:function(){m(!0)},proCheck:!1},{text:Object(i.__)("Create Product","funnel-builder"),onClick:function(){S(!0)},proCheck:!1}],class:"bwf-zero-btn"}}],C=function(){var e,a=(e=_().mark((function e(a){var c,l;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c="/funnel-".concat(n,"/").concat("offer"===n?o:r,"/products"),e.prev=1,l='{"products":['.concat(a,"]}"),e.next=5,p()({path:Object(v.u)(c),method:"POST",data:JSON.parse(l)}).then((function(e){e.success?(e.hasOwnProperty("step_data")&&(N(e.step_data),k(n,r,o,e.step_data)),e.hasOwnProperty("step_list")&&x(e.step_list.id,e.step_list),t(),m(!1)):u(e.msg||e.message)}));case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),u(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var c=e.apply(t,n);function l(e){g(c,r,a,l,i,"next",e)}function i(e){g(c,r,a,l,i,"throw",e)}l(void 0)}))});return function(e){return a.apply(this,arguments)}}();return Object(a.createElement)("div",{className:"wfacp_product_container"},Object(a.createElement)("div",{className:"wfacp_welcome_card"},Object(a.createElement)(c.a,{data:P})),f&&Object(a.createElement)(d.a,{onCloseModal:function(){m(!1)},productAdded:function(){return t()},type:n,saveProduct:function(e){C(e)}}),E&&Object(a.createElement)(b,{source:wffn_contacts_data.wc_add_product_url,onCloseModal:function(){return S(!1)}}))},N=r(277),k=r(283),x=r(2),P=r(5),C=r.n(P),A=r(52),T=(r(720),r(25)),I=["label","className","selected","help","onChange","hideLabelFromVision","options","radio_alignment"];function D(e){var t=e.label,n=e.className,r=e.selected,c=e.help,l=e.onChange,i=e.hideLabelFromVision,u=e.options,s=void 0===u?[]:u,f=e.radio_alignment,b=void 0===f?"vertical":f,d=(function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}}(e,I),Object(A.useInstanceId)(D)),m="inspector-radio-control-".concat(d),p=function(e){return l(e.target.value)};return Object(a.createElement)("div",{className:"bwf-radio-control"},Object(a.createElement)("style",null,".components-radio-control .components-base-control__field {display:grid; ".concat("horizontal"==b&&"grid-template-columns: 80px 1fr;"," }")),!Object(x.isEmpty)(s)&&Object(a.createElement)("div",{className:"".concat(t?"bwf-radio-container":"")},t&&Object(a.createElement)("label",null,t),Object(a.createElement)(o.BaseControl,{id:"".concat(m),hideLabelFromVision:i,help:c,className:C()(n,"components-radio-control")},s.map((function(e,t){return Object(a.createElement)("div",{key:"".concat(m,"-").concat(t),className:"components-radio-control__option bwf-radio-option","radio-align":b,onClick:function(){e.is_locked&&e.lockAction&&e.lockAction(e.label)}},e.is_locked?Object(a.createElement)(T.b,null):Object(a.createElement)("input",{id:"".concat(m,"-").concat(t),className:"components-radio-control__input ".concat(e.value===r?"active":""),type:"radio",name:m,value:e.value,onChange:p,checked:e.value===r,"aria-describedby":c?"".concat(m,"__help"):void 0}),Object(a.createElement)("label",{htmlFor:"".concat(m,"-").concat(t),className:"".concat(e.value===r?"selectedOption":"unselectedOption")},e.label))})))))}var L=r(342),F=(r(721),r(295)),M=r(37),z=r(78),B=r(111),R=r(392);function q(){return(q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var U=[{id:"delete",icon:"trash",hint:Object(i.__)("Delete Funnels","funnel-builder")}],V=function(e){var t=e.floatingBarProps,n=void 0===t?{}:t,r=(e.resetSelection,e.selectedProduct),c=Object(a.useCallback)((function(e,t){var n=null==t?void 0:t.map((function(e){return e.id}));r(n)}),[]);return Object(a.createElement)(R.a,q({actions:U,onAction:c},n))},H=r(284);function G(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var J=function(e){return[{label:"",width:"1%"},{label:"Name",width:"25%",class:"bwf-pl-50"},{label:"Type",width:"10%"},{label:"Discount",width:"25%"}].concat(G("offer"===e?[{label:"Flat Shipping",width:"10%"}]:[]),[{label:"Quantity",width:"10%"},{label:"Status",width:"offer"===e?"15%":"10%"}])},$=[{label:Object(i.__)("Percentage % on Sale Price","funnel-builder"),value:"percent_discount_sale",key:"percent_discount_sale"},{label:Object(i.__)("Percentage % on Regular Price","funnel-builder"),value:"percent_discount_reg",key:"percent_discount_reg"},{label:Object(i.__)("Fixed Amount on Sale Price","funnel-builder"),value:"fixed_discount_sale",key:"fixed_discount_sale"},{label:Object(i.__)("Fixed Amount on Regular Price","funnel-builder"),value:"fixed_discount_reg",key:"fixed_discount_reg"}],Y=[{label:Object(i.__)("Percentage % on Sale Price","funnel-builder"),value:"percentage_on_sale",key:"percentage_on_sale"},{label:Object(i.__)("Percentage % on Regular Price","funnel-builder"),value:"percentage_on_reg",key:"percentage_on_reg"},{label:Object(i.__)("Fixed Amount on Sale Price","funnel-builder"),value:"fixed_on_sale",key:"fixed_on_sale"},{label:Object(i.__)("Fixed Amount on Regular Price","funnel-builder"),value:"fixed_on_reg",key:"fixed_on_reg"}],Q=r(74),W=function(e){return Object(a.createElement)("div",{className:"bwf-flex bwf--g8"},Object(a.createElement)(T.c,{content:e.product_stock,type:!1===e.product_stock_status?"danger":"success",className:"bwf-mt-4"}),e.hasOwnProperty("product_status")&&["draft","trash","private"].includes(e.product_status)?Object(a.createElement)(Q.a,{toolTipText:Object(i.sprintf)(/* translators: %s: Step Count. */
Object(i.__)("This product is in the %s in WooCommerce and will not appear on your checkout page.","funnel-builder"),e.product_status),size:280,position:"bottom right",iconSize:"unset"},Object(a.createElement)("div",{className:"bwf-tags bwf-tag-red bwf-flex bwf--g2 bwf-mt-4 bwf-text-capitalize"},e.product_status,Object(a.createElement)(l.a,{icon:"info",color:"red",height:"12",width:"12"}))):null)},X=function(e,t,n,r){n[t].discount_amount=e,r(JSON.parse(JSON.stringify(n)))},Z=function(e){return("one_time"===e.value||!e.isChecked)&&"readOnly"};function ee(e){return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function re(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var le=function(e){var t=e.productData,n=e.newProductValue,r=e.productKey,c=e.getDiscountPrice,u=e.getDiscountToolTip,s=ae(Object(a.useState)([]),2),f=s[0],b=s[1],d=ae(Object(a.useState)(!1),2),m=d[0],p=d[1],y=Object(v.w)(),O=null!=t&&t.currency_symbol?Object(M.decodeEntities)(null==t?void 0:t.currency_symbol):"$";Object(a.useEffect)((function(){var e=(null==t?void 0:t.variations.map((function(e){return t.checkVarient.includes(e.id)?ne(ne({},e),{},{isChecked:!0}):e}))).map((function(e){return t.radioVarient==e.id?ne(ne({},e),{},{isSelected:t.radioVarient}):e}));b(e)}),[t]),Object(a.useEffect)((function(){var e,t=f.filter((function(e){return e.isChecked})).map((function(e){return e.id})),a=null===(e=f.filter((function(e){return"number"==typeof e.isSelected}))[0])||void 0===e?void 0:e.id;null!=a&&null!=t&&n({checkedVariant:t,selectedVariantId:a,products:f,productKey:r})}),[f]);var j=function(e,t){var n=f.map((function(n){return"all"===e||n.id===e?ne(ne({},n),{},{isChecked:t}):n}));b(n)};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-toggle-variant ".concat(m?"bwf-hide-variant":""),onClick:function(){p(!m)}},Object(a.createElement)("div",{className:"bwf-have-variation"},"".concat(m?"Hide":"View"," All ").concat(Object(x.size)(t.variations)," Variants")),Object(a.createElement)("div",{className:"bwf-toggle-icon"},m?Object(a.createElement)(l.a,{icon:"angle-up",color:"#0073AA",size:14}):Object(a.createElement)(l.a,{icon:"angle-down",color:"#0073AA",size:14}))),m&&Object(a.createElement)("table",{className:"bwf-w-full"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,function(e,t){return[{content:Object(a.createElement)(H.a,{checked:!e.some((function(e){return!0!==(null==e?void 0:e.isChecked)})),onChange:function(e){return t("all",e)}})},{content:Object(i.__)("Default","funnel-builder")},{content:Object(i.__)("Attributes","funnel-builder")},{content:Object(i.__)("Regular Price","funnel-builder")},{content:Object(i.__)("Sale Price","funnel-builder")},{content:Object(i.__)("Discounted Price","funnel-builder")},{content:Object(i.__)("Discount","funnel-builder")},{content:Object(i.__)("Status","funnel-builder")}]}(f,j).map((function(e,t){return Object(a.createElement)("th",{key:t,className:"bwf-table-header"},e.content)})))),Object(a.createElement)("tbody",null,null==f?void 0:f.map((function(e,n){return Object(a.createElement)("tr",{className:"product_variation_row",key:n},Object(a.createElement)("td",{className:"bwf-table-item bwf-checkbox-column"},Object(a.createElement)("div",{className:"form-check",key:n},Object(a.createElement)("span",{className:"components-checklist__input-container"},Object(a.createElement)(H.a,{checked:(null==e?void 0:e.isChecked)||!1,onChange:function(t){return j(e.id,t)}})))),Object(a.createElement)("td",{className:"bwf-table-item"},Object(a.createElement)(o.RadioControl,{selected:null==e?void 0:e.isSelected,options:[{label:"",value:e.id}],onChange:function(e){return function(e){var t=f.map((function(t){return t.id.toString()===e?ne(ne({},t),{},{isSelected:parseInt(e)}):ne(ne({},t),{},{isSelected:!1})}));b(t)}(e)}})),Object(a.createElement)("td",{className:"bwf-table-item"},e.attributes.map((function(e){return e}))),Object(a.createElement)("td",{className:"bwf-table-item bwf-product-price",style:{color:"var(--wffn-primary-text)"}},y.formatAmount(null==e?void 0:e.regular_price)),Object(a.createElement)("td",{className:"bwf-table-item"},null!=e&&e.is_on_sale?y.formatAmount(null==e?void 0:e.sale_price):"-"),Object(a.createElement)("td",{className:"bwf-table-item"},function(e,t){var n,r=e.regular_price,l=e.sale_price,i=e.is_on_sale,o=t.shipping_cost_flat,s=void 0===o?0:o,f=t.discount_type,b=void 0===f?"":f,d=t.quantity,m=null!==(n=null==e?void 0:e.discount_amount)&&void 0!==n?n:0,p=c(r,l,i,b,m,s,d),v=p.offerPrice,j=p.discount,h=u(r,l,j,s,v,O,i,d);return Object(a.createElement)("div",{className:"bwf-product-price",style:{color:"var(--wffn-primary-text)"}},y.formatAmount(v),h)}(e,t)),Object(a.createElement)("td",{className:"bwf-table-item"},function(e,t){return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("input",{type:"number",value:e.discount_amount,onChange:function(e){return X(Math.abs(e.target.value),t,f,b)},readOnly:!e.isChecked&&"readOnly",className:"discount_number bwf-product-number",max:"100",min:"0",step:"0.01"}))}(e,n)),Object(a.createElement)("td",{className:"bwf-table-item"},W(e)))})))))},ie=r(75),oe=r(282),ue=r(19);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fe(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return be(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?be(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function de(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?de(Object(n),!0).forEach((function(t){pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):de(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function pe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==se(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ve=function(e){var t=e.offerId,n=e.stepId,r=e.type,a=e.products,c=e.setProducts,l=e.onChange,o=e.setFieldsToShow,u=e.setModelData,s=e.saveChanges,f=e.setIsOpen,b=Object(y.a)().setStepData,d=Object(O.a)().setStepHeaderData,m=Object(j.a)().setSingleStepData,h=Object(ue.b)().showSnackbar;return{deleteProduct:function(e){u({modalTitle:Object(i.__)("Remove Product","funnel-builder"),content:Object(i.__)("You are about to remove this product. This action cannot be undone. Cancel to stop, Remove to proceed.","funnel-builder"),cancelButtonText:Object(i.__)("Cancel","funnel-builder"),confirmButtonText:Object(i.__)("Remove","funnel-builder"),confirmButtonClass:"is-danger",status:!0,onConfirm:function(){!function(e){try{u((function(e){return me(me({},e),{},{disableConfirm:!0,cancelButtonText:Object(i.__)("Cancel","funnel-builder"),shouldCloseOnClickOutside:!1})}));var s="/funnel-".concat(r,"/").concat("offer"===r?t:n,"/products"),f='{"product_key":'.concat(JSON.stringify(e),"}");p()({path:Object(v.u)(s),data:JSON.parse(f),method:"DELETE"}).then((function(s){if(s.success){s.hasOwnProperty("step_data")&&(b(s.step_data),d(r,n,t,s.step_data)),s.hasOwnProperty("step_list")&&m(s.step_list.id,s.step_list),u({loading:!1,status:!1});var f=a.filter((function(t){if(t.id!==e)return t}));c(f);var p=s.hasOwnProperty("fields_to_show")?s.fields_to_show:[];l(f,p),Object(x.isEmpty)(p)||o(p),h(Object(i.__)("Successfully product deleted","funnel-builder"))}else u({status:!0,error:s.msg||s.message}),h(s.msg||s.message)}))}catch(e){u({status:!0,error:e.message||e.msg}),h(e.msg||e.message)}}(e)}})},addProduct:function(e){var i="/funnel-".concat(r,"/").concat("offer"===r?t:n,"/products");try{var y='{"products":['.concat(e,"]}");p()({path:Object(v.u)(i),method:"POST",data:JSON.parse(y)}).then((function(e){if(e.success){e.hasOwnProperty("step_data")&&(b(e.step_data),d(r,n,t,e.step_data)),e.hasOwnProperty("step_list")&&m(e.step_list.id,e.step_list),c([].concat(fe(a),fe(e.data.products)));var i=e.hasOwnProperty("fields_to_show")?e.fields_to_show:[];s([].concat(fe(a),fe(e.data.products)),i),l([].concat(fe(a),fe(e.data.products)),i),Object(x.isEmpty)(i)||o(i),f(!1)}else u({status:!0,error:e.msg||e.message})}))}catch(e){u({status:!0,error:e.message||e.msg})}}}};function ye(e){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){he(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function he(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ye(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ye(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ge(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var we=function(e){var t=e.productData,n=e.newProductValue,r=e.productKey,c=e.getDiscountPrice,u=_e(Object(a.useState)([]),2),s=u[0],f=u[1],b=_e(Object(a.useState)(!1),2),d=b[0],m=b[1];Object(a.useEffect)((function(){var e=(null==t?void 0:t.schemes.map((function(e){return t.checkVarient.includes(e.value)?je(je({},e),{},{isChecked:!0}):e}))).map((function(e){return t.radioVarient==e.value?je(je({},e),{},{isSelected:t.radioVarient}):e}));f(e)}),[t]),Object(a.useEffect)((function(){var e,t=s.filter((function(e){return e.isChecked})).map((function(e){return e.value})),a=null===(e=s.filter((function(e){return"string"==typeof e.isSelected}))[0])||void 0===e?void 0:e.value;null!=a&&null!=t&&n({checkedVariant:t,selectedVariantId:a,products:s,productKey:r})}),[s]);var p=function(e,t){var n=s.map((function(n){return"all"===e||n.value===e?je(je({},n),{},{isChecked:t}):n}));f(n)},y=function(e,t,n){var r,l=t.regular_price,i=t.sale_price,o=t.is_on_sale,u=t.shipping_cost_flat,s=void 0===u?0:u,f=t.discount_type,b=void 0===f?"":f,d=t.quantity,m=null!==(r=null==e?void 0:e.discount_amount)&&void 0!==r?r:0;return function(e,t,n,r,c){if("one_time"===e.value)return e.value;var l=Object(v.w)();if(["percentage_on_sale","fixed_on_sale"].includes(n))return Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},Object(a.createElement)("abbr",{className:Number(t)?"bwf-line-through":""},l.formatAmount(r)),Number(t)?Object(a.createElement)("abbr",{className:"bwf-underline"},l.formatAmount(t)):null,Object(a.createElement)("abbr",{dangerouslySetInnerHTML:{__html:e.description_text}}));if(["percentage_on_reg","fixed_on_reg"].includes(n)){var i=Number(t)>Number(c);return Object(a.createElement)("div",{className:"bwf-flex bwf--g4"},i&&Number(t)!==Number(c)?Object(a.createElement)("abbr",{className:"bwf-line-through"},l.formatAmount(t)):null,Object(a.createElement)("abbr",{className:"bwf-underline"},l.formatAmount(i?c:t)),Object(a.createElement)("abbr",{dangerouslySetInnerHTML:{__html:e.description_text}}))}}(e,c(l,i,o,b,m,s,d).offerPrice,b,l,i)};return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-toggle-variant ".concat(d?"bwf-hide-variant":""),onClick:function(){m(!d)}},Object(a.createElement)("div",{className:"bwf-have-variation"},"".concat(d?"Hide":"View"," All ").concat(Object(x.size)(null==t?void 0:t.schemes)," Schemes")),Object(a.createElement)("div",{className:"bwf-toggle-icon"},d?Object(a.createElement)(l.a,{icon:"angle-up",color:"#0073AA",size:14}):Object(a.createElement)(l.a,{icon:"angle-down",color:"#0073AA",size:14}))),d&&Object(a.createElement)("table",{className:"bwf-w-full"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,function(e,t){return[{content:Object(a.createElement)(H.a,{checked:!e.some((function(e){return!0!==(null==e?void 0:e.isChecked)})),onChange:function(e){return t("all",e)}})},{content:Object(i.__)("Default","funnel-builder")},{content:Object(i.__)("Attributes","funnel-builder")},{content:Object(i.__)("Price","funnel-builder")},{content:Object(i.__)("Discount","funnel-builder")}]}(s,p).map((function(e,t){return Object(a.createElement)("th",{key:t,className:"bwf-table-header"},e.content)})))),Object(a.createElement)("tbody",null,null==s?void 0:s.map((function(e,n){var r;return Object(a.createElement)("tr",{className:"product_variation_row",key:n},Object(a.createElement)("td",{className:"bwf-table-item bwf-checkbox-column"},Object(a.createElement)("div",{className:"form-check",key:n},Object(a.createElement)("span",{className:"components-checklist__input-container"},Object(a.createElement)(H.a,{checked:(null==e?void 0:e.isChecked)||!1,onChange:function(t){return p(e.value,t)}})))),Object(a.createElement)("td",{className:"bwf-table-item"},Object(a.createElement)(o.RadioControl,{selected:null==e?void 0:e.isSelected,options:[{label:"",value:e.value}],onChange:function(e){return function(e){var t=s.map((function(t){return t.value.toString()===e?je(je({},t),{},{isSelected:e}):je(je({},t),{},{isSelected:!1})}));f(t)}(e)}})),Object(a.createElement)("td",{className:"bwf-table-item"},null===(r=Object.keys(null==e?void 0:e.attributes))||void 0===r?void 0:r.map((function(t,n){return Object(a.createElement)("div",{key:n},"".concat(t,": ").concat(null==e?void 0:e.attributes[t]))}))),Object(a.createElement)("td",{className:"bwf-table-item"},y(e,t)),Object(a.createElement)("td",{className:"bwf-number-control"},function(e,t){return Object(a.createElement)("input",{type:"number",value:e.discount_amount,onChange:function(e){return X(e.target.value,t,s,f)},readOnly:Z(e),className:"discount_number bwf-product-number",max:"100",min:"0",step:"0.01"})}(e,n)))})))))};function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(){return(Se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}function Ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ee(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ee(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||Pe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pe(e,t){if(e){if("string"==typeof e)return Ce(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(e,t):void 0}}function Ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ae=function(e){var t=e.productData,n=e.type,r=e.onChange,c=e.stepId,u=e.offerId,s=e.onSorting,f=e.isDynamicShipping,m=void 0!==f&&f,p=e.saveChanges,y=e.setFieldsToShow,O=xe(Object(a.useState)({}),2),j=O[0],h=O[1],_=xe(Object(a.useState)([]),2),g=_[0],w=_[1],E=xe(Object(a.useState)(!1),2),S=E[0],k=E[1],P=xe(Object(a.useState)(!1),2),A=P[0],T=P[1],I=xe(Object(a.useState)(""),2),D=I[0],L=I[1],F=Object(v.w)(),q=ve({offerId:u,stepId:c,type:n,products:g,setProducts:w,onChange:r,setFieldsToShow:y,setModelData:h,saveChanges:p,setIsOpen:k}),U=q.deleteProduct,H=q.addProduct;Object(a.useEffect)((function(){w(t)}),[t]);var G=Object(a.useMemo)((function(){var e={};if(Array.isArray(g)){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Pe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){i=!0,c=e},f:function(){try{l||null==n.return||n.return()}finally{if(i)throw c}}}}(g);try{for(n.s();!(t=n.n()).done;){var r=t.value;e[r.id]=r}}catch(e){n.e(e)}finally{n.f()}}return e}),[g]),K=Object(R.b)(G),X=K.floatingBarProps,Z=K.resetSelection,ee=function(e,t){var a=JSON.parse(JSON.stringify(g));("percent_discount_sale"===a[t].discount_type||"percent_discount_reg"===a[t].discount_type)&&e>100?a[t].discount_amount=100:a[t].discount_amount=e,function(e,t,r,a){if("offer"===n&&!Object(x.isEmpty)(e[t][a])){var c=e[t][a].map((function(e){return e.discount_amount=r,e}));e[t][a]=c}}(a,t,e,"variable"===a[t].product_type?"variations":"schemes"),w(a),r(a)},te=function(e,t){("percent_discount_sale"===e||"percent_discount_reg"===e)&&g[t].discount_amount>100&&(g[t].discount_amount=100),g[t].discount_type=e;var n=JSON.parse(JSON.stringify(g));w(n),r(n)},ne=function(e,t){g[t].quantity=e;var n=JSON.parse(JSON.stringify(g));w(n),r(n)},re=function(e,t){g[t].shipping_cost_flat=e;var n=JSON.parse(JSON.stringify(g));w(n),r(n)},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6?arguments[6]:void 0,o=0,u=r?["percentage_on_reg","fixed_on_reg","percent_discount_reg","fixed_discount_reg"].includes(a)?e*i:t*i:e*i,s=Number(c),f=u;if(["fixed_discount_reg","fixed_on_reg","fixed_discount_sale","fixed_on_sale"].includes(a)?o=s*i:["percent_discount_sale","percentage_on_sale"].includes(a)?o=s/100*u:"percent_discount_reg"!==a&&"percentage_on_reg"!==a||(o=s/100*u),["fixed_discount_reg","fixed_on_reg","percent_discount_reg","percentage_on_reg"].includes(a)){var b="offer"===n?Number(u)+(m?0:Number(l)):u;f=Math.max(b-o,0)}else{var d="offer"===n?Number(u)+(m?0:Number(l)):u;f=Math.max(d-o,0)}return{offerPrice:Number(f).toFixed(2),discount:Number(o).toFixed(2),fixedDiscount:a.includes("fixed")}},ce=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(x.isObject)(e)?"".concat(F.formatAmount(e.min*t)," - ").concat(F.formatAmount(e.max*t)):F.formatAmount(e*t)},ue=function(e,t,r,c,o,u,s,f,b){return Object(a.createElement)("div",{className:"bwf-flatship-tooltip-wrap"},Object(a.createElement)(Q.a,{position:"bottom right",toolTipText:Object(a.createElement)("div",{className:"bwf-flatship-tooltip"},Object(a.createElement)("table",null,Object(a.createElement)("tbody",null,Object(a.createElement)("tr",null,Object(a.createElement)("td",null,s&&!["percentage_on_reg","fixed_on_reg","percent_discount_reg","fixed_discount_reg"].includes(b)?Object(i.__)("Sale Price x","funnel-builder"):Object(i.__)("Regular Price x ","funnel-builder")+f),Object(a.createElement)("td",{align:"right"},s?["percentage_on_reg","fixed_on_reg","percent_discount_reg","fixed_discount_reg"].includes(b)?ce(e,f):ce(t,f):ce(e,f))),"offer"===n&&Object(a.createElement)("tr",null,Object(a.createElement)("td",null,Object(i.__)("Flat Shipping","funnel-builder")),Object(a.createElement)("td",{align:"right"},"+",F.formatAmount(m?0:Number(c)))),Object(a.createElement)("tr",null,Object(a.createElement)("td",null,Object(i.__)("Discount","funnel-builder")),Object(a.createElement)("td",{align:"right"},"-",Object(x.isObject)(r)&&"(",ce(r),Object(x.isObject)(r)&&")")),Object(a.createElement)("tr",null,Object(a.createElement)("td",null,Object(i.__)("Total","funnel-builder")),Object(a.createElement)("td",{align:"right"},ce(o)))))),visible:!0,size:180},Object(a.createElement)(l.a,{icon:"help-circle",size:16})))},se=function(e){var t,r=e.discount_type,c=void 0===r?"":r,o=e.shipping_cost_flat,u=void 0===o?0:o,s=e.regular_price,f=e.sale_price,b=e.is_on_sale,d=e.product_type,m=e.price_range,p=e.quantity,y=(null!=e&&e.currency_symbol&&Object(M.decodeEntities)(null==e?void 0:e.currency_symbol),null!==(t=null==e?void 0:e.discount_amount)&&void 0!==t?t:0),O=ae(s,f,b,c,y,u,p),j=O.offerPrice,h=O.discount,_="variable"===d?ae(Object(x.isObject)(s)?s.min:s,Object(x.isObject)(f)?f.min:f,b,c,y,u,p):{},g="variable"===d?ae(Object(x.isObject)(s)?s.max:s,Object(x.isObject)(f)?f.max:f,b,c,y,u,p):{},w=ue(s,f,Object(x.isEmpty)(_)||Object(x.isEmpty)(g)?h:{min:_.discount,max:g.discount},u,Object(x.isEmpty)(_)||Object(x.isEmpty)(g)?j:{min:_.offerPrice,max:g.offerPrice},0,b,p,c);return Object(a.createElement)("div",{className:"bwf-product-info-container","data-product-id":null==e?void 0:e.key},Object(a.createElement)("div",null,function(e){return Object(a.createElement)("div",{className:"bwf-product-table-icon"},Object(a.createElement)(B.a,{menuPosition:"bottom right",renderContent:function(t){var n=t.onToggle;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)(z.a,{isClickable:!0,onInvoke:function(){n(),U(e.id)}},Object(i.__)("Delete","funnel-builder")))}}))}(e)),Object(a.createElement)("div",{className:"bwf-product-image bwf-mt-3"},Object(a.createElement)("img",{src:null==e?void 0:e.product_image,alt:""})),"offer"!==n||"variable"!==(null==e?void 0:e.product_type)?Object(a.createElement)("div",{className:"bwf-product-info bwf-mt-3","data-product-id":null==e?void 0:e.key},Object(a.createElement)("a",{href:Object(v.S)("variation"===(null==e?void 0:e.product_type)&&null!=e&&e.parent_product_id?e.parent_product_id:null==e?void 0:e.key),className:"bwf-product-name",target:"__blank"},Object(M.decodeEntities)(null==e?void 0:e.title),Object(a.createElement)(l.a,{icon:"external-link",size:"16"})),Object(a.createElement)("div",{className:"bwf-product-price-wrap"},("variable"===d&&Object(x.isEmpty)(m)||"variable"!==d)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-product-price"},Object(i.__)(" Regular Price: ","funnel-builder"),F.formatAmount(s),b&&",",""),b&&Object(a.createElement)("div",{className:"bwf-product-price"},Object(i.__)("Sale Price: ","funnel-builder"),F.formatAmount(f))),"variable"===d&&!Object(x.isEmpty)(m)&&Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-product-price"},Object(i.__)(" Regular Price: ","funnel-builder"),ce(s),b&&",",""),b&&Object(a.createElement)("div",{className:"bwf-product-price"},Object(i.__)(" Sale Price: ","funnel-builder"),ce(f)))),Object(a.createElement)("div",{className:"bwf-product-price"},Object(i.__)("Offer Price: ","funnel-builder"),"variable"===d?Object(a.createElement)(a.Fragment,null,ce(_.offerPrice===g.offerPrice?g.offerPrice:{min:_.offerPrice,max:g.offerPrice})):F.formatAmount(j),w)):Object(a.createElement)("div",{className:"bwf-pt-6"},Object(a.createElement)("a",{href:Object(v.S)(null==e?void 0:e.key),className:"bwf-product-name",target:"__blank"},Object(M.decodeEntities)(null==e?void 0:e.title),Object(a.createElement)(l.a,{icon:"external-link",size:"16"}))))},fe=function(e,t){"variant"===t&&(g[e.productKey].variations=e.products),"schemes"===t&&(g[e.productKey].schemes=e.products),g[e.productKey].checkVarient=e.checkedVariant,g[e.productKey].radioVarient=e.selectedVariantId,r(g)},be=function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ne(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({background:e?"#F9F9FF":"white",boxShadow:e?"0px 1px 12px #DEDFEA":"none"},t)},de=Object(x.size)(J(n).filter((function(e){return null!==e})));return Object(a.createElement)("div",{className:"bwf-product-table"},Object(a.createElement)(oe.a,{onDragEnd:function(e){var t=e.source,n=e.destination;if(L(""),e.destination){var r,a,c,l,i,o=(r=g,a=t.index,c=n.index,l=Array.from(r),i=xe(l.splice(a,1),1)[0],l.splice(c,0,i),l);parseInt(t.index)!==parseInt(n.index)&&(w(o),s(o))}},onDragStart:function(e){L(e.draggableId)}},Object(a.createElement)("table",{width:"100%"},Object(a.createElement)("thead",null,Object(a.createElement)("tr",null,J(n).map((function(e,t){return null!==e.label&&Object(a.createElement)("th",{key:t,className:C()("bwf-table-header",e.class),width:e.width},e.label)})))),Object(a.createElement)(oe.c,{droppableId:"droppable"},(function(e){return Object(a.createElement)("tbody",Se({},e.droppableProps,{ref:e.innerRef}),null==g?void 0:g.map((function(e,t){return Object(a.createElement)(oe.b,{key:e.id,draggableId:e.id||"product-".concat(t),index:t},(function(r,c){return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("tr",Se({ref:r.innerRef},r.draggableProps,r.dragHandleProps,{style:be(c.isDragging,r.draggableProps.style),className:0===Object(x.size)(e.variations)&&0===Object(x.size)(e.schemes)?"bwf-table-spacer":null}),Object(a.createElement)("td",Se({className:" bwf-product-action",width:"1%"},r.dragHandleProps),Object(a.createElement)("span",{className:"bwf-product-table-icon bwf-cursor-move",title:Object(i.__)("Click here and start drag and drop","funnel-builder")},Object(a.createElement)(l.a,{icon:"ul",size:"20"}))),Object(a.createElement)("td",{width:"25%"},se(e)),Object(a.createElement)("td",{width:"10%"},Object(a.createElement)("div",{className:"bwf-mt-6"},Object(x.capitalize)(null==e?void 0:e.product_type))),Object(a.createElement)("td",{width:"25%"},function(e,t){return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("input",{type:"number",className:"discount_number bwf-product-number",value:e.discount_amount,onChange:function(e){return ee(Math.abs(e.target.value),t)},step:"0.1",max:"percent_discount_sale"===e.discount_type||"percent_discount_reg"===e.discount_type?"100":"",min:"0"}),Object(a.createElement)(N.b,{options:"offer"===n?Y:$,selected:e.discount_type,onChange:function(e){te(e,t)}}))}(e,t)),"offer"===n&&Object(a.createElement)("td",{width:"10%"},function(e,t){var n;return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("div",{className:"bwf-flat-ship-inp-wrap"},Object(a.createElement)("input",{type:"number",className:"discount_number bwf-w-40 bwf-product-number ".concat(m?"bwf-disable-input":""),value:null!==(n=null==e?void 0:e.shipping_cost_flat)&&void 0!==n?n:0,onChange:function(e){return re(e.target.value,t)},disabled:m,step:"0.01",min:"0"})))}(e,t)),Object(a.createElement)("td",{width:"10%"},function(e,t){return Object(a.createElement)("div",{className:"bwf-number-control"},Object(a.createElement)("input",{type:"number",className:"discount_number bwf-product-number",value:e.quantity,onChange:function(e){return ne(Math.abs(e.target.value)>1?Math.abs(e.target.value):1,t)},min:"1"}))}(e,t)),Object(a.createElement)("td",{width:"offer"===n?"15%":"10%"},W(e))),Object(a.createElement)("tr",null,Object(x.size)(e.variations)>0&&!Object(x.size)(D)&&Object(a.createElement)("td",{colSpan:de},Object(a.createElement)(le,{productData:e,newProductValue:function(e){return fe(e,"variant")},productKey:t,getDiscountPrice:ae,getDiscountToolTip:ue}))),Object(a.createElement)("tr",null,Object(x.size)(e.schemes)>0&&!Object(x.size)(D)&&Object(a.createElement)("td",{colSpan:de},Object(a.createElement)(we,{productData:e,newProductValue:function(e){return fe(e,"schemes")},productKey:t,getDiscountPrice:ae,getDiscountToolTip:ue}))))}))})),e.placeholder)})))),Object(a.createElement)("div",{className:"bwf-mt-16 bwf-product-btn-container"},Object(a.createElement)(o.Button,{className:"bwf-product-btn bwf-no-ripple",isPrimary:!0,"btn-type":"add",onClick:function(){return k(!0)}},Object(i.__)("Add Product","funnel-builder")),Object(a.createElement)(o.Button,{className:"bwf-product-btn","btn-type":"create",onClick:function(){return T(!0)}},Object(i.__)("Create Product","funnel-builder"))),S&&Object(a.createElement)(d.a,{onCloseModal:function(){k(!1)},type:n,saveProduct:function(e){H(e)}}),A&&Object(a.createElement)(b,{source:wffn_contacts_data.wc_add_product_url,onCloseModal:function(){return T(!1)}}),Object(a.createElement)(ie.a,{className:"bwf-admin-modal-squeezy",isLoading:j.loading,successMessage:j.success,errorMessage:j.error,isOpen:j.status,autoHide:8e3,closeIcon:!0,content:j.content,confirmText:j.confirmText,confirmButtonText:j.confirmButtonText,confirmButtonClass:j.confirmButtonClass,cancelButtonText:j.cancelButtonText,onConfirm:j.onConfirm,onCancel:j.onCancel,modalTitle:j.modalTitle,disableConfirm:j.disableConfirm,onRequestClose:function(){return h({status:!1})}}),Object(a.createElement)(V,{floatingBarProps:X,resetSelection:Z,selectedProduct:function(e){return U(e)}}))},Te=r(336),Ie=r(22),De=r(59),Le=r(13),Fe=r(110),Me=r(314);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qe(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ue(e){return function(e){if(Array.isArray(e))return Ge(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||He(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ve(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||He(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function He(e,t){if(e){if("string"==typeof e)return Ge(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ge(e,t):void 0}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var Ke={radio:D,radios:D,"custom-select":L.a,select:N.b,checklist:F.a,"offer-select":N.b,input:o.TextControl,number:function(e){var t=e.value,n=e.onChange,r=e.placeholder,c=e.label,l=e.required;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("label",{id:l?"required":""},c),Object(a.createElement)("input",{type:"number",className:"bwf-h-36 bwf-number-container",value:t,onChange:function(e){return n(e.target.value)},placeholder:r}))},"custom-html":function(e){var t=e.label;return Object(a.createElement)(a.Fragment,null,Object(a.createElement)("div",{className:"bwf-custom-html",dangerouslySetInnerHTML:{__html:t}}))},"chosen-select":function(e){var t=e.apiEndPoint,n=e.options,r=e.onChange,c=e.value,l=Ve(Object(a.useState)([]),2),o=l[0],u=l[1],s=Ve(Object(a.useState)(n),2),f=s[0],b=s[1],d=Ve(Object(a.useState)(c),2),m=d[0],y=d[1],O=Ve(Object(a.useState)(!1),2),j=O[0],h=O[1];Object(a.useEffect)((function(){r(m)}),[m]);var _=function(e){Object(x.size)(e)?h(!0):h(!1);var n=t.includes("?")?"".concat(t,"&term=").concat(e):"".concat(t,"?term=").concat(e);p()({path:Object(v.u)(n)}).then((function(t){t&&Object(x.size)(e)&&Object(x.isArray)(t.data.products)&&!Object(x.isEmpty)(t.data.products)?(u(t.data.products),b(t.data.products)):u([{id:"no-result",name:'No result match "'.concat(e,'"')}]),h(!1)})).catch((function(e){h(!1),console.log(e)}))};Object(a.useEffect)((function(){_("")}),[]);var g=Object(x.isArray)(m)?m.map((function(e){return e.id.toString()})):[];return Object(a.createElement)(Te.a,{values:g,searchedValue:function(e){_(e)},selectedValue:m,onChangeValue:function(){},hasDefaultOption:f,onChangeData:function(e){var t=e.map((function(e){var t;return{id:null==e||null===(t=e.id)||void 0===t?void 0:t.toString(),label:e.label||e.name}}));y(Ue(t))},options:Ue(o.filter((function(e){return g.findIndex((function(t){return t.id===e.id}))<0}))),defaultOptions:f,isLoading:j,placeholder:Object(i.__)("Search","funnel-builder")})}},Je=function(t){var n=t.productData,r=t.stepId,c=t.setting,o=t.type,u=t.offerId,s=t.updateProduct,f=t.updateSettings,b=t.extraData,d=void 0===b?{}:b,m=t.funnelID,h=Object(ue.a)("checkout"===o?"ck":"f").isProFeatureLocked,_=Object(ue.b)().showSnackbar,g=Ve(Object(a.useState)([]),2),w=g[0],E=g[1],S=Ve(Object(a.useState)([]),2),N=S[0],P=S[1],A=Ve(Object(a.useState)({}),2),T=A[0],I=A[1],D=Ve(Object(a.useState)(""),2),L=D[0],F=D[1],M=Ve(Object(a.useState)(""),2),z=M[0],B=M[1],R=Ve(Object(a.useState)(!1),2),q=R[0],U=R[1],V=Ve(Object(a.useState)(!1),2),H=V[0],G=V[1],K=Ve(Object(a.useState)(""),2),J=K[0],$=K[1],Y=Ve(Object(a.useState)([]),2),Q=Y[0],W=Y[1],X=Ve(Object(a.useState)(!0),2),Z=X[0],ee=X[1],te=Ve(Object(a.useState)(!0),2),ne=te[0],re=te[1],ae=(0,Object(Fe.a)().getFormData)(o,r,"design",u),ce=Object(a.useRef)(new AbortController),le=Object(a.useRef)(!0),ie=Object(y.a)().setStepData,oe=Object(O.a)(),se=oe.setStepHeaderData,fe=oe.fetchStepFields,be=Object(j.a)().setSingleStepData;Object(a.useEffect)((function(){P(null==c?void 0:c.fields),I(null==c?void 0:c.values),F(null==c?void 0:c.settingName),W(null==c?void 0:c.fields_to_show)}),[c]),Object(a.useEffect)((function(){z&&(_(z),B(""))}),[z]),Object(a.useEffect)((function(){var e;re(null==ae||null===(e=ae.fields)||void 0===e?void 0:e.active_fields.includes("product_switching"))}),[ae]);var de=T;Object(a.useEffect)((function(){E(n)}),[n]);var me=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];l&&U(!0);try{var b={products:t||w,settings:T},d="/funnel-".concat(o,"/").concat("offer"===o?u:r,"/products/save-layout");p()({path:Object(v.u)(d),method:"POST",data:b}).then((function(e){if(e.success&&l){e.hasOwnProperty("step_data")&&(ie(e.step_data),se(o,r,u,e.step_data)),e.hasOwnProperty("step_list")&&be(e.step_list.id,e.step_list);var b=Object(x.cloneDeep)(c),d={products:t||w,settings:Re(Re({},b),{},{values:Re(Re({},b.values),T)})};Object(x.isEmpty)(n)||(d.settings.fields_to_show=n),f(d),a&&s(t||w),B(Object(i.__)("Changes Saved","funnel-builder")),U(!1)}else l&&(U(!1),B(e.msg))}))}catch(t){console.log(e),U(!1),B(e.message)}};Object(a.useEffect)((function(){Z&&ee(!1)}),[]),Object(a.useEffect)((function(){H?(me(!1,!1,!0),G(!1)):Z||me(!1,!1,!1,!1)}),[w]);var pe=function(e){var t=Object.assign({},e.props);return e.type.toLowerCase()in Ke||(t.type=e.type.toLowerCase()),t.placeholder=e.placeholder,t.selected=e.default,Array.isArray(e.values)&&e.values&&e.values.map((function(e){e.name&&(e.label=e.name,delete e.name),e.id&&(e.value=e.id)})),t.options=e.options||e.values,t.radio_alignment=e.radio_alignment,e.checkboxlabel&&(t.checkboxlabel=e.checkboxlabel),e.multiple&&(t.multiple=e.multiple),e.ajax_cb&&(t.ajax_cb=e.ajax_cb),"copier"!==e.type&&"custom-select"!==e.type||(t=e),"select"===e.type&&(t.excludeSelectedOptions=!1,t.options&&(t.options=t.options.map((function(e){return"object"!==ze(e.value)&&(e.key="object"!==ze(e.value)?e.value:e.key,e.value={id:e.value}),e}))),e.multiple&&(t.excludeSelectedOptions=!0,t.inlineTags=!0)),"richeditor"===e.type&&(t.id=e.id),"text"===e.type&&e.disabled&&(t.disabled=e.disabled),"chosen-select"===e.type&&(t.apiEndPoint=e.apiEndPoint,t.options=e.options),"radios"!==e.type&&"radio"!==e.type||(t.options=t.options.map((function(e){return Re(Re({},e),h&&e.is_pro&&{lockAction:function(){return $(e.label?e.label.split("(")[0]:"")},is_locked:!0})}))),t},ve=function(e,t){var n=!0;try{var r,a,c=!1;if(!e[t.key])return c;if(a=e[t.key],Array.isArray(t.value)&&Array.isArray(a)){for(var l=0;l<a.length;l++)if(t.value.indexOf(a[l])>-1){c=!0;break}}else Array.isArray(t.value)?t.value.includes(a)&&(c=!0):a==t.value&&(c=!0);var i=N&&(null===(r=N.find((function(e){return e.key===t.key})))||void 0===r?void 0:r.toggler);i&&(n=ve(e,i))}catch(e){console.log(e),c=!1}return c&&n};return Object(a.useEffect)((function(){return"checkout"===o&&Object(x.isEmpty)(ae)&&fe(o,r,"design",u,ce.current.signal),function(){le.current=!1,ce.current.abort()}}),[]),Object(a.createElement)("div",{className:"bwf-step-product"},Object(a.createElement)("div",{className:"bwf_products_container"},Object(a.createElement)("div",{className:"bwf-flex bwf--space-between bwf-step-sticky bwf-mb-12"},Object(a.createElement)("div",{className:"bwf-total-product"},Object(a.createElement)("span",{className:"bwf-mr-4"},Object(i.__)("All Products","funnel-builder")),"(",null==w?void 0:w.length,")"),Object(a.createElement)("div",null,Object(a.createElement)(Ie.a,{isPrimary:!0,isBusy:q,disabled:q,onClick:function(){return me()}},Object(i.__)("Save","funnel-builder")))),!(1===Object(x.size)(w)&&"variable"===w[0].type||Object(x.size)(w)>1)||ne||h||"checkout"!==o?null:Object(a.createElement)("div",{className:"bwf-publish-container"},Object(a.createElement)(l.a,{icon:"info"}),Object(a.createElement)("div",null,Object(a.createElement)("strong",null,Object(i.__)("Alert! ","funnel-builder")),Object(i.__)(" You have added multiple products on checkout. To show all products on your checkout page you have to add Product  in your form fields","funnel-builder")),Object(a.createElement)("a",{onClick:function(){return Object(Le.k)({},"/funnel-checkout/".concat(r,"/design&funnel_id=").concat(m),{})}},Object(i.__)("Go to Form Fields","funnel-builder"))),Object(a.createElement)("div",{className:"wfacp_product_list_wrap wfacp_bg_table bwf-product-table-container"},Object(a.createElement)(Ae,{productData:w,type:o,stepId:r,offerId:u,onChange:function(e,t){return s(e,t)},onSorting:function(e){E(e),G(!0)},isDynamicShipping:null==d?void 0:d.ship_dynamic,saveChanges:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object(x.cloneDeep)(c),r={products:e||w,settings:Re(Re({},n),{},{values:Re(Re({},n.values),T)})};Object(x.isEmpty)(t)||(r.settings.fields_to_show=t),f(r)},setFieldsToShow:function(e){W(e)}}),Object(a.createElement)("div",{className:"bwf_clear"})),Object(a.createElement)("div",{className:"product_settings_wrap"},Object(a.createElement)("div",{className:"product_settings_inner_container"},Object(a.createElement)("div",{className:"product_settings bwf-product-body"},Object(a.createElement)("div",{className:"product_settings_title bwf-product-setting"},L),Object(a.createElement)("div",null,Object(a.createElement)("div",{className:"bwf_product"},Object(a.createElement)(k.a,{validate:function(){return{}},initialValues:de,onChange:function(e,t,n){I(t)}},(function(e){var t=e.getInputProps,n=(e.onChange,e.values);return Object(a.createElement)(a.Fragment,null,null==N?void 0:N.map((function(e,r){return Object(a.createElement)(a.Fragment,{key:r},(!e.toggler||ve(n,e.toggler))&&("offer"!==o||(null==Q?void 0:Q.includes(e.key)))&&function(e,t){e.type=e.inputType?e.inputType:e.type;var n=e.type.toLowerCase()in Ke?Ke[e.type.toLowerCase()]:Ke.text;return Object(a.createElement)("div",{className:C()("form-group",{"bwf-product-label":e.label},{"bwf-product-no-label":!e.label},{"bwf-product-no-label":"custom-html"===e.type},{"bwf-radio-settings":"radios"==e.type||"radio"==e.type},{"bwf-offer-select":"offer-select"==e.type||"select"==e.type||"checklist"==e.type},{"bwf-custom-select":"custom-select"==e.type},{"bwf-offer-number":"number"==e.type},{"bwf-clear":"checkbox"==e.type})},e.label&&Object(a.createElement)(n,Re(Re({label:e.label},pe(e)),t)),!e.label&&Object(a.createElement)(n,Re(Re({},pe(e)),t)))}(e,t(e.key)))})))})),Object(a.createElement)("div",null))))))),!Object(x.isEmpty)(J)&&Object(a.createElement)(De.a,{isOpen:!Object(x.isEmpty)(J),onRequestClose:function(){$(!1)},modalContent:{feature:Object(i.__)("Product Selection","funnel-builder"),proLink:Object(v.P)(["Product","Switcher","Upgrade","Modal"])},module:"checkout"===o?"ck":"f"}),"offer"===o&&Object(a.createElement)(Me.a,null))},$e=r(121);r(722);function Ye(e){return function(e){if(Array.isArray(e))return Qe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Qe(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var We=function(){return Object(a.createElement)("div",null,Object(a.createElement)("div",{className:"bwf-flex bwf--space-between bwf-mb-12"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-100 bwf-h-18 "}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-36 "})),Object(a.createElement)("div",{className:"bwf-mb-24"},Object(a.createElement)("div",{className:"bwf-mb-24 bwf-overflow-hide"},Ye(Array(4)).map((function(e,t){return Object(a.createElement)("div",{className:"bwf-product-container",key:t},Object(a.createElement)("div",{className:"bwf-product-shimmer"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-25 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-120 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-16"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-60 bwf-h-16"})))}))),Object(a.createElement)("div",null,Object(a.createElement)("div",{className:"bwf-product-btn-container"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-36"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-110 bwf-h-36"})))),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-w-180 bwf-h-24 bwf-mb-8"}),Ye(Array(4)).map((function(e,t){return Object(a.createElement)("div",{key:t},Object(a.createElement)("div",{className:"bwf-mt-24 bwf-flex"},Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-110 bwf-mr-46"}),Object(a.createElement)("div",{className:"bwf-placeholder-temp bwf-h-20 bwf-w-500"})))})))},Xe=r(29);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var et=["products","settings","InitialValue"];function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){rt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=Ze(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ze(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,c,l,i=[],o=!0,u=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;o=!1}else for(;!(o=(r=c.call(n)).done)&&(i.push(r.value),i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{if(!o&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ct(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ct(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.a=function(e){var t=e.type,n=void 0===t?"":t,r=e.funnelID,c=void 0===r?"":r,l=Object($e.useParams)(),i=l.stepId,o=l.offerId,u=Object(ue.b)().showSnackbar,s=at(Object(a.useState)(""),2),f=s[0],b=s[1],d=Object(a.useRef)(new AbortController),m=Object(y.a)(),p=m.setStepFunnelData,v=m.setStepData,j=m.setStepsError,h=m.setLoading,_=Object(O.a)(),g=_.fetchStep,w=_.fetchStepFields,E=_.setFunnelId,N=_.setTabData,k=(_.unsetTabData,Object(Fe.a)()),P=k.getStep,C=k.getStepHeaderData,A=k.getFunnelData,T=C(n,i,"design",o),I=A(),D=Xe.a.getFunnelTitle();Object(a.useEffect)((function(){!Object(x.isEmpty)(I)&&Object(x.isEmpty)(D)&&p(I),Object(x.isEmpty)(T)||(v(T),h(!1))}),[T,I]);var L=P(n,i,"products",o),F=L.data,M=void 0===F?{}:F,z=L.loading,B=void 0===z||z,R=M.products,q=void 0===R?[]:R,U=M.settings,V=void 0===U?{}:U,H=M.InitialValue,G=void 0===H?{}:H,K=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(M,et);Object(a.useEffect)((function(){f&&(u(f),b(""))}),[f]);var J=function(){g(n,i,"products",o,d.current.signal)};Object(a.useEffect)((function(){return E(c),function(){d.current.abort()}}),[]),Object(a.useEffect)((function(){Object(x.isEmpty)(M)&&J()}),[]);var $=function(){"checkout"===n&&w(n,i,"design",o),"bump"!==n&&"offer"!==n||g(n,i,"design",o)},Y=Object(a.useRef)();return Object(a.createElement)(a.Fragment,null,B?Object(a.createElement)(We,null):Object(a.createElement)("div",{className:"wfacp_funnels",id:"wfacp_control","data-id":"144","data-template-set":"yes"},Object(a.createElement)("div",{className:"wfacp_inside"},Object(a.createElement)("div",{className:"wfacp_wrap wfacp_box_size product"},Object(a.createElement)("div",{className:"wfacp_loader bwf-hide"},Object(a.createElement)("span",{className:"spinner"})),null==q||0==q.length?Object(a.createElement)(S,{productAdded:function(){J(),$()},type:n,stepId:i,offerId:o,showError:function(e){j(e)}}):Object(a.createElement)(Je,{productData:q,stepId:i,setting:V,updateProduct:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=Object(x.cloneDeep)(M);r.products=e,Object(x.isEmpty)(t)||(r.settings.fields_to_show=t),N(n,i,"products",o,r);var a=e.map((function(e){return e.key}));Object(x.isEqual)(a,Y.current)||($(),Y.current=a)},InitialValue:G,type:n,offerId:o,showError:function(e){j(e)},updateSettings:function(e){var t=Object(x.cloneDeep)(M);t=nt(nt({},t),e),N(n,i,"products",o,t),$()},extraData:K,funnelID:c})))))}}}]);