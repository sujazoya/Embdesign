(window.webpackJsonp=window.webpackJsonp||[]).push([[12,23],{1113:function(e,t,n){},1114:function(e,t,n){},523:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(121),c=n(2),l=n(1),u=n(391),i=n(292),a=n(76),s=n(4),p=n(13),f=function(e){var t=Object(r.useRef)(!0),n=Object(i.a)(),o=n.getTemplates,l=n.getActiveBuilder,u=n.getActiveGroup,a=Object(c.isEmpty)(o()),s=u(),p=l();Object(r.useEffect)((function(){var n,r;t.current||!e.current||a||(r=null===(n=e.current)||void 0===n?void 0:n.getClientRects()[0].top)&&e.current&&r<252.86&&window.scrollTo(0,60)}),[a,s,p]),Object(r.useEffect)((function(){t.current&&!Object(c.isEmpty)(p)&&(window.scrollTo(0,0),t.current=!1)}),[p])},b=n(19),m=n(308);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=d(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=function(e){var t=Object(b.a)("ul").isProFeatureLocked,n=Object(i.a)(),d=n.getTemplates,v=n.getBuilders,g=(n.getFilters,n.getDefaultBuilder),y=n.templateLoading,j=n.getActiveBuilder,h=n.getActiveSubFilter,w=n.getActiveGroup,_=n.getCurrentTemplate,k=Object(a.a)().setActiveGroup,S=e.onImportComplete,E=e.isStoreCheckout,P=void 0!==E&&E,C=e.scratchConfirmModalData,T=e.storeCheckoutId,F=e.isStoreChekoutExists,N=void 0!==F&&F,A=e.templateListNotice,D=e.showImportNotice,I=e.urlDependency,B=void 0===I||I,x=e.showEditors,L=void 0===x||x,R=e.showTemplatesNav,G=void 0===R||R,z=e.showBuildFromScratch,J=void 0===z||z,M=e.showSelectedTemplates,U=void 0!==M&&M,q=e.previewCustomizeEnabled,W=void 0!==q&&q,K=e.hideTabs,Y=void 0===K?[]:K,$=Object(p.i)().importType,H=d(),Q=v(),V=JSON.parse(JSON.stringify(Q)),X=g(),Z=j(),ee=y(),te=h(),ne=_(),re=Object(o.useParams)(),oe=re.id,ce=void 0===oe?0:oe,le=re.filter,ue=void 0===le?"funnel":le,ie=re.builder,ae=re.templateId,se=re.step,pe=Object(r.useRef)();f(!Object(s.fb)()&&pe);var fe,be=B?ae:ne.id,me=B?se:ne.activeStep,de=P&&T?T:ce,ve=w(),Oe=de||P||!B?ve:ue,ge={funnel:Object(l.__)("All","funnel-builder"),wc_checkout:Object(l.__)("Checkout","funnel-builder"),landing:Object(l.__)("Sales Funnels","funnel-builder"),optin:Object(l.__)("Lead Funnels","funnel-builder")};((de||N||Y.includes("wc_checkout"))&&delete ge.wc_checkout,N&&(ge.upsell&&delete ge.upsell,de||(ge.wc_checkout=Object(l.__)("Checkout","funnel-builder"))),!t||de||Y.includes("upsell")||(ge.upsell=Object(l.__)("One Click Upsell","funnel-builder")),V&&V.wc_checkout&&V.wc_checkout.customizer&&delete V.wc_checkout.customizer,"funnel"===$)&&(null===(fe=V[Oe])||void 0===fe||delete fe.wp_editor);Object(r.useEffect)((function(){return function(){k("funnel")}}),[]);var ye=function(){var e=ie||X;return Object(c.isEmpty)(Z)||(e=Z),V&&V[Oe]&&!V[Oe][e]&&(e=V[Oe][X]?X:"elementor"),e},je=["1","2","3","inline","popup"],he=function(e,t){return("wc_checkout"===t||"optin"===t)&&te&&je.includes(te)?H[t][Z][e].group_type[te]:e},we={landing:"sp",optin:"op",optin_ty:"op-confirmed",wc_checkout:"checkouts",upsell:"offer",wc_thankyou:"order-confirmed"},_e=function(e,t,n){var r=we.hasOwnProperty(e)?we[e]:"";return"oxy"===n&&(n="oxygen"),("customizer"===n||"wc_checkout"===e&&"wp_editor"===n)&&(n="elementor"),"https://templates-".concat(n,".funnelswp.com/").concat(r,"/").concat(t.prevslug,"/")},ke=Object(s.fb)()?"/store-checkout":de?"/funnels/".concat(de):"/templates";return Object(r.createElement)(r.Fragment,null,Object(r.createElement)(u.a,{filters:m.e,templates:H,activeBuilder:ye(),templateCards:function(){if(Object(c.isEmpty)(H)||Object(c.isEmpty)([Oe]))return{};var e,t=ye(),n={};if("upsell"===Oe)n=null===(e=H[Oe])||void 0===e?void 0:e[t];else if("funnel"===Oe){var r=H[Oe][t];for(var o in r){var l,u=r[o];if(r[o].hasOwnProperty("group")||U&&!U.includes(u.name))if(!(u.group.includes("sales")||u.group.includes("optin")||null!==(l=r[o])&&void 0!==l&&l.build_from_scratch))continue;n[o]=r[o]}}else for(var i in H.funnel[t]){var a=H.funnel[t][i];(!U||U&&U.includes(a.name))&&("landing"===Oe&&a.group.includes("sales")||"optin"===Oe&&a.group.includes("optin")||"wc_checkout"===Oe&&a.group.includes("wc_checkout"))&&(n[i]=a)}return n}(),editors:V,defaultBuilder:X,isTemplateLoading:ee,activeTemplateGroup:Oe,templateGroup:ge,previewData:function(){if(Object(c.isEmpty)(H)||!be)return{};var e={success:!0},t=[],n=[];try{var r=ye();if("upsell"===Oe){t=[];var o=r;for(var u in"oxy"===o&&(o="oxygen"),"customizer"===o&&(o="elementor"),H[Oe][r]){var i=H[Oe][r][u];if(!i.build_from_scratch){var a={};a.id=u,a.funnel=u,a.slug=u,a.name=i.name,a.thumbnail=i.thumbnail,a.template=be,a.pro=i.pro,a.preview="https://templates-".concat(o,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/"),a.group_type={},a.type="upsell",t.push(a),n.push({id:u,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(null==i?void 0:i.prevslug,"/")})}}e.activeTemplate={id:be,thumbnail:be,preview:"https://templates-".concat(o,".funnelswp.com/offer/").concat(H[Oe][r][be].prevslug,"/"),slug:be,prevId:be,name:H[Oe][r][be].name,pro:H[Oe][r][be].pro,tempPro:H[Oe][r][be].pro,group:"upsell",type:"upsell"},e.thumbnails=t,e.previews=n}else{t=[];var s="funnel";switch(Oe){case"optin":s="optin";break;case"landing":s="sales";break;case"wc_checkout":s="checkout"}var p=H.funnel[r][be];t=p.steps?p.steps.map((function(e){var t=H[e.type][r][he(e.slug,e.type)];if(void 0===t)throw new Error("Step template not found with slug "+he(e.slug,e.type));var o="";switch(e.type){case"landing":o=Object(l.__)("Sales Page","funnel-builder");break;case"wc_checkout":o=Object(l.__)("Checkout Page","funnel-builder");break;case"upsell":o=Object(l.__)("One Click Upsell","funnel-builder");break;case"wc_thankyou":o=Object(l.__)("Thank You Page","funnel-builder");break;case"optin":o=Object(l.__)("Optin Page","funnel-builder");break;case"optin_ty":o=Object(l.__)("Optin Confirmation Page","funnel-builder")}t.group_type?Object.values(t.group_type).forEach((function(t){var o=H[e.type][r][t];n.push({id:"".concat(e.type,"-").concat(o.prevslug),preview:_e(e.type,o,r)})})):n.push({id:"".concat(e.type,"-").concat(t.prevslug),preview:_e(e.type,t,r)});return{id:"".concat(e.type,"-").concat(be),slug:he(e.slug,e.type),funnel:be,step:e.type,name:o,thumbnail:null==t?void 0:t.thumbnail,pro:null==t?void 0:t.pro,type:"funnel",group:s,group_type:t.group_type||{},preview:_e(e.type,t,r),filter:t.group?t.group[0]:""}})):[],e.thumbnails=t,e.previews=n;var f=p?p.steps.filter((function(e){return e.type===me})):[],b=H[f[0].type][r][he(f[0].slug,f[0].type)];e.activeTemplate={thumbnail:"".concat(me,"-").concat(be),prevId:"".concat(me,"-").concat(b.prevslug),preview:_e(f[0].type,b,r),slug:be,name:H.funnel[r][be].name,pro:H.funnel[r][be].pro,tempPro:H.funnel[r][be].pro,group:"funnel",filters:!!b.group_type&&Object.keys(b.group_type),type:me,funnelGroup:p.group,filter:"wc_checkout"===me?b.no_steps:b.group?b.group[0]:""}}}catch(t){console.log("Failed to prepare template preview data:",t),e.success=!0}return e},funnelId:de,onImportComplete:S,templateFilterCheck:function(e){return!de||"funnel"===$||!1===te||!1===te||!(!de||!e.group)&&(Array.isArray(e.group)?e.group.includes("inline"===te?"optin":te):te===e.group)},activeFilter:te,isStoreCheckout:P,parentRoute:ke,showTemplatesNav:G,showBuildFromScratch:!!J&&("funnel"!==$||P&&!de),funnelTitleModalData:O({},P&&{title:Object(l.__)("Store Checkout","funnel-builder")}),scratchConfirmModalData:C,importApiPrefix:P?"store-checkout":"funnels",templateListNotice:A,showImportNotice:D,urlDependency:B,showEditors:L,previewCustomizeEnabled:W,listRef:pe}))}},822:function(e,t,n){"use strict";var r=n(0),o=n(2),c=n(1),l=n(11),u=n.n(l),i=n(9),a=n(4),s=n(473),p=(n(1113),n(6)),f=(n(1114),n(5)),b=n.n(f),m=n(21),d=function(e){var t=e.value,n=void 0===t?0:t,o=e.content,c=void 0===o?"":o,l=e.isLoading,u=e.error;return Object(r.createElement)("div",{className:"bwf-circular-progress-bar"},Object(r.createElement)("div",{className:b()("bwf-circular-progress-bar__circle",{"is-loading":l,"is-complete":!l&&!u,"is-danger":u}),role:"progressbar","aria-valuenow":n,"aria-valuemin":"0","aria-valuemax":"100",style:{"--value":n,"--pg-bar-color":u?m.DANGER_COLOR:m.BLUE_BASE}}),Object(r.createElement)("div",{className:"bwf-circular-progress-bar__content"},u?Object(r.createElement)(p.a,{icon:"cross",size:"72",color:"#ffffff"}):l?c:Object(r.createElement)(p.a,{icon:"tick",size:"72",color:"#ffffff"})))},v=n(19),O=n(47),g=n(281),y=n(457),j=n(23),h=n(22);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=w(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==w(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,c,l,u=[],i=!0,a=!1;try{if(c=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=c.call(n)).done)&&(u.push(r.value),u.length!==t);i=!0);}catch(e){a=!0,o=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(a)throw o}}return u}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var C=Object(r.createElement)(r.Fragment,null,Object(c.__)("It seems there was an issue during the import. Please contact","funnel-builder"),Object(r.createElement)("a",{href:"https://funnelkit.com/support/?utm_source=WordPress&utm_medium=Funnel+Import+Failed&utm_campaign=fb+lite+plugin",target:"_blank",rel:"noopener noreferrer"},Object(c.__)(" support ","funnel-builder")),Object(c.__)("with JSON for a review.","funnle-builder"));t.a=function(e){e.isOpen;var t=e.onRequestClose,n=e.onSuccess,l=void 0===n?o.noop:n,f=e.modalTitle,b=e.apiPath,m=e.showSuccessState,w=void 0===m||m,_=e.extraParams,S=void 0===_?{}:_,P=e.enableClone,T=void 0!==P&&P,F=Object(v.a)().isBasicFeatureLocked,N=E(Object(r.useState)({status:!1,modalTitle:f||Object(c.__)("Import Funnel","funnel-builder")}),2),A=N[0],D=N[1],I=E(Object(r.useState)(null),2),B=I[0],x=I[1],L=E(Object(r.useState)("json"),2),R=L[0],G=L[1],z=E(Object(r.useState)(0),2),J=z[0],M=z[1],U=E(Object(r.useState)(!1),2),q=U[0],W=U[1],K=Object(v.b)().showSnackbar,Y=Object(O.a)().updateStatus,$=Object(j.a)().setGlobalCheckout,H=Object(r.useRef)(new AbortController),Q=function(e){if(l(e),e.setup&&Y(e.setup),Object(a.fb)()&&J&&$({funnel_id:e.funnel_id,funnel_name:"",funnel_status:!1}),"json"===R){if(!w)return void t(!0);D(k(k({},A),{},{status:!0,title:Object(c.__)("Sucessfully Imported","funnel-builder"),loading:!1,message:Object(c.__)("Successfully Imported and added in your FunnelKit.","funnel-builder")}))}else t(!0)},V=function(){D(k(k({},A),{},{status:!1,loading:!1,error:!0,title:Object(c.__)("Importing Failed","funnel-builder"),message:C})),x(null)};Object(r.useEffect)((function(){B&&function(){D(k(k({},A),{},{title:Object(c.__)("Please wait…","funnel-builder"),loading:!0,message:Object(r.createElement)(r.Fragment,null,Object(c.__)("Please wait! We are importing ")+(null==B?void 0:B.name)+Object(c.__)(" data."))}));try{var e=new FormData;if(e.append("files",B),!Object(o.isEmpty)(S))for(var t=0,n=Object.entries(S);t<n.length;t++){var l=E(n[t],2),i=l[0],s=l[1];e.append(i,s)}u()({method:"POST",body:e,path:Object(a.u)(b||"/funnels/import"),signal:H.current.signal}).then((function(e){1==e.status?Q(e):V()})).catch((function(){V()}))}catch(e){console.log(e),V()}}()}),[B]);var X=function(){var e;null===(e=H.current)||void 0===e||e.abort(),t(A.status)},Z=function(){switch(R){case"json":return!B;case"existing":return!J;default:return!1}};return Object(r.createElement)(i.Modal,{className:"bwf-admin-modal bwf-admin-modal-small bwf-import-funnel-modal",title:A.modalTitle,onRequestClose:X,shouldCloseOnClickOutside:!q},A.title&&Object(r.createElement)("div",{className:"bwf-import-modal-content"},Object(r.createElement)(d,{value:"100",content:Object(r.createElement)(p.a,{icon:"import-file",size:"56"}),isLoading:A.loading,error:A.error}),Object(r.createElement)("div",{className:"bwf-drop-import-content bwf-mt-10"},A.message),(!0===A.status||A.error)&&Object(r.createElement)(h.a,{isPrimary:!0,onClick:X,className:"bwf-import-modal-close-btn"},Object(c.__)("Close","funnel-builder"))),!A.title&&Object(r.createElement)(r.Fragment,null,T&&Object(r.createElement)(g.a,{options:[{value:"json",label:Object(c.__)("Upload JSON","funnel-builder")},{value:"existing",label:Object(c.__)("Clone Funnel","funnel-builder"),isPro:F}],selected:R,onChange:function(e){G(e)},className:""}),"json"===R?Object(r.createElement)(s.a,{onFileSelected:function(e){return x(e)},filetypeArray:["application/json"]}):Object(r.createElement)(r.Fragment,null,Object(r.createElement)(y.a,{activeGroup:Object(a.fb)()?"wc_checkout":"",onSelect:function(e){return M(e)}}),Object(r.createElement)("div",{className:"bwf-mt-24 bwf-form-buttons".concat(isRtl?" wf_funnel_left_align":" wf_funnel_right_align")},Object(r.createElement)(h.a,{onClick:t,className:"bwf-modal-cancel-btn"},Object(c.__)("Cancel","funnel-builder")),Object(r.createElement)(h.a,{isPrimary:!0,disabled:Z()||q,isBusy:q,onClick:function(){W(!0),u()({path:Object(a.u)("".concat(Object(a.fb)()?"/store-checkout":"/funnels","/duplicate/").concat(J)),method:Object(a.fb)()?"POST":"GET"}).then((function(e){e.status?Q(e):K(e.msg),W(!1)})).catch((function(e){K(e.msg),W(!1)}))},className:Z()?"bwf-no-ripple":"",name:"add-funnel"},Object(c.__)("Done","funnel-builder"))))))}}}]);